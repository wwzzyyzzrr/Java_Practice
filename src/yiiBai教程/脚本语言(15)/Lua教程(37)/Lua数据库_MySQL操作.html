<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Lua数据库/MySQL操作</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 对于简单的数据操作，我们可以使用文件，但是，有时候这些文件操作效率不高，可扩展性和强大不好。所以我们可能会经常切换到使用数据库。 LuaSQL是从Lua一些数据库管理系统的一个简单的接口。 LuaSQL它提供了对不同类型的SQL支持库。这包括：</p> 
 <ul> 
  <li> <p> SQLite</p> </li> 
  <li> <p> Mysql</p> </li> 
  <li> <p> ODBC</p> </li> 
 </ul> 
 <p> 在本教程中，将涵盖Lua中的SQLite和MySQL数据库处理。使用这个通用接口为应尽可能实施于其它类型的数据库。首先，让我们看看如何在MySQL中执行操作。</p> 
 <h2> MySQL数据库的设置</h2> 
 <p> 以使用下面的示例以预期方式工作，我们所需要的初始数据库设置。假设如下面列出：</p> 
 <ul> 
  <li> <p> 已经安装并设置MySQL的默认用户以root，密码为“123456”。</p> </li> 
  <li> <p> 您已经创建了一个数据库test。</p> </li> 
  <li> <p> 您通过<a target="_blank" href="http://www.yiibai.com/mysql/">MySQL教程</a>去了解MySQL基础知识。</p> </li> 
 </ul> 
 <h2> 导入MySQL</h2> 
 <p> 我们可以用一个简单语句导入SQLite库，假设Lua中正确实现并已完成。在安装过程中，文件夹libsql包含数据库相关的文件。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;"> mysql </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.mysql"</span></pre> 
 <p> 可变的MySQL将提供通过参照主MySQL表访问该功能。</p> 
 <h2> 建立连接</h2> 
 <p> 我们可以设立一个启动MySQL的环境，然后创建环境的连接。如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'test'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'root'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'123456'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 上面的连接将连接到现有的MySQL文件并建立与新创建的文件的连接。</p> 
 <h2> 执行函数</h2> 
 <p> 这将有助于我们做的创建，插入，删除，更新等，所有的数据库操作执行简单的功能。语法如下所示</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'MySQLSTATEMENT'</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span></pre> 
 <p> 在上面的语法，我们需要确保conn是开放的和现有的MySQL连接并替换“MySQLSTATEMENT”使用正确的语句。</p> 
 <h2> 创建表的例子</h2> 
 <p> 一个简单的创建表的示例如下所示。它创建类型为int和varchar类型，两个参数ID和name的表。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">mysql </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.mysql"</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'test'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'root'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'123456'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">CREATE TABLE sample2 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">id INTEGER</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> name TEXT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">);]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 当运行上面的程序，表名为sample将有两列分别是id和name会被创建。</p> 
 <pre class="result" style=" font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
MySQL environment (004BB178)	MySQL connection (004BE3C8)
0	nil</pre> 
 <p> 如果有错误，会返回nil的错误语句。下面一个简单的错误语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">LuaSQL</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Error</span><span class="pln" style="margin: 0px; padding: 0px;"> executing query</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">MySQL</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">You</span><span class="pln" style="margin: 0px; padding: 0px;"> have an error </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">in</span><span class="pln" style="margin: 0px; padding: 0px;"> your SQL syntax</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;"> check the manual that corresponds to your </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">MySQL</span><span class="pln" style="margin: 0px; padding: 0px;"> server version </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">for</span><span class="pln" style="margin: 0px; padding: 0px;"> the right syntax to </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">use</span><span class="pln" style="margin: 0px; padding: 0px;"> near </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'"id INTEGER, name TEXT)'</span><span class="pln" style="margin: 0px; padding: 0px;"> at line </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">1</span></pre> 
 <h2> Insert语句的例子</h2> 
 <p> MySQL的INSERT语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">INSERT INTO sample values</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'11'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'Raj'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span></pre> 
 <h2> Update语句的例子</h2> 
 <p> 对于MySQL UPDATE语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">UPDATE sample3 SET name</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'John'</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">where</span><span class="pln" style="margin: 0px; padding: 0px;"> id </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'12'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span></pre> 
 <h2> 删除Delete 语句的例子</h2> 
 <p> DELETE语句-MySQL如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">DELETE </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">from</span><span class="pln" style="margin: 0px; padding: 0px;"> sample3 </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">where</span><span class="pln" style="margin: 0px; padding: 0px;"> id </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'12'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span></pre> 
 <h2> Select语句的例子</h2> 
 <p> 就select语句而言，我们需要遍历每一行，并提取所需的数据。下面简单的SELECT语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">select</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">*</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">from</span><span class="pln" style="margin: 0px; padding: 0px;"> sample</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span><span class="pln" style="margin: 0px; padding: 0px;">
row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">({},</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">while</span><span class="pln" style="margin: 0px; padding: 0px;"> row </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">do</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">string</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">format</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Id: %s, Name: %s"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">id</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">name</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">))</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">--</span><span class="pln" style="margin: 0px; padding: 0px;"> reusing the table of results
  row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">end</span></pre> 
 <p> 在上面的代码中，conn 是一个开放的MySQL连接。由执行语句返回游标，可以通过表的反应返回获取所需的选择数据。</p> 
 <h2> 一个完整的例子</h2> 
 <p> 所有上述声明一个完整的例子给出下面的参考。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">mysql </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.mysql"</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'test'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'root'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'123456'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">CREATE TABLE sample3 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">id INTEGER</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> name TEXT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">INSERT INTO sample3 values</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'12'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'Raj'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">select</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">*</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">from</span><span class="pln" style="margin: 0px; padding: 0px;"> sample3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">({},</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">while</span><span class="pln" style="margin: 0px; padding: 0px;"> row </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">do</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">string</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">format</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Id: %s, Name: %s"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">id</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">name</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">))</span><span class="pln" style="margin: 0px; padding: 0px;">
  row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">end</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">--</span><span class="pln" style="margin: 0px; padding: 0px;"> close everything
cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span></pre> 
 <p> 当运行上面的程序，会得到如下的输出。</p> 
 <pre class="result" style=" font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
MySQL environment (0037B178)	MySQL connection (0037EBA8)
0	nil
1	nil
MySQL cursor (003778A8)	nil
Id: 12, Name: Raj</pre> 
 <h2> 执行事务：</h2> 
 <p> 事务是确保数据一致性的机制。事务应该具有以下四个特性：</p> 
 <ul> 
  <li> <p> 原子性：事务要么都完成或都没有任何变化发生。</p> </li> 
  <li> <p> 一致性：事务必须启动一个一致的状态，让系统处于一致的状态。</p> </li> 
  <li> <p> 隔离：一个事务的中间结果是不是当前事务外可见。</p> </li> 
  <li> <p> 持久性：当一个事务被提交，这个效果是持久的，即使在系统出现故障。</p> </li> 
 </ul> 
 <p> 事务开始START TRANSACTION;和commit或rollback语句结束。</p> 
 <h2> 开始事务</h2> 
 <p> 为了启动一个事务，我们需要执行在Lua下面执行语句，假设conn是一个开放的MySQL连接。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">START TRANSACTION</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;]])</span></pre> 
 <h2> 回滚事务</h2> 
 <p> 我们需要做执行下面的语句来回滚执行开始事务后所做的更改。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">ROLLBACK</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;]])</span></pre> 
 <h2> 提交事务</h2> 
 <p> 我们需要做执行以下语句提交执行开始事务后所做的更改。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">COMMIT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;]])</span></pre> 
 <p> 我们已经在上面知道关于MySQL和下节介绍基本的SQL操作。请记住事务，但sqlite3不会再解释了，但相同的语句在sqlite3也能正常工作。</p> 
 <h2> SQLite导入</h2> 
 <p> 我们可以用一个简单语句导入SQLite库，假设Lua中正确实现并已完成。在安装过程中，文件夹libsql包含数据库相关的文件。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;"> sqlite3 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.sqlite3"</span></pre> 
 <p> 变量sqlite3将提供通过参照主sqlite3表访问该功能。</p> 
 <h2> 建立连接</h2> 
 <p> 我们成立了发起sqlite环境，然后创建环境的连接。它如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'mydb.sqlite'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 上述连接将连接到现有的SQLite文件或创建一个新的源码文件，并建立与新创建的文件的连接。</p> 
 <h2> 执行函数</h2> 
 <p> 有可用的，这将有助于我们执行创建，插入，删除，更新等，所有的数据库操作基于连接执行简单的功能。语法如下所示</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'SQLite3STATEMENT'</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span></pre> 
 <p> 在上面的语法，我们需要确保conn是开放的及现有的sqlite3连接，代替“SQLite3STATEMENT”使用正确的语句。</p> 
 <h2> 创建表的例子</h2> 
 <p> 一个简单的创建表的示例如下所示。它创建类型为int和varchar类型，两个参数ID和name的表。</p>   
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">sqlite3 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.sqlite3"</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'mydb.sqlite'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">CREATE TABLE sample </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'id'</span><span class="pln" style="margin: 0px; padding: 0px;"> INTEGER</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'name'</span><span class="pln" style="margin: 0px; padding: 0px;"> TEXT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 当运行上面的程序，表名为sample将有两列分别是id和name会被创建。</p> 
 <pre class="result" style=" font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
SQLite3 environment (003EC918)	SQLite3 connection (00421F08)
0	nil</pre> 
 <p> 如果有错误，会返回nil的错误语句。下面一个简单的错误语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">LuaSQL</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> unrecognized token</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">""'id'</span><span class="pln" style="margin: 0px; padding: 0px;"> INTEGER</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'name'</span><span class="pln" style="margin: 0px; padding: 0px;"> TEXT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"</span></pre> 
 <h2> Insert语句的例子</h2> 
 <p> SQLite的一个INSERT语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">INSERT INTO sample values</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'11'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'Raj'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span></pre> 
 <h2> Select语句的例子</h2> 
 <p> 就select语句而言，我们需要遍历每一行，并提取所需的数据。下面简单的SELECT语句如下所示。</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">select</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">*</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">from</span><span class="pln" style="margin: 0px; padding: 0px;"> sample</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span><span class="pln" style="margin: 0px; padding: 0px;">
row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">({},</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">while</span><span class="pln" style="margin: 0px; padding: 0px;"> row </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">do</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">string</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">format</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Id: %s, Name: %s"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">id</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">name</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">))</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">--</span><span class="pln" style="margin: 0px; padding: 0px;"> reusing the table of results
  row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">end</span></pre> 
 <p> 在上面的代码中，conn 是一个开放的sqlite3连接。在执行语句返回游标的帮助下，可以通过表的反应返回获取所需的选择数据。</p> 
 <h2> 一个完整的例子</h2> 
 <p> 所有上述声明一个完整的例子给出下面参考。</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <pre class="prettyprint prettyprinted" style="font-size: 12px; border-radius: 0px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">sqlite3 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"luasql.sqlite3"</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> env  </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sqlite3</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">local</span><span class="pln" style="margin: 0px; padding: 0px;"> conn </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">connect</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'mydb.sqlite'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">CREATE TABLE sample </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'id'</span><span class="pln" style="margin: 0px; padding: 0px;"> INTEGER</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'name'</span><span class="pln" style="margin: 0px; padding: 0px;"> TEXT</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="pln" style="margin: 0px; padding: 0px;">INSERT INTO sample values</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'1'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'Raj'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">status</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">execute</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">([[</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">select</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">*</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">from</span><span class="pln" style="margin: 0px; padding: 0px;"> sample</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]])</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;">errorString</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">({},</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">while</span><span class="pln" style="margin: 0px; padding: 0px;"> row </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">do</span><span class="pln" style="margin: 0px; padding: 0px;">
  </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">string</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">format</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Id: %s, Name: %s"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">id</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">name</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">))</span><span class="pln" style="margin: 0px; padding: 0px;">
  row </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">fetch </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">row</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"a"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">end</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">--</span><span class="pln" style="margin: 0px; padding: 0px;"> close everything
cursor</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
conn</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;">
env</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;">close</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span></pre> 
 <p> 当运行上面的程序，会得到如下的输出。</p> 
 <pre class="result" style="font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
SQLite3 environment (005EC918)	SQLite3 connection (005E77B0)
0	nil
1	nil
SQLite3 cursor (005E9200)	nil
Id: 1, Name: Raj</pre> 
 <p> 我们可以用这个libsql库完成所有可用的查询。所以可以试验MySQL，SQLite3和其它Lua支持DB提供各种查询语句。</p> 
 <div>
   &nbsp;
 </div> 
 <br>      
</div></body></html>