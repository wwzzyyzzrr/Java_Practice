<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Lua基本语法</h1><div style="width:100%;float:left;" class="article-content">   
 <p> Lua是相当简单易学，让我们开始创建第一个Lua程序！</p> 
 <h2> 第一个Lua程序</h2> 
 <h3> 交互模式编程：</h3> 
 <p> Lua中提供了一个名为交互模式模式。在这种模式下，你可以键入一个接一个的指令，并得到立竿见影的效果。此所用的shell使用的是lua-i或只是lua的命令被调用。一旦在这种模式下，按Enter键和互动模式将被启动，如下图所示。</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
$ lua -i 
$ Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
quit to end; cd, dir and edit also available</pre> 
 <p> 可以使用下面的语句打印你想要的东西</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
&gt; print("test")</pre> 
 <p> 按回车，会得到如下的输出。</p> 
 <pre class="result" style="margin-bottom: 0px; font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
'test'</pre> 
 <h3> 默认模式编程：</h3> 
 <p> 调用解释器使用lua文件名参数开始执行的文件，并一直持续到脚本完成。当脚本完成时，解释器不再是活动的。</p> 
 <p> 让我们写一个简单Lua程序。所有Lua文件将具有扩展.lua。因此把下面的代码在一个test.lua文件中。</p> 
 <pre class="prettyprint tryit" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto; background-image: url(http://www.yiibai.com/images/link.png) !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: 100% 0%; background-repeat: no-repeat !important;">
print("test")</pre> 
 <p> 假设，LUA环境设置正确，让我们运行程序，使用以下命令：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
$ lua test.lua</pre> 
 <p> 我们将得到下面的输出。</p> 
 <pre class="result" style="margin-bottom: 0px; font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
test</pre> 
 <p> 让我们尝试另一种方式来执行Lua程序。下面是修改后的test.lua文件：</p> 
 <pre class="prettyprint tryit" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto; background-image: url(http://www.yiibai.com/images/link.png) !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: 100% 0%; background-repeat: no-repeat !important;">
#!/usr/local/bin/lua

print("test")</pre> 
 <p> 在这里，假设已安装有Lua解释器在/usr/local/bin目录中。第一行是由解释器，如果用＃号开始忽略。现在，尝试如下运行这个程序：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
$ chmod a+rx test.lua
$./test.lua</pre> 
 <p> 将得到下面的输出。</p> 
 <pre class="result" style="margin-bottom: 0px; font-size: 12px; overflow: auto; background-color: rgb(241, 241, 241);">
test</pre> 
 <p> 现在让我们来看看Lua程序中的基本结构，因此，这能容易理解Lua编程语言的基本构建块。</p> 
 <h2> Lua令牌</h2> 
 <p> 一个Lua程序由不同的令牌组成，令牌可以是一个关键字，标识符，常量，字符串文字或符号。例如，下面Lua语句包含三个令牌：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
io.write("Hello world, from ",_VERSION,"!
")</pre> 
 <p> 各个令牌是：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
io.write
(
"Hello world, from ",_VERSION,"!
"
)</pre> 
 <h2> 注释</h2> 
 <p> 注释就像在Lua程序中帮助文本，它们被解释忽略。他们开始与- [[终止及字符- ]，如下图所示：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
--[[ my first program in Lua --]]</pre> 
 <h2> 标识符</h2> 
 <p> 一个Lua标识符是用来标识变量，函数，或任何其它用户定义的项目名称。一个标识符开始以字母A到Z或a到z或下划线_后跟零个或多个字母，下划线和数字（0〜9）。</p> 
 <p> Lua中不允许标识符中的标点字符，如@，$，和％。 Lua是区分大小写的编程语言。因此，Manpower 和manpower 在Lua中为两个不同的标识符。这里是可接受的标识符的一些例子：</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
mohd       zara    abc   move_name  a_123
myname50   _temp   j     a23b9      retVal</pre> 
 <h2> 关键词</h2> 
 <p> 下面列出了一些在Lua中的保留字。这些保留的字不可以被用作常量或变量，或任何其它标识符。</p> nil, not, or, repeat, return, then, true, until, 和 while. 
 <table class="src" style="margin: 8px 0px; padding: 0px;  border-color: rgb(214, 214, 214); width: 560px; border-collapse: collapse; vertical-align: top; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif; background-color: rgb(247, 247, 247);"> 
  <tbody style="margin: 0px; padding: 0px;"> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); width: 129px;"> and</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); width: 129px;"> break</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); width: 129px;"> do</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); width: 129px;"> else</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> elseif</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> end</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> false</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> for</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> function</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> if</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> in</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> local</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> nil</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> not</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> or</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> repeat</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> return</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> then</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> true</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> until</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> while</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2> Lua中的空白符</h2> 
 <p> 仅包含空格，可能带有注释行，被称为一个空行，和Lua解释完全忽略它。</p> 
 <p> 空白是Lua中用来描述空格，制表符，换行符和注释的术语。空格分开的另一个语句的一部分，使解释来确定，其中在一份声明中的一个元素，如int，结束和下一个元素开始。因此，在下面的语句：</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>  
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
local age</pre> 
 <p> 必须有至少一个空白字符（通常是一个空格）local和age之间的解释器，以便能够区分它们。另一方面，在下面的语句</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
fruit = apples + oranges   --get the total fruit</pre> 
 <p> 空格字符是必要的，如：fruit 和=之间，或=和apples，虽然是自由的，如果想提高可读性的目的，那么要加入一些空格。</p> 
 <br>      
</div></body></html>