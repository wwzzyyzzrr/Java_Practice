<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Ruby日期时间</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Ruby文档中主要有三个与日期和时间相关的类，它们分别如下所示 - </p> 
 <ul> 
  <li>Date</li>
  <li>DateTime</li>
  <li>Time</li>
 </ul> 
 <h2 id="h2--date-"><a name="日期(Date)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>日期(Date)</h2>
 <p>Ruby日期处理主要提供了两个类：<code>Date</code>和<code>DateTime</code>。要了解日期的概念，首先我们需要了解下面一些术语。</p> 
 <p><strong>日历日期</strong>：日历日期是一年内的一个日历月内的特定日期。<br><strong>有序日期</strong>：序数日期是由其序号确定的日历年的特定日期。<br><strong>周日期</strong>：周日期是按日历周和日数确定的日期。一年的第一个日历周是包括那一年的第一个星期四。<br><strong>儒略日数</strong>：儒略日数是从中午经过公元前4713 1月1日的天数。<br><strong>修改后的朱莲日数</strong>：修改后的朱利安日数是自1858年11月17日午夜过后的一天。</p> 
 <p>Date对象使用<code>::new</code>, <code>::parse</code>, <code>::today</code>, <code>::jd</code> 和 <code>::strptime</code>等创建。所有日期对象都是不可变的，因此它们不能自己修改。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : datetime-example.rb
require 'date'   

puts Date.new(2017,9,3)            
puts Date.jd(2451877)               
puts Date.ordinal(2017,9)         
puts Date.commercial(2017,5,6)     
puts Date.parse('2017-08-03')    
puts Date.strptime('03-02-2017', '%d-%m-%Y')                           
puts Time.new(2017,11,8).to_date
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby datetime-example.rb
2017-09-03
2000-11-28
2017-01-09
2017-02-04
2017-08-03
2017-02-03
2017-11-08

F:\worksp\ruby&gt;
</code></pre> 
 <p><code>Date</code>类对象具有以下示例所示的各种方法。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : datetime-method.rb
require 'date'   

d = Date.parse('4th Mar 2019')   

puts d.year                        
puts d.mon                         
puts d.mday                        
puts  d.wday                        
puts d += 1                        
puts d.strftime('%a %d %b %Y')
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby datetime-method.rb
2019
3
4
1
2019-03-05
Tue 05 Mar 2019

F:\worksp\ruby&gt;
</code></pre> 
 <h2 id="h2--datetime-"><a name="日期时间(DateTime)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>日期时间(DateTime)</h2>
 <p>Ruby <code>DateTime</code>是<code>Date</code>的子类。 它可以轻松处理日期，时间，分钟，秒和偏移量。</p> 
 <p><code>DateTime</code>对象使用<code>DateTime.new</code>，<code>DateTime.ordinal</code>，<code>DateTime.parse</code>，<code>DateTime.jd</code>，<code>DateTime.commercial</code>，<code>DateTime.now</code>等来创建。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : datetime-new.rb
require 'date'   

puts DateTime.new(2019,3,4,5,6,7)
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby datetime-new.rb
2019-03-04T05:06:07+00:00

F:\worksp\ruby&gt;
</code></pre> 
 <p>日，分，秒或小时的最后一个元素可以是小数。<code>DateTime</code>对象具有多种方法，如下例所示。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : datetime-allmethod.rb

require 'date'   

d = DateTime.parse('4th Mar 2019 02:37:05+05:40')   

puts d.hour                 
puts d.min                 
puts d.sec                  
puts d.offset               
puts d.zone                 
puts d += Rational('1.0')   

puts d = d.new_offset('+05:00')   

puts d.strftime('%I:%M:%S %p')   

puts d &gt; DateTime.new(2000)
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby datetime-allmethod.rb
2
37
5
17/72
+05:40
2019-03-05T02:37:05+05:40
2019-03-05T01:57:05+05:00
01:57:05 AM
true

F:\worksp\ruby&gt;
</code></pre> 
 <h2 id="h2--time-"><a name="时间(Time)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>时间(Time)</h2>
 <p>Time类是日期和时间的抽象。 它内部存储为自大纪元时间以来的秒数。Time类对待格林尼治标准时间(格林尼治标准时间)和UTC(协调世界时))等效。<br>时间可能看起来相等，但是比较起来可能会有所不同，因为所有的时间都可能有分数。<br>时间实现使用带符号的<code>63</code>位整数<code>Bignum</code>或<code>Rational</code>。使用整数时，时间处理较慢。</p> 
 <h3 id="h3-u521Bu5EFAu65B0u7684u65F6u95F4u5B9Eu4F8B"><a name="创建新的时间实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建新的时间实例</h3>
 <p>可以使用<code>::new</code>创建新的<code>Time</code>实例。这可使用获取当前系统的时间。 部分时间，如年，月，日，小时，分钟等也可以通过这种方法获得。</p> 
 <p>创建新的时间实例时，您需要指定传递至少年份。 如果只有通过了指定年份，那么时间将默认为当前系统时区的那个年份的1月1日 <code>00:00:00</code>开始。</p> 
 <p><strong>示例：</strong></p>   
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : datetime-allmethod.rb

require 'date'   
puts Time.new          
puts Time.new(2018, 3)       
puts Time.new(2018, 3, 4)   
puts Time.new(2019, 3, 4, 6, 5, 5, "+05:00")
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby date-example.rb
2017-05-08 23:31:03 +0800
2018-03-01 00:00:00 +0800
2018-03-04 00:00:00 +0800
2019-03-04 06:05:05 +0500

F:\worksp\ruby&gt;
</code></pre> 
 <h3 id="h3-time-gm-utc-local-"><a name="Time对象和 gm, utc 以及 local 方法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Time对象和 gm, utc 以及 local 方法</h3>
 <p>如果不使用当前的系统设置，也可以使用<code>gm</code>, <code>utc</code> 以及 <code>local</code> 这些方法。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">puts Time.local(2018, 2, 5)    

puts Time.local(2019, 2, 5, 4, 30)     

puts Time.utc(2018, 2, 5, 4, 30)    

puts Time.gm(2018, 2, 5, 4, 30, 36)
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby time-methods.rb
2018-02-05 00:00:00 +0800
2019-02-05 04:30:00 +0800
2018-02-05 04:30:00 UTC
2018-02-05 04:30:36 UTC

F:\worksp\ruby&gt;
</code></pre> 
 <h3 id="h3-u4F7Fu7528u65F6u95F4u7684u5B9Eu4F8B"><a name="使用时间的实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用时间的实例</h3>
 <p>创建时间实例后，我们可以按照以下方式工作。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : time-instance.rb

t = Time.new(1991, 07, 5, 9, 15, 33, "+09:00")   
puts t.friday? #=&gt; false   
puts t.year #=&gt; 1993   
puts t.dst? #=&gt; false   
puts t + (60*60*24*365) #=&gt; 1994-02-24 12:00:00 +0900   
puts t.to_i #=&gt; 730522800   

t1 = Time.new(2019)   
t2 = Time.new(2017)   

puts t1 == t2 #=&gt; false   
puts t1 == t1 #=&gt; true   
puts t1 &lt;  t2 #=&gt; true   
puts t1 &gt;  t2 #=&gt; false   

puts Time.new(2010,10,31).between?(t1, t2) #=&gt; true
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby time-instance.rb
true
1991
false
1992-07-04 09:15:33 +0900
678672933
false
true
false
true
false

F:\worksp\ruby&gt;
</code></pre> 
 <h3 id="h3-u65F6u533Au548Cu590Fu4EE4u65F6u95F4"><a name="时区和夏令时间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>时区和夏令时间</h3>
 <p><code>Time</code>对象可用于获取与时区相关的所有信息。将显示系统的当前时间的所有信息。</p> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-ruby">#!/usr/bin/ruby 
# file : time-instance.rb

time = Time.new   

puts time.zone         
puts time.utc_offset   
puts time.zone        
puts time.isdst       
puts time.utc?      
puts time.localtime    
puts time.gmtime      
puts time.getlocal    
puts time.getutc
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">F:\worksp\ruby&gt;ruby timezones-daylight.rb
中国标准时间
28800
中国标准时间
false
false
2018-05-08 23:43:42 +0800
2018-05-08 15:43:42 UTC
2018-05-08 23:43:42 +0800
2018-05-08 15:43:42 UTC

F:\worksp\ruby&gt;
</code></pre>
 <br>      
</div></body></html>