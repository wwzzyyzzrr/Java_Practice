<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Smarty insert</h1><div style="width:100%;float:left;" class="article-content">   
 <h1 style="box-sizing: border-box; font-size: 18pt; margin: 20px 0px 10px; tahoma, arial, helvetica,  line-height: 1.1; color: rgb(0, 0, 102);"> insert</h1> 
 <div style="box-sizing: border-box; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 
  <p style="box-sizing: border-box; margin: 0px 0px 10px;"> &nbsp;</p> 
  <table border="1" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;"> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Attribute Name</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Type</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Required</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Default</th> 
     <th align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 描述</th> 
    </tr> 
   </tbody> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> name</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Yes</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> The name of the insert function (insert_name)</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> assign</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> The name of the template variable the output will be assigned to</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> script</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> The name of the php script that is included before the insert function is called</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> [var ...]</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> [var type]</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> variable to pass to insert function</td> 
    </tr> 
   </tbody> 
  </table> 
  <br style="box-sizing: border-box;"> 
  <table border="1" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;"> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 属性</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 类型</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 是否必须</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 缺省值</th> 
     <th align="center" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 描述</th> 
    </tr> 
   </tbody> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> name</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Yes</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 插入函数的名称</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> assign</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 该属性指定一个变量保存待插入函数输出</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> script</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> 插入函数前需要先包含的php脚本名称</p> </td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> [var ...]</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> [var type]</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 传递给待插入函数的本地参数</td> 
    </tr> 
   </tbody> 
  </table>   
  <p style="box-sizing: border-box; margin: 0px 0px 10px;"> &nbsp;</p> 
 </div> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> Insert 函数类似欲 inluce 函数，不同之处是 insert 所包含的内容不会被缓存，每次调用该模板都会重新执行该函数.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 例如你在页面上端使用一个带有广告条位置的模板，广告条可以包含任何HTML、图象、FLASH等混合信息. 因此这里不能使用一个静态的链接，同时我们也不希望该广告条被缓存. 这就需要在 insert 函数指定：#banner_location_id# 和 #site_id# 值(从配置文件中取)，同时需要一个函数取广告条的内容信息.</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-weight: 700;">例 7-10. insert 函数演示</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
{* example of fetching a banner *}
{insert name="getBanner" lid=#banner_location_id# sid=#site_id#}</pre> </td> 
       </tr> 
      </tbody> 
     </table> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 在此例中，我们使用了 getBanner 作为 name 属性，同时传递了 #banner_location_id# 和 #site_id# 两个参数. 接下来 Smarty 在你的 php 程序中搜索名为 insert_getBanner() 的函数，#banner_location_id# 和 #site_id# 的值被组合成一个数组作为函数的第一个参数传递给该函数. 为了避免函数命名混乱，所有的 insert 函数都必须以 insert_ 开头. 你的 insert_getBanner() 函数根据传递的参数执行并返回执行的结果. 这些结果就显示在模板中调用该函数的位置. 在此例中 Smarty 调用该函数类似insert_getBanner(array("lid"=&gt;"12345","sid"=&gt;67890"));并将返回的结果显示在调用的位置.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 如果设置了 assign 属性，该属性对应的变量名用于保存待包含函数的输出，这样待包含函数的输出就不会直接显示了.注意：赋给模板变量的输出信息在缓存的时候同样无效.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 如果指定了 script 属性，在调用函数并执行前将先包含(只包含一次)script指定的 php 脚本. 这是为了防止被调用的函数不存在，先调用包含该函数的 php 脚本将避免该情况.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> Smart 对象作为函数的第二个参数被传递，在待包含函数中可以通过 $this 访问并修改 smarty 对象信息.</p> 
 <div style="box-sizing: border-box; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 
  <blockquote style="box-sizing: border-box; padding: 10px; margin: 10px 0px; font-size: 14px; border-width: 1px 1px 1px 5px;  border-color: rgb(238, 238, 238) rgb(238, 238, 238) rgb(238, 238, 238) rgb(91, 192, 222); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px;"> 
   <p style="box-sizing: border-box; margin: 0px;"> <span style="box-sizing: border-box; font-weight: 700;">技术要点:&nbsp;</span>使模板的一部分不被缓存. 如果打开了缓存, insert 函数却不会被缓存，每次调用页面它们都会被动态加载，即使是在缓存页面中. 该特性可以广泛应用于广告条、投票、实时天气预报、搜索结果、反馈信息等区域.</p> 
  </blockquote> 
 </div> 
 <br> 
 <br>      
</div></body></html>