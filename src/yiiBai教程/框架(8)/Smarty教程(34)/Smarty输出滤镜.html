<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Smarty输出滤镜</h1><div style="width:100%;float:left;" class="article-content">   
 <h1 style="box-sizing: border-box; font-size: 18pt; margin: 20px 0px 10px; tahoma, arial, helvetica,  line-height: 1.1; color: rgb(0, 0, 102); text-align: center;"> Output Filters</h1> 
 <h1 style="box-sizing: border-box; font-size: 18pt; margin: 20px 0px 10px; tahoma, arial, helvetica,  line-height: 1.1; color: rgb(0, 0, 102); text-align: center;"> 输出滤镜</h1> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px; text-align: center;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px; text-align: center;"> 当模板通过函数 display() 或者 fetch()被调用时，它的输出能够通过一个或者多个滤镜而发出。 它与预过滤器的不同之处就是预过滤器编译模板是在模板保存到磁盘之前，输出滤镜是在它执行的时候才操作模板输出的。</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px; text-align: center;"> Output filters can be either&nbsp;registered&nbsp;or loaded from the plugins directory by using&nbsp;load_filter()&nbsp;function or by setting&nbsp;$autoload_filters&nbsp;variable. Smarty will pass the template output as the first argument, and expect the function to return the result of the processing.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px; text-align: center;"> 输出滤镜同样能够通过&nbsp;load filter()&nbsp;函数和设置&nbsp;$autoload filters&nbsp;变量来注册或者从工具目录里载入。SMARTY将传递模板输出作为第一个参数，通过自定义函数返回处理结果。</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-size: 12px; line-height: 18px;">Example 15-4. using a template outputfilter -http://www.yiibai.com/smarty</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
<span style="box-sizing: border-box; font-size: 12px; line-height: 18px;">&lt;?php
// put this in your application
function protect_email($tpl_output, &amp;$smarty)
{
 $tpl_output =
 preg_replace('!(\S+)@([a-zA-Z0-9\.\-]+\.([a-zA-Z]{2,3}|[0-9]{1,3}))!',
 '$1%40$2', $tpl_output);
 return $tpl_output;
}

// register the outputfilter  $smarty-&gt;register_outputfilter("protect_email");
$smarty-&gt;display("index.tpl");

// now any occurrence of an email address in the template output will have
// a simple protection against spambots
?&gt;</span></pre> </td> 
       </tr> 
      </tbody> 
     </table>   </td> 
   </tr> 
  </tbody> 
 </table> 
 <br> 
 <br>      
</div></body></html>