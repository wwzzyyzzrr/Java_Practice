<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Smarty include_php</h1><div style="width:100%;float:left;" class="article-content">   
 <h1 style="box-sizing: border-box; font-size: 18pt; margin: 20px 0px 10px; tahoma, arial, helvetica,  line-height: 1.1; color: rgb(0, 0, 102);"> include_php</h1> 
 <div style="box-sizing: border-box; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 
  <p style="box-sizing: border-box; margin: 0px 0px 10px;"> &nbsp;</p> 
  <table border="1" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;"> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Attribute Name</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Type</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Required</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Default</th> 
     <th align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 描述</th> 
    </tr> 
   </tbody> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> file</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Yes</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> The name of the php file to include</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> once</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> boolean</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">true</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> whether or not to include the php file more than once if included multiple times</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> assign</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> The name of the variable that the output of include_php will be assigned to</td> 
    </tr> 
   </tbody> 
  </table> 
  <br style="box-sizing: border-box;"> 
  <table border="1" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;"> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 属性</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 类型</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 是否必须</th> 
     <th align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 缺省值</th> 
     <th align="center" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 描述</th> 
    </tr> 
   </tbody> 
   <tbody style="box-sizing: border-box;"> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> file</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> Yes</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 待包含php文件的名称</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> once</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> boolean</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">true</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 如果待包含php文件已被包含是否仍然包含(类似php中的include_once函数)</td> 
    </tr> 
    <tr style="box-sizing: border-box;"> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> assign</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> string</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> No</td> 
     <td align="CENTER" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> <span style="box-sizing: border-box;"><i style="box-sizing: border-box;">n/a</i></span></td> 
     <td align="LEFT" style="box-sizing: border-box; padding: 0px; font-size: 10pt;" valign="TOP" width="20%"> 该属性指定一个变量保存待包含php文件的输出</td> 
    </tr> 
   </tbody> 
  </table> 
  <p style="box-sizing: border-box; margin: 0px 0px 10px;"> &nbsp;</p> 
 </div> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> inluce_php 函数用于在模板中包含 php 脚本. 如果设置了安全模式，被包含的脚本必须位于 $trusted_dir 路径下. include_php 函数必须设置 file 属性，该属性指明被包含 php 文件的路径，可以是 $trusted_dir 的相对路径，也可以是绝对路径.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> include_php 是解决模板部件化的好方法，它使得 php 代码从模板文件中被分离出来. 举个例子：假设有一个从数据库中动态取出数据用于显示站点导航的模板，你可以将得数据内容的 php 逻辑部分分离出来保存在一个单独的文件夹下，并在模板开始的位置包含该 php 脚本. 那么就可以在任何地方包含此模板而不用担心之前数据库信息是否已被程序取出.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 即使是在模板中多次地调用 php 文件，默认情况下它们只被包含一次. 你可以设置&nbsp;<em style="box-sizing: border-box;">once</em>&nbsp;属性从而指明每次调用都重新包含该文件. 如果将&nbsp;<em style="box-sizing: border-box;">once</em>&nbsp;属性设置为 false，每次调用该文件都将被重新包含.</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 如果设置了 assign 属性，该属性对应的变量名用于保存待包含 php 的输出，这样待包含 php 文件的输出就不会直接显示了。</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> &nbsp;</p> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 在待包含 php 文件中可以通过 $this 访问 smarty 对象.</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-weight: 700;">Example 7-9. function include_php<br style="box-sizing: border-box;"> 例 7-9. include_php 函数演示</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
load_nav.php
-------------

&lt;?php

	// load in variables from a mysql db and assign them to the template
	// 从mysql数据库中取得数据，将数据赋给模板变量
	require_once("MySQL.class.php");
	$sql = new MySQL;
	$sql-&gt;query("select * from site_nav_sections order by name",SQL_ALL);
	$this-&gt;assign('sections',$sql-&gt;record);

?&gt;


index.tpl
---------

{* absolute path, or relative to $trusted_dir *}
{* 绝对路径或 $trusted_dir 的相对路径 *}
{include_php file="/path/to/load_nav.php"}

{foreach item="curr_section" from=$sections}
	&lt;a href="{$curr_section.url}"&gt;{$curr_section.name}&lt;/a&gt;&lt;br&gt;
{/foreach}</pre> </td> 
       </tr> 
      </tbody> 
     </table>   </td> 
   </tr> 
  </tbody> 
 </table> 
 <br> 
 <br>      
</div></body></html>