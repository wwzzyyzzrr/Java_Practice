<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Smarty多个缓存</h1><div style="width:100%;float:left;" class="article-content">   
 <h1 style="box-sizing: border-box; font-size: 18pt; margin: 20px 0px 10px; tahoma, arial, helvetica,  line-height: 1.1; color: rgb(0, 0, 102);"> Multiple Caches Per Page 每页多个缓存</h1> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 你可以用单个函数display()或fetch()来输出多个缓存文档。display('index.tpl')在多种条件下会有不同的输出内容，要单独的把缓存分开。可以通过函数的第二参数cache_id来达到效果。</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-weight: 700;">Example 14-6. passing a cache_id to display()<br style="box-sizing: border-box;"> 例14-6.传给display()一个cache_id</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
require('Smarty.class.php');
$smarty = new Smarty;

$smarty-&gt;caching = true;

$my_cache_id = $_GET['article_id'];

$smarty-&gt;display('index.tpl',$my_cache_id);</pre> </td> 
       </tr> 
      </tbody> 
     </table> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> <br style="box-sizing: border-box;"> 上面，我们通过变量$my_cache_id作为cache_id来display()。在index.tpl里$my_cache_id的每个唯一值，会建立单独的缓存。在这个例子里，"article_id"在URL传送，并用作cache_id。</p> 
 <div style="box-sizing: border-box; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 
  <blockquote style="box-sizing: border-box; padding: 10px; margin: 10px 0px; font-size: 14px; border-width: 1px 1px 1px 5px;  border-color: rgb(238, 238, 238) rgb(238, 238, 238) rgb(238, 238, 238) rgb(91, 192, 222); border-top-left-radius: 2px; border-top-right-radius: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px;"> 
   <p style="box-sizing: border-box; margin: 0px;"> 技术提示：要注意从客户端(web浏览器)传值到Smarty(或任何PHP应用程序)的过程。尽管上面的例子用article_id从URL传值看起来很方便，却可能有糟糕的后果[安全问题]。cache_id被用来在文件系统里创建目录，如果用户想为article_id赋一个很大的值，或写一些代码来快速发送随机的article_ids，就有可能会使服务器出现问题。确定在使用它之前清空已存在的数据。在这个例子，可能你知道article_id的长度(值吧？！)是10字符，并只由字符-数字组成，在数据库里是个可用的article_id。Check for this!要注意检查这个问题！〔要注意这个提示!不用再说了吧？〕</p> 
  </blockquote> 
 </div> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> 确定传给is_cached()和clear_cache()的第二参数是同一个cache_id。</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-weight: 700;">Example 14-7. passing a cache_id to is_cached()<br style="box-sizing: border-box;"> 例14-7.传给is_cached()一个cache_id</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;">   <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
require('Smarty.class.php');
$smarty = new Smarty;

$smarty-&gt;caching = true;

$my_cache_id = $_GET['article_id'];

if(!$smarty-&gt;is_cached('index.tpl',$my_cache_id)) {
	// No cache available, do variable assignments here.
	$contents = get_database_contents();
	$smarty-&gt;assign($contents);
}

$smarty-&gt;display('index.tpl',$my_cache_id);</pre> </td> 
       </tr> 
      </tbody> 
     </table> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> <br style="box-sizing: border-box;"> 你可以通过把clear_cache()的第一参数设为null来为特定的cache_id清除所有缓存。</p> 
 <table border="0" cellpadding="0" cellspacing="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; color: rgb(83, 91, 96); font-size: 14px; line-height: 20px; Verdana, arial, helvetica, " width="100%"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <br style="box-sizing: border-box;"> <p style="box-sizing: border-box; margin: 0px 0px 10px;"> <span style="box-sizing: border-box; font-weight: 700;">Example 14-8. clearing all caches for a particular cache_id<br style="box-sizing: border-box;"> 例14-8.为特定的cache_id清除所有缓存</span></p> 
     <table bgcolor="#E0E0E0" border="0" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px; max-width: 100%; background-color: transparent;" width="100%"> 
      <tbody style="box-sizing: border-box;"> 
       <tr style="box-sizing: border-box;"> 
        <td style="box-sizing: border-box; padding: 0px; font-size: 10pt;"> <pre class="PROGRAMLISTING" style="box-sizing: border-box; overflow: auto; Menlo, Monaco, Consolas, 'Courier New', monospace; font-size: 13px; padding: 9.5px; line-height: 1.42857143; word-break: break-all; word-wrap: break-word; color: rgb(51, 51, 51); border-color: rgb(204, 204, 204); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(245, 245, 245);">
require('Smarty.class.php');
$smarty = new Smarty;

$smarty-&gt;caching = true;

// clear all caches with "sports" as the cache_id
$smarty-&gt;clear_cache(null,"sports");

$smarty-&gt;display('index.tpl',"sports");</pre> </td> 
       </tr> 
      </tbody> 
     </table> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(83, 91, 96); line-height: 20px; Verdana, arial, helvetica,  font-size: 13px;"> <br style="box-sizing: border-box;"> 通过这种方式，你可以用相同的cache_id来把你的缓存集合起来。</p> 
 <br>      
</div></body></html>