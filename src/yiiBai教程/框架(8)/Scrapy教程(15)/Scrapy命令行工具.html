<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Scrapy命令行工具</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   Scrapy命令行工具用于控制Scrapy，它通常被称为“Scrapy工具”。它包括用于不同对象的参数和选项组的命令。 
 </div> 
 <div> 
  <h2> 
   <div>
     配置设置 
   </div> </h2> 
  <div>
    scrapy&nbsp;会找到&nbsp;scrapy.cfg&nbsp;文件中设置的配置。如下面提到的： 
  </div> 
  <ul> 
   <li> <p style="text-align:justify;"> C:\scrapy(project folder)\scrapy.cfg&nbsp;在系统中； </p> </li> 
   <li> <p style="text-align:justify;"> ~/.config/scrapy.cfg ($XDG_CONFIG_HOME)&nbsp;and&nbsp;~/.scrapy.cfg ($HOME)&nbsp;，这些是全局设置 </p> </li> 
   <li> 
    <div>
      可以在项目的根目录里面找到 scrapy.cfg 这个文件。 
    </div> </li> 
  </ul> 
  <div>
    Scrapy还可以使用以下的环境变量来配置： 
  </div> 
  <ul> 
   <li> <p style="text-align:justify;"> SCRAPY_SETTINGS_MODULE </p> </li> 
   <li> <p style="text-align:justify;"> SCRAPY_PROJECT </p> </li> 
   <li> <p style="text-align:justify;"> SCRAPY_PYTHON_SHELL </p> </li> 
  </ul> 
  <h2> 
   <div>
     默认Scrapy项目结构 
   </div> </h2> 
  <div>
    下面的结构显示 Scrapy项目的默认文件结构： 
  </div> 
  <pre>scrapy.cfg                - Deploy the configuration file
project_name/             - Name of the project
   _init_.py
   items.py               - It is project's items file
   pipelines.py           - It is project's pipelines file
   settings.py            - It is project's settings file
   spiders                - It is the spiders directory
      _init_.py
      spider_name.py
    . . .</pre> 
  <div>
    scrapy.cfg 文件是在项目的根目录，其中包括项目名称与项目设置。 
  </div> 
  <div>
    例如： 
  </div> 
  <pre>[settings]
default = [name of the project].settings

[deploy]
#url = http://localhost:6800/
project = [name of the project]</pre> 
  <h2> 
   <div>
     使用Scrapy工具 
   </div> </h2> 
  <div>
    通过使用Scrapy工具，它会提供一些可使用以的命令如下所示： 
  </div> 
  <pre>Scrapy X.Y  - no active project
Usage:
   scrapy  [options] [arguments]
Available commands:
   crawl      It puts spider (handle the URL) to work for crawling data
   fetch      It fetches the response from the given URL</pre> 
  <h3> 
   <div>
     创建项目 
   </div> </h3> 
  <div>
    您可以使用下面的命令来创建 Scrapy 项目： 
  </div> 
  <pre>scrapy startproject scrapy_project</pre> 
  <div>
    这将创建一个名为&nbsp;project_name&nbsp;的项目目录。接下来，进入新创建的项目，使用下面的命令： 
  </div> 
  <pre>cd  scrapy_project</pre> 
  <h3> 
   <div>
     控制项目 
   </div> </h3> 
  <div>
    您可以控制项目，并通过使用Scrapy工具，也创造了新的蜘蛛(spider)，使用下面的命令进行管理： 
  </div> 
  <pre>scrapy genspider mydomain yiibai.com</pre> 
  <div>
    如：抓取等等的命令在 Scrapy 项目中的使用。这里所有命令在接下来 Scrapy 项目内使用运行。 
  </div> 
  <div>
    Scrapy包含一些内置的命令，它可以用来为项目。要查看可用命令的列表，请使用以下命令： 
  </div> 
  <pre>scrapy -h</pre> 
  <div>
    当运行上面的命令，Scrapy将显示如下面所列出可用命令的列表： 
  </div> 
  <ul> 
   <li> <p style="text-align:justify;"> fetch:&nbsp;它使用Scrapy&nbsp;downloader&nbsp;提取的&nbsp;URL。 </p> </li> 
   <li> <p style="text-align:justify;"> runspider:&nbsp;它用于而无需创建一个项目运行自行包含蜘蛛(spider)。 </p> </li> 
   <li> <p style="text-align:justify;"> settings:&nbsp;它规定了项目的设定值。 </p> </li> 
   <li> <p style="text-align:justify;"> shell:&nbsp;这是一个给定URL的一个交互式模块。 </p> </li> 
   <li> <p style="text-align:justify;"> startproject:&nbsp;它创建了一个新的 Scrapy&nbsp;项目。 </p> </li> 
   <li> <p style="text-align:justify;"> version:&nbsp;它显示Scrapy版本。 </p> </li> 
   <li> <p style="text-align:justify;"> view:&nbsp;它使用Scrapy&nbsp;downloader&nbsp;提取&nbsp;URL并显示在浏览器中的内容。 </p> </li> 
  </ul> 
  <div>
    一些项目相关的命令，如下： 
  </div> 
  <ul> 
   <li> <p style="text-align:justify;"> crawl:&nbsp;它是用来使用蜘蛛抓取数据； </p> </li> 
   <li> <p style="text-align:justify;"> check:&nbsp;它检查项目并由&nbsp;crawl&nbsp;命令返回； </p> </li> 
   <li> <p style="text-align:justify;"> list:&nbsp;它显示本项目中可用蜘蛛(spider)的列表； </p> </li> 
   <li> <p style="text-align:justify;"> edit:&nbsp;可以通过编辑器编辑蜘蛛； </p> </li> 
   <li> <p style="text-align:justify;"> parse:它通过蜘蛛分析给定的URL； </p> </li> 
   <li> <p style="text-align:justify;"> bench:&nbsp;它是用来快速运行基准测试(基准讲述每分钟可被Scrapy抓取的页面数量)。 </p> </li> 
  </ul> 
  <h2> 
   <div>
     自定义项目命令 
   </div> </h2> 
  <div>
    可以在Scrapy项目中通过COMMANDS_MODULE设置构建一个自定义项目命令。 
  </div>   
  <pre>COMMANDS_MODULE = 'mycmd.commands'</pre> 
  <div>
    Scrapy命令可以通过使用&nbsp;setup.py&nbsp;文件中的&nbsp;scrapy.commands&nbsp;部分来添加，如下所示： 
  </div> 
  <pre>from setuptools import setup, find_packages

setup(name='scrapy-module_demo',
  entry_points={
    'scrapy.commands': [
      'cmd_demo=my_module.commands:CmdDemo',
    ],
  },
)</pre> 
  <div>
    上面的代码将在setup.py文件添加&nbsp;cmd_demo&nbsp;命令。 
  </div> 
  <p style="text-align:justify;"> <br> </p> 
 </div>
 <br>      
</div></body></html>