<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Yii创建页面</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    现在，我们要在应用程序中创建一个“Hello&nbsp;World”的页面。要创建一个页面，我们必须创建一个动作和视图。 
  </div> 
 </div> 
 <div> 
  <div>
    动作要在控制器中声明。最终用户将收到一个动作的执行结果。 
  </div> 
  <p style="text-align:justify;"> 第1步&nbsp;-&nbsp;声明一个动作&nbsp;speak&nbsp;在现有&nbsp;SiteController，&nbsp;它这是在类文件&nbsp;controllers/SiteController.php&nbsp;中定义的。 </p> 
  <pre>&lt;?php 
   namespace app\controllers; 
   use Yii; 
   use yii\filters\AccessControl; 
   use yii\web\Controller; 
   use yii\filters\VerbFilter; 
   use app\models\LoginForm; 
   use app\models\ContactForm; 
   class SiteController extends Controller { 
      /* other code */ 
      public function actionSpeak($message = "default message") { 
         return $this-&gt;render("speak",['message' =&gt; $message]); 
      } 
   } 
?&gt;&nbsp;</pre> 
  <p> 我们定义的&nbsp;speak&nbsp;动作作为一个名为&nbsp;actionSpeak&nbsp;方法。在Yii中，所有操作方法的前缀词是action。这是框架用于区别非动作的操作方法。如果动作ID需要多个词语，那么他们将被由破折号连接。因此，动作ID为add-pos对应的操作方法是AddPost。 </p> 
  <p> 在上面的代码中，函数接受一个GET参数 -&nbsp;$message。也是调用了一个名为“render”方法来渲染一个视图文件。我们通过&nbsp;message&nbsp;参数到视图。渲染结果是一个完整的HTML页面。 </p> 
  <p> 视图是生成响应内容的脚本。对于&nbsp;speak&nbsp;动作，我们创建打印消息的&nbsp;speak&nbsp;视图。当&nbsp;render&nbsp;方法被调用时，它会查找一个名称为： view/controllerID/vewName.php&nbsp;的PHP文件。 </p> 
  <div>
    第2步&nbsp;-&nbsp;因此，在文件夹&nbsp;views/site&nbsp;内创建一个名为 speak.php&nbsp;文件，并使用下面的代码。 
  </div> 
  <pre>&lt;?php 
   use yii\helpers\Html; 
?&gt; 
&lt;?php echo Html::encode($message); ?&gt; </pre> 
  <div>
    需要注意的是，message参数打印之前进行HTML编码以避免XSS攻击。 
  </div> 
  <p> 第3步&nbsp;-&nbsp;在Web浏览器中键入以下：<a target="_blank" href="http://localhost:8080/index.php?r=site/speak&amp;message=hello%20world">http://localhost:8080/index.php?r=site/speak&amp;message=hello%20world</a>&nbsp; </p> 
  <div>
    就会看到如下所示窗口的输出结果 - 
  </div> 
  <img src="/uploads/tutorial/20160517/1-16051H219295C.png" width="891" height="371" title="Yii创建页面" alt="Yii创建页面"> 
 </div> 
 <div style="font-family:微软雅黑;font-size:14px;background-color:#FFFFFF;"> 
  <br> 
 </div> 
 <div> 
  <p> URL中的“r”参数表示路由。路由默认格式为：controllerID/actionID。在我们的例子中，路由&nbsp;site/speak&nbsp;将被解析为&nbsp;SiteController类和&nbsp;speak&nbsp;动作。 </p> 
  <p> <br> </p> 
  <p> <strong>出错处理：</strong> </p> 
  <p style="font-family:Verdana, Geneva, Tahoma,  Helvetica, text-align:justify;font-size:15px !important;background-color:inherit;"> <img src="/uploads/tutorial/20160517/1-16051H2195UZ.png" alt=""> </p> 
  <p style="font-family:Verdana, Geneva, Tahoma,  Helvetica, text-align:justify;font-size:15px !important;background-color:inherit;"> <b>解决：</b> </p> 
  <p> 打开文件：<strong>config/web.php</strong>，找到&nbsp;'<em>cookieValidationKey</em>'&nbsp;=&gt;&nbsp;'', (大概在第12行)，随便写上一个值，这里我随便修改为： </p> 
  <p> <strong>'cookieValidationKey'&nbsp;=&gt;&nbsp;'yiibai.com',</strong><strong>&nbsp;</strong>就可以了。 </p> 
 </div>
 <br>      
</div></body></html>