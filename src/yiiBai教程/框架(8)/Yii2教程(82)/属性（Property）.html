<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">属性（Property）</h1><div style="width:100%;float:left;" class="article-content">   
 <h1 style="margin: 0px; padding: 0.25em 0px 0px; border-right-width: 0px; border-bottom-width: 0px; border-left-width: 0px; border-top-style: none; font-size: 23px; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; line-height: 18.676000595092773px;"> 属性(Property)</h1> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 在 PHP 中，类的成员变量也被称为<strong style="margin: 0px; padding: 0px;">属性(properties)</strong>。它们是类定义的一部分，用来表现一个实例的状态(也就是区分类的不同实例)。在具体实践中，常常会想用一个稍微特殊些的方法实现属性的读写。例如，要对<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>&nbsp;属性执行 trim 操作，可以用以下代码实现：</p> 
 <ol class="hibot" style="margin: auto; padding-right: 0px; padding-left: 38px; font-size: 14px; font-family: monospace; color: rgb(230, 225, 220); background: rgb(17, 17, 17);"> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> $object-&gt;label&nbsp;=&nbsp;trim($label);</li> 
 </ol> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 上述代码的缺点是只要修改&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>&nbsp;属性就必须再次调用&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">trim()</code>&nbsp;函数。若将来需要用其它方式处理&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>&nbsp;属性，比如首字母大写，就不得不修改所有给&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>&nbsp;属性赋值的代码。这种代码的重复会导致 bug，这种实践显然需要尽可能避免。</p> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 为解决该问题，Yii 引入了一个名为 [[yii\base\Object]] 的基类，它支持基于类内的&nbsp;<strong style="margin: 0px; padding: 0px;">getter</strong>&nbsp;和&nbsp;<strong style="margin: 0px; padding: 0px;">setter</strong>(读取器和设定器)方法来定义属性。如果某类需要支持这个特性，只需要继承 [[yii\base\Object]] 或其子类即可。</p> 
 <blockquote style="margin: 1em 0px; padding: 0px 0px 0px 0.6em; border-left-width: 5px; border-left-style: solid; border-left-color: rgb(221, 221, 221); color: rgb(85, 85, 85); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px; line-height: 18.676000595092773px;"> 
  <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em;"> 补充：几乎每个 Yii 框架的核心类都继承自 [[yii\base\Object]] 或其子类。这意味着只要在核心类中见到 getter 或 setter 方法，就可以像调用属性一样调用它。</p> 
 </blockquote> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> getter 方法是名称以&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">get</code>&nbsp;开头的方法，而 setter 方法名以&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">set</code>&nbsp;开头。方法名中&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">get</code>&nbsp;或&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">set</code>&nbsp;后面的部分就定义了该属性的名字。如下面代码所示，getter 方法&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">getLabel()</code>&nbsp;和 setter 方法&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">setLabel()</code>&nbsp;操作的是&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>属性，：</p> 
 <ol class="hibot" style="margin: auto; padding-right: 0px; padding-left: 38px; font-size: 14px; font-family: monospace; color: rgb(230, 225, 220); background: rgb(17, 17, 17);"> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> namespace&nbsp;app\\components;&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> use&nbsp;yii\\base\\Object;&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> class&nbsp;Foo&nbsp;extend&nbsp;Object&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> {&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;$_label;&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getLabel()&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$this-&gt;_label;&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;setLabel($value)&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;_label&nbsp;=&nbsp;trim($value);&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> }</li> 
 </ol> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> (详细解释：getter 和 setter 方法创建了一个名为&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">label</code>&nbsp;的属性，在这个例子里，它指向一个私有的内部属性<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">_label</code>。)</p> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> getter/setter 定义的属性用法与类成员变量一样。两者主要的区别是：当这种属性被读取时，对应的 getter 方法将被调用；而当属性被赋值时，对应的 setter 方法就调用。如：</p> 
 <ol class="hibot" style="margin: auto; padding-right: 0px; padding-left: 38px; font-size: 14px; font-family: monospace; color: rgb(230, 225, 220); background: rgb(17, 17, 17);"> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> //&nbsp;等效于&nbsp;$label&nbsp;=&nbsp;$object-&gt;getLabel();&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> $label&nbsp;=&nbsp;$object-&gt;label;&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> &nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> //&nbsp;等效于&nbsp;$object-&gt;setLabel('abc');&nbsp;</li> 
  <li rel="0" style="margin: 0px; padding: 0px 0px 0px 10px; border-left-width: 2px; border-left-style: solid; border-left-color: rgb(204, 204, 204); list-style-position: outside; list-style-type: decimal; word-wrap: break-word; word-break: break-all; background-image: initial; background-attachment: initial; background-size: initial; background-origin: initial; background-clip: initial; background-position: initial; background-repeat: initial;"> $object-&gt;label&nbsp;=&nbsp;'abc';</li> 
 </ol> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 只定义了 getter 没有 setter 的属性是<strong style="margin: 0px; padding: 0px;">只读属性</strong>。尝试赋值给这样的属性将导致 [[yii\base\InvalidCallException|InvalidCallException]] (无效调用)异常。类似的，只有 setter 方法而没有 getter 方法定义的属性是<strong style="margin: 0px; padding: 0px;">只写属性</strong>，尝试读取这种属性也会触发异常。使用只写属性的情况几乎没有。</p> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 通过 getter 和 setter 定义的属性也有一些特殊规则和限制：</p> 
 <ul> 
  <li> 这类属性的名字是不区分大小写的。如，$object-&gt;label&nbsp;和&nbsp;$object-&gt;Label&nbsp;是同一个属性。因为 PHP 方法名是不区分大小写的。</li> 
  <li> 如果此类属性名和类成员变量相同，以后者为准。例如，假设以上&nbsp;Foo&nbsp;类有个&nbsp;label&nbsp;成员变量，然后给$object-&gt;label = 'abc'&nbsp;赋值，将赋给成员变量而不是 setter&nbsp;setLabel()&nbsp;方法。</li> 
  <li> 这类属性不支持可见性(访问限制)。定义属性的 getter 和 setter 方法是 public、protected 还是 private 对属性的可见性没有任何影响。</li> 
  <li> 这类属性的 getter 和 setter 方法只能定义为非静态的，若定义为静态方法(static)则不会以相同方式处理。</li> 
 </ul> 
 <p style="margin: 1em 0px; padding: 0px; line-height: 1.5em; color: rgb(0, 0, 0); font-family: helvetica, arial, freesans, clean, sans-serif; font-size: 13px;"> 回到开头提到的问题，与其处处要调用&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">trim()</code>&nbsp;函数，现在我们只需在 setter&nbsp;<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">setLabel()</code>&nbsp;方法内调用一次。如果 label 首字母变成大写的新要求来了，我们只需要修改<code style="margin: 0px; padding: 0px 0.2em; font-size: 12px; line-height: normal; font-family: Monaco, 'Courier New', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', monospace; color: rgb(68, 68, 68); border: 1px solid rgb(222, 222, 222); background-color: rgb(248, 248, 255);">setLabel()</code>&nbsp;方法，而无须接触任何其它代码。</p> 
 <br>      
</div></body></html>