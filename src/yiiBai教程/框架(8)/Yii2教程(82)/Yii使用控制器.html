<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Yii使用控制器</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   在Web应用程序中控制器应该从&nbsp;yii\web\Controller&nbsp;或其子类扩展。在控制台应用程序，它们应该从&nbsp;yii\console\Controller&nbsp;或其子类扩展。 
 </div> 
 <div> 
  <div>
    让我们在&nbsp;Controllers&nbsp;文件夹创建一个控制器实例。 
  </div> 
  <div>
    第1步&nbsp;-&nbsp;在&nbsp;Controllers&nbsp;文件夹中，创建一个名为&nbsp;ExampleController.php，使用下面的代码。 
  </div> 
  <pre>&lt;?php 
   namespace app\controllers; 
   use yii\web\Controller; 
   class ExampleController extends Controller { 
      public function actionIndex() { 
         $message = "index action of the ExampleController"; 
         return $this-&gt;render("example",[ 
            'message' =&gt; $message 
         ]); 
      } 
   } 
?&gt;&nbsp;</pre> 
  <p style="text-align:justify;"> 第2步&nbsp;-&nbsp;在 views/example&nbsp;文件夹中创建一个&nbsp;example&nbsp;视图。在该文件夹内，创建一个名为 example.php&nbsp;视图文件，使用下面的代码文件。 </p> 
  <pre>&lt;?php 
   echo $message; 
?&gt;&nbsp;</pre> 
  <p style="text-align:justify;"> 每个应用程序都有一个默认的控制器。对于Web应用程序，site是默认的控制器，而控制台应用程序则是help。因此，当URL=&gt;<a target="_blank" href="http://localhost:8080/index.php">http://localhost:8080/index.php</a>&nbsp;被打开时，site&nbsp;控制器将处理请求。当然你也可以更改应用程序配置默认的控制器。 </p> 
  <div>
    考虑给定的代码&nbsp;- 
  </div> 
  <pre>'defaultRoute' =&gt; 'main'&nbsp;</pre> 
  <p style="text-align:justify;"> 步骤3&nbsp;-&nbsp;将上述的代码添加到下面文件 :&nbsp;config/web.php. </p> 
  <pre>&lt;?php 
   $params = require(__DIR__ . '/params.php'); 
   $config = [ 
      'id' =&gt; 'basic', 
      'basePath' =&gt; dirname(__DIR__), 
      'bootstrap' =&gt; ['log'], 
      'components' =&gt; [ 
         'request' =&gt; [ 
            // !!! insert a secret key in the following (if it is empty) - this is
               //required by cookie validation 
            'cookieValidationKey' =&gt; 'yiibai.com', 
         ], 
         'cache' =&gt; [ 
            'class' =&gt; 'yii\caching\FileCache', 
         ], 
         'user' =&gt; [ 
            'identityClass' =&gt; 'app\models\User', 
            'enableAutoLogin' =&gt; true, 
         ], 
         'errorHandler' =&gt; [ 
            'errorAction' =&gt; 'site/error', 
         ], 
         'mailer' =&gt; [ 
            'class' =&gt; 'yii\swiftmailer\Mailer', 
            // send all mails to a file by default. You have to set 
            // 'useFileTransport' to false and configure a transport 
            // for the mailer to send real emails. 
            'useFileTransport' =&gt; true, 
         ], 
         'log' =&gt; [ 
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0, 
            'targets' =&gt; [ 
               [ 
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'], 
               ], 
            ], 
         ], 
         'db' =&gt; require(__DIR__ . '/db.php'), 
      ], 
      //changing the default controller <b>'defaultRoute' =&gt; 'example', </b> 'params' =&gt; $params, 
   ]; 
   if (YII_ENV_DEV) { 
      // configuration adjustments for 'dev' environment 
      $config['bootstrap'][] = 'debug'; 
      $config['modules']['debug'] = [ 
         'class' =&gt; 'yii\debug\Module', 
      ]; 
      $config['bootstrap'][] = 'gii'; 
      $config['modules']['gii'] = [ 
         'class' =&gt; 'yii\gii\Module', 
      ]; 
   } 
   return $config; 
?&gt; 						  </pre> 
  <div>
    第4步&nbsp;-&nbsp;在Web浏览器的地址栏中输入&nbsp;
   <a target="_blank" href="http://localhost:8080/index.php">http://localhost:8080/index.php</a>，会看到默认的控制器是&nbsp;example&nbsp;控制器。
   <br> 
   <img src="/uploads/tutorial/20160518/1-16051P64134512.png" width="692" height="357" title="Yii使用控制器" alt="Yii使用控制器">
   <br> 
  </div> 
  <div>
    注&nbsp;-&nbsp;控制器ID应包含小写字母，数字，斜线，连字符英文字母和下划线。 
  </div> 
  <div>
    要将控制器ID转换控制器类的名字，应该做到以下几点&nbsp;- 
  </div> 
  <ul> 
   <li> 以连字符分隔所有单词的第一个字母，把它变成大写 </li> 
   <li> 删除连字符 </li> 
   <li> 替换反向斜线 </li> 
   <li> 添加Controller后缀 </li> 
   <li> 前面加上控制器命名空间 </li> 
  </ul> 
  <h3> 示例 </h3> 
  <ul> 
   <li> <p style="text-align:justify;"> page 变成&nbsp;app\controllers\PageController. </p> </li> 
   <li> <p style="text-align:justify;"> post-article 变成&nbsp;app\controllers\PostArticleController. </p> </li> 
   <li> <p style="text-align:justify;"> user/post-article&nbsp;变成&nbsp;app\controllers\user\PostArticleController. </p> </li> 
   <li> <p style="text-align:justify;"> userBlogs/post-article&nbsp;变成&nbsp;app\controllers\userBlogs\PostArticleController. </p> </li> 
  </ul> 
 </div>
 <br>      
</div></body></html>