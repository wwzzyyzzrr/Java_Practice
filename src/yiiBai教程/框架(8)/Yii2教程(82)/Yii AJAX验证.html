<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Yii AJAX验证</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    username&nbsp;验证只在服务器端进行，因为在服务器端知道所需的信息。在这种情况下，可以使用基于 AJAX 的验证。 
  </div> 
 </div> 
 <div> 
  <div>
    第1步&nbsp;-&nbsp;为了使用&nbsp;AJAX&nbsp;验证，使用以下这种方式修改 view/site/registration.php 视图。 
  </div> 
  <pre>&lt;?php
   use yii\bootstrap\ActiveForm;
   use yii\bootstrap\Html;
?&gt;
  
&lt;div class = "row"&gt;
   &lt;div class = "col-lg-5"&gt;  
   
      &lt;?php <b>$form = ActiveForm::begin(['id' =&gt; 'registration-form', 
         'enableAjaxValidation' =&gt; true]);</b> ?&gt;  
      &lt;?= $form-&gt;field($model, 'username') ?&gt;  
      &lt;?= $form-&gt;field($model, 'password')-&gt;passwordInput() ?&gt;  
      &lt;?= $form-&gt;field($model, 'email')-&gt;input('email') ?&gt;  
      &lt;?= $form-&gt;field($model, 'country') ?&gt;  
      &lt;?= $form-&gt;field($model, 'city') ?&gt;  
      &lt;?= $form-&gt;field($model, 'phone') ?&gt;  
      &lt;div class = "form-group"&gt;             
         &lt;?= Html::submitButton('提交', ['class' =&gt; 'btn btn-primary', 
            'name' =&gt; 'registration-button']) ?&gt;
      &lt;/div&gt;
      
      &lt;?php ActiveForm::end(); ?&gt;  
   &lt;/div&gt;
&lt;/div&gt;</pre> 
  <div>
    我们还应该准备服务器程序，以便它可以处理Ajax请求。 
  </div> 
  <div>
    第2步&nbsp;-&nbsp;修改&nbsp;SiteController&nbsp;中的&nbsp;actionRegistration()方法并 使用以下这种方式。 
  </div>   
  <pre>public function actionRegistration() { 
   $model = new RegistrationForm(); 
   if (Yii::$app-&gt;request-&gt;isAjax &amp;&amp; $model-&gt;load(Yii::$app-&gt;request-&gt;post())) { 
      Yii::$app-&gt;response-&gt;format = Response::FORMAT_JSON; 
      return ActiveForm::validate($model); 
   } 
   return $this-&gt;render('registration', ['model' =&gt; $model]); 
}</pre> 
  <div>
    第3步&nbsp;-&nbsp;现在访问URL&nbsp;=&gt;&nbsp;
   <a target="_blank" href="http://localhost:8080/index.php?r=site/registration">http://localhost:8080/index.php?r=site/registration</a>，你会发现，表单验证是通过AJAX请求完成的。 
  </div> 
  <img src="/uploads/tutorial/20160531/1-1605310H5332M.png" width="821" height="397" title="Yii AJAX验证" alt="Yii AJAX验证">
  <br> 
 </div>
 <br>      
</div></body></html>