<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Yii配置</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    配置用于创建新的对象或初始化现有的对象。构通常包括一个类名称和初始值的列表。它们还可以包括事件处理程序和行为的列表。 
  </div> 
 </div> 
 <div> 
  <div>
    以下是数据库配置的一个例子(在之前的例子中我们已经接触了)&nbsp;- 
  </div> 
  <pre>&lt;?php
   $config = [
      'class' =&gt; 'yii\db\Connection',
      'dsn' =&gt; 'mysql:host = localhost;dbname = mystudy',
      'username' =&gt; 'root',
      'password' =&gt; '',
      'charset' =&gt; 'utf8',
   ];
   $db = Yii::createObject($config);
?&gt;</pre> 
  <div>
    在&nbsp;Yii::createObject()&nbsp;方法需要一个配置数组，并基于配置类的名称来创建对象。 
  </div> 
  <div>
    配置的格式如下&nbsp;- 
  </div> 
  <pre>[
   //a fully qualified class name for the object being created
   'class' =&gt; 'ClassName',
   //initial values for the named property
   'propertyName' =&gt; 'propertyValue',
   //specifies what handlers should be attached to the object's events
   'on eventName' =&gt; $eventHandler,
   //specifies what behaviors should be attached to the object
   'as behaviorName' =&gt; $behaviorConfig,
]</pre> 
  <div>
    一个基本的应用程序模板的配置文件是组成复杂配置的一个小部分&nbsp;- 
  </div> 
  <pre>&lt;?php
   $params = require(__DIR__ . '/params.php');
   $config = [
      'id' =&gt; 'basic',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log'],
      'components' =&gt; [
         'request' =&gt; [
            // !!! insert a secret key in the following (if it is empty) - this 
               //is required by cookie validation
            'cookieValidationKey' =&gt; 'yfajskldfYiibai.com89dfad.dfasd#',
         ],
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'user' =&gt; [
            'identityClass' =&gt; 'app\models\User',
            'enableAutoLogin' =&gt; true,
         ],
         'errorHandler' =&gt; [
            'errorAction' =&gt; 'site/error',
         ],
         'mailer' =&gt; [
            'class' =&gt; 'yii\swiftmailer\Mailer',
            // send all mails to a file by default. You have to set
            // 'useFileTransport' to false and configure a transport
            // for the mailer to send real emails.
            'useFileTransport' =&gt; true,
         ],
         'log' =&gt; [
            'traceLevel' =&gt; YII_DEBUG ? 3 : 0,
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'urlManager' =&gt; [
            //'showScriptName' =&gt; false,
            //'enablePrettyUrl' =&gt; true,
            //'enableStrictParsing' =&gt; true,
            //'suffix' =&gt; '/'
         ],
         'db' =&gt; require(__DIR__ . '/db.php'),
      ],
      'modules' =&gt; [
         'admin' =&gt; [
            'class' =&gt; 'app\modules\admin\Admin',
         ],
      ],
      'params' =&gt; $params,
   ];
   if (YII_ENV_DEV) {
      // configuration adjustments for 'dev' environment
      $config['bootstrap'][] = 'debug';
      $config['modules']['debug'] = [
         'class' =&gt; 'yii\debug\Module',
      ];
      $config['bootstrap'][] = 'gii';
      $config['modules']['gii'] = [
         'class' =&gt; 'yii\gii\Module',
      ];
   }
   return $config;
?&gt;</pre> 
  <div>
    在上面的配置文件，我们没有定义类名。这是因为我们已经在&nbsp;index.php&nbsp;文件中定义它了&nbsp;- 
  </div> 
  <pre>&lt;?php
   //defining global constans
   defined('YII_DEBUG') or define('YII_DEBUG', true);
   defined('YII_ENV') or define('YII_ENV', 'dev');
   //register composer autoloader
   require(__DIR__ . '/../vendor/autoload.php');
   //include yii files
   require(__DIR__ . '/../vendor/yiisoft/yii2/Yii.php');
   //load application config
   $config = require(__DIR__ . '/../config/web.php');
   //create, config, and process request
   (new yii\web\Application($config))-&gt;run();
?&gt;</pre> 
  <div>
    许多小部件也使用配置，如下面的代码中所示。 
  </div>   
  <pre>&lt;?php
   NavBar::begin([
      'brandLabel' =&gt; 'My Company',
      'brandUrl' =&gt; Yii::$app-&gt;homeUrl,
      'options' =&gt; [
         'class' =&gt; 'navbar-inverse navbar-fixed-top',
      ],
   ]);
   echo Nav::widget([
      'options' =&gt; ['class' =&gt; 'navbar-nav navbar-right'],
      'items' =&gt; [
         ['label' =&gt; 'Home', 'url' =&gt; ['/site/index']],
         ['label' =&gt; 'About', 'url' =&gt; ['/site/about']],
         ['label' =&gt; 'Contact', 'url' =&gt; ['/site/contact']],
         Yii::$app-&gt;user-&gt;isGuest ?
         ['label' =&gt; 'Login', 'url' =&gt; ['/site/login']] :
         [
            'label' =&gt; 'Logout (' . Yii::$app-&gt;user-&gt;identity-&gt;username . ')',
            'url' =&gt; ['/site/logout'],
            'linkOptions' =&gt; ['data-method' =&gt; 'post']
         ],
      ],
   ]);
   NavBar::end();
?&gt;</pre> 
  <div>
    当配置过于复杂，常见的做法是创建一个新的&nbsp;PHP&nbsp;文件，其中让它返回一个数组。看看&nbsp;config/console.php&nbsp;配置文件就知道了&nbsp;- 
  </div> 
  <pre>&lt;?php
   Yii::setAlias('@tests', dirname(__DIR__) . '/tests');

   $params = require(__DIR__ . '/params.php');
   $db = require(__DIR__ . '/db.php');

   return [
      'id' =&gt; 'basic-console',
      'basePath' =&gt; dirname(__DIR__),
      'bootstrap' =&gt; ['log', 'gii'],
      'controllerNamespace' =&gt; 'app\commands',
      'modules' =&gt; [
         'gii' =&gt; 'yii\gii\Module',
      ],
      'components' =&gt; [
         'cache' =&gt; [
            'class' =&gt; 'yii\caching\FileCache',
         ],
         'log' =&gt; [
            'targets' =&gt; [
               [
                  'class' =&gt; 'yii\log\FileTarget',
                  'levels' =&gt; ['error', 'warning'],
               ],
            ],
         ],
         'db' =&gt; $db,
      ],
      'params' =&gt; $params,
   ];
?&gt;</pre> 
  <div>
    默认配置可以通过调用&nbsp;Yii::$container-&gt;set()&nbsp;方法来指定。通过&nbsp;Yii::CreateObject()方法调用它可以为应用创建默认配置指定的那些类的所有实例。 
  </div> 
  <div>
    例如，自定义&nbsp;yii\widgets\LinkPager&nbsp;类，这样所有链接页面将显示最多三个按钮，使用如下代码。 
  </div> 
  <pre>\Yii::$container-&gt;set('yii\widgets\LinkPager', [
   'maxButtonCount' =&gt; 3,
]);</pre> 
  <div> 
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>