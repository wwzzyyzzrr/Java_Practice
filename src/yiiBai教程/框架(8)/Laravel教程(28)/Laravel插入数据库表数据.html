<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Laravel插入数据库表数据</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    我们可以使用DB::insert()方法插入记录。insert()方法的语法如下表中所示。 
  </div> 
 </div> 
 <div> 
  <table border="1" cellpadding="2" cellspacing="0" style="font-size:14px;color:#313131;font-family:Verdana, Geneva, Tahoma,  Helvetica, background-color:inherit;"> 
   <tbody> 
    <tr> 
     <th style="border:1px solid #999999;background-color:#EEEEEE;"> 语法 </th> 
     <td style="border:1px solid #999999;background-color:inherit;"> bool insert(string $query, array $bindings = array()) </td> 
    </tr> 
    <tr> 
     <th style="border:1px solid #999999;background-color:#EEEEEE;"> 参数 </th> 
     <td style="border:1px solid #999999;background-color:inherit;"> 
      <ul style="background-color:inherit;"> 
       <li style="background-color:inherit;color:#000000;"> $query(string) –&nbsp;<span style="background-color:inherit;font-size:inherit;line-height:1.5;">在查询数据库中执行</span> </li> 
       <li style="background-color:inherit;color:#000000;"> $bindings(array) –&nbsp;<span style="background-color:inherit;font-size:inherit;line-height:1.5;">与查询绑定值</span> </li> 
      </ul> </td> 
    </tr> 
    <tr> 
     <th style="border:1px solid #999999;background-color:#EEEEEE;"> 返回值 </th> 
     <td style="border:1px solid #999999;background-color:inherit;"> bool </td> 
    </tr> 
    <tr> 
     <th style="border:1px solid #999999;background-color:#EEEEEE;"> 描述 </th> 
     <td style="border:1px solid #999999;background-color:inherit;"> 
      <div style="background-color:inherit;">
        在数据库上运行 INSERT 语句 
      </div> </td> 
    </tr> 
   </tbody> 
  </table> 
  <h2> 示例 </h2> 
  <div> 
   <strong>第1步</strong>-&nbsp;执行以下命令来创建一个名为-&nbsp;StudInsertController&nbsp;的控制器 
  </div> 
  <pre>php artisan make:controller StudInsertController</pre> 
  <div> 
   <strong>第2步</strong>&nbsp;-&nbsp;成功执行后，您会收到以下输出&nbsp;- 
  </div> 
  <img src="/uploads/tutorial/20160511/1-160511221PS51.png" alt="">
  <br> 
  <p style="text-align:justify;"> <strong>第3步</strong>&nbsp;-&nbsp;将以下代码复制到文件 -&nbsp;app/Http/Controllers/StudInsertController.php </p> 
  <pre>&lt;?php
namespace App\Http\Controllers;
use Illuminate\Http\Request;
use DB;
use App\Http\Requests;
use App\Http\Controllers\Controller;

class StudInsertController extends Controller {
   public function insertform(){
      return view('stud_create');
   }
	
   public function insert(Request $request){
      $name = $request-&gt;input('stud_name');
      DB::insert('insert into student (name,age) values(?,?)',[$name, $age]);
      echo "Record inserted successfully.&lt;br/&gt;";
      echo '&lt;a href = "/insert"&gt;Click Here&lt;/a&gt; to go back.';
   }
}&nbsp;</pre> 
  <p style="text-align:justify;"> <strong>第4步</strong>&nbsp;-&nbsp;创建一个名为&nbsp;&nbsp;resources/views/stud_create.php 的视图文件，并复制下面的代码到此文件中。 </p> 
  <p style="text-align:justify;"> resources/views/stud_create.php </p>   
  <pre class="prettyprint lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;添加 - 学生管理&lt;/title&gt;
   &lt;/head&gt;   
   &lt;body&gt;
      &lt;form action = "/create" method = "post"&gt;
         &lt;input type = "hidden" name = "_token" value = "&lt;?php echo csrf_token(); ?&gt;"&gt;
      
         &lt;table&gt;
            &lt;tr&gt;
               &lt;td&gt;名字：&lt;/td&gt;
               &lt;td&gt;&lt;input type='text' name='stud_name' /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
               &lt;td&gt;年龄：&lt;/td&gt;
               &lt;td&gt;&lt;input type='text' name='stud_age' /&gt;&lt;/td&gt;
            &lt;/tr&gt;
            &lt;tr&gt;
               &lt;td colspan = '2'&gt;
                  &lt;input type = 'submit' value = "添加学生"/&gt;
               &lt;/td&gt;
            &lt;/tr&gt;
         &lt;/table&gt;
			
      &lt;/form&gt;
   
   &lt;/body&gt;
&lt;/html&gt;</pre> 
  <br> 
  <div> 
   <strong>第5步</strong>&nbsp;-&nbsp;添加以下行到&nbsp;app/Http/routes.php&nbsp;文件。 
  </div> 
  <p style="text-align:justify;"> app/Http/routes.php </p> 
  <pre>Route::get('insert','StudInsertController@insertform');
Route::post('create','StudInsertController@insert');</pre> 
  <div> 
   <strong>第6步&nbsp;</strong>-&nbsp;请访问以下网址以将数据记录插入数据库中。 
  </div> 
  <p style="text-align:justify;"> http://localhost:8000/insert </p> 
  <div> 
   <strong>第7步</strong>&nbsp;- 结果显示如下图所示。 
  </div> 
  <img src="/uploads/tutorial/20160511/1-160511221S4302.png" alt="">
  <br> 
 </div> 
 <div> 
  <br> 点击“添加学生”后，结果如下图所示：
  <br> 
  <img src="/uploads/tutorial/20160511/1-160511221U32W.png" alt="">
  <br> 
 </div> 
 <div>
   数据库 student 表中的记录如下： 
 </div> 
 <div> 
  <img src="/uploads/tutorial/20160511/1-160511221910K5.png" alt="">
  <br> 
 </div> 
 <div> 
  <br> 
 </div>
 <br>      
</div></body></html>