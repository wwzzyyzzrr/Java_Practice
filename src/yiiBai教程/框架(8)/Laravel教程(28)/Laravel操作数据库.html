<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Laravel操作数据库</h1><div style="width:100%;float:left;" class="article-content">   
 <h2> 连接到数据库 </h2> 
 <div> 
  <div>
    Laravel使用和操作数据库都很容易处理。&nbsp;Laravel目前支持以下4个数据库- 
  </div> 
  <ul> 
   <li> MySQL </li> 
   <li> Postgres </li> 
   <li> SQLite </li> 
   <li> SQL Server </li> 
  </ul> 
  <p style="text-align:justify;"> 数据库查询可以使用原始SQL，查询生成器和ORM来触发。要了解Laravel所有的 CRUD(创建，读取，更新，删除)操作，我们这里将用简单的学生管理系统来演示说明。 </p> 
  <div>
    配置在&nbsp;config/database.php&nbsp;文件，如下图所示：
   <br> 
   <img src="/uploads/tutorial/20160511/1-160511221023202.png" alt=""> 
  </div> 
  <div>
    如果出现类似以下的错误， 
   <pre class="prettyprint lang-bsh">PDOException in Connector.php line 55:SQLSTATE[HY000] [1045] Access denied for user 'homestead'@'localhost' (using password: YES)</pre> 则需要配置 &nbsp;D:\laravel\.env&nbsp;文件，如下：
   <br> 
  </div> 
  <div> 
   <img src="/uploads/tutorial/20160511/1-1605112211029B.png" alt="">
   <br> 
  </div> 
  <div>
    并重新启动服务：
   <br> 
  </div> 
  <div> 
   <pre class="prettyprint lang-bsh">D:\laravel&gt;php artisan serve</pre> 
  </div> 
  <div>
    数据库中的MySQL创建&nbsp;college&nbsp;数据库和表结构所示如下。
   <br> 
  </div> 
  <p style="text-align:justify;"> <strong>数据库 − college</strong> </p> 
  <p style="text-align:justify;"> <strong>数据表 − student</strong> </p> 
  <table border="1" cellpadding="2" cellspacing="0" style="text-align:center;"> 
   <tbody> 
    <tr> 
     <th style="border:1px solid #999999;"> 
      <div>
        列名 
      </div> </th> 
     <th style="border:1px solid #999999;"> 
      <div>
        列数据类型 
      </div> </th> 
     <th style="border:1px solid #999999;"> 其它/备注 </th> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> id </td> 
     <td style="border:1px solid #999999;"> int(11) </td> 
     <td style="border:1px solid #999999;"> Primary key | Auto increment </td> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> name </td> 
     <td style="border:1px solid #999999;"> varchar(64) </td> 
     <td style="border:1px solid #999999;"> 名字 </td> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> age </td> 
     <td style="border:1px solid #999999;"> 
      <div>
        smallint(2) 
      </div> </td> 
     <td style="border:1px solid #999999;"> 
      <div>
        年龄 
      </div> </td> 
    </tr> 
   </tbody> 
  </table> 
  <br> 
  <div>
    创建表语句如下： 
  </div> 
  <div> 
   <div> 
    <pre class="prettyprint lang-bsh">CREATE TABLE `student` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL DEFAULT '',
  `age` smallint(2) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;</pre> 
   </div> 
  </div> 
  <div>
    我们将看到如何使用Laravel在数据库中添加，删除，更新和检索 student 表的记录。 
  </div> 
  <table border="1" cellpadding="2" cellspacing="0" width="100%"> 
   <tbody> 
    <tr> 
     <th style="border:1px solid #999999;"> S.No. </th> 
     <th style="border:1px solid #999999;text-align:center;"> 
      <div>
        记录和说明 
      </div> </th> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> 1 </td> 
     <td style="border:1px solid #999999;"> <a target="_blank" href="http://www.yiibai.com/laravel/insert_records.html">添加或插入记录</a> 
      <div>
        使用DB::insert()方法插入记录 
      </div> </td> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> 2 </td> 
     <td style="border:1px solid #999999;"> <a target="_blank" href="http://www.yiibai.com/laravel/retrieve_records.html">检索记录</a> 
      <div>
        配置数据库之后，使用&nbsp;DB::select()&nbsp;方法检索记录 
      </div> </td> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> 3 </td> 
     <td style="border:1px solid #999999;"> <a target="_blank" href="http://www.yiibai.com/laravel/update_records.html">更新记录</a> 
      <div>
        使用DB::update()方法更新记录 
      </div> </td> 
    </tr> 
    <tr> 
     <td style="border:1px solid #999999;"> 4 </td> 
     <td style="border:1px solid #999999;"> <a target="_blank" href="http://www.yiibai.com/laravel/delete_records.html">删除记录</a> 
      <div>
        使用DB::delete()方法来删除记录 
      </div> </td> 
    </tr> 
   </tbody> 
  </table> 
 </div>
 <br>      
</div></body></html>