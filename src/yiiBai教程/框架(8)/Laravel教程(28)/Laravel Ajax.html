<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Laravel Ajax</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   Ajax (异步的 JavaScript 和 XML)是一套运用在客户端用来创建异步Web应用程序的Web开发技术。&nbsp;在视图文件导入 jQuery 库使用&nbsp;ajax来发送并从服务器接收数据。&nbsp;在服务器端，您可以使用&nbsp;response()&nbsp;函数发送响应客户端，以及发送JSON格式的响应可以使用&nbsp;JSON()函数来接收响应的数据。 
 </div> 
 <div> 
  <h2> json()函数语法 </h2> 
  <pre>json(string|array $data = array(), int $status = 200, array $headers = array(), int $options)</pre> 
  <h3> 示例 </h3> 
  <div>
    第1步&nbsp;-&nbsp;创建一个名为&nbsp;resources/views/message.php&nbsp;的视图文件，并复制下面的代码到此文件中。 
  </div> 
  <pre>&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;Laravel Ajax示例&lt;/title&gt;
      
      &lt;script src = "https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"&gt;
      &lt;/script&gt;
      
      &lt;script&gt;
         function getMessage(){
            $.ajax({
               type:'get',
               url:'/getmsg',
               data:'_token = &lt;?php echo csrf_token() ?&gt;',
               success:function(data){
                  $("#msg").html(data.msg);
               }
            });
         }
      &lt;/script&gt;
   &lt;/head&gt;
   
   &lt;body&gt;
      &lt;div id = 'msg'&gt;这条消息将会使用Ajax来替换.
         点击下面的按钮来替换此消息.&lt;/div&gt;
      &lt;?php
         echo Form::button('替换消息',['onClick'=&gt;'getMessage()']);
      ?&gt;
   &lt;/body&gt;

&lt;/html&gt;</pre> 
  <div>
    第2步&nbsp;-&nbsp;通过执行以下命令创建一个名为&nbsp;AjaxController&nbsp;的控制器。 
  </div> 
  <pre>php artisan make:controller AjaxController</pre> 
  <div>
    第3步&nbsp;-&nbsp;成功执行后，您会收到以下输出&nbsp;-
   <br> 
   <img src="/uploads/tutorial/20160516/1-1605162141551D.png" alt="">
   <br> 
  </div> 
  <div>
    第4步&nbsp;-&nbsp;复制下面的代码到文件&nbsp;-&nbsp;app/Http/Controllers/AjaxController.php 
  </div> 
  <p> app/Http/Controllers/AjaxController.php </p>   
  <pre>&lt;?php
namespace App\Http\Controllers;
use Illuminate\Http\Request;
use App\Http\Requests;
use App\Http\Controllers\Controller;

class AjaxController extends Controller {
   public function index(){
      $msg = "这是一条简单的消息.";
      return response()-&gt;json(array('msg'=&gt; $msg), 200);
   }
}</pre> 
  <div>
    第5步&nbsp;-&nbsp;添加以下行到文件&nbsp;-&nbsp;app/Http/routes.php 
  </div> 
  <p> app/Http/routes.php </p> 
  <pre>Route::get('ajax',function(){
   return view('message');
});
Route::get('/getmsg','AjaxController@index');</pre> 
  <div>
    第6步&nbsp;-&nbsp;请访问以下网址来测试Ajax功能。 
  </div> 
  <p> <em>http://localhost:8000/ajax</em> </p> 
  <div>
    第7步&nbsp;-&nbsp;这将被重定向到一个页面，你会看到一条消息，如下面的图片所示。
   <br> 
   <img src="/uploads/tutorial/20160516/1-160516214333131.png" alt="">
   <br> 
  </div> 
  <div>
    第8步&nbsp;-&nbsp;为点击按钮后显示输出如下图所示。
   <br> 
   <img src="/uploads/tutorial/20160516/1-160516214350I2.png" alt="">
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>