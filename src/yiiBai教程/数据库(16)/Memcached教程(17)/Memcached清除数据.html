<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Memcached清除数据</h1><div style="width:100%;float:left;" class="article-content">   
 <p> Memcached的 flush_all 命令用于删除memcached服务器中的所有数据(键值对)。它接受一个叫做time可选参数，表示这个时间后的所有memcached数据会被清除。</p> 
 <h2> 语法</h2> 
 <p> memcached 的 flush_all 命令的基本语法如下所示：</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">flush_all [time] [noreply]</span></pre> 
 <p> 上面的命令总是返回OK</p> 
 <h3> 示例</h3> 
 <p> 在下面给出的例子中，我们存储一些数据到 memcached 服务器，然后清除所有数据。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
set yiibai 0 900 9
memcached
STORED
get yiibai
VALUE yiibai 0 9
memcached
END
flush_all
OK
get yiibai
END</pre> 
 <h2> 使用Java应用程序清除数据</h2> 
 <p> 要清除memcached服务器的数据，则需要使用memcached的flush&nbsp;方法。&nbsp;</p> 
 <h3> 示例</h3> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
import net.spy.memcached.MemcachedClient;
public class MemcachedJava {
   public static void main(String[] args) {
      //Connecting to Memcached server on localhost
      MemcachedClient mcc = new MemcachedClient(new InetSocketAddress("127.0.0.1", 11211));
      System.out.println("Connection to server sucessfully");
      System.out.println("set status:"+mcc.set("count", 900, "5").isDone());
      //Get value from cache
      System.out.println("Get from Cache:"+mcc.get("count"));
      // now increase the stored value
      System.out.println("Increment value:"+mcc.incr("count", 2));
      // now decrease the stored value
      System.out.println("Decrement value:"+mcc.decr("count", 1));
      // now get the final stored value
      System.out.println("Get from Cache:"+mcc.get("count"));
      // now clear all this data
      System.out.println("Clear data:"+mcc.flush().isDone());
   }
}</pre> 
 <h3> 输出</h3> 
 <p> 当上述程序编译和运行，它提供了以下的输出：</p>   
 <pre class="result prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
Connection to server successfully
set status:true
Get from Cache:5
Increment value:7
Decrement value:6
Get from Cache:6
Clear data:true</pre> 
 <br>      
</div></body></html>