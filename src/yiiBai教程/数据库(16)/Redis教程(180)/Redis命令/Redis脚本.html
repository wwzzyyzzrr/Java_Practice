<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Redis脚本</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Redis脚本用于使用Lua解释器来执行脚本。从<code>Redis 2.6.0</code>版开始内置到Redis中。使用脚本的命令是<strong>EVAL</strong>命令。</p> 
 <h2 id="h2-u8BEDu6CD5"><a name="语法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>语法</h2>
 <p>以下是<code>EVAL</code>命令的基本语法。</p> 
 <pre><code class="lang-shell">redis 127.0.0.1:6379&gt; EVAL script numkeys key [key ...] arg [arg ...]
</code></pre> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>以下示例说明了Redis脚本的工作原理。</p> 
 <pre><code class="lang-shell">redis 127.0.0.1:6379&gt; EVAL "return {KEYS[1],KEYS[2],ARGV[1],ARGV[2]}" 2 key1 
key2 first second  
1) "key1" 
2) "key2" 
3) "first" 
4) "second"
</code></pre> 
 <h2 id="h2-redis-"><a name="Redis事务命令" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Redis事务命令</h2>
 <p>下表列出了与Redis脚本相关的一些基本命令。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>序号</th> 
    <th>命令</th> 
    <th>说明</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_eval.html" title="EVAL script numkeys key [key ...] arg [arg ...]">EVAL script numkeys key [key …] arg [arg …]</a></td> 
    <td>执行一个Lua脚本。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_evalsha.html" title="EVALSHA sha1 numkeys key [key ...] arg [arg ...]">EVALSHA sha1 numkeys key [key …] arg [arg …]</a></td> 
    <td>执行一个Lua脚本。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_script_exists.html" title="SCRIPT EXISTS script [script ...]">SCRIPT EXISTS script [script …]</a></td> 
    <td>检查脚本缓存中是否存在脚本。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_script_flush.html" title="SCRIPT FLUSH">SCRIPT FLUSH</a></td> 
    <td>从脚本缓存中删除所有脚本。</td> 
   </tr> 
   <tr> 
    <td>5</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_script_kill.html" title="SCRIPT KILL">SCRIPT KILL</a></td> 
    <td>杀死当前正在执行的脚本。</td> 
   </tr> 
   <tr> 
    <td>6</td> 
    <td><a target="_blank" href="http://www.yiibai.com/redis/scripting_script_load.html" title="SCRIPT LOAD script">SCRIPT LOAD script</a></td> 
    <td>将指定的Lua脚本加载到脚本缓存中。</td> 
   </tr> 
   <tr> 
    <td></td> 
    <td></td> 
   </tr> 
  </tbody> 
 </table>
 <br>      
</div></body></html>