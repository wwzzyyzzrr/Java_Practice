<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">SQL克隆表</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 可能有一种情况，当你需要一个表的精确副本，CREATE TABLE ... SELECT... 不适合应用到你的目的，因为副本必须包含相同的索引，默认值等等。</p> 
 <p> 如果正在使用MySQL RDBMS，你可以处理这种情况通过以下步骤：</p> 
 <ul> 
  <li> <p> 使用SHOW CREATE TABLE命令来获得一个CREATE TABLE语句指定源表的结构，索引和所有其它。</p> </li> 
  <li> <p> 修改语句表名更改为克隆表并执行该语句。这样，您将有准确克隆表。</p> </li> 
  <li> <p> 或者，如果你需要复制表的内容，发出一个INSERT INTO ... SELECT语句。</p> </li> 
 </ul> 
 <h2> 示例:</h2> 
 <p> 试试下面的例子来创建TUTORIALS_TBL 其结构如下克隆表：</p> 
 <h2> 步骤 1:</h2> 
 <p> 获取有关表的完整结构。</p> 
 <pre class="prettyprint" style="border-radius: 0px; font-size: 12px; overflow: auto;">
SQL&gt; SHOW CREATE TABLE TUTORIALS_TBL G;
*************************** 1. row ***************************
       Table: TUTORIALS_TBL
Create Table: CREATE TABLE `TUTORIALS_TBL` (
  `tutorial_id` int(11) NOT NULL auto_increment,
  `tutorial_title` varchar(100) NOT NULL default '',
  `tutorial_author` varchar(40) NOT NULL default '',
  `submission_date` date default NULL,
  PRIMARY KEY  (`tutorial_id`),
  UNIQUE KEY `AUTHOR_INDEX` (`tutorial_author`)
) TYPE=MyISAM
1 row in set (0.00 sec)</pre> 
 <h2> 步骤 2:</h2> 
 <p> 重命名该表，并创建另一个表。</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>  
 <pre class="prettyprint" style="border-radius: 0px; font-size: 12px; overflow: auto;">
SQL&gt; CREATE TABLE `CLONE_TBL` (
  -&gt; `tutorial_id` int(11) NOT NULL auto_increment,
  -&gt; `tutorial_title` varchar(100) NOT NULL default '',
  -&gt; `tutorial_author` varchar(40) NOT NULL default '',
  -&gt; `submission_date` date default NULL,
  -&gt; PRIMARY KEY  (`tutorial_id`),
  -&gt; UNIQUE KEY `AUTHOR_INDEX` (`tutorial_author`)
-&gt; ) TYPE=MyISAM;
Query OK, 0 rows affected (1.80 sec)</pre> 
 <h2> 步骤 3:</h2> 
 <p> 执行步骤2后，会在数据库中复制表。 如果你想从旧表中复制数据，那么可以通过使用INSERT INTO ... SELECT语句中做到这一点。</p> 
 <pre class="prettyprint" style="border-radius: 0px; font-size: 12px; overflow: auto;">
SQL&gt; INSERT INTO CLONE_TBL (tutorial_id,
    -&gt;                        tutorial_title,
    -&gt;                        tutorial_author,
    -&gt;                        submission_date)
    -&gt; SELECT tutorial_id,tutorial_title,
    -&gt;        tutorial_author,submission_date,
    -&gt; FROM TUTORIALS_TBL;
Query OK, 3 rows affected (0.07 sec)
Records: 3  Duplicates: 0  Warnings: 0</pre> 
 <p> 最后，你将有准确克隆表。</p> 
 <br>      
</div></body></html>