<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Firebase使用Github账号登录</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将介绍如何在Firebase中设置Github身份验证，使用Github账号认证登录。</p> 
 <p><strong>第1步</strong> - 启用Github身份验证<br>打开Firebase信息中心，然后点击左侧菜单中的身份验证。 要打开可用方法的列表，需要在标签菜单中单击<strong>登录方法</strong>。</p> 
 <p>现在可以从列表中选择Github，启用它并保存。参考下图 -<br><img src="http://www.yiibai.com/uploads/images/201802/0502/303140228_89753.png" alt=""></p> 
 <p><strong>第2步</strong> - 创建Github应用程序</p> 
 <p>按照此链接创建GitHub应用程序。 需要将Firebase中的回调网址复制到授权回调网址字段中。 创建应用程序后，需要将客户端密钥和客户端密钥从GitHub应用复制到Firebase。<br><img src="http://www.yiibai.com/uploads/images/201802/0502/395140236_38795.png" alt=""></p> 
 <p><strong>第2步</strong> - 创建登录按钮<br>创建一个文件:<code>index.html</code>，并将添加两个按钮。参考代码如下 - </p> 
 <pre><code class="lang-html">&lt;button onclick = "githubSignin()"&gt;使用Github账号登录&lt;/button&gt;
&lt;button onclick = "githubSignout()"&gt;Github账号注销&lt;/button&gt;
</code></pre> 
 <p><strong>第3步</strong> - 登录和退出<br>在这一步中，我们将创建用于登录和注销的两个函数:<code>githubSignin</code>和<code>githubSignout</code>。 这里将使用<code>signInWithPopup()</code>和<code>signOut()</code>函数。</p> 
 <p><strong>示例</strong></p> 
 <p>让我们来看看下面的例子。参考函数的实现 - </p> 
 <pre><code class="lang-js">var provider = new firebase.auth.GithubAuthProvider();

function githubSignin() {
   firebase.auth().signInWithPopup(provider)

   .then(function(result) {
      var token = result.credential.accessToken;
      var user = result.user;

      console.log(token)
      console.log(user)
   }).catch(function(error) {
      var errorCode = error.code;
      var errorMessage = error.message;

      console.log(error.code)
      console.log(error.message)
   });
}

function githubSignout(){
   firebase.auth().signOut()

   .then(function() {
      console.log('Signout successful!')
   }, function(error) {
      console.log('Signout failed')
   });
}
</code></pre> 
 <p>完整的代码，如下所示 - </p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
        &lt;title&gt;FireBase Example&lt;/title&gt;
        &lt;script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"&gt;&lt;/script&gt;
        &lt;script&gt;
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyAOSPYpgn7T_bKa6VbCaSeQlsw-3p3zqDs",
            authDomain: "yiibai-firebase.firebaseapp.com",
            databaseURL: "https://yiibai-firebase.firebaseio.com/",
            projectId: "yiibai-firebase",
            storageBucket: "yiibai-firebase.appspot.com",
            messagingSenderId: "334522625008"
          };
          firebase.initializeApp(config);

        var provider = new firebase.auth.GithubAuthProvider();

        function githubSignin() {
           firebase.auth().signInWithPopup(provider)

           .then(function(result) {
              var token = result.credential.accessToken;
              var user = result.user;

              console.log(token)
              console.log(user)
           }).catch(function(error) {
              var errorCode = error.code;
              var errorMessage = error.message;

              console.log(error.code)
              console.log(error.message)
           });
        }

        function githubSignout(){
           firebase.auth().signOut()

           .then(function() {
              console.log('Signout successful!')
           }, function(error) {
              console.log('Signout failed')
           });
        }
        &lt;/script&gt;
    &lt;/head&gt;
&lt;body&gt;
    &lt;button onclick = "githubSignin()"&gt;使用Github账号登录&lt;/button&gt;
    &lt;button onclick = "githubSignout()"&gt;Github账号注销&lt;/button&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>刷新页面后，可以点击<strong>使用Github账号登录</strong>按钮触发Github弹出窗口。 如果登录成功，开发者控制台将登录指定的用户账号。有关更新详细的账号认证信息，请查看文档: <a target="_blank" href="https://developer.github.com/v3/oauth/">https://developer.github.com/v3/oauth/</a> 。</p> 
 <p>也可以点击<strong>Github账号注销</strong>按钮从应用程序注销。控制台将显示确认注销成功。</p>
 <br>      
</div></body></html>