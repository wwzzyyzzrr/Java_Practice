<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Firebase查询和排序</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Firebase提供了多种排序数据的方式。 在本章中，我们将学习简单的查询示例。 这里将使用前面章节中的相同数据。数据记录如下所示 -<br><img src="http://www.yiibai.com/uploads/images/201802/0402/850100239_88763.png" alt=""></p> 
 <h2 id="h2-u6309u5B50u5217u6392u5E8F"><a name="按子列排序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>按子列排序</h2>
 <p>要按<code>name</code>列排序数据，可以使用下面的代码。</p> 
 <p><strong>示例</strong></p> 
 <p>让我们来看看下面的例子。</p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
        &lt;title&gt;FireBase Example&lt;/title&gt;
        &lt;script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"&gt;&lt;/script&gt;
        &lt;script&gt;
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyAOSPYpgn7T_bKa6VbCaSeQlsw-3p3zqDs",
            authDomain: "yiibai-firebase.firebaseapp.com",
            databaseURL: "https://yiibai-firebase.firebaseio.com/",
            projectId: "yiibai-firebase",
            storageBucket: "yiibai-firebase.appspot.com",
            messagingSenderId: "334522625008"
          };
          firebase.initializeApp(config);
          var playersRef = firebase.database().ref("players/");

            playersRef.orderByChild("name").on("child_added", function(data) {
               console.log(data.val().name);
            });
        &lt;/script&gt;
    &lt;/head&gt;
&lt;body&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 -<br><img src="http://www.yiibai.com/uploads/images/201802/0402/239100234_35264.png" alt=""></p> 
 <h2 id="h2-u6309u7D22u5F15u6392u5E8F"><a name="按索引排序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>按索引排序</h2>
 <p>我们可以通过类似的方式:按索引键来排序数据。</p> 
 <p><strong>示例</strong></p> 
 <p>让我们看看下面的一个例子。</p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
        &lt;title&gt;FireBase Example&lt;/title&gt;
        &lt;script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"&gt;&lt;/script&gt;
        &lt;script&gt;
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyAOSPYpgn7T_bKa6VbCaSeQlsw-3p3zqDs",
            authDomain: "yiibai-firebase.firebaseapp.com",
            databaseURL: "https://yiibai-firebase.firebaseio.com/",
            projectId: "yiibai-firebase",
            storageBucket: "yiibai-firebase.appspot.com",
            messagingSenderId: "334522625008"
          };
          firebase.initializeApp(config);
          var playersRef = firebase.database().ref("players/");

            playersRef.orderByKey().on("child_added", function(data) {
               console.log(data.key);
            });
        &lt;/script&gt;
    &lt;/head&gt;
&lt;body&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 -<br><img src="http://www.yiibai.com/uploads/images/201802/0402/583100237_43179.png" alt=""></p> 
 <h2 id="h2-u6309u503Cu6392u5E8F"><a name="按值排序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>按值排序</h2>
 <p>我们也可以按值排序数据。 在Firebase中添加一个评级(<code>ratings</code>)集合。如下图所示 -<br><img src="http://www.yiibai.com/uploads/images/201802/0402/233100243_98638.png" alt=""></p> 
 <p>现在可以按照每个运动员的值来排序数据。参考下面的例子。</p>   
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html lang="zh"&gt;
    &lt;head&gt;
        &lt;meta charset="utf-8" /&gt;
        &lt;title&gt;FireBase Example&lt;/title&gt;
        &lt;script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"&gt;&lt;/script&gt;
        &lt;script&gt;
          // Initialize Firebase
          var config = {
            apiKey: "AIzaSyAOSPYpgn7T_bKa6VbCaSeQlsw-3p3zqDs",
            authDomain: "yiibai-firebase.firebaseapp.com",
            databaseURL: "https://yiibai-firebase.firebaseio.com/",
            projectId: "yiibai-firebase",
            storageBucket: "yiibai-firebase.appspot.com",
            messagingSenderId: "334522625008"
          };
          firebase.initializeApp(config);
         var ratingRef = firebase.database().ref("ratings/");

            ratingRef.orderByValue().on("value", function(data) {               
               data.forEach(function(data) {
                  console.log(" " + data.key + " 等级排序是:" + data.val());
               });

            });
        &lt;/script&gt;
    &lt;/head&gt;
&lt;body&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 -<br><img src="http://www.yiibai.com/uploads/images/201802/0402/453100245_47418.png" alt=""></p>
 <br>      
</div></body></html>