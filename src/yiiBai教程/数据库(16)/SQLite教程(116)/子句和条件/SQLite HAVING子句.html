<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">SQLite HAVING子句</h1><div style="width:100%;float:left;" class="article-content">   
 <p>SQLite <code>HAVING</code>子句用于指定过滤分组的结果，并作为最终查询结果的条件。 <code>WHERE</code>子句将条件放在选定的列上，而<code>HAVING</code>子句指定的条件是由<code>GROUP BY</code>子句创建的列分组上(使用<code>HAVING</code>子句条件一定要作用在由<code>GROUP BY</code>子句指定列上)。</p> 
 <p>SELECT查询中<code>HAVING</code>子句的位置：</p> 
 <pre><code class="lang-sql">SELECT  
FROM  
WHERE  
GROUP BY  
HAVING  
ORDER BY
</code></pre> 
 <p><strong>语法</strong></p> 
 <pre><code class="lang-sql">SELECT column1, column2  
FROM table1, table2  
WHERE [ conditions ]  
GROUP BY column1, column2  
HAVING [ conditions ]  
ORDER BY column1, column2
</code></pre> 
 <p>下面举个例子来演示如何使用<code>HAVING</code>子句。假设有一个名为<code>student</code>的表，并具有以下数据：</p> 
 <pre><code class="lang-sql">sqlite&gt; select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite&gt;
</code></pre> 
 <p><strong>示例1：</strong></p> 
 <p>下面查询<code>name</code>的数量小于<code>2</code>的所有记录，在查询之前，先来查询看看每个名字的数量 - </p> 
 <pre><code class="lang-sql">-- 名字的数量
SELECT name, count(name) as total_number FROM student GROUP BY name;

-- `name`的数量小于`2`的所有记录
SELECT name, count(name) as total_number FROM student GROUP BY NAME HAVING COUNT(NAME) &lt; 2;
</code></pre> 
 <p>执行上面语句，得到结果如下 - </p> 
 <pre><code class="lang-sql">-- 所有记录
sqlite&gt; select * from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite&gt;
sqlite&gt; 
-- 每个名字的数量
sqlite&gt; SELECT name, count(name) as total_number FROM student GROUP BY name;
Avgsu|1
Javasu|1
Linsu|2
Maxsu|2
Minsu|2
Sqlsu|1
-- 查询数量小于2的名字
sqlite&gt; SELECT name, count(name) as total_number FROM student GROUP BY NAME HAVING total_number &lt; 2;
Avgsu|1
Javasu|1
Sqlsu|1
sqlite&gt;
</code></pre> 
 <p><strong>示例2：</strong></p> 
 <p>下面查询<code>address</code>的数量大于等于<code>2</code>的所有记录，在查询之前，先来查询看看每个地址的数量 - </p>   
 <pre><code class="lang-sql">sqlite&gt; SELECT address, count(address) as total_number FROM student GROUP BY address ;
Beijing|1
Guangzhou|2
Haikou|2
Shanghai|1
Shengzhen|2
Shenzhen|1
sqlite&gt; SELECT address, count(address) as total_number FROM student GROUP BY address HAVING total_number &gt;= 2;
Guangzhou|2
Haikou|2
Shengzhen|2
sqlite&gt;
</code></pre>
 <br>      
</div></body></html>