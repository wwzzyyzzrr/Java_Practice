<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">SQLite左连接</h1><div style="width:100%;float:left;" class="article-content">   
 <p>类似于<code>INNER JOIN</code>子句，<code>LEFT JOIN</code>子句是SELECT语句的可选子句。可以使用<code>LEFT JOIN</code>子句来查询来自多个相关表的数据。</p> 
 <p>假设有两个表：<code>A</code>和<code>B</code></p> 
 <ul> 
  <li><code>A</code>表有<code>m</code>和<code>f</code>字段。</li>
  <li><code>B</code>表有<code>n</code>和<code>f</code>字段。</li>
 </ul> 
 <p>要使用<code>LEFT JOIN</code>子句执行<code>A</code>和<code>B</code>之间的连接，请使用以下语句：</p> 
 <pre><code class="lang-sql">SELECT
 m, n
FROM A
LEFT JOIN B ON A.f = B.f
WHERE search_condition;
</code></pre> 
 <p>表达式<code>A.f = B.f</code>是条件表达式。 除了等于(<code>=</code>)运算符之外，还可以使用大于(<code>&gt;</code>)，小于(<code>&lt;</code>)等的其他比较运算符。</p> 
 <p>该语句返回一个结果集，其中包含：</p> 
 <ul> 
  <li><code>A</code>表中的行(左表)在<code>B</code>表中具有相应的行。</li>
  <li><code>A</code>表中的行存在，但在<code>B</code>表中不存的行使用<code>NULL</code>值填充。</li>
 </ul> 
 <p>换句话说，<code>A</code>表中的所有行都包含在结果集中，无论<code>B</code>表中是否有匹配的行，如果<code>B</code>表中不匹配则使用<code>NULL</code>值填充。</p> 
 <p>如果语句中有<code>WHERE</code>子句，那么在<code>LEFT JOIN</code>子句的匹配完成之后，<code>WHERE</code>子句中的<code>search_condition</code>将被应用。</p> 
 <p>请参考<code>A</code>表和<code>B</code>表之间的<code>LEFT JOIN</code>子句，如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/3105/902100618_18282.png" alt=""></p> 
 <p><code>A</code>表中的所有行都包含在结果集中。</p> 
 <p>因为第二行(a2,2)在<code>B</code>表中没有相应的行，所以<code>LEFT JOIN</code>子句创建一个填充有<code>NULL</code>值的假行。</p> 
 <p>以下图说明了<code>LEFT JOIN</code>子句，黄色部分为最终查询结果集 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/3105/311100619_40978.png" alt=""></p> 
 <p>假设有两个表：<code>class</code> 和 <code>student</code>，分别表示班级和学生。其数据如下 - </p>   
 <pre><code class="lang-sql">sqlite&gt; select id,class_name,student_id from class;
1|网络工程-001班|1
2|网络工程-002班|2
3|网络工程-003班|3
4|网络工程-004班|4
sqlite&gt;
sqlite&gt; select id,name,age,address,fees from student;
1|Maxsu|27|Shengzhen|20000.0
2|Minsu|25|Beijing|15000.0
3|Avgsu|23|Shanghai|2000.0
4|Linsu|25|Guangzhou|65000.0
5|Sqlsu|26|Haikou|25000.0
6|Javasu|21|Shengzhen|18000.0
7|Linsu|27|Haikou|10000.0
8|Minsu|23|Guangzhou|5000.0
9|Maxsu|23|Shenzhen|9000.0
sqlite&gt;
</code></pre> 
 <p>现在使用 <code>left join</code>查询每个学生所在的班级信息 - </p> 
 <pre><code class="lang-sql">select name,age,address,fees,class_name from student left join class on student.id=class.student_id where student.id &gt; 0;
</code></pre> 
 <p>执行上面语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">sqlite&gt;  select student.id,name,age,address,fees,class_name from student left join class on student.id=class.student_id where student.id &gt; 0;
1|Maxsu|27|Shengzhen|20000.0|网络工程-001班
2|Minsu|25|Beijing|15000.0|网络工程-002班
3|Avgsu|23|Shanghai|2000.0|网络工程-003班
4|Linsu|25|Guangzhou|65000.0|网络工程-004班
5|Sqlsu|26|Haikou|25000.0|
6|Javasu|21|Shengzhen|18000.0|
7|Linsu|27|Haikou|10000.0|
8|Minsu|23|Guangzhou|5000.0|
9|Maxsu|23|Shenzhen|9000.0|
sqlite&gt;
</code></pre>
 <br>      
</div></body></html>