<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">PostgreSQL索引</h1><div style="width:100%;float:left;" class="article-content">   
 <p><strong>什么是索引？</strong></p> 
 <p>索引是用于加速从数据库检索数据的特殊查找表。数据库索引类似于书的索引(目录)。 索引为出现在索引列中的每个值创建一个条目。</p> 
 <h2 id="h2-u6570u636Eu5E93u7D22u5F15u7684u91CDu8981u7279u70B9"><a name="数据库索引的重要特点" class="reference-link"></a><span class="header-link octicon octicon-link"></span>数据库索引的重要特点</h2>
 <ul> 
  <li><p>索引使用<code>SELECT</code>查询和<code>WHERE</code>子句加速数据输出，但是会减慢使用<code>INSERT</code>和<code>UPDATE</code>语句输入的数据。</p> </li>
  <li><p>您可以在不影响数据的情况下创建或删除索引。</p> </li>
  <li>可以通过使用<code>CREATE INDEX</code>语句创建索引，指定创建索引的索引名称和表或列名称。</li>
  <li>还可以创建一个唯一索引，类似于唯一约束，该索引防止列或列的组合上有一个索引重复的项。</li>
 </ul> 
 <h2 id="h2-postgresql-"><a name="PostgreSQL创建索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>PostgreSQL创建索引</h2>
 <p><code>CREATE INDEX</code>语句用于创建PostgreSQL索引。</p> 
 <p><strong>语法</strong></p> 
 <pre><code class="lang-sql">CREATE INDEX index_name ON table_name;
</code></pre> 
 <h2 id="h2-u7D22u5F15u7C7Bu578B"><a name="索引类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>索引类型</h2>
 <p>PostgreSQL中有几种索引类型，如<code>B-tree</code>，<code>Hash</code>，<code>GiST</code>，<code>SP-GiST</code>和<code>GIN</code>等。每种索引类型根据不同的查询使用不同的算法。 默认情况下，<code>CREATE INDEX</code>命令使用<strong>B树</strong>索引。</p> 
 <h2 id="h2-u5355u5217u7D22u5F15"><a name="单列索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>单列索引</h2>
 <p>如果仅在一个表列中创建索引，则将其称为单列索引。</p> 
 <p><strong>语法：</strong></p> 
 <pre><code class="lang-sql">CREATE INDEX index_name  
ON table_name (column_name);
</code></pre> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>我们有一个名为“<code>EMPLOYEES</code>”的表，具有以下数据：<br><img src="http://www.yiibai.com/uploads/images/201704/1004/542220417_39468.png" alt=""></p> 
 <p>在表“<code>EMPLOYEES</code>”的“<code>name</code>”列上创建一个名为“<code>employees_index</code>”的索引。</p> 
 <p>执行以下创建语句：</p> 
 <pre><code class="lang-sql">CREATE INDEX employees_index  
ON EMPLOYEES (name);
</code></pre> 
 <p>执行结果如下 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/1004/113220418_95218.png" alt=""></p> 
 <p>在这里，您可以看到在该表上创建了一个名为“<code>employees_index</code>”的索引 -<br><img src="http://www.yiibai.com/uploads/images/201704/1004/763220421_20984.png" alt=""></p> 
 <h2 id="h2-u591Au5217u7D22u5F15"><a name="多列索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>多列索引</h2>
 <p>如果通过使用表的多个列创建索引，则称为多列索引。</p> 
 <p><strong>语法：</strong></p> 
 <pre><code class="lang-sql">CREATE INDEX index_name  
ON table_name (column1_name, column2_name);
</code></pre> 
 <p>让我们在同一个表“<code>EMPLOYEES</code>”上创建一个名为“<code>multicolumn_index</code>”的多列索引</p> 
 <p>执行以下创建查询语句：</p> 
 <pre><code class="lang-sql">CREATE INDEX multicolumn_index  
ON EMPLOYEES (name, salary);
</code></pre> 
 <p>执行结果如下 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/1004/610220424_51978.png" alt=""></p> 
 <h2 id="h2-u552Fu4E00u7D22u5F15"><a name="唯一索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>唯一索引</h2>
 <p>创建唯一索引以获取数据的完整性并提高性能。它不允许向表中插入重复的值，或者在原来表中有相同记录的列上也不能创建索引。</p> 
 <p><strong>语法：</strong></p>   
 <pre><code class="lang-sql">CREATE UNIQUE INDEX index_name  
on table_name (column_name);
</code></pre> 
 <p>例如，在<code>employees</code>表的<code>name</code>字段上创建一个唯一索引，将会提示错误 -</p> 
 <pre><code class="lang-sql">CREATE UNIQUE INDEX unique_on_name  
on employees (name);
</code></pre> 
 <p>如下所示(<code>name</code>字段中有两个<code>Minsu</code>的值) -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/1004/403220428_40434.png" alt=""></p> 
 <h2 id="h2-postgresql-"><a name="PostgreSQL删除索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>PostgreSQL删除索引</h2>
 <p>DROP INDEX方法用于删除PostgreSQL中的索引。 如果你放弃一个索引，那么它可以减慢或提高性能。</p> 
 <p>语法：</p> 
 <pre><code class="lang-sql">DROP INDEX index_name;
</code></pre> 
 <p>作为一个示例，我们现在来删除在前面创建的名为“<code>multicolumn_index</code>”的索引。</p> 
 <p>执行以下查询语句：</p> 
 <pre><code class="lang-sql">DROP INDEX multicolumn_index;
</code></pre> 
 <p>现在，您可以看到名为“<code>multicolumn_index</code>”的索引已被删除/删除。查看 <code>employees</code> 表的结构 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/1004/781220431_38732.png" alt=""></p> 
 <h2 id="h2--"><a name="什么时候应该避免使用索引？" class="reference-link"></a><span class="header-link octicon octicon-link"></span>什么时候应该避免使用索引？</h2>
 <ul> 
  <li>应该避免在小表上使用索引。</li>
  <li>不要为具有频繁，大批量更新或插入操作的表创建索引。</li>
  <li>索引不应用于包含大量<code>NULL</code>值的列。</li>
  <li>不要在经常操作(修改)的列上创建索引。</li>
 </ul>
 <br>      
</div></body></html>