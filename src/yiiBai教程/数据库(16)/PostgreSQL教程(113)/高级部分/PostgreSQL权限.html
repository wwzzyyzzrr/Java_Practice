<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">PostgreSQL权限</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在数据库中创建对象时，都会为其分配所有者。 所有者通常是执行创建语句的用户。 对于大多数类型的对象，初始状态是只有所有者(或超级用户)可以修改或删除对象。 要允许其他角色或用户使用它，必须授予权限或权限。</p> 
 <p>PostgreSQL中的不同类型的权限是：</p> 
 <ul> 
  <li><code>SELECT</code>,<code>INSERT</code>,<code>UPDATE</code>,<code>DELETE</code>,<code>TRUNCATE</code>,<code>REFERENCES</code>,<code>TRIGGER</code>,<code>CREATE</code>,<code>CONNECT</code>,<code>TEMPORARY</code>,<code>EXECUTE</code> 和 <code>USAGE</code>。</li>
 </ul> 
 <p>根据对象的类型(表，函数等)，权限将应用于对象。 要为用户分配权限，使用<code>GRANT</code>命令。</p> 
 <h2 id="h2-grant-"><a name="GRANT的语法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>GRANT的语法</h2>
 <p><code>GRANT</code>命令的基本语法如下：</p> 
 <pre><code class="lang-sql">GRANT privilege [, ...]
ON object [, ...]
TO { PUBLIC | GROUP group | username }
</code></pre> 
 <ul> 
  <li><code>privilege</code>值可以是：<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code>，<code>RULE</code>，<code>ALL</code>。</li>
  <li><code>object</code>：要向其授予访问权限的对象的名称。 可能的对象是：表，视图，序列</li>
  <li><code>PUBLIC</code>：表示所有用户的简短形式。</li>
  <li><code>GROUP group</code>：授予权限的组。</li>
  <li><code>username</code>：授予权限的用户的名称。 <code>PUBLIC</code>是表示所有用户的简短形式。</li>
 </ul> 
 <h2 id="h2-revoke-"><a name="REVOKE的语法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>REVOKE的语法</h2>
 <p><code>REVOKE</code>命令的基本语法如下：</p> 
 <pre><code class="lang-sql">REVOKE privilege [, ...]
ON object [, ...]
FROM { PUBLIC | GROUP groupname | username }
</code></pre> 
 <ul> 
  <li><code>privilege</code>值可以是：<code>SELECT</code>，<code>INSERT</code>，<code>UPDATE</code>，<code>DELETE</code>，<code>RULE</code>，<code>ALL</code>。</li>
  <li><code>object</code>: 授予访问权限的对象的名称。 可能的对象是：表，视图，序列。</li>
  <li><code>PUBLIC</code>：表示所有用户的简短形式。</li>
  <li><code>GROUP group</code>：授予权限的组。</li>
  <li><code>username</code>：授予权限的用户的名称。 <code>PUBLIC</code>是表示所有用户的简短形式。</li>
 </ul> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>如要理解权限，我们先创建一个<code>USER</code>，如下所示：</p>   
 <pre><code class="lang-sql">yiibai_db=# CREATE USER manisha WITH PASSWORD 'password';
CREATE ROLE
</code></pre> 
 <p>语句<code>CREATE ROLE</code> 表示创建了一个用户名为<code>manisha</code>。</p> 
 <p>考虑 <code>COMPANY</code> 表有以下记录：</p> 
 <pre><code class="lang-sql">yiibai_db# select * from COMPANY;
 id | name  | age | address   | salary
----+-------+-----+-----------+--------
  1 | Paul  |  32 | California|  20000
  2 | Allen |  25 | Texas     |  15000
  3 | Teddy |  23 | Norway    |  20000
  4 | Mark  |  25 | Rich-Mond |  65000
  5 | David |  27 | Texas     |  85000
  6 | Kim   |  22 | South-Hall|  45000
  7 | James |  24 | Houston   |  10000
(7 rows)
</code></pre> 
 <p>接下来，让我们给予用户“<code>manisha</code>”在表<code>COMPANY</code>上授予所有权限，如下所示：</p> 
 <pre><code class="lang-sql">yiibai_db=# GRANT ALL ON COMPANY TO manisha;
GRANT
</code></pre> 
 <p>语句<code>GRANT</code>指示所有在COMPANY表上的权限都分配给用户“<code>manisha</code>”。</p> 
 <p>接下来，让我们从用户“<code>manisha</code>”中撤销权限，如下所示：</p> 
 <pre><code class="lang-sql">yiibai_db=# REVOKE ALL ON COMPANY FROM manisha;
REVOKE
</code></pre> 
 <p><code>REVOKE</code>表示从用户“<code>manisha</code>”撤消所有权限。甚至可以删除用户，如下所示：</p> 
 <pre><code class="lang-sql">yiibai_db=# DROP USER manisha;
DROP ROLE
</code></pre> 
 <p><code>DROP ROLE</code>表示从数据库中删除用户“<code>manisha</code>”。</p>
 <br>      
</div></body></html>