<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">PostgreSQL修改表（ALTER TABLE语句）</h1><div style="width:100%;float:left;" class="article-content">   
 <p>PostgreSQL ALTER TABLE命令用于添加，删除或修改现有表中的列。您还可以使用<code>ALTER TABLE</code>命令在现有表上添加和删除各种约束。</p> 
 <p><strong>语法：</strong><br>使用<code>ALTER TABLE</code>语句在现有表中添加新列的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name ADD column_name datatype;
</code></pre> 
 <p>现有表中<code>ALTER TABLE</code>到<code>DROP COLUMN</code>(删除某个字段)的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name DROP COLUMN column_name;
</code></pre> 
 <p><code>ALTER TABLE</code>更改表中列的<code>DATA TYPE</code>(修改字段类型)的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name ALTER COLUMN column_name TYPE datatype;
</code></pre> 
 <p><code>ALTER TABLE</code>向表中的列添加<code>NOT NULL</code>约束的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name MODIFY column_name datatype NOT NULL;
</code></pre> 
 <p><code>ALTER TABLE</code>添加唯一约束<code>ADD UNIQUE CONSTRAINT</code>到表中的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name
ADD CONSTRAINT MyUniqueConstraint UNIQUE(column1, column2...);
</code></pre> 
 <p><code>ALTER TABLE</code>将“检查约束”添加到表中的基本语法如下所示：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name
ADD CONSTRAINT MyUniqueConstraint CHECK (CONDITION);
</code></pre> 
 <p><code>ALTER TABLE</code>添加主键<code>ADD PRIMARY KEY</code>约束的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name
ADD CONSTRAINT MyPrimaryKey PRIMARY KEY (column1, column2...);
</code></pre> 
 <p>使用<code>ALTER TABLE</code>从表中删除约束(<code>DROP CONSTRAINT</code>)的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name
DROP CONSTRAINT MyUniqueConstraint;
</code></pre> 
 <p>使用<code>ALTER TABLE</code>从表中删除主键约束(<code>DROP PRIMARY KEY</code>)约束的基本语法如下：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name
DROP CONSTRAINT MyPrimaryKey;
</code></pre> 
 <h2 id="h2--"><a name="示例：" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例：</h2>
 <p>考虑一个表 - <code>COMPANY</code> 有以下记录：</p> 
 <pre><code class="lang-sql"> id | name  | age | address   | salary
----+-------+-----+-----------+--------
  1 | Paul  |  32 | California|  20000
  2 | Allen |  25 | Texas     |  15000
  3 | Teddy |  23 | Norway    |  20000
  4 | Mark  |  25 | Rich-Mond |  65000
  5 | David |  27 | Texas     |  85000
  6 | Kim   |  22 | South-Hall|  45000
  7 | James |  24 | Houston   |  10000
</code></pre> 
 <p>以下是向现有的<code>COMPANY</code>表中添加新列的示例：</p>   
 <pre><code class="lang-sql">yiibai_db=# ALTER TABLE COMPANY ADD GENDER char(1);
</code></pre> 
 <p>现在，<code>COMPANY</code>表被更改，以下使用<code>SELECT</code>语句输出：</p> 
 <pre><code class="lang-sql">id | name  | age | address     | salary | gender
----+-------+-----+-------------+--------+--------
  1 | Paul  |  32 | California  |  20000 |
  2 | Allen |  25 | Texas       |  15000 |
  3 | Teddy |  23 | Norway      |  20000 |
  4 | Mark  |  25 | Rich-Mond   |  65000 |
  5 | David |  27 | Texas       |  85000 |
  6 | Kim   |  22 | South-Hall  |  45000 |
  7 | James |  24 | Houston     |  10000 |
(7 rows)
</code></pre> 
 <p>以下是现有表中删除 <code>gender</code>列的示例：</p> 
 <pre><code class="lang-sql">yiibai_db=# ALTER TABLE COMPANY DROP GENDER;
</code></pre> 
 <p>现在，<code>COMPANY</code>表被更改，以下将从<code>SELECT</code>语句输出：</p> 
 <pre><code class="lang-sql"> id | name  | age | address   | salary
----+-------+-----+-----------+--------
  1 | Paul  |  32 | California|  20000
  2 | Allen |  25 | Texas     |  15000
  3 | Teddy |  23 | Norway    |  20000
  4 | Mark  |  25 | Rich-Mond |  65000
  5 | David |  27 | Texas     |  85000
  6 | Kim   |  22 | South-Hall|  45000
  7 | James |  24 | Houston   |  10000
</code></pre>
 <br>      
</div></body></html>