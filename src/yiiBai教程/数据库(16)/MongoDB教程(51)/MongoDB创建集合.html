<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MongoDB创建集合</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将学习如何在 MongoDB 中创建一个集合。</p> 
 <h2 id="h2-createcollection-"><a name="createCollection()方法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>createCollection()方法</h2>
 <p>MongoDB 的 <code>db.createCollection(name，options)</code> 方法用于在MongoDB 中创建集合。</p> 
 <p><strong>语法</strong></p> 
 <p><code>createCollection()</code>命令的基本语法如下 -</p> 
 <pre><code class="lang-shell">db.createCollection(name, options)
</code></pre> 
 <p>在命令中，<code>name</code> 是要创建的集合的名称。 <code>options</code>是一个文档，用于指定集合的配置。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>参数</th> 
    <th>类型</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>name</code></td> 
    <td>String</td> 
    <td>要创建的集合的名称</td> 
   </tr> 
   <tr> 
    <td><code>options</code></td> 
    <td>Document</td> 
    <td>(可选)指定有关内存大小和索引的选项</td> 
   </tr> 
  </tbody> 
 </table> 
 <p><code>options</code>参数是可选的，因此只需要指定集合的名称。 以下是可以使用的选项列表：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>字段</th> 
    <th>类型</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>capped</code></td> 
    <td><code>Boolean</code></td> 
    <td>(可选)如果为<code>true</code>，则启用封闭的集合。上限集合是固定大小的集合，它在达到其最大大小时自动覆盖其最旧的条目。 如果指定<code>true</code>，则还需要指定<code>size</code>参数。</td> 
   </tr> 
   <tr> 
    <td><code>autoIndexId</code></td> 
    <td><code>Boolean</code></td> 
    <td>(可选)如果为<code>true</code>，则在<code>_id</code>字段上自动创建索引。默认值为<code>false</code>。</td> 
   </tr> 
   <tr> 
    <td><code>size</code></td> 
    <td>数字</td> 
    <td>(可选)指定上限集合的最大大小(以字节为单位)。 如果<code>capped</code>为<code>true</code>，那么还需要指定此字段的值。</td> 
   </tr> 
   <tr> 
    <td><code>max</code></td> 
    <td>数字</td> 
    <td>(可选)指定上限集合中允许的最大文档数。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>在插入文档时，MongoDB首先检查上限集合<code>capped</code>字段的大小，然后检查<code>max</code>字段。</p> 
 <h2 id="h2-u4F8Bu5B50"><a name="例子" class="reference-link"></a><span class="header-link octicon octicon-link"></span>例子</h2>
 <p>没有使用选项的<code>createCollection()</code>方法的基本语法如下 -</p>   
 <pre><code class="lang-shell">&gt;use test
switched to db test
&gt;db.createCollection("mycollection")
{ "ok" : 1 }
&gt;
</code></pre> 
 <p>可以使用命令<code>show collections</code>检查创建的集合。</p> 
 <pre><code class="lang-shell">&gt;show collections
mycollection
</code></pre> 
 <p>以下示例显示了<code>createCollection()</code>方法的语法，其中几个重要选项 -</p> 
 <pre><code class="lang-shell">&gt; db.createCollection("mycol", {capped : true, autoIndexId : true, size : 6142800, max : 10000 })
{ "ok" : 1 }
&gt;
</code></pre> 
 <p>在 MongoDB 中，不需要创建集合。当插入一些文档时，MongoDB 会自动创建集合。</p> 
 <pre><code class="lang-shell">&gt;db.newcollection.insert({"name" : "yiibaitutorials"})
&gt;show collections
mycol
newcollection
mycollection
&gt;
</code></pre>
 <br>      
</div></body></html>