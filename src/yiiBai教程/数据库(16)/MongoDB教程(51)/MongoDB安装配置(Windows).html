<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MongoDB安装配置(Windows)</h1><div style="width:100%;float:left;" class="article-content">   
 <p>要在Windows上安装 MongoDB，首先打开： <a target="_blank" href="http://www.mongodb.org/downloads">http://www.mongodb.org/downloads</a> 下载最新版本的MongoDB。确保根据您的Windows版本获得正确版本的MongoDB。要获取 Windows 版本，请打开命令提示符并执行以下命令。</p> 
 <pre><code class="lang-shell">C:\Users\Administrator&gt; wmic os get osarchitecture
OSArchitecture
64 位
</code></pre> 
 <p>如上所示，这里 Windows 版本是 64位的操作系统，所以下载对应的 MongoDB-for-Windows 64位版本，如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2806/790090605_59542.png" alt=""></p> 
 <h2 id="h2-u524Du63D0u6761u4EF6"><a name="前提条件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>前提条件</h2>
 <p>MongoDB社区版需要Windows Server 2008 R2，Windows Vista或更高版本(注：本教程将演示在Windows10 46位系统上安装MongoDB)。 <code>.msi</code>安装程序包括所有其他软件相关性，并将自动升级任何使用<code>.msi</code>文件安装的旧版本的 MongoDB。</p> 
 <h2 id="h2-mongodb-"><a name="MongoDB安装" class="reference-link"></a><span class="header-link octicon octicon-link"></span>MongoDB安装</h2>
 <p>在Windows资源管理器中，找到下载的<code>MongoDB.msi</code>文件，通常位于默认的“下载”文件夹中。 双击<code>mongodb-win32-x86_64-2008plus-ssl-3.4.5-signed.msi</code>文件。 将出现一组屏幕，指导您完成安装过程。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/722140612_92812.png" alt=""></p> 
 <p>下一步(<em>Next&gt;</em>)，在弹出的界面中，打上勾以表示“同意安装协议” - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/554140614_14112.png" alt=""></p> 
 <p>下一步(<em>Next&gt;</em>)，选择自定义(<em>Custom</em>)安装，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/789140615_21266.png" alt=""></p> 
 <p>下一步(<em>Next&gt;</em>)，选择安装目录为：<em>D:\Program Files\MongoDB\Server\3.4\</em> ，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/759140617_49046.png" alt=""></p> 
 <p>下一步(<em>Next&gt;</em>)，开始安装 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/918140618_69300.png" alt=""></p> 
 <p>安装过程中，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/431140619_28955.png" alt=""></p> 
 <p>安装完成，点击：<em>Finish</em>，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/321140620_81980.png" alt=""></p> 
 <h2 id="h2--mongodb"><a name="运行MongoDB" class="reference-link"></a><span class="header-link octicon octicon-link"></span>运行MongoDB</h2>
 <blockquote> 
  <p>注意：不要使 <code>mongod.exe</code> 在公共网络上可见，而不使用“安全模式”进行认证设置。 MongoDB旨在在受信任的环境中运行，默认情况下数据库不启用“安全模式”。</p> 
 </blockquote> 
 <p>MongoDB需要一个数据目录来存储所有数据。MongoDB的默认数据目录路径是从中启动 MongoDB 的驱动器上的绝对路径<code>D:\Program Files\MongoDB\Server\3.4\data\db</code>。通过在命令提示符中运行以下命令来创建此文件夹：</p> 
 <pre><code class="lang-shell">D:\Program Files\MongoDB\Server\3.4&gt; "md D:\Program Files\MongoDB\Server\3.4\data"
</code></pre> 
 <p>可以使用<code>--dbpath</code>选项为<code>mongod.exe</code>指定数据文件的备用路径，例如：</p> 
 <pre><code class="lang-shell">“D:\Program Files\MongoDB\Server\3.4\bin\mongod.exe" --dbpath "D:\Program Files\MongoDB\Server\3.4\data\db"
</code></pre> 
 <h2 id="h2--mongodb"><a name="启动MongoDB" class="reference-link"></a><span class="header-link octicon octicon-link"></span>启动MongoDB</h2>
 <p>要启动 <em>MongoDB</em>，请运行 <code>mongod.exe</code> 。 例如，从命令提示符：</p> 
 <pre><code class="lang-shell">“D:\Program Files\MongoDB\Server\3.4\bin\mongod.exe"
</code></pre> 
 <blockquote> 
  <p>注意：如果不使用 <code>--dbpath</code> 指定数据存储的目录，那么 MongoDB 默认使用的是 “<code>C:\data\db</code>“ 目录，所以在启动 MongoDB 数据库之前要确保 “<code>C:\data\db</code>“ 目录已经创建了。</p> 
 </blockquote> 
 <p>在执行上面命令启动后，应该会看到类似下面的输出结果 - </p> 
 <pre><code class="lang-shell">C:\Users\Administrator&gt;"D:\Program Files\MongoDB\Server\3.4\bin\mongod.exe"
2017-06-29T02:37:46.688+0800 I CONTROL  [initandlisten] MongoDB starting : pid=10652 port=27017 dbpath=C:\data\db\ 64-bit host=MY-PC
2017-06-29T02:37:46.691+0800 I CONTROL  [initandlisten] targetMinOS: Windows
... ...
... ...
2017-06-29T02:37:46.733+0800 I STORAGE  [initandlisten] wiredtiger_open config: create,cache_size=1491M,session_max=20000,eviction=(threads_min=4,threads_max=4),config_base=false,statistics=(fast),log=(enabled=true,archive=true,path=journal,compressor=snappy),file_manager=(close_idle_time=100000),checkpoint=(wait=60,log_size=2GB),statistics_log=(wait=0),
2017-06-29T02:37:47.738+0800 I CONTROL  [initandlisten]
2017-06-29T02:37:47.742+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2017-06-29T02:37:47.751+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2017-06-29T02:37:47.761+0800 I CONTROL  [initandlisten]
2017-06-29T02:37:48.315+0800 I FTDC     [initandlisten] Initializing full-time diagnostic data capture with directory 'C:/data/db/diagnostic.data'
2017-06-29T02:37:48.659+0800 I INDEX    [initandlisten] build index on: admin.system.version properties: { v: 2, key: { version: 1 }, name: "incompatible_with_version_32", ns: "admin.system.version" }
2017-06-29T02:37:48.669+0800 I INDEX    [initandlisten]          building index using bulk method; build may temporarily use up to 500 megabytes of RAM
2017-06-29T02:37:48.710+0800 I INDEX    [initandlisten] build index done.  scanned 0 total records. 0 secs
2017-06-29T02:37:48.718+0800 I COMMAND  [initandlisten] setting featureCompatibilityVersion to 3.4
2017-06-29T02:37:48.732+0800 I NETWORK  [thread1] waiting for connections on port 27017
2017-06-29T02:40:54.820+0800 I NETWORK  [thread1] connection accepted from 127.0.0.1:60285 #1 (1 connection now open)
2017-06-29T02:40:54.822+0800 I NETWORK  [conn1] received client metadata from 127.0.0.1:60285 conn1: { application: { name: "MongoDB Shell" }, driver: { name: "MongoDB Internal Client", version: "3.4.5" }, os: { type: "Windows", name: "Microsoft Windows 8", architecture: "x86_64", version: "6.2 (build 9200)" } }
`
</code></pre> 
 <p>打开 MongoDB 客户端测试使用 </p> 
 <pre><code class="lang-shell">D:\Program Files\MongoDB\Server\3.4\bin&gt; mongo.exe
MongoDB shell version v3.4.5
connecting to: mongodb://127.0.0.1:27017
MongoDB server version: 3.4.5
Welcome to the MongoDB shell.
For interactive help, type "help".
For more comprehensive documentation, see
        http://docs.mongodb.org/
Questions? Try the support group
        http://groups.google.com/group/mongodb-user
Server has startup warnings:
2017-06-29T02:37:47.738+0800 I CONTROL  [initandlisten]
2017-06-29T02:37:47.742+0800 I CONTROL  [initandlisten] ** WARNING: Access control is not enabled for the database.
2017-06-29T02:37:47.751+0800 I CONTROL  [initandlisten] **          Read and write access to data and configuration is unrestricted.
2017-06-29T02:37:47.761+0800 I CONTROL  [initandlisten]
&gt;
&gt; db
test
&gt; show dbs 
admin  0.000GB
local  0.000GB
&gt;
</code></pre> 
 <p><strong>MongoDB帮助</strong></p> 
 <p>要获取命令列表，请在MongoDB客户端中键入：<code>db.help()</code>。 这将列出一个命令列表，如下面的屏幕截图所示 -</p>   
 <pre><code class="lang-shell">&gt; db.help()
DB methods:
        db.adminCommand(nameOrDocument) - switches to 'admin' db, and runs command [ just calls db.runCommand(...) ]
        db.auth(username, password)
        db.cloneDatabase(fromhost)
        db.commandHelp(name) returns the help for the command
        db.copyDatabase(fromdb, todb, fromhost)
        db.createCollection(name, { size : ..., capped : ..., max : ... } )
        db.createView(name, viewOn, [ { $operator: {...}}, ... ], { viewOptions } )
        db.createUser(userDocument)
        db.currentOp() displays currently executing operations in the db
        db.dropDatabase()
        db.eval() - deprecated
        db.fsyncLock() flush data to disk and lock server for backups
        db.fsyncUnlock() unlocks server following a db.fsyncLock()
        db.getCollection(cname) same as db['cname'] or db.cname
        db.getCollectionInfos([filter]) - returns a list that contains the names and options of the db's collections
        db.getCollectionNames()
        db.getLastError() - just returns the err msg string
        db.getLastErrorObj() - return full status object
        db.getLogComponents()
        db.getMongo() get the server connection object
        db.getMongo().setSlaveOk() allow queries on a replication slave server
        db.getName()
        db.getPrevError()
        db.getProfilingLevel() - deprecated
        db.getProfilingStatus() - returns if profiling is on and slow threshold
        db.getReplicationInfo()
        db.getSiblingDB(name) get the db at the same server as this one
        db.getWriteConcern() - returns the write concern used for any operations on this db, inherited from server object if set
        db.hostInfo() get details about the server's host
        db.isMaster() check replica primary status
        db.killOp(opid) kills the current operation in the db
        db.listCommands() lists all the db commands
        db.loadServerScripts() loads all the scripts in db.system.js
        db.logout()
        db.printCollectionStats()
        db.printReplicationInfo()
        db.printShardingStatus()
        db.printSlaveReplicationInfo()
        db.dropUser(username)
        db.repairDatabase()
        db.resetError()
        db.runCommand(cmdObj) run a database command.  if cmdObj is a string, turns it into { cmdObj : 1 }
        db.serverStatus()
        db.setLogLevel(level,&lt;component&gt;)
        db.setProfilingLevel(level,&lt;slowms&gt;) 0=off 1=slow 2=all
        db.setWriteConcern( &lt;write concern doc&gt; ) - sets the write concern for writes to the db
        db.unsetWriteConcern( &lt;write concern doc&gt; ) - unsets the write concern for writes to the db
        db.setVerboseShell(flag) display extra information in shell output
        db.shutdownServer()
        db.stats()
        db.version() current version of the server
&gt;
</code></pre> 
 <p><strong>MongoDB统计</strong></p> 
 <p>要获取有关MongoDB服务器的统计信息，请在 MongoDB 客户端中键入命令：<code>db.stats()</code>。 这个命令将显示数据库名称，数据库中的集合和文档数量。命令的输出如下面的截图所示 -</p> 
 <pre><code class="lang-shell">&gt; db.stats()
{
        "db" : "test",
        "collections" : 0,
        "views" : 0,
        "objects" : 0,
        "avgObjSize" : 0,
        "dataSize" : 0,
        "storageSize" : 0,
        "numExtents" : 0,
        "indexes" : 0,
        "indexSize" : 0,
        "fileSize" : 0,
        "ok" : 1
}
&gt;
</code></pre>
 <br>      
</div></body></html>