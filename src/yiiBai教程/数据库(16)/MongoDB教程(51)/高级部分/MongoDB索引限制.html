<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MongoDB索引限制</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将了解索引限制及其它组件。</p> 
 <h2 id="h2-u7D22u5F15u989Du5916u5F00u9500"><a name="索引额外开销" class="reference-link"></a><span class="header-link octicon octicon-link"></span>索引额外开销</h2>
 <p>每个索引占用一些空间，并导致每次插入，更新和删除的开销。因此，如果很少使用集合进行读取操作(大部分是插入或更新操作)，则建议不要使用索引。</p> 
 <h2 id="h2-ram-"><a name="RAM/内存的使用" class="reference-link"></a><span class="header-link octicon octicon-link"></span>RAM/内存的使用</h2>
 <p>由于索引存储在RAM中，因此应确保索引的总大小不超过<code>RAM</code>限制。 如果总大小超过了系统内存的大小，MongoDB将开始删除一些索引，从而导致性能下降。</p> 
 <h2 id="h2-u67E5u8BE2u9650u5236"><a name="查询限制" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查询限制</h2>
 <p>索引不能在使用的查询中使用 - </p> 
 <ul> 
  <li>正则表达式或否定运算符，如<code>$nin</code>，<code>$not</code>等</li>
  <li>算术运算符，如<code>$mod</code>等</li>
  <li><code>$where</code>子句</li>
 </ul> 
 <p>因此，建议经常检查查询的索引使用情况。</p> 
 <h2 id="h2-u7D22u5F15u952Eu9650u5236"><a name="索引键限制" class="reference-link"></a><span class="header-link octicon octicon-link"></span>索引键限制</h2>  
 <p>从<em>MongoDB 2.6</em>版本开始，如果现有索引字段的值超过索引键限制，MongoDB将不会创建索引。</p> 
 <h2 id="h2-u63D2u5165u8D85u8FC7u7D22u5F15u952Eu9650u5236u7684u6587u6863"><a name="插入超过索引键限制的文档" class="reference-link"></a><span class="header-link octicon octicon-link"></span>插入超过索引键限制的文档</h2>
 <p>如果本文档的索引字段值超过索引键限制，MongoDB将不会将任何文档插入索引集合。 <code>mongorestore</code>和<code>mongoimport</code>工具也是如此。</p> 
 <h2 id="h2-u7D22u5F15u6700u5927u8303u56F4"><a name="索引最大范围" class="reference-link"></a><span class="header-link octicon octicon-link"></span>索引最大范围</h2>
 <ul> 
  <li>集合不能有超过<code>64</code>个索引。</li>
  <li>索引名称的长度不能超过<code>125</code>个字符。</li>
  <li>复合索引最多可以编号<code>31</code>个字段。</li>
 </ul>
 <br>      
</div></body></html>