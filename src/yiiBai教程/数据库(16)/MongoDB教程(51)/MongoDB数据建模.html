<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MongoDB数据建模</h1><div style="width:100%;float:left;" class="article-content">   
 <p>MongoDB中的数据具有灵活的模式。文档在同一集合，但它们不需要具有相同的字段或结构集合，集合文档中的公共字段可以包含不同类型的数据。</p> 
 <p>MongoDB中的数据具有灵活的模式。与SQL数据库不同，SQL数据库必须在插入数据之前确定和声明表的模式，MongoDB的集合不会强制执行文档结构。这种灵活性有助于将文档映射到实体或对象。 每个文档可以匹配表示实体的数据字段，即使数据具有实质性的变化。然而，集合中的文档具有类似的结构。</p> 
 <p>数据建模中的关键挑战是平衡应用程序的需求，数据库引擎的性能特征和数据检索模式。 在设计数据模型时，请始终考虑数据的应用程序使用情况(即数据的查询，更新和处理)以及数据本身的固有结构。</p> 
 <p>在MongoDB中设计架构时有一些考虑：</p> 
 <ul> 
  <li>根据用户要求设计架构。</li>
  <li>将对象合并到一个文档中，否则分开它们(但确保不需要连接)。</li>
  <li>复制数据(但有限制)，因为与计算时间相比，磁盘空间便宜。</li>
  <li>在写入时加入，而不是读取时加入。</li>
  <li>为最常用的用例优化架构。</li>
  <li>在模式中执行复杂聚合。</li>
 </ul> 
 <h2 id="h2-u5B9Eu4F8B"><a name="实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例</h2>
 <p>假设客户需要他的博客/网站的数据库设计，并查看RDBMS和MongoDB架构设计之间的区别。网站有以下要求。</p> 
 <ul> 
  <li>每个帖子都有唯一的标题，描述和网址。</li>
  <li>每个帖子都可以有一个或多个标签。</li>
  <li>每个帖子都有其发布者的名称和总人数。</li>
  <li>每个帖子都有用户给出的评论以及他们的姓名，消息，数据时间和喜好。</li>
  <li>每个帖子可以有零个或多个评论。</li>
 </ul> 
 <p>在RDBMS架构中，上述要求的设计将具有最少的三个表。表与表之间的关系如下 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201706/2906/686160657_90048.png" alt=""></p> 
 <p>而在MongoDB模式中，设计将有一个集合<code>post</code>，其结构以下 -</p> 
 <pre><code class="lang-json">{
   _id: POST_ID
   title: TITLE_OF_POST, 
   description: POST_DESCRIPTION,
   by: POST_BY,
   url: URL_OF_POST,
   tags: [TAG1, TAG2, TAG3],
   likes: TOTAL_LIKES, 
   comments: [    
      {
         user:'COMMENT_BY',
         message: TEXT,
         dateCreated: DATE_TIME,
         like: LIKES 
      },
      {
         user:'COMMENT_BY',
         message: TEXT,
         dateCreated: DATE_TIME,
         like: LIKES
      }
   ]
}
</code></pre> 
 <p>通过上面的示例说明可以知道，在显示数据时，在RDBMS中需要连接三个表，而在MongoDB中，数据将仅显示在一个集合中。</p>
 <br>      
</div></body></html>