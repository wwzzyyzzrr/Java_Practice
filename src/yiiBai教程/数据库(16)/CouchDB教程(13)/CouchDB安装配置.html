<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">CouchDB安装配置</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在这篇文章中，我们主要介绍和演示如何下载和安装 CouchDB ， 由于时间和篇幅的限制，这里只介绍在 Window 10 64位和Ubuntu的CouchDB安装配置。</p> 
 <h2 id="h2-1-windows-couchdb"><a name="1. 在Windows上安装CouchDB" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. 在Windows上安装CouchDB</h2>
 <p><strong>下载CouchDB</strong></p> 
 <p>访问CouchDB官方网站：<a target="_blank" href="http://couchdb.apache.org/">http://couchdb.apache.org/</a> , 点击右上方的<em>下载(Download)</em>链接，就会跳到下载页面，CouchDB有各种格式的文件可供下载，这里选择 <strong>Windows (x64)</strong> 这个版本，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/1505/267150545_19578.png" alt=""></p> 
 <p>完成安装后，打开浏览器并访问以下链接：<a target="_blank" href="http://127.0.0.1:5984/">http://127.0.0.1:5984/</a> 。</p> 
 <p>如果没有问题，应该会看到以下输出：</p> 
 <p>可以使用以下网址与CouchDB Web界面进行交互：</p> 
 <p><a target="_blank" href="http://127.0.0.1:5984/_utils">http://127.0.0.1:5984/_utils</a></p> 
 <p>现在转到验证选项卡并验证安装情况：</p> 
 <p>验证后，您将收到一条验证信息。</p> 
 <p>现在转到安装程序选项卡，看到两个选项：配置集群(<em>Configure cluster</em>)和配置单节点(<em>configure single node</em>)。</p> 
 <p>群集用于多个服务器和大型设置。 对于一个简单的数据库应用程序，则选择“配置单节点(<em>configure single node</em>)”。</p> 
 <p>当您单击“配置单节点(<em>configure single node</em>)”时，必须填写一些凭据。</p> 
 <p>可以通过单击“管理(<em>Admin</em>)”选项卡来更改密码或创建其他管理员。</p> 
 <h2 id="h2-2-linux-couchdb"><a name="2. 在Linux系统上安装CouchDB" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. 在Linux系统上安装CouchDB</h2>
 <p>一些Linux系统在内部有提供CouchDB数据库。 例如，要在Ubuntu和Debian上安装CouchDB，请使用以下说明：</p> 
 <pre><code class="lang-shell">sudo apt install couchdb
</code></pre> 
 <p>执行结果如下 -</p> 
 <pre><code class="lang-shell">yiibai@ubuntu:~$ sudo apt install couchdb
[sudo] password for yiibai:
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following extra packages will be installed:
  couchdb-bin couchdb-common erlang-asn1 erlang-base-hipe erlang-crypto
  erlang-eunit erlang-inets erlang-mnesia erlang-os-mon erlang-public-key
  erlang-runtime-tools erlang-snmp erlang-ssl erlang-syntax-tools erlang-tools
  erlang-webtool erlang-xmerl libmozjs185-1.0 libsctp1 lksctp-tools
Suggested packages:
  erlang erlang-manpages erlang-doc erlang-edoc erlang-gs erlang-observer
The following NEW packages will be installed:
  couchdb couchdb-bin couchdb-common erlang-asn1 erlang-base-hipe
  erlang-crypto erlang-eunit erlang-inets erlang-mnesia erlang-os-mon
  erlang-public-key erlang-runtime-tools erlang-snmp erlang-ssl
  erlang-syntax-tools erlang-tools erlang-webtool erlang-xmerl libmozjs185-1.0
  libsctp1 lksctp-tools
0 upgraded, 21 newly installed, 0 to remove and 450 not upgraded.
Need to get 19.7 MB of archives.
After this operation, 43.2 MB of additional disk space will be used.
Do you want to continue? [Y/n] y
</code></pre> 
 <p>安装完成后，couchdb自动启动，现在打开浏览器并测试安装结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/1505/452090541_60021.png" alt=""></p> 
 <blockquote> 
  <p>注：可以看到上面默认安装的是 couchdb 1.5.0 版本，如果有兴趣可以安装最新版本，参考接下来的步骤。</p> 
 </blockquote> 
 <p>安装最新版本(<code>apache-couchdb-1.6.0</code>) - </p> 
 <pre><code>$ sudo apt-get --no-install-recommends -y install \
    build-essential pkg-config erlang \
    libicu-dev libmozjs185-dev libcurl4-openssl-dev

$ sudo apt-get update

$ sudo apt-get install software-properties-common -y
</code></pre>
 <p>添加PPA，以从相应的存储库获取最新的CouchDB版本：</p>   
 <pre><code class="lang-shell">$ sudo add-apt-repository ppa:couchdb/stable -y
</code></pre> 
 <p>现在已经添加了一个新的PPA，开始更新系统，使其具有最新的包信息：</p> 
 <pre><code class="lang-shell">$ sudo apt-get update
</code></pre> 
 <p>如果之前在此服务器上安装了CouchDB，请先删除现有版本：</p> 
 <pre><code class="lang-shell">$ sudo apt-get remove couchdb couchdb-bin couchdb-common -yf
</code></pre> 
 <p>现在安装CouchDB：</p> 
 <pre><code class="lang-shell">$ sudo apt-get install couchdb -y
</code></pre> 
 <p>通过上面步骤，couchdb最新稳定版本就安装好了。默认情况下，CouchDB在<code>localhost</code>上使用端口<code>5984</code>运行，可以通过从命令行运行curl来检索此基本信息(验证安装结果)：</p> 
 <pre><code class="lang-shell">yiibai@ubuntu:~$ curl localhost:5984
{"couchdb":"Welcome","uuid":"22d9e91e925fecdb5a3698e26a7f6815","version":"1.6.1","vendor":{"name":"Ubuntu","version":"14.04"}}
yiibai@ubuntu:~$
</code></pre> 
 <p>CouchDB是一个Web界面，可以在Web浏览器上进行验证。打开以下主页网址：</p> 
 <pre><code class="lang-shell">http://localhost:5984/
</code></pre> 
 <p>将看到以下输出：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/1505/397100527_91440.png" alt=""></p> 
 <p>如果Linux系统没有CouchDB，则安装CouchDB及其以下依赖项：</p> 
 <ul> 
  <li>Erlang OTP</li>
  <li>ICU</li>
  <li>OpenSSL</li>
  <li>Mozilla SpiderMonkey</li>
  <li>GNU Make</li>
  <li>GNU Compiler Collection</li>
  <li>libcurl</li>
  <li>help2man</li>
  <li>Python for docs</li>
  <li>Python Sphinx</li>
 </ul> 
 <p>要安装上述依赖项，请使用以下命令：</p> 
 <pre><code class="lang-shell">$sudo yum install autoconf  
$sudo yum install autoconf-archive  
$sudo yum install automake  
$sudo yum install curl-devel  
$sudo yum install erlang-asn1  
$sudo yum install erlang-erts  
$sudo yum install erlang-eunit  
$sudo yum install erlang-os_mon  
$sudo yum install erlang-xmerl  
$sudo yum install help2man  
$sudo yum install js-devel  
$sudo yum install libicu-devel  
$sudo yum install libtool  
$sudo yum install perl-Test-Harness
</code></pre> 
 <p>然后配置并启动CouchDB。使用以下URL验证输出：</p> 
 <pre><code class="lang-shell">http://127.0.0.1:5984/
</code></pre>
 <br>      
</div></body></html>