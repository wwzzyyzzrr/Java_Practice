<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">DB2与XML</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 本章介绍DB2使用XML。</p> 
 <p> pureXML特性允许存储在数据库表中的列格式良好的XML文档。这些列具有XML数据库。数据通过存储XML数据，XML列放在其固有的层次化的形式。所存储的XML数据可以被访问和DB2数据库服务器功能进行管理。 XML数据在其天然分层形式存储实现高效的搜索，检索和XML的更新。更新XML数据的值，需要使用两个XQuery，SQL或组合。</p> 
 <h2> 创建一个数据库和表来存储XML数据</h2> 
 <p> 创建数据库通过以下语法：</p> 
 <p> <strong>语法：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 create database xmldb </span></pre> 
 <p> 默认情况下，数据库使用UTF-8(UNICODE)，代码集。激活数据库，并连接到它：</p> 
 <p> <strong>语法：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 activate db </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;db_name&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
db2 connect to </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;db_name&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span></pre> 
 <p> <strong>示例：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 activate db xmldb 
db2 connect to xmldb  </span></pre> 
 <p> 创造一个良好的XML文件，并创建一个列作为“XML”的数据类型的表。它是强制性通过包含在双引号XML语法的SQL查询。</p> 
 <p> <strong>语法：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">“</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">create table </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;schema&gt;</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.&lt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">table</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">col </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;datatype&gt;</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> 
col </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">xml datatype</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;)”</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span></pre> 
 <p> <strong>示例：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"create table shope.books(id bigint not null 
primary key, book XML)"</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">   </span></pre> 
 <p> 插入XML值到表，格式良好的XML文档是使用SQL语句“INSERT”插入XML类型列。</p> 
 <p> <strong>语法：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">“</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">insert </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">into</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;table_name&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> values</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">value1</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> value2</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)”</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span></pre> 
 <p> <strong>例如：</strong></p>   
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"insert into shope.books values(1000, '&lt;catalog&gt;  
&lt;book&gt; 

&lt;author&gt; Gambardella Matthew&lt;/author&gt; 
&lt;title&gt;XML Developers Guide&lt;/title&gt; 
&lt;genre&gt;Computer&lt;/genre&gt; 
&lt;price&gt;44.95&lt;/price&gt; 
&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt; 
&lt;description&gt;An in-depth look at creating application 
with XML&lt;/description&gt; 
&lt;/book&gt; 

&lt;/catalog&gt;')"</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">   </span></pre> 
 <h2> 更新表中的XML数据</h2> 
 <p> 可以通过使用以下语法更新表中的XML数据：</p> 
 <p> <strong>语法：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">“</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">update </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;table_name&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;column&gt;</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&lt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">value</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">where</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> 
</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;column&gt;</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&lt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">value</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;”</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">  </span></pre> 
 <p> <strong>示例：</strong></p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 496.1875px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">db2 </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"update shope.books set book='&lt;catalog&gt;  

&lt;book&gt; 
&lt;author&gt; Gambardella, Matthew&lt;/author&gt;  
&lt;title&gt;XML Developers Guide&lt;/title&gt;  
&lt;genre&gt;Computer&lt;/genre&gt;  
&lt;price&gt;44.95&lt;/price&gt;  
&lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;  
&lt;description&gt;An in-depth XML&lt;/description&gt;
  
&lt;/book&gt; 
 
&lt;/catalog&gt;' where id=1000"</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">  </span></pre> 
 <br>      
</div></body></html>