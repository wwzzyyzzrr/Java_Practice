<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MySQL修改表结构</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本教程中，您将了解并使用MySQL <code>ALTER TABLE</code>语句来更改现有表结构(如添加或删除列，更改列属性等)。</p> 
 <h2 id="h2-mysql-alter-table-"><a name="MySQL ALTER TABLE语句简介" class="reference-link"></a><span class="header-link octicon octicon-link"></span>MySQL ALTER TABLE语句简介</h2>
 <p>可以使用<code>ALTER TABLE</code>语句来更改现有表的结构。 <code>ALTER TABLE</code>语句可用来<a target="_blank" href="http://www.yiibai.com/mysql/add-column.html" title="添加列">添加列</a>，<a target="_blank" href="http://www.yiibai.com/mysql/drop-column.html" title="删除列">删除列</a>，更改列的<a target="_blank" href="http://www.yiibai.com/mysql/data-types.html" title="数据类型">数据类型</a>，<a target="_blank" href="http://www.yiibai.com/mysql/primary-key.html" title="添加主键">添加主键</a>，<a target="_blank" href="http://www.yiibai.com/mysql/rename-table.html" title="重命名表">重命名表</a>等等。 以下说明了<code>ALTER TABLE</code>语句语法：</p> 
 <pre><code class="lang-sql">ALTER TABLE table_name action1[,action2,…]
</code></pre> 
 <p>要更改现有表的结构：</p> 
 <ul> 
  <li>首先，在<code>ALTER TABLE</code>子句之后指定要更改的表名称。</li>
  <li>其次，列出一组要应用于该表的操作。操作可以是添加新列，添加<a target="_blank" href="http://www.yiibai.com/mysql/primary-key.html" title="主键">主键</a>，重命名表等任何操作。<code>ALTER TABLE</code>语句允许在单个<code>ALTER TABLE</code>语句中应用多个操作，每个操作由逗号(<code>，</code>)分隔。</li>
 </ul> 
 <p>让我们创建一个用于练习<code>ALTER TABLE</code>语句的新表。</p> 
 <p>我们将在<a target="_blank" href="http://www.yiibai.com/mysql/sample-database.html" title="示例数据库(yiibaidb)">示例数据库(yiibaidb)</a>中创建一个名为<code>tasks</code>的新表。 以下是创建<code>tasks</code>表的脚本。</p> 
 <pre><code class="lang-sql">DROP TABLE IF EXISTS tasks;

CREATE TABLE tasks (
    task_id INT NOT NULL,
    subject VARCHAR(45) NULL,
    start_date DATE NULL,
    end_date DATE NULL,
    description VARCHAR(200) NULL,
    PRIMARY KEY (task_id),
    UNIQUE INDEX task_id_unique (task_id ASC)
);
</code></pre> 
 <h2 id="h2--mysql-alter-table-"><a name="使用MySQL ALTER TABLE语句更改列" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用MySQL ALTER TABLE语句更改列</h2>
 <p><strong>使用MySQL ALTER TABLE语句来设置列的自动递增属性</strong></p> 
 <p>假设您希望在任务表中插入新行时，<code>task_id</code>列的值会自动增加<code>1</code>。那么可以使用<code>ALTER TABLE</code>语句将<code>task_id</code>列的属性设置为<code>AUTO_INCREMENT</code>，如下所示：</p> 
 <pre><code class="lang-sql">ALTER TABLE tasks
CHANGE COLUMN task_id task_id INT(11) NOT NULL AUTO_INCREMENT;
</code></pre> 
 <p>可以通过在<code>tasks</code>表中插入一些行数据来验证更改。</p> 
 <pre><code class="lang-sql">INSERT INTO tasks(subject,
                  start_date,
                  end_date,
   description)
VALUES('Learn MySQL ALTER TABLE',
       Now(),
       Now(),
      'Practicing MySQL ALTER TABLE statement');

INSERT INTO tasks(subject,
                  start_date,
                  end_date,
           description)
VALUES('Learn MySQL CREATE TABLE',
       Now(),
       Now(),
      'Practicing MySQL CREATE TABLE statement');
</code></pre> 
 <p>您可以<a target="_blank" href="http://www.yiibai.com/mysql/select-statement-query-data.html" title="查询数据">查询数据</a>以查看每次插入新行时<code>task_id</code>列的值是否增加<code>1</code>：</p>   
 <pre><code class="lang-sql">SELECT 
    task_id, description
FROM
    tasks;
</code></pre> 
 <p><strong>使用MySQL ALTER TABLE语句将新的列添加到表中</strong></p> 
 <p>由于新的业务需求，需要添加一个名为<code>complete</code>的新列，以便在任务表中存储每个任务的完成百分比。 在这种情况下，您可以使用<code>ALTER TABLE</code>将新列添加到<code>tasks</code>表中，如下所示：</p> 
 <pre><code class="lang-sql">ALTER TABLE tasks 
ADD COLUMN complete DECIMAL(2,1) NULL
AFTER description;
</code></pre> 
 <p><strong>使用MySQL ALTER TABLE从表中删除列</strong></p> 
 <p>假设您不想将任务的描述存储在<code>tasks</code>表中了，并且必须将其删除。 以下语句允许您删除<code>tasks</code>表的<code>description</code>列：</p> 
 <pre><code class="lang-sql">ALTER TABLE tasks
DROP COLUMN description;
</code></pre> 
 <h2 id="h2--mysql-alter-table-"><a name="使用MySQL ALTER TABLE语句重命名表" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用MySQL ALTER TABLE语句重命名表</h2>
 <p>可以使用<code>ALTER TABLE</code>语句<a target="_blank" href="http://www.yiibai.com/mysql/rename-table.html" title="重命名表">重命名表</a>。请注意，在重命名表之前，应该认真考虑以了解更改是否影响数据库和应用程序层，不要因为重命名表之后，应用程序因未找到数据库表而出错。</p> 
 <p>以下语句将<code>tasks</code>表重命名为<code>work_items</code>表：</p> 
 <pre><code class="lang-sql">ALTER TABLE tasks
RENAME TO work_items;
</code></pre> 
 <p>在本教程中，您学习了如何使用MySQL <code>ALTER TABLE</code>语句来更改现有的表结构并重命名表。</p>
 <br>      
</div></body></html>