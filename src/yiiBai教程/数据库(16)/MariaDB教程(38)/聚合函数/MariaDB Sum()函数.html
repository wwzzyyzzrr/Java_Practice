<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MariaDB Sum()函数</h1><div style="width:100%;float:left;" class="article-content">   
 <p>MariaDB <code>SUM()</code>函数用于返回表达式求和的值。</p> 
 <p><strong>语法：</strong></p> 
 <pre><code class="lang-sql">SELECT SUM(aggregate_expression)  
FROM tables  
[WHERE conditions];
</code></pre> 
 <p><em>数据准备</em></p> 
 <p>在<code>"testdb"</code>数据库中创建一个<code>"students"</code>表，并插入一些数据。参考以下创建语句 -</p> 
 <pre><code class="lang-sql">USE testdb;
DROP TABLE students;
-- 创建新表
CREATE TABLE students(  
    student_id INT NOT NULL AUTO_INCREMENT,  
    student_name VARCHAR(100) NOT NULL,  
    student_address VARCHAR(40) default NULL, 
    admission_date DATE,
    score float(4, 1) default NULL, 
    PRIMARY KEY ( student_id )
);
-- 插入数据
INSERT INTO students  
(student_id, student_name, student_address,score, admission_date)  
VALUES(1,'Maxsu','Haikou', 99.5,'2017-01-07 00:00:00');

INSERT INTO students  
(student_id, student_name, student_address, score, admission_date)  
VALUES  
(2,'Crurry','Beijing',86,'2016-05-07 00:00:00'),
(3,'JMaster','Beijing',91,'2016-05-07 00:00:00'),  
(4,'Mahesh','Guangzhou',78,'2016-06-07 00:00:00'),  
(5,'Kobe','Shanghai',89,'2016-02-07 00:00:00'),  
(6,'Blaba','Shengzhen',100,'2016-08-07 00:00:00');
</code></pre> 
 <h4 id="h4-1-sum-"><a name="1. SUM()函数与单表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. SUM()函数与单表达式</h4>
 <p><strong>示例：</strong></p> 
 <p>计算<code>student_id</code>大于<code>1</code>的<code>Student</code>表的总分数。参考以下查询语句 - </p> 
 <pre><code class="lang-sql">SELECT SUM(Score) AS "Total Score"  
FROM students  
WHERE student_id &gt; 1;
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">MariaDB [testdb]&gt; SELECT SUM(Score) AS "Total Score"
    -&gt; FROM students
    -&gt; WHERE student_id &gt; 1;
+-------------+
| Total Score |
+-------------+
|       444.0 |
+-------------+
1 row in set (0.00 sec)
</code></pre> 
 <h4 id="h4-2-sum-distinct-"><a name="2. SUM()函数与DISTINCT子句" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. SUM()函数与DISTINCT子句</h4>
 <p>可以使用<code>SUM</code>函数的<code>DISTINCT</code>子句来避免重复值的总和。</p> 
 <p>再插入一条重复的数据 - </p>   
 <pre><code class="lang-sql">INSERT INTO students  
(student_name, student_address,score, admission_date)  
VALUES('Maxsu','Haikou', 99.5,'2017-11-07 00:00:00');
</code></pre> 
 <p>当前数据库中的记录如下 - </p> 
 <pre><code class="lang-sql">MariaDB [testdb]&gt; select * from students;
+------------+--------------+-----------------+----------------+-------+
| student_id | student_name | student_address | admission_date | score |
+------------+--------------+-----------------+----------------+-------+
|          1 | Maxsu        | Haikou          | 2017-01-07     |  99.5 |
|          2 | Crurry       | Beijing         | 2016-05-07     |  86.0 |
|          3 | JMaster      | Beijing         | 2016-05-07     |  91.0 |
|          4 | Mahesh       | Guangzhou       | 2016-06-07     |  78.0 |
|          5 | Kobe         | Shanghai        | 2016-02-07     |  89.0 |
|          6 | Blaba        | Shengzhen       | 2016-08-07     | 100.0 |
|          7 | Maxsu        | Haikou          | 2017-11-07     |  99.5 |
+------------+--------------+-----------------+----------------+-------+
7 rows in set (0.00 sec)
</code></pre> 
 <p><strong>示例：</strong></p> 
 <pre><code class="lang-sql">SELECT SUM(DISTINCT Score) AS "Total Score"  
FROM students  
WHERE student_name = 'Maxsu';
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">MariaDB [testdb]&gt; SELECT SUM(DISTINCT Score) AS "Total Score"
    -&gt; FROM students
    -&gt; WHERE student_name = 'Maxsu';
+-------------+
| Total Score |
+-------------+
|        99.5 |
+-------------+
1 row in set (0.00 sec)
</code></pre>
 <br>      
</div></body></html>