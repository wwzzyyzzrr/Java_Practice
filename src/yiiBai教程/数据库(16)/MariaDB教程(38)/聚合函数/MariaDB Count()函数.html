<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MariaDB Count()函数</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在MariaDB数据库中，<code>COUNT()</code>函数用于返回表达式的计数/行数。</p> 
 <p><strong>语法：</strong></p> 
 <pre><code class="lang-sql">SELECT COUNT(aggregate_expression)  
FROM tables  
[WHERE conditions];
</code></pre> 
 <blockquote> 
  <p>注：<code>COUNT()</code>函数只计算<code>NOT NULL</code>值。</p> 
 </blockquote> 
 <p><strong> 示例：</strong></p> 
 <p>假设有一个<code>students</code>表，有以下数据：</p> 
 <pre><code class="lang-sql">MariaDB [testdb]&gt; select * from students;
+------------+--------------+-----------------+----------------+
| student_id | student_name | student_address | admission_date |
+------------+--------------+-----------------+----------------+
|          1 | Maxsu        | Haikou          | 2017-01-07     |
|          3 | JMaster      | Beijing         | 2016-05-07     |
|          4 | Mahesh       | Guangzhou       | 2016-06-07     |
|          5 | Kobe         | Shanghai        | 2016-02-07     |
|          6 | Blaba        | Shengzhen       | 2016-08-07     |
|          7 | Maxsu        | Sanya           | 2017-08-08     |
|          8 | Maxsu        | Haikou          | 2015-11-17     |
+------------+--------------+-----------------+----------------+
7 rows in set (0.00 sec)
</code></pre> 
 <p>从<code>students</code>表中统计<code>student_id</code>：</p> 
 <pre><code class="lang-sql">SELECT COUNT(student_id) FROM Students;
-- 或者
SELECT COUNT(*) FROM Students;
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-sql">MariaDB [testdb]&gt; SELECT COUNT(student_id) FROM Students;
+-------------------+
| COUNT(student_id) |
+-------------------+
|                 7 |
+-------------------+
1 row in set (0.07 sec)
</code></pre> 
 <h4 id="h4-1-count-"><a name="1. COUNT()函数与单一表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. COUNT()函数与单一表达式</h4>
 <p>统计<code>student_name</code>是<code>Maxsu</code>或<code>Kobe</code>的学生人数。参考以下查询语句 - </p> 
 <pre><code class="lang-sql">SELECT COUNT(*) AS "Number of Students"  
FROM Students  
WHERE student_name in ('Maxsu', 'Kobe');
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">MariaDB [testdb]&gt; SELECT COUNT(*) AS "Number of Students"
    -&gt; FROM Students
    -&gt; WHERE student_name in ('Maxsu', 'Kobe');
+--------------------+
| Number of Students |
+--------------------+
|                  4 |
+--------------------+
1 row in set (0.00 sec)
</code></pre> 
 <h4 id="h4-2-count-distinct-"><a name="2. COUNT()函数与Distinct子句" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. COUNT()函数与Distinct子句</h4>
 <p><code>DISTINCT</code>子句与<code>COUNT()</code>函数一起使用以防止重复计数。它只包含原始记录。</p> 
 <pre><code class="lang-sql">SELECT COUNT(DISTINCT student_name) AS "Number of Unique names"  
FROM Students  
WHERE student_name in ('Maxsu', 'Kobe');
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">MariaDB [testdb]&gt; SELECT COUNT(DISTINCT student_name) AS "Number of Unique names"
    -&gt; FROM Students
    -&gt; WHERE student_name in ('Maxsu', 'Kobe');
+------------------------+
| Number of Unique names |
+------------------------+
|                      2 |
+------------------------+
1 row in set (0.08 sec)
</code></pre> 
 <p>从查询结果中可以看到，比上一个示例少了两行。</p> 
 <h4 id="h4-3-count-null-"><a name="3. COUNT()函数与NULL值" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. COUNT()函数与NULL值</h4>
 <p>为了更好地演示<code>COUNT()</code>函数对<code>NULL</code>值的处理，这里再插入两条记录 -</p>   
 <pre><code class="lang-sql">-- 修改表字段接受NULL默认值
ALTER TABLE students CHANGE student_address student_address varchar(32) default NULL;
-- 插入第1行
INSERT INTO students  
(student_name, student_address, admission_date)  
VALUES('Himin',NULL,'2017-01-07 00:00:00');

-- 插入第2行
INSERT INTO students  
(student_name, student_address, admission_date)  
VALUES('Hiavg',NULL,NULL);
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-sql">MariaDB [testdb]&gt; select * from students;
+------------+--------------+-----------------+----------------+
| student_id | student_name | student_address | admission_date |
+------------+--------------+-----------------+----------------+
|          1 | Maxsu        | Haikou          | 2017-01-07     |
|          3 | JMaster      | Beijing         | 2016-05-07     |
|          4 | Mahesh       | Guangzhou       | 2016-06-07     |
|          5 | Kobe         | Shanghai        | 2016-02-07     |
|          6 | Blaba        | Shengzhen       | 2016-08-07     |
|          7 | Maxsu        | Sanya           | 2017-08-08     |
|          8 | Maxsu        | Haikou          | 2015-11-17     |
|          9 | Himin        | NULL            | 2017-01-07     |
|         10 | Hiavg        | NULL            | NULL           |
+------------+--------------+-----------------+----------------+
9 rows in set (0.00 sec)
</code></pre> 
 <p>现在来看看使用<code>count()</code>函数来测试对<code>NULL</code>值的计算效果。</p> 
 <pre><code class="lang-sql">select count(student_address) from students;
</code></pre> 
 <p>执行上面查询语句，得到以下结果 - </p> 
 <pre><code class="lang-shell">MariaDB [testdb]&gt; select count(student_address) from students;
+------------------------+
| count(student_address) |
+------------------------+
|                      7 |
+------------------------+
1 row in set (0.00 sec)
</code></pre> 
 <p>可以看到，<code>COUNT(student_address)</code>函数它并没有统计包含<code>NULL</code>值的行。</p>
 <br>      
</div></body></html>