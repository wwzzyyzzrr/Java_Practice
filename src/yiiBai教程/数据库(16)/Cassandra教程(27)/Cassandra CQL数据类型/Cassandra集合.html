<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Cassandra集合</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Cassandra集合用于处理任务。 您可以在集合中存储多个元素。 Cassandra支持三种类型的集合：</p> 
 <ul> 
  <li>Set</li>
  <li>List</li>
  <li>Map</li>
 </ul> 
 <h2 id="h2-set-"><a name="Set集合" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Set集合</h2>
 <p>Set集合存储查询时返回排序元素的元素组。</p> 
 <p><strong>语法：</strong></p> 
 <pre><code class="lang-sql">Create table table_name  
(  
    id int,  
    Name text,  
    Email set&lt;text&gt;,  
    Primary key(id)  
);
</code></pre> 
 <p><strong>示例：</strong></p> 
 <p>下面举个例子来展示<code>Set</code>集合。创建一个具有三列(<code>id</code>, <code>name</code> 和 <code>email</code>)的表“<code>employee</code>”。</p> 
 <pre><code class="lang-sql">use yiibai_ks;

create table employee(
  id int,
  name text,
  email set&lt;text&gt;,
  primary key(id)
);
</code></pre> 
 <p>执行上面语句创建表以后如下：</p> 
 <pre><code class="lang-sql">cqlsh:yiibai_ks&gt; create table employee(
             ...   id int,
             ...   name text,
             ...   email set&lt;text&gt;,
             ...   primary key(id)
             ... );
cqlsh:yiibai_ks&gt; describe employee;

CREATE TABLE yiibai_ks.employee (
    id int PRIMARY KEY,
    email set&lt;text&gt;,
    name text
) WITH bloom_filter_fp_chance = 0.01
    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}
    AND comment = ''
    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}
    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = '99PERCENTILE';

cqlsh:yiibai_ks&gt;
</code></pre> 
 <p>现在，向上面创建的<code>employee</code>表中插入一些值：</p> 
 <pre><code class="lang-sql">INSERT INTO employee (id, email, name)     
VALUES(1, {'yestouu@gmail.com'}, 'yestouu');    
INSERT INTO employee (id, email, name)     
VALUES(2,{'kanchan@qq.com'}, 'Kanchan');   
INSERT INTO employee (id, email, name)     
VALUES(3, {'maxsu@126.com'}, 'Maxsu');
</code></pre> 
 <p>执行上面语句结果如下 -</p> 
 <pre><code class="lang-shell">cqlsh:yiibai_ks&gt; INSERT INTO employee (id, email, name)
             ... VALUES(1, {'yestouu@gmail.com'}, 'yestouu');
cqlsh:yiibai_ks&gt; INSERT INTO employee (id, email, name)
             ... VALUES(2,{'kanchan@qq.com'}, 'Kanchan');
cqlsh:yiibai_ks&gt; INSERT INTO employee (id, email, name)
             ... VALUES(3, {'maxsu@126.com'}, 'Maxsu');
cqlsh:yiibai_ks&gt; select * from employee;

 id | email                 | name
----+-----------------------+---------
  1 | {'yestouu@gmail.com'} | yestouu
  2 |    {'kanchan@qq.com'} | Kanchan
  3 |     {'maxsu@126.com'} |   Maxsu

(3 rows)
cqlsh:yiibai_ks&gt;
</code></pre> 
 <h2 id="h2-list-"><a name="List集合" class="reference-link"></a><span class="header-link octicon octicon-link"></span>List集合</h2>
 <p>当元素的顺序重要时，使用列表(List)集合。我们以扩展上面示例中的<code>employee</code>表并新增一列<code>department</code>为例。</p> 
 <pre><code class="lang-sql">alter table employee add department list&lt;text&gt;;
</code></pre> 
 <p>执行结果如下 - </p> 
 <pre><code class="lang-shell">cqlsh:yiibai_ks&gt; alter table employee add department list&lt;text&gt;;
cqlsh:yiibai_ks&gt; select * from employee;

 id | department | email                 | name
----+------------+-----------------------+---------
  1 |       null | {'yestouu@gmail.com'} | yestouu
  2 |       null |    {'kanchan@qq.com'} | Kanchan
  3 |       null |     {'maxsu@126.com'} |   Maxsu

(3 rows)
cqlsh:yiibai_ks&gt;
</code></pre> 
 <p>现在添加新列(<code>department</code>)。 在新列“<code>department</code>”中插入一些值。</p>   
 <pre><code class="lang-sql">INSERT INTO employee (id, email, name, department) VALUES(4, {'sweetsu@gmail.com'}, 'Sweetsu', ['IT Devopment']);
</code></pre> 
 <p>执行上面语句结果如下 -</p> 
 <pre><code class="lang-shell">cqlsh:yiibai_ks&gt; alter table employee add department list&lt;text&gt;;
cqlsh:yiibai_ks&gt; select * from employee;

 id | department | email                 | name
----+------------+-----------------------+---------
  1 |       null | {'yestouu@gmail.com'} | yestouu
  2 |       null |    {'kanchan@qq.com'} | Kanchan
  3 |       null |     {'maxsu@126.com'} |   Maxsu

(3 rows)
cqlsh:yiibai_ks&gt; INSERT INTO employee (id, email, name, department) VALUES(4, {'sweetsu@gmail.com'}, 'Sweetsu', ['IT Devopment']);
cqlsh:yiibai_ks&gt; select * from employee;

 id | department       | email                 | name
----+------------------+-----------------------+---------
  1 |             null | {'yestouu@gmail.com'} | yestouu
  2 |             null |    {'kanchan@qq.com'} | Kanchan
  4 | ['IT Devopment'] | {'sweetsu@gmail.com'} | Sweetsu
  3 |             null |     {'maxsu@126.com'} |   Maxsu

(4 rows)
cqlsh:yiibai_ks&gt;
</code></pre> 
 <h2 id="h2-map-"><a name="Map集合" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Map集合</h2>
 <p>Map集合用于存储键值对。它将一件事映射到另一件事。 例如，如果要将必备课程名称来保存课程信息，则可以使用<code>Map</code>集合。</p> 
 <p><strong>例子：</strong></p> 
 <p>创建一个名为“<code>course</code>”的表。</p> 
 <pre><code class="lang-sql">create table course(
    id int,
    prereq map&lt;text, text&gt;,
    primary key(id)
);

-- 插入数据
INSERT into course(id,prereq) VALUES(1, {'Programming':'CPP&amp;&amp;Java', 'Network':'Artificail Intelligence'});
</code></pre> 
 <p>现在创建表，在<code>Map</code>集合类型中插入一些数据。</p> 
 <p>输出：</p> 
 <pre><code class="lang-shell">cqlsh:yiibai_ks&gt; create table course(
             ... id int,
             ... prereq map&lt;text, text&gt;,
             ... primary key(id)
             ... );
cqlsh:yiibai_ks&gt; INSERT into course(id,prereq) VALUES(1, {'Programming':'CPP&amp;&amp;Java', 'Network':'Artificail Intelligence'});
cqlsh:yiibai_ks&gt; select * from course;

 id | prereq
----+--------------------------------------------------------------------
  1 | {'Network': 'Artificail Intelligence', 'Programming': 'CPP&amp;&amp;Java'}

(1 rows)
cqlsh:yiibai_ks&gt;
</code></pre>
 <br>      
</div></body></html>