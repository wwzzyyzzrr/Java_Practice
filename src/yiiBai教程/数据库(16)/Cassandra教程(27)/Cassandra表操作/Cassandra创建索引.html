<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Cassandra创建索引</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>CREATE INDEX</code>命令用于在用户指定的列上创建一个索引。 如果您选择索引的列已存在数据，则Cassandra会在“<code>create index</code>”语句执行后在指定数据列上创建索引。</p> 
 <p>语法：</p> 
 <pre><code class="lang-sql">CREATE INDEX &lt;identifier&gt; ON &lt;tablename&gt;
</code></pre> 
 <p><strong>创建索引的规则</strong></p> 
 <ul> 
  <li>由于主键已编入索引，因此无法在主键上创建索引。</li>
  <li>在Cassandra中，不支持集合索引。</li>
  <li>没有对列进行索引，Cassandra无法过滤该列，除非它是主键。</li>
 </ul> 
 <p><strong>示例：</strong></p> 
 <p>让我们举个例子来演示如何在列上创建索引。 在这里，我们为表“<code>student</code>”中的“<code>student_name</code>”列创建一个索引。</p> 
 <pre><code class="lang-sql">cqlsh:yiibai_ks&gt; SELECT * FROM student;

 student_id | student_fees | student_name
------------+--------------+--------------

(0 rows)
cqlsh:yiibai_ks&gt;
</code></pre> 
 <p>执行以下命令创建一个索引 - </p> 
 <pre><code class="lang-sql">CREATE INDEX name ON student (student_name);
</code></pre> 
 <p>上面语句中，是在“<code>student_name</code>”列上创建了索引。</p> 
 <pre><code class="lang-shell">cqlsh:yiibai_ks&gt; CREATE INDEX name ON student (student_name);
cqlsh:yiibai_ks&gt; describe student;

CREATE TABLE yiibai_ks.student (
    student_id int PRIMARY KEY,
    student_fees varint,
    student_name text
) WITH bloom_filter_fp_chance = 0.01
    AND caching = {'keys': 'ALL', 'rows_per_partition': 'NONE'}
    AND comment = ''
    AND compaction = {'class': 'org.apache.cassandra.db.compaction.SizeTieredCompactionStrategy', 'max_threshold': '32', 'min_threshold': '4'}
    AND compression = {'chunk_length_in_kb': '64', 'class': 'org.apache.cassandra.io.compress.LZ4Compressor'}
    AND crc_check_chance = 1.0
    AND dclocal_read_repair_chance = 0.1
    AND default_time_to_live = 0
    AND gc_grace_seconds = 864000
    AND max_index_interval = 2048
    AND memtable_flush_period_in_ms = 0
    AND min_index_interval = 128
    AND read_repair_chance = 0.0
    AND speculative_retry = '99PERCENTILE';
CREATE INDEX name ON yiibai_ks.student (student_name);

cqlsh:yiibai_ks&gt;
</code></pre> 
 <blockquote> 
  <p>注意：您可以再次使用创建索引查询来验证索引是否已创建。 它将显示已创建索引的消息。</p> 
 </blockquote>
 <br>      
</div></body></html>