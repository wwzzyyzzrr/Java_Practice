<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Cassandra安装与配置</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Apache Cassandra和Datastax企业级被不同组织用于存储大量数据。在安装Apache Cassandra之前，您必须具备以下事项：</p> 
 <ul> 
  <li>必须拥有datastax社区版本，可以点击这里<a target="_blank" href="http://cassandra.apache.org/download/" title="下载Cassandra3.10">下载Cassandra3.10</a>。</li>
  <li>必须提前安装好JDK8以上版本。</li>
  <li>必须提前安装好JDK。<br>最新版本的Java 8，要验证是否安装了正确版本的Java，请在终端上输入：</li>
 </ul> 
 <pre><code class="lang-shell">java -version
</code></pre> 
 <p>对于使用<code>cqlsh</code>， 需要安装<code>Python 2.7</code>(一定要使用这个版本哦)。要验证是否安装了正确版本的<code>Python</code>，请在终端上输入：</p> 
 <pre><code class="lang-shell">python --version
</code></pre> 
 <p>如下所示 - </p> 
 <pre><code>C:\Users\Administrator&gt;python --version
Python 2.7.10

C:\Users\Administrator&gt;
</code></pre>
 <h2 id="h2--tar-"><a name="从二进制tar文件安装" class="reference-link"></a><span class="header-link octicon octicon-link"></span>从二进制tar文件安装</h2>
 <p>从Apache Cassandra下载网站下载最新的稳定版本。<br>将文件解压到某处，如在本示例为：<code>D:\software\apache-cassandra-3.10</code>，例如：</p> 
 <blockquote> 
  <p>注：为了使用方便，可以将<code>D:\software\apache-cassandra-3.10\bin</code>添加到环境变量中。</p> 
 </blockquote> 
 <p>进入目录<code>D:\software\apache-cassandra-3.10\bin</code>，通过从命令行调用 <code>cassandra -f</code>，在前台启动<code>Cassandra</code>。 按“<strong>Control + C</strong>”键停止Cassandra。 在后台通过从命令行调用<code>cassandra</code>启动Cassandra。 调用<code>kill pid</code>或<code>pkill -f CassandraDaemon</code>来停止Cassandra，其中<code>pid</code>是Cassandra进程标识，可以通过调用<code>pgrep -f CassandraDaemon</code>来找到它。</p> 
 <p>通过从命令行调用<code>nodetool</code>状态来验证Cassandra是否正在运行。</p> 
 <p>配置文件位于<code>conf</code>子目录中。<br>由于Cassandra，日志和数据目录分别位于日志和数据子目录中。 旧版本默认为<code>/var/log/cassandra</code>和<code>/var/lib/cassandra</code>。 因此，有必要以root权限启动Cassandra，或者将<code>conf/cassandra.yaml</code>更改为使用当前用户拥有的目录，如下文有关更改目录位置的部分所述。</p> 
 <p>现在我们来一步步地演示上面的命令，首先启动 <strong>cassandra</strong> ， 在前台启动<code>Cassandra</code>使用以下命令 - </p> 
 <pre><code class="lang-shell">D:\software\apache-cassandra-3.10\bin&gt; cassandra -f
WARNING! Powershell script execution unavailable.
   Please use 'powershell Set-ExecutionPolicy Unrestricted'
   on this user-account to run cassandra with fully featured
   functionality on this platform.
Starting with legacy startup options
.... ....
INFO  [main] 2017-04-17 22:35:51,658 Server.java:155 - Using Netty Version: [netty-buffer=netty-buffer-4.0.39.Final.38bdf86, netty-codec=netty-codec-4.0.39.Final.38bdf86, netty-codec-haproxy=netty-codec-haproxy-4.0.39.Final.38bdf86, netty-codec-http=netty-codec-http-4.0.39.Final.38bdf86, netty-codec-socks=netty-codec-socks-4.0.39.Final.38bdf86, netty-common=netty-common-4.0.39.Final.38bdf86, netty-handler=netty-handler-4.0.39.Final.38bdf86, netty-tcnative=netty-tcnative-1.1.33.Fork19.fe4816e, netty-transport=netty-transport-4.0.39.Final.38bdf86, netty-transport-native-epoll=netty-transport-native-epoll-4.0.39.Final.38bdf86, netty-transport-rxtx=netty-transport-rxtx-4.0.39.Final.38bdf86, netty-transport-sctp=netty-transport-sctp-4.0.39.Final.38bdf86, netty-transport-udt=netty-transport-udt-4.0.39.Final.38bdf86]
INFO  [main] 2017-04-17 22:35:51,677 Server.java:156 - Starting listening for CQL clients on localhost/127.0.0.1:9042 (unencrypted)...
INFO  [main] 2017-04-17 22:35:51,919 CassandraDaemon.java:528 - Not starting RPC server as requested. Use JMX (StorageService-&gt;startRPCServer()) or nodetool (enablethrift) to start it
</code></pre> 
 <p>这就启动了。。。<br>按“<strong>Control + C</strong>”键停止Cassandra。接下来演示在后台通过从命令行调用<code>cassandra</code>启动Cassandra。</p>   
 <pre><code class="lang-shell">D:\software\apache-cassandra-3.10\bin&gt; cassandra 
... ...
INFO  [main] 2017-04-17 22:37:38,985 ColumnFamilyStore.java:406 - Initializing system.schema_usertypes
INFO  [main] 2017-04-17 22:37:39,002 ColumnFamilyStore.java:406 - Initializing system.schema_functions
INFO  [main] 2017-04-17 22:37:39,042 ColumnFamilyStore.java:406 - Initializing system.schema_aggregates
INFO  [main] 2017-04-17 22:37:39,046 ViewManager.java:137 - Not submitting build tasks for views in keyspace system as storage service is not initialized
INFO  [main] 2017-04-17 22:37:39,614 ApproximateTime.java:44 - Scheduling approximate time-check task with a precision of 10 milliseconds
... ...
INFO  [main] 2017-04-17 22:37:56,101 Server.java:155 - Using Netty Version: [netty-buffer=netty-buffer-4.0.39.Final.38bdf86, netty-codec=netty-codec-4.0.39.Final.38bdf86, netty-codec-haproxy=netty-codec-haproxy-4.0.39.Final.38bdf86, netty-codec-http=netty-codec-http-4.0.39.Final.38bdf86, netty-codec-socks=netty-codec-socks-4.0.39.Final.38bdf86, netty-common=netty-common-4.0.39.Final.38bdf86, netty-handler=netty-handler-4.0.39.Final.38bdf86, netty-tcnative=netty-tcnative-1.1.33.Fork19.fe4816e, netty-transport=netty-transport-4.0.39.Final.38bdf86, netty-transport-native-epoll=netty-transport-native-epoll-4.0.39.Final.38bdf86, netty-transport-rxtx=netty-transport-rxtx-4.0.39.Final.38bdf86, netty-transport-sctp=netty-transport-sctp-4.0.39.Final.38bdf86, netty-transport-udt=netty-transport-udt-4.0.39.Final.38bdf86]
INFO  [main] 2017-04-17 22:37:56,128 Server.java:156 - Starting listening for CQL clients on localhost/127.0.0.1:9042 (unencrypted)...
INFO  [main] 2017-04-17 22:37:56,427 CassandraDaemon.java:528 - Not starting RPC server as requested. Use JMX (StorageService-&gt;startRPCServer()) or nodetool (enablethrift) to start it
</code></pre> 
 <p>如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/1704/890100438_67755.png" alt=""></p> 
 <p>要运行Cassandra shell，重新启动一个命令行窗口并输入<code>cqlsh</code>命令，您将看到命令行执行的结果以下：</p> 
 <pre><code class="lang-shell">D:\software\apache-cassandra-3.10\bin&gt; cqlsh

WARNING: console codepage must be set to cp65001 to support utf-8 encoding on Windows platforms.
If you experience encoding problems, change your console codepage with 'chcp 65001' before starting cqlsh.

Connected to Test Cluster at 127.0.0.1:9042.
[cqlsh 5.0.1 | Cassandra 3.10 | CQL spec 3.4.4 | Native protocol v4]
Use HELP for help.
WARNING: pyreadline dependency missing.  Install to enable tab completion.
cqlsh&gt;
</code></pre>
 <br>      
</div></body></html>