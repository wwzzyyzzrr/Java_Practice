<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Kotlin控制流程</h1><div style="width:100%;float:left;" class="article-content">   
 <h3 id="h3-if-"><a name="if表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>if表达式</h3>
 <p>在Kotlin中，<code>if</code>表达式会返回一个值。因此没有三元运算符(<code>condition ? then : else</code>)，因为结构比较简单，<code>if</code>表达式工作没有什么问题。</p> 
 <pre><code class="lang-kotlin">// 传统用法
var max = a 
if (a &lt; b) max = b

// With else 
var max: Int
if (a &gt; b) {
    max = a
} else {
    max = b
}

// As expression 
val max = if (a &gt; b) a else b
</code></pre> 
 <p><code>if</code>分支可以是块，并且最后一个表达式是块的值：</p> 
 <pre><code class="lang-kt">val max = if (a &gt; b) {
    print("Choose a")
    a
} else {
    print("Choose b")
    b
}
</code></pre> 
 <p>如果使用<code>if</code>作为表达式而不是语句(例如，返回其值或将其分配给变量)，则表达式需要具有其他分支。</p> 
 <h2 id="h2-when-"><a name="When表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>When表达式</h2>
 <p>当替换类似C语言的交换运算符时。 最简单的形式就是这样 -</p> 
 <pre><code class="lang-kotlin">when (x) {
    1 -&gt; print("x == 1")
    2 -&gt; print("x == 2")
    else -&gt; { // Note the block
        print("x is neither 1 nor 2")
    }
}
</code></pre> 
 <p>当它的参数与所有<code>when</code>语句中的分支按顺序进行匹配，直到满足一些分支条件。<code>when</code>可以用作表达式或作为语句。 如果将其用作表达式，则满足分支的值将变为整体表达式的值。<br>如果将<code>when</code>用作语句，则忽略各个分支的值。 (就像<code>if</code>语句，每个分支可以是一个块，其值是块中最后一个表达式的值。)</p> 
 <p>如果其他的(<code>if</code>/<code>else if</code>)分支条件不满足，则评估求值<code>else</code>分支。如果<code>when</code>用作表达式，则<code>else</code>分支是必需的，除非编译器可以证明所有可能的情况都被分支条件覆盖。</p> 
 <p>如果许多情况应该以同样的方式处理，分支条件可使用逗号组合：</p> 
 <pre><code class="lang-kotlin">when (x) {
    0, 1 -&gt; print("x == 0 or x == 1")
    else -&gt; print("otherwise")
}
</code></pre> 
 <p>可以使用任意表达式(不仅仅是常量)作为分支条件 - </p> 
 <pre><code class="lang-kt">when (x) {
    parseInt(s) -&gt; print("s encodes x")
    else -&gt; print("s does not encode x")
}
</code></pre> 
 <p>还可以检查值是否在或不在(<code>in</code>/<code>!in</code>)<a target="_blank" href="http://www.yiibai.com/kotlin/ranges.html" title="范围">范围</a>内或集合中：</p> 
 <pre><code class="lang-kotlin">when (x) {
    in 1..10 -&gt; print("x is in the range")
    in validNumbers -&gt; print("x is valid")
    !in 10..20 -&gt; print("x is outside the range")
    else -&gt; print("none of the above")
}
</code></pre> 
 <p>另一个可能性是检查一个值是否(<code>is</code>/<code>!is</code>)为指定类型的值。请注意，由于<a target="_blank" href="http://www.yiibai.com/kotlin/typecasts.html#smart-casts" title="智能转换">智能转换</a>，可以访问类型的方法和属性，而无需任何额外的检查。</p> 
 <pre><code class="lang-kt">fun hasPrefix(x: Any) = when(x) {
    is String -&gt; x.startsWith("prefix")
    else -&gt; false
}
</code></pre> 
 <p><code>when</code>也可以用来替代<code>if-else if</code>语句语法。 如果没有提供参数，则分支条件是简单的布尔表达式，当条件为真时执行分支：</p>   
 <pre><code class="lang-kotlin">when {
    x.isOdd() -&gt; print("x is odd")
    x.isEven() -&gt; print("x is even")
    else -&gt; print("x is funny")
}
</code></pre> 
 <h3 id="h3-for-"><a name="for循环" class="reference-link"></a><span class="header-link octicon octicon-link"></span>for循环</h3>
 <p><code>for</code>循环提供迭代器用来遍历任何东西。 语法如下：</p> 
 <pre><code class="lang-kotlin">for (item in collection) print(item)
</code></pre> 
 <p>主体可以是一个块，如下 - </p> 
 <pre><code class="lang-kotlin">for (item: Int in ints) {
    // ...
}
</code></pre> 
 <p>如前所述，<code>for</code>迭代提供迭代器的任何内容，即</p> 
 <ul> 
  <li>有一个成员或扩展函数<code>iterator()</code>，它的返回类型：
   <ul> 
    <li>有一个成员或扩展函数<code>next()</code>和</li>
    <li>有一个返回Boolean的成员或扩展函数<code>hasNext()</code>。</li>
   </ul> </li>
 </ul> 
 <p>所有这三个函数都需要被标记为运算符。</p> 
 <p><code>for</code>循环数组被编译为一个基于索引的循环，它不会创建一个迭代器对象。如果要遍历具有索引的数组或列表，可以这样做：</p> 
 <pre><code class="lang-kotlin">for (i in array.indices) {
    print(array[i])
}
</code></pre> 
 <p>请注意，这个“通过范围的迭代”被编译成最佳实现，没有创建额外的对象。</p> 
 <p>或者，可以使用<code>withIndex</code>库函数：</p> 
 <pre><code class="lang-kotlin">for ((index, value) in array.withIndex()) {
    println("the element at $index is $value")
}
</code></pre> 
 <h2 id="h2-while-"><a name="while循环" class="reference-link"></a><span class="header-link octicon octicon-link"></span>while循环</h2>
 <p><code>while</code> 和 <code>do..while</code> 用法和java语言中一样，如下 - </p> 
 <pre><code class="lang-kt">while (x &gt; 0) {
    x--
}

do {
    val y = retrieveData()
} while (y != null) // y is visible here!
</code></pre> 
 <h2 id="h2--break-continue-"><a name="在循环中的 break 和 continue 语句" class="reference-link"></a><span class="header-link octicon octicon-link"></span>在循环中的 break 和 continue 语句</h2>
 <p>Kotlin在循环中，支持传统的<code>break</code>和<code>continue</code>运算符。请参考<a target="_blank" href="http://www.yiibai.com/kotlin/returns.html" title="返回和跳转">返回和跳转</a>。</p>
 <br>      
</div></body></html>