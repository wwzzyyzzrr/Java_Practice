<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Kotlin基础语法</h1><div style="width:100%;float:left;" class="article-content">   
 <h3 id="h3-u5B9Au4E49u5305"><a name="定义包" class="reference-link"></a><span class="header-link octicon octicon-link"></span>定义包</h3>
 <p>定义包的规范应位于源文件的顶部：</p> 
 <pre><code class="lang-kt">package com.yiibai

import java.util.*

// ...
</code></pre> 
 <p>不需要匹配目录和包：源文件可以任意放在文件系统中。</p> 
 <p>有关包的详细用法，请参考：<a target="_blank" href="http://www.yiibai.com/kotlin/packages.html">http://www.yiibai.com/kotlin/packages.html</a></p> 
 <h3 id="h3-u5B9Au4E49u51FDu6570"><a name="定义函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>定义函数</h3>
 <p>具有返回<code>Int</code>类型的两个<code>Int</code>参数的函数：</p> 
 <pre><code class="lang-kt">fun sum(a: Int, b: Int): Int {
    return a + b
}

fun main(args: Array&lt;String&gt;) {
    print("sum of 3 and 5 is ")
    println(sum(3, 5))
}
</code></pre> 
 <p>函数与表达主体和推断返回值的类型：</p> 
 <pre><code class="lang-kt">fun sum(a: Int, b: Int) = a + b

fun main(args: Array&lt;String&gt;) {
    println("sum of 19 and 23 is ${sum(19, 23)}")
}
</code></pre> 
 <p>函数返回无意义值：</p> 
 <pre><code class="lang-kt">fun printSum(a: Int, b: Int): Unit {
    println("sum of $a and $b is ${a + b}")
}

fun main(args: Array&lt;String&gt;) {
    printSum(-1, 8)
}
</code></pre> 
 <p><code>Unit</code>返回类型可以省略：</p> 
 <pre><code class="lang-kt">fun printSum(a: Int, b: Int) {
    println("sum of $a and $b is ${a + b}")
}

fun main(args: Array&lt;String&gt;) {
    printSum(-1, 8)
}
</code></pre> 
 <p>有关函数的详细用法，请参考：<a target="_blank" href="http://www.yiibai.com/kotlin/functions.html">http://www.yiibai.com/kotlin/functions.html</a> </p> 
 <h3 id="h3-u5B9Au4E49u5C40u90E8u53D8u91CF"><a name="定义局部变量" class="reference-link"></a><span class="header-link octicon octicon-link"></span>定义局部变量</h3>
 <p>分配一次(只读)局部变量：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val a: Int = 1  // immediate assignment
    val b = 2   // `Int` type is inferred
    val c: Int  // Type required when no initializer is provided
    c = 3       // deferred assignment
    println("a = $a, b = $b, c = $c")
}
</code></pre> 
 <p>可变变量：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    var x = 5 // `Int` type is inferred
    x += 1
    println("x = $x")
}
</code></pre> 
 <p>变量还可作为属性和字段来使用，另请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/properties.html">http://www.yiibai.com/kotlin/properties.html</a> 。</p> 
 <h3 id="h3-kotlin-"><a name="Kotlin的注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Kotlin的注释</h3>
 <p>Kotlin中的注释类似于Java和JavaScript，Kotlin支持行尾和块注释。</p> 
 <pre><code class="lang-kt">// This is an end-of-line comment

/* This is a block comment
   on multiple lines. */
</code></pre> 
 <p>与Java不同的是，Kotlin中的块注释可以嵌套。</p> 
 <p>有关文档注释语法的信息，请参阅文档Kotlin代码： <a target="_blank" href="http://www.yiibai.com/kotlin/kotlin-doc.html">http://www.yiibai.com/kotlin/kotlin-doc.html</a> 。</p> 
 <h3 id="h3-u4F7Fu7528u5B57u7B26u4E32u6A21u677F"><a name="使用字符串模板" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用字符串模板</h3>
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    var a = 1
    // simple name in template:
    val s1 = "a is $a" 

    a = 2
    // arbitrary expression in template:
    val s2 = "${s1.replace("is", "was")}, but now is $a"
    println(s2)
}
</code></pre> 
 <p>有关于字符串模板的更多信息，请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/basic-types.html">http://www.yiibai.com/kotlin/basic-types.html</a> 。</p> 
 <h3 id="h3-u4F7Fu7528u6761u4EF6u8868u8FBEu5F0F"><a name="使用条件表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用条件表达式</h3>
 <pre><code class="lang-kt">fun maxOf(a: Int, b: Int): Int {
    if (a &gt; b) {
        return a
    } else {
        return b
    }
}

fun main(args: Array&lt;String&gt;) {
    println("max of 0 and 42 is ${maxOf(0, 42)}")
}
</code></pre> 
 <p>使用<code>if</code>表达式：</p> 
 <pre><code class="lang-kt">fun maxOf(a: Int, b: Int) = if (a &gt; b) a else b

fun main(args: Array&lt;String&gt;) {
    println("max of 0 and 42 is ${maxOf(0, 42)}")
}
</code></pre> 
 <p>有关于<code>if</code>表达式的更多信息，请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/control-flow.html#if-expression">http://www.yiibai.com/kotlin/control-flow.html#if-expression</a></p> 
 <h3 id="h3--null-"><a name="使用可空值来检查null值" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用可空值来检查null值</h3>
 <p>当可能为<code>null</code>值时，引用必须被明确地标记为可空(<code>null</code>)。</p> 
 <p>如果<code>str</code>不包含整数，则返回<code>null</code>：</p> 
 <pre><code class="lang-kt">fun parseInt(str: String): Int? {
    // ...
}
</code></pre> 
 <p>使用可返回<code>null</code>值的函数：</p> 
 <pre><code class="lang-kt">fun parseInt(str: String): Int? {
    return str.toIntOrNull()
}

fun printProduct(arg1: String, arg2: String) {
    val x = parseInt(arg1)
    val y = parseInt(arg2)

    // Using `x * y` yields error because they may hold nulls.
    if (x != null &amp;&amp; y != null) {
        // x and y are automatically cast to non-nullable after null check
        println(x * y)
    }
    else {
        println("either '$arg1' or '$arg2' is not a number")
    }    
}


fun main(args: Array&lt;String&gt;) {
    printProduct("6", "7")
    printProduct("a", "7")
    printProduct("a", "b")
}
</code></pre> 
 <p>上面代码，也可以编写成下面 - </p> 
 <pre><code class="lang-kt">fun parseInt(str: String): Int? {
    return str.toIntOrNull()
}

fun printProduct(arg1: String, arg2: String) {
    val x = parseInt(arg1)
    val y = parseInt(arg2)

    // ...
    if (x == null) {
        println("Wrong number format in arg1: '${arg1}'")
        return
    }
    if (y == null) {
        println("Wrong number format in arg2: '${arg2}'")
        return
    }

    // x and y are automatically cast to non-nullable after null check
    println(x * y)
}

fun main(args: Array&lt;String&gt;) {
    printProduct("6", "7")
    printProduct("a", "7")
    printProduct("99", "b")
}
</code></pre> 
 <p>有关于可<code>null</code>值的更多信息，请参考：<a target="_blank" href="http://www.yiibai.com/kotlin/null-safety.html">http://www.yiibai.com/kotlin/null-safety.html</a></p> 
 <h3 id="h3-u4F7Fu7528u7C7Bu578Bu68C0u67E5u548Cu81EAu52A8u8F6Cu6362"><a name="使用类型检查和自动转换" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用类型检查和自动转换</h3>
 <p><code>is</code>运算符检查表达式是否是类型的实例。 如果一个不可变的局部变量或属性是指定类型，则不需要显式转换：</p> 
 <pre><code class="lang-kt">fun getStringLength(obj: Any): Int? {
    if (obj is String) {
        // `obj` is automatically cast to `String` in this branch
        return obj.length
    }

    // `obj` is still of type `Any` outside of the type-checked branch
    return null
}


fun main(args: Array&lt;String&gt;) {
    fun printLength(obj: Any) {
        println("'$obj' string length is ${getStringLength(obj) ?: "... err, not a string"} ")
    }
    printLength("Incomprehensibilities")
    printLength(1000)
    printLength(listOf(Any()))
}
</code></pre> 
 <p>上面代码，也可以编写成下面 - </p> 
 <pre><code class="lang-kt">fun getStringLength(obj: Any): Int? {
    if (obj !is String) return null

    // `obj` is automatically cast to `String` in this branch
    return obj.length
}


fun main(args: Array&lt;String&gt;) {
    fun printLength(obj: Any) {
        println("'$obj' string length is ${getStringLength(obj) ?: "... err, not a string"} ")
    }
    printLength("Incomprehensibilities")
    printLength(1000)
    printLength(listOf(Any()))
}
</code></pre> 
 <p>上面代码，还可以编写成下面 - </p> 
 <pre><code class="lang-kt">fun getStringLength(obj: Any): Int? {
    // `obj` is automatically cast to `String` on the right-hand side of `&amp;&amp;`
    if (obj is String &amp;&amp; obj.length &gt; 0) {
        return obj.length
    }

    return null
}


fun main(args: Array&lt;String&gt;) {
    fun printLength(obj: Any) {
        println("'$obj' string length is ${getStringLength(obj) ?: "... err, is empty or not a string at all"} ")
    }
    printLength("Incomprehensibilities")
    printLength("")
    printLength(1000)
}
</code></pre> 
 <p>可以从这里了解上面提及的两个概念： <a target="_blank" href="http://www.yiibai.com/kotlin/classes.html" title="类">类</a>和<a target="_blank" href="http://www.yiibai.com/kotlin/typecasts.html" title="类型转换">类型转换</a> 。</p> 
 <h3 id="h3--for-"><a name="使用for循环" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用for循环</h3>  
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val items = listOf("apple", "banana", "kiwi")
    for (item in items) {
        println(item)
    }
}
</code></pre> 
 <p>上面代码，可以编写成如下 - </p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val items = listOf("apple", "banana", "kiwi")
    for (index in items.indices) {
        println("item at $index is ${items[index]}")
    }
}
</code></pre> 
 <p>有关于<code>for</code>循环的更多信息，请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/control-flow.html#for-loops">http://www.yiibai.com/kotlin/control-flow.html#for-loops</a> </p> 
 <h3 id="h3--while-"><a name="使用 while 循环" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用 while 循环</h3>
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val items = listOf("apple", "banana", "kiwi")
    var index = 0
    while (index &lt; items.size) {
        println("item at $index is ${items[index]}")
        index++
    }
}
</code></pre> 
 <p>有关于<code>while</code>循环的更多信息，请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/control-flow.html#while-loops">http://www.yiibai.com/kotlin/control-flow.html#while-loops</a></p> 
 <h3 id="h3--when-"><a name="使用 when 表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用 when 表达式</h3>
 <pre><code class="lang-kt">fun describe(obj: Any): String =
when (obj) {
    1          -&gt; "One"
    "Hello"    -&gt; "Greeting"
    is Long    -&gt; "Long"
    !is String -&gt; "Not a string"
    else       -&gt; "Unknown"
}

fun main(args: Array&lt;String&gt;) {
    println(describe(1))
    println(describe("Hello"))
    println(describe(1000L))
    println(describe(2))
    println(describe("other"))
}
</code></pre> 
 <p>有关于<code>when</code>表达式的更多信息，请参考： <a target="_blank" href="http://www.yiibai.com/kotlin/control-flow.html#when-expression">http://www.yiibai.com/kotlin/control-flow.html#when-expression</a></p> 
 <h3 id="h3-u4F7Fu7528u8303u56F4"><a name="使用范围" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用范围</h3>
 <p>使用<code>in</code>操作符检查数字是否在指定范围内：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val x = 10
    val y = 9
    if (x in 1..y+1) {
        println("fits in range")
    }
}
</code></pre> 
 <p>检查一个数字是否超出指定范围：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val list = listOf("a", "b", "c")

    if (-1 !in 0..list.lastIndex) {
        println("-1 is out of range")
    }
    if (list.size !in list.indices) {
        println("list size is out of valid list indices range too")
    }
}
</code></pre> 
 <p>上面代码，执行结果如下 - </p> 
 <pre><code class="lang-shell">-1 is out of range
list size is out of valid list indices range too
</code></pre> 
 <p>迭代范围：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    for (x in 1..5) {
        print(x)
    }
}
</code></pre> 
 <p>或过程：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    for (x in 1..10 step 2) {
        println(x)
    }
    println("===============================")
    for (x in 9 downTo 0 step 3) {
        println(x)
    }
}
</code></pre> 
 <p>上面代码，执行结果如下 - </p> 
 <pre><code class="lang-shell">1
3
5
7
9
===============================
9
6
3
0
</code></pre> 
 <p>有关于范围的更多信息，请参考：<a target="_blank" href="http://www.yiibai.com/kotlin/ranges.html">http://www.yiibai.com/kotlin/ranges.html</a></p> 
 <h3 id="h3-u4F7Fu7528u96C6u5408"><a name="使用集合" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用集合</h3>
 <p>迭代集合：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val items = listOf("apple", "banana", "kiwi")
    for (item in items) {
        println(item)
    }
}
</code></pre> 
 <p>检查集合是否包含一个对象，使用<code>in</code>运算符：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val items = setOf("apple", "banana", "kiwi")
    when {
        "orange" in items -&gt; println("juicy")
        "apple" in items -&gt; println("apple is fine too")
    }
}
</code></pre> 
 <p>使用<code>lambda</code>表达式过滤映射集合：</p> 
 <pre><code class="lang-kt">fun main(args: Array&lt;String&gt;) {
    val fruits = listOf("banana", "avocado", "apple", "kiwi")
    fruits
    .filter { it.startsWith("a") }
    .sortedBy { it }
    .map { it.toUpperCase() }
    .forEach { println(it) }
}
</code></pre> 
 <p>有关于高阶函数和Lambda的更多信息，请参考：<a target="_blank" href="http://www.yiibai.com/kotlin/lambdas.html">http://www.yiibai.com/kotlin/lambdas.html</a></p>
 <br>      
</div></body></html>