<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">C#事件</h1><div style="width:100%;float:left;" class="article-content">   
 <p>事件是用户操作，例如：按键，点击，鼠标移动等，或者某些事件，例如：系统生成的通知。应用程序需要响应事件发生时。 例如，中断。事件用于进程间通信。</p> 
 <h2 id="h2-u4F7Fu7528u59D4u6258u4E0Eu4E8Bu4EF6"><a name="使用委托与事件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用委托与事件</h2>
 <p>事件在类中声明和引发，并使用同一个类或其他类中的委托与事件处理程序相关联。包含事件的类用于发布事件。这被称为发布者类。接受这个事件的其他类被称为订阅者类。事件使用发布者订阅者模型。</p> 
 <p>发布者是一个包含事件和委托的定义的对象。事件委托关联也在此对象中定义。 发布者类对象调用该事件，并将其通知给其他对象。</p> 
 <p>订阅者是接受事件并提供事件处理程序的对象。发布者类中的委托调用订阅者类的方法(事件处理程序)。</p> 
 <h2 id="h2-u58F0u660Eu4E8Bu4EF6"><a name="声明事件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>声明事件</h2>
 <p>要在类中声明事件，首先必须声明事件的委托类型。 例如，</p> 
 <pre><code class="lang-csharp">public delegate string MyDel(string str);
</code></pre> 
 <p>接下来，使用<code>event</code>关键字声明事件：</p> 
 <pre><code class="lang-csharp">event MyDel MyEvent;
</code></pre> 
 <p>上面的代码定义了一个名称为<code>BoilerLogHandler</code>的委托和一个名称为<code>BoilerEventLog</code>的事件，它在引发时调用委托。</p> 
 <h2 id="h2-u4F8Bu5B50"><a name="例子" class="reference-link"></a><span class="header-link octicon octicon-link"></span>例子</h2>  
 <pre><code class="lang-csharp">using System;

namespace SampleApp {
   public delegate string MyDel(string str);

   class EventProgram {
      event MyDel MyEvent;

      public EventProgram() {
         this.MyEvent += new MyDel(this.WelcomeUser);
      }

      public string WelcomeUser(string username) {
         return "Welcome " + username;
      }

      static void Main(string[] args) {
         EventProgram obj1 = new EventProgram();
         string result = obj1.MyEvent("Yiibai Yiibai");
         Console.WriteLine(result);
      }

   }
}
</code></pre> 
 <p>当上述代码被编译并执行时，它产生以下结果：</p> 
 <pre><code class="lang-shell">Welcome Yiibai Point
</code></pre>
 <br>      
</div></body></html>