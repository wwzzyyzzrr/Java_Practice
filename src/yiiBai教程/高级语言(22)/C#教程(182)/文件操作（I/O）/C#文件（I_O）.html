<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">C#文件（I/O）</h1><div style="width:100%;float:left;" class="article-content">   
 <p>文件是存储在具有特定名称和目录路径的磁盘中的数据的集合。当文件打开以进行读取或写入时，它将成为流。</p> 
 <p>流基本上是通过通信路径的字节序列。有两个主要流：输入流和输出流。输入流用于从文件读取数据(读取操作)，输出流用于写入文件(写入操作)。</p> 
 <h2 id="h2-c-i-o-"><a name="C# I/O类" class="reference-link"></a><span class="header-link octicon octicon-link"></span>C# I/O类</h2>
 <p><code>System.IO</code>命名空间具有各种类，用于执行许多文件操作，例如：创建和删除文件，从文件读取或写入文件，关闭文件等。</p> 
 <p>下表显示了<code>System.IO</code>命名空间中的一些常用的非抽象类：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>I/O类</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><em>BinaryReader</em></td> 
    <td>从二进制流中读取原始数据。</td> 
   </tr> 
   <tr> 
    <td><em>BinaryWriter</em></td> 
    <td>以二进制格式写入原始数据。</td> 
   </tr> 
   <tr> 
    <td><em>BufferedStream</em></td> 
    <td>一个字节流的临时存储。</td> 
   </tr> 
   <tr> 
    <td><em>Directory</em></td> 
    <td>有助于操纵目录结构。</td> 
   </tr> 
   <tr> 
    <td><em>DirectoryInfo</em></td> 
    <td>用于对目录执行操作</td> 
   </tr> 
   <tr> 
    <td><em>DriveInfo</em></td> 
    <td>提供驱动器的信息。</td> 
   </tr> 
   <tr> 
    <td><em>File</em></td> 
    <td>用于帮助操纵文件。</td> 
   </tr> 
   <tr> 
    <td><em>FileInfo</em></td> 
    <td>用于对文件执行操作。</td> 
   </tr> 
   <tr> 
    <td><em>FileStream</em></td> 
    <td>用于读取和写入文件中的任何位置。</td> 
   </tr> 
   <tr> 
    <td><em>MemoryStream</em></td> 
    <td>用于随机访问存储在内存中的流式数据。</td> 
   </tr> 
   <tr> 
    <td><em>Path</em></td> 
    <td>执行路径信息的操作。</td> 
   </tr> 
   <tr> 
    <td><em>StreamReader</em></td> 
    <td>用于从字节流读取字符。</td> 
   </tr> 
   <tr> 
    <td><em>StreamWriter</em></td> 
    <td>用于将字符写入到流中。</td> 
   </tr> 
   <tr> 
    <td><em>StringReader</em></td> 
    <td>用于从字符串缓冲区读取。</td> 
   </tr> 
   <tr> 
    <td><em>StringWriter</em></td> 
    <td>用于写入字符串缓冲区。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2-filestream-"><a name="FileStream类" class="reference-link"></a><span class="header-link octicon octicon-link"></span>FileStream类</h2>
 <p><code>System.IO</code>命名空间中的<code>FileStream</code>类有助于读取，写入和关闭文件。这个类派生自抽象类<code>Stream</code>。</p> 
 <p>需要创建一个<code>FileStream</code>对象来创建一个新文件或打开现有文件。创建<code>FileStream</code>对象的语法如下：</p> 
 <pre><code class="lang-csharp">FileStream &lt;object_name&gt; = new FileStream( &lt;file_name&gt;, &lt;FileMode Enumerator&gt;, &lt;FileAccess Enumerator&gt;, &lt;FileShare Enumerator&gt;);
</code></pre> 
 <p>例如，创建一个<code>FileStream</code>对象<code>F</code>来读取一个名称为<code>sample.txt</code>的文件，如下所示：</p> 
 <pre><code class="lang-csharp">FileStream F = new FileStream("sample.txt", FileMode.Open, FileAccess.Read, FileShare.Read);
</code></pre> 
 <ul> 
  <li><p><em>FileMode</em> - <code>FileMode</code>枚举器定义打开文件的各种方法。<code>FileMode</code>枚举器的成员有：</p> 
   <ul> 
    <li><code>Append</code>：它打开一个现有的文件，并将光标放在文件的最后，或者如果该文件不存在则创建此文件。</li>
    <li><code>Create</code>：它创建一个新文件。</li>
    <li><code>CreateNew</code>： 它向操作系统指定它应该创建一个新的文件。</li>
    <li><code>Open</code>：它打开一个现有文件。</li>
    <li><code>OpenOrCreate</code>：它向操作系统指定它应该打开一个文件(如果存在)，否则应该创建一个新的文件。</li>
    <li><code>Truncate</code>：它打开一个现有文件，并将其大小截断为零字节。</li>
   </ul> </li>
  <li><p><em>FileAccess</em> - <code>FileAccess</code>枚举器有成员：<code>Read</code>，<code>ReadWrite</code>和<code>Write</code>。</p> </li>
  <li><em>FileShare</em> - <code>FileShare</code>枚举器具有以下成员：
   <ul> 
    <li><code>Inheritable</code>：它允许文件句柄将继承传递给子进程。</li>
    <li><code>None</code>：它会拒绝当前文件的共享</li>
    <li><code>Read</code>：它允许打开文件进行读取</li>
    <li><code>ReadWrite</code>：它允许打开文件进行阅读和写入</li>
    <li><code>Write</code>：它允许打开文件进行写入</li>
   </ul> </li>
 </ul> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>以下程序演示了如何使用<code>FileStream</code>类：</p>   
 <pre><code class="lang-csharp">using System;
using System.IO;

namespace FileIOApplication
{
   class Program
   {
      static void Main(string[] args)
      {
         FileStream F = new FileStream("test.dat", FileMode.OpenOrCreate, FileAccess.ReadWrite);
         for (int i = 1; i &lt;= 20; i++)
         {
            F.WriteByte((byte)i);
         }

         F.Position = 0;
         for (int i = 0; i &lt;= 20; i++)
         {
            Console.Write(F.ReadByte() + " ");
         }
         F.Close();
         Console.ReadKey();
      }
   }
}
</code></pre> 
 <p>当上述代码被编译并执行时，它产生以下结果：</p> 
 <pre><code class="lang-csharp">1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 -1
</code></pre> 
 <h2 id="h2-c-"><a name="C# 中的高级文件操作" class="reference-link"></a><span class="header-link octicon octicon-link"></span>C# 中的高级文件操作</h2>
 <p>前面的例子提供了 C# 中的简单文件操作。要利用 C# 中的<code>System.IO</code>类的强大功能，需要知道这些类常用的属性和方法。</p> 
 <p><code>System.IO</code>类中一此最常用的方法和示例如下所列 - </p> 
 <ul> 
  <li><p><a target="_blank" href="http://www.yiibai.com/csharp/csharp_text_files.html" title="读取和写入文本文件">读取和写入文本文件</a> - 它涉及到阅读和写入文本文件。<code>StreamReader</code>和<code>StreamWriter</code>类有助于完成它。</p> </li>
  <li><p><a target="_blank" href="http://www.yiibai.com/csharp/csharp_binary_files.html" title="读取和写入二进制文件">读取和写入二进制文件</a> - 它涉及从二进制文件读取和写入。<code>BinaryReader</code>和<code>BinaryWriter</code>类有助于完成此操作。</p> </li>
  <li><p><a target="_blank" href="http://www.yiibai.com/csharp/csharp_windows_file_system.html" title="操作Windows文件系统">操作Windows文件系统</a> - 它为 C# 程序员提供浏览和查找Windows文件和目录的能力。</p> </li>
 </ul>
 <br>      
</div></body></html>