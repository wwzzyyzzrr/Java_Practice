<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">C#预处理指令</h1><div style="width:100%;float:left;" class="article-content">   
 <p>预处理器指令用来在编译开始之前给编译器指示预处理信息。</p> 
 <p>所有预处理程序指令以符号<code>#</code>开头，并且只有空格字符在一行上，空格符可预处理器指令之前出现。 预处理器指令不是语句，所以它们不以分号(<code>;</code>)结尾。</p> 
 <p> C# 编译器没有分隔预处理器;，指令被处理为只有一个。 在 C# 中，预处理指令用于指示条件编译。与C语言和C++指令不同，它们不用于创建宏。 预处理程序指令必须是一行中的唯一指令。</p> 
 <h2 id="h2-c-"><a name="C# 预处理器指令" class="reference-link"></a><span class="header-link octicon octicon-link"></span>C# 预处理器指令</h2>
 <p>下表列出了 C# 中提供的预处理指令：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>预处理指令</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>#define</code></td> 
    <td>定义一个叫作符号的字符序列。</td> 
   </tr> 
   <tr> 
    <td><code>#undef</code></td> 
    <td>用于取消定义的符号。</td> 
   </tr> 
   <tr> 
    <td><code>#if</code></td> 
    <td>用来测试符号以查看它们是否为真。</td> 
   </tr> 
   <tr> 
    <td><code>#else</code></td> 
    <td>用来与<code>#if</code>来创建一个复合条件指令。</td> 
   </tr> 
   <tr> 
    <td><code>#elif</code></td> 
    <td>用来创建一个复合条件指令。</td> 
   </tr> 
   <tr> 
    <td><code>#endif</code></td> 
    <td>指定条件指令的结束。</td> 
   </tr> 
   <tr> 
    <td><code>#line</code></td> 
    <td>用于修改编译器的行号和(可选)修改错误和警告的文件名输出。</td> 
   </tr> 
   <tr> 
    <td><code>#error</code></td> 
    <td>用于从代码中的特定位置生成错误。</td> 
   </tr> 
   <tr> 
    <td><code>#warning</code></td> 
    <td>用于从代码中的特定位置生成一级警告。</td> 
   </tr> 
   <tr> 
    <td><code>#region</code></td> 
    <td>允许您在使用<em>Visual Studio</em>代码编辑器的概述功能时指定可以展开或折叠的代码块。</td> 
   </tr> 
   <tr> 
    <td><code>#endregion</code></td> 
    <td>用于标志着<code>#region</code>块的结束。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2--define-"><a name="#define预处理程序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>#define预处理程序</h2>
 <p><code>#define</code>预处理程序指令创建符号常量。<br><code>#define</code>允许定义一个符号，通过使用该符号作为传递给<code>#if</code>指令的表达式，表达式的计算结果为<code>true</code>。其语法如下：</p> 
 <pre><code class="lang-csharp">#define symbol
</code></pre> 
 <p>以下程序演示如何使用<code>#define</code>指令：</p> 
 <pre><code class="lang-csharp">#define PI 
using System;
namespace PreprocessorDAppl
{
   class Program
   {
      static void Main(string[] args)
      {
         #if (PI)
            Console.WriteLine("PI is defined");
         #else
            Console.WriteLine("PI is not defined");
         #endif
         Console.ReadKey();
      }
   }
}
</code></pre> 
 <p>当编译和执行上述代码时，会产生以下结果：</p>   
 <pre><code class="lang-shell">PI is defined
</code></pre> 
 <h2 id="h2-u6761u4EF6u6307u4EE4"><a name="条件指令" class="reference-link"></a><span class="header-link octicon octicon-link"></span>条件指令</h2>
 <p>可以使用<code>#if</code>指令创建条件指令。条件指令用于测试符号检查它们的值是否为真。 如果它们评估求值为<code>true</code>，编译器将评估求值<code>#if</code>到下一个指令之间的所有代码。</p> 
 <p>条件指令的语法是：</p> 
 <pre><code class="lang-csharp">#if symbol [operator symbol]...
</code></pre> 
 <p>其中，符号(<code>symbol</code>)是要测试的符号的名称。也可以使用布尔值：<code>true</code>和<code>false</code>，或者使用否定运算符加到符号的前面。</p> 
 <p>运算符符号是用于评估符号的运算符。运算符可以是以下任一项：</p> 
 <ul> 
  <li><code>==</code>(相等)</li>
  <li><code>!=</code>(不等式)</li>
  <li><code>&amp;&amp;</code>(和)</li>
  <li><code>||</code> (或)</li>
 </ul> 
 <p>也可以使用括号对符号和运算符进行分组。在用于编译调试版本的代码或编译特定配置时可使用条件指令。 以<code>#if</code>指令开头的条件指令必须明确地使用<code>#endif</code>指令终止。</p> 
 <p>以下程序演示了条件指令的用法：</p> 
 <pre><code class="lang-csharp">#define DEBUG
#define VC_V10
using System;
public class TestClass
{
   public static void Main()
   {
      #if (DEBUG &amp;&amp; !VC_V10)
         Console.WriteLine("DEBUG is defined");
      #elif (!DEBUG &amp;&amp; VC_V10)
         Console.WriteLine("VC_V10 is defined");
      #elif (DEBUG &amp;&amp; VC_V10)
         Console.WriteLine("DEBUG and VC_V10 are defined");
      #else
         Console.WriteLine("DEBUG and VC_V10 are not defined");
      #endif
      Console.ReadKey();
   }
}
</code></pre> 
 <p>当编译和执行上述代码时，会产生以下结果：</p> 
 <pre><code class="lang-csharp">DEBUG and VC_V10 are defined
</code></pre>
 <br>      
</div></body></html>