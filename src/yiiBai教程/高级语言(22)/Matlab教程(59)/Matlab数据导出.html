<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Matlab数据导出</h1><div style="width:100%;float:left;" class="article-content">   
 <p>MATLAB中的数据导出(或输出)可以理解为写入文件。 MATLAB允许在其他应用程序中使用读取ASCII文件的数据。 为此，MATLAB提供了几个数据导出选项。</p> 
 <p>可以创建以下类型的文件：</p> 
 <ul> 
  <li>来自数组的矩形，有分隔符的ASCII数据文件。</li>
  <li>日记(或日志)文件的按键和结果文本输出。</li>
  <li>使用<code>fprintf</code>等低级函数的专用ASCII文件。</li>
 </ul> 
 <p>MEX文件访问写入特定文本文件格式的C/C++或Fortran例程。</p> 
 <p>除此之外，还可以将数据导出到电子表格(<em>Excel</em>)。</p> 
 <p>将数字数组导出为有分隔符的ASCII数据文件有两种方法 -</p> 
 <ul> 
  <li>使用<code>save</code>函数并指定<code>-ascii</code>限定符</li>
  <li>使用<code>dlmwrite</code>函数</li>
 </ul> 
 <p>使用<code>save</code>函数的语法是：</p> 
 <pre><code class="lang-matlab">save my_data.out num_array -ascii
</code></pre> 
 <p>其中，<code>my_data.out</code>是创建的分隔ASCII数据文件，<code>num_array</code>是一个数字数组，<code>-ascii</code>是说明符。</p> 
 <p>使用<code>dlmwrite</code>函数的语法是：</p> 
 <pre><code class="lang-matlab">dlmwrite('my_data.out', num_array, 'dlm_char')
</code></pre> 
 <p>其中，<code>my_data.out</code>是分隔的ASCII数据文件，<code>num_array</code>是数组，<code>dlm_char</code>是分隔符。</p> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>以下示例演示了这个概念。创建脚本文件并键入以下代码 -</p> 
 <pre><code class="lang-matlab">num_array = [ 1 2 3 4 ; 4 5 6 7; 7 8 9 0];
save array_data1.out num_array -ascii;
type array_data1.out
dlmwrite('array_data2.out', num_array, ' ');
type array_data2.out
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">Trial&gt;&gt; num_array = [ 1 2 3 4 ; 4 5 6 7; 7 8 9 0];
save array_data1.out num_array -ascii;
type array_data1.out
dlmwrite('array_data2.out', num_array, ' ');
type array_data2.out

   1.0000000e+00   2.0000000e+00   3.0000000e+00   4.0000000e+00
   4.0000000e+00   5.0000000e+00   6.0000000e+00   7.0000000e+00
   7.0000000e+00   8.0000000e+00   9.0000000e+00   0.0000000e+00

1 2 3 4
4 5 6 7
7 8 9 0
</code></pre> 
 <p>请注意，保存<code>save -ascii</code>命令和<code>dlmwrite</code>函数不能使用单元格数组作为输入。要从单元格数组的内容创建一个分隔的ASCII文件，可以 - </p> 
 <ul> 
  <li>使用<code>cell2mat</code>函数将单元阵列转换为矩阵</li>
  <li>或使用低级文件I/O函数导出单元格数组。</li>
 </ul> 
 <p>如果使用<code>save</code>函数将字符数组写入ASCII文件，则会将ASCII等效字符写入该文件。</p> 
 <p>例如，把一个单词<code>hello</code>写到一个文件 -</p> 
 <pre><code class="lang-matlab">h = 'hello';
save textdata.out h -ascii
type textdata.out
</code></pre> 
 <p>MATLAB执行上述语句并显示以下结果。这是8位ASCII格式的字符串<code>“hello”</code>的字符。</p> 
 <pre><code class="lang-shell">1.0400000e+02   1.0100000e+02   1.0800000e+02   1.0800000e+02   1.1100000e+02
</code></pre> 
 <h2 id="h2-u5199u5230u65E5u8BB0u6587u4EF6"><a name="写到日记文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>写到日记文件</h2>
 <p>日记文件是MATLAB会话的活动日志。<code>diary</code>函数在磁盘文件中创建会话的精确副本，不包括图形。</p> 
 <p>打开<code>diary</code>函数，键入 -</p>   
 <pre><code class="lang-matlab">diary
</code></pre> 
 <p>或者，可以给出日志文件的名称，比如 -</p> 
 <pre><code class="lang-matlab">diary diary.log
</code></pre> 
 <p>关闭日记函数 -</p> 
 <pre><code class="lang-matlab">

</code></pre> 
 <p>可以在文本编辑器中打开日记文件。</p> 
 <h2 id="h2--i-o-"><a name="将数据导出到具有低级I/O的文本数据文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>将数据导出到具有低级I/O的文本数据文件</h2>
 <p>到目前为止，我们已经导出数组。 但是，您可能需要创建其他文本文件，包括数字和字符数据的组合，非矩形输出文件或具有非ASCII编码方案的文件。为了实现这些目的，MATLAB提供了低级别的<code>fprintf</code>函数。</p> 
 <p>在低级I/O文件活动中，在导出之前，需要使用<code>fopen</code>函数打开或创建一个文件，并获取文件标识符。 默认情况下，<code>fopen</code>会打开一个只读访问的文件。所以应该指定写入或附加的权限，例如<code>'w'</code>或<code>'a'</code>。</p> 
 <p>处理文件后，需要用<code>fclose(fid)</code>函数关闭它。</p> 
 <p>以下示例演示了这一概念 - </p> 
 <p><strong>示例</strong></p> 
 <p>创建脚本文件并在其中键入以下代码 -</p> 
 <pre><code class="lang-matlab">% create a matrix y, with two rows
x = 0:10:100;
y = [x; log(x)];

% open a file for writing
fid = fopen('logtable.txt', 'w');

% Table Header
fprintf(fid, 'Log     Function\n\n');

% print values in column order
% two values appear on each row of the file
fprintf(fid, '%f    %f\n', y);
fclose(fid);
% display the file created
type logtable.txt
</code></pre> 
 <p>运行文件时，会显示以下结果 -</p> 
 <pre><code class="lang-shell">Log     Function

0.000000    -Inf
10.000000    2.302585
20.000000    2.995732
30.000000    3.401197
40.000000    3.688879
50.000000    3.912023
60.000000    4.094345
70.000000    4.248495
80.000000    4.382027
90.000000    4.499810
100.000000    4.605170
</code></pre>
 <br>      
</div></body></html>