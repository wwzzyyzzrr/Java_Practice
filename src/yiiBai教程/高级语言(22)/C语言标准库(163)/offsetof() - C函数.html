<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">offsetof() - C函数</h1><div style="width:100%;float:left;" class="article-content">   
 <p> C库宏offsetof(type, member-designator)&nbsp;结果在一个常数整数 size_t 类型是一个结构成员的结构从一开始的字节偏移。构件由下式给出部件指示符，是由于在不同的结构的名称。</p> 
 <h2> 声明</h2> 
 <p> 以下是声明的 offsetof()&nbsp;宏。</p> 
 <pre class="prettyprint" style="font-size: 12px;">
offsetof(type, member-designator)
</pre> 
 <h2> 参数</h2> 
 <ul> 
  <li> <p> type&nbsp;-- 这个类成员指示符类型是一个有效的成员指示符。</p> </li> 
  <li> <p> member-designator&nbsp;-- 这是类类型成员指示符。</p> </li> 
 </ul> 
 <h2> 返回值</h2> 
 <p> 该宏返回值的类型是size_t，该类型成员的偏移值。</p> 
 <h2> 例子</h2> 
 <p> 下面的例子演示了如何使用offsetof()&nbsp;宏。&nbsp;</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>  
 <pre class="prettyprint" style="font-size: 12px;">
#include &lt;stddef.h&gt;
#include &lt;stdio.h&gt;

struct address {
   char name[50];
   char street[50];
   int phone;
};
   
int main()
{
   printf("name offset = %d byte in address structure.
",
   offsetof(struct address, name));
   
   printf("street offset = %d byte in address structure.
",
   offsetof(struct address, street));
   
   printf("phone offset = %d byte in address structure.
",
   offsetof(struct address, phone));

   return(0);
} 
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 让我们编译和运行上面的程序，这将产生以下结果：</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
name offset = 0 byte in address structure.
street offset = 50 byte in address structure.
phone offset = 100 byte in address structure.</pre> 
 <br>      
</div></body></html>