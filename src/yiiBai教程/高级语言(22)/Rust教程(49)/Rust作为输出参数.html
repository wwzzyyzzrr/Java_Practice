<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Rust作为输出参数</h1><div style="width:100%;float:left;" class="article-content">   
 <h3 id="825-as-output-parameters"> 作为输出参数</h3> 
 <p> 闭包作为输入参数是可能的，所以返回一个也应该是可能的。然而，闭合返回类型是有问题的，因为Rust目前只支持返回泛型(非通用)类型。匿名闭合类型是，根据定义，未知等返回闭合只能通过使它具体。这可以通过装箱来完成。</p> 
 <p> 有效类型返回也比以前略有不同：</p> 
 <ul> 
  <li> Fn: 通常</li> 
  <li> FnMut: 通常</li> 
  <li> FnBox: 相当于&nbsp;FnOnce&nbsp;但专门为这个应用程序，因为目前FnOnce(版本1.1.0)严重交互类型系统。</li> 
 </ul> 
 <p> 除此之外，move 关键字必须使用这标志着捕获值。这是必需的，因为通过引用任何捕获会尽快丢弃，函数退出后在闭合内是无效的引用。<br> &nbsp;</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <pre>
#![feature(fnbox)]

use std::boxed::FnBox;

// Return a closure taking no inputs and returning nothing
// which implements `FnBox` (capture by value).
fn create_fnbox() -&gt; Box
  <fnbox()>
    {
    let text = "FnBox".to_owned();

    Box::new(move || println!("This is a: {}", text))
}

fn create_fn() -&gt; Box
   <fn()>
     {
    let text = "Fn".to_owned();

    Box::new(move || println!("This is a: {}", text))
}

fn create_fnmut() -&gt; Box
    <fnmut()>
      {
    let text = "FnMut".to_owned();

    Box::new(move || println!("This is a: {}", text))
}

fn main() {
    let fn_plain = create_fn();
    let mut fn_mut = create_fnmut();
    let fn_box = create_fnbox();

    fn_plain();
    fn_mut();
    fn_box();
}

    </fnmut()>
   </fn()>
  </fnbox()></pre> 
 <h3 id="see-also"> 也可以看看：</h3> 
 <p> <a target="_blank" href="http://www.yiibai.com/rust/std_box.html">Boxing</a>,&nbsp;<a target="_blank" href="http://doc.rust-lang.org/std/ops/trait.Fn.html">Fn</a>,&nbsp;<a target="_blank" href="http://doc.rust-lang.org/std/ops/trait.FnMut.html">FnMut</a>,&nbsp;<a target="_blank" href="http://doc.rust-lang.org/std/boxed/trait.FnBox.html">FnBox</a>, 和&nbsp;<a target="_blank" href="http://www.yiibai.com/rust/generics.html">泛型</a></p> 
 <br>      
</div></body></html>