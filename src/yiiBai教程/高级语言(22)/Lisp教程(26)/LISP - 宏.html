<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">LISP - 宏</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 宏可以扩展标准LISP的语法。</p> 
 <p> 从技术上讲，宏是一个函数，它接受一个s-expression作为参数，并返回一个LISP的形式，然后进行评估计算。</p> 
 <h2> 定义一个宏</h2> 
 <p> 在LISP中，一个名为宏使用另一个名为defmacro宏定义。定义一个宏的语法：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px; overflow: auto;">
<span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">defmacro macro</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-</span><span class="pln" style="margin: 0px; padding: 0px;">name </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">parameter</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-</span><span class="pln" style="margin: 0px; padding: 0px;">list</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
 </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Optional documentation string."</span><span class="pln" style="margin: 0px; padding: 0px;">
 body</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-</span><span class="pln" style="margin: 0px; padding: 0px;">form</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 宏定义包含宏的名称，参数列表，可选的文档字符串，和Lisp表达式的体，它定义要由宏执行的任务。</p> 
 <p> 实例</p> 
 <p> 让我们写了一个名为setTo10简单的宏，将采取一系列并将其值设置为10。</p> 
 <p> 创建一个名为main.lisp新的源代码文件，并在其中输入如下代码：</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <pre class="prettyprint prettyprinted" style="font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">defmacro setTo10</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">num</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">setq num </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">10</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pln" style="margin: 0px; padding: 0px;"> num</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">))</span><span class="pln" style="margin: 0px; padding: 0px;">
 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">setq x </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">25</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">print</span><span class="pln" style="margin: 0px; padding: 0px;"> x</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
 </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">setTo10 x</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span></pre> 
 <p> 当您单击Execute按钮，或按下Ctrl+ E，LISP立即执行它，返回的结果是：</p>   
 <pre class="prettyprint prettyprinted" style="font-size: 12px; overflow: auto;">
<span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">25</span><span class="pln" style="margin: 0px; padding: 0px;"> 
</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">10</span></pre> 
 <br>      
</div></body></html>