<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">AWK基本示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 本教程将介绍一些有用的AWK例子以及命令。考虑我们有一个文本文件marks.txt将要被处理，它有以下内容：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
1)&nbsp;&nbsp;&nbsp;&nbsp;Amit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Physics&nbsp;&nbsp;&nbsp;&nbsp;80
2)&nbsp;&nbsp;&nbsp;&nbsp;Rahul&nbsp;&nbsp;&nbsp;&nbsp;Maths&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90
3)&nbsp;&nbsp;&nbsp;&nbsp;Shyam&nbsp;&nbsp;&nbsp;&nbsp;Biology&nbsp;&nbsp;&nbsp;&nbsp;87
4)&nbsp;&nbsp;&nbsp;&nbsp;Kedar&nbsp;&nbsp;&nbsp;&nbsp;English&nbsp;&nbsp;&nbsp;&nbsp;85
5)&nbsp;&nbsp;&nbsp;&nbsp;Hari&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;History&nbsp;&nbsp;&nbsp;&nbsp;89</pre> 
 <h2> 打印的列或字段</h2> 
 <p> 我们可以指示AWK从输入字段只打印某些列。下面简单的例子说明了这一点：</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'{print $3 "\t" $4}'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
Physics&nbsp;&nbsp;&nbsp;&nbsp;80
Maths&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90
Biology&nbsp;&nbsp;&nbsp;&nbsp;87
English&nbsp;&nbsp;&nbsp;&nbsp;85
History&nbsp;&nbsp;&nbsp;&nbsp;89</pre> 
 <p> 在我们的marks.txt文件中第3列包含科目名和第四列包含特定科目标记。这里使用AWK的printf命令打印这两列。在上面的例子中$3 和 $4 表示从输入记录在第三和第四个字段。</p> 
 <h2> 打印所有行</h2> 
 <p> 默认情况下AWK打印所有匹配模式行。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'/a/ {print $0}'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
2)&nbsp;&nbsp;&nbsp;&nbsp;Rahul&nbsp;&nbsp;&nbsp;&nbsp;Maths&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90
3)&nbsp;&nbsp;&nbsp;&nbsp;Shyam&nbsp;&nbsp;&nbsp;&nbsp;Biology&nbsp;&nbsp;&nbsp;&nbsp;87
4)&nbsp;&nbsp;&nbsp;&nbsp;Kedar&nbsp;&nbsp;&nbsp;&nbsp;English&nbsp;&nbsp;&nbsp;&nbsp;85
5)&nbsp;&nbsp;&nbsp;&nbsp;Hari&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;History&nbsp;&nbsp;&nbsp;&nbsp;89</pre> 
 <p> 在上面的例子中，我们正在寻找形式模式a，当模式匹配从所述主体块通过执行命令。在没有主体块- 默认采取动作是打印记录。因此，下面的命令也产生相同的结果：</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'/a/'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <h2> 通过模式打印列</h2> 
 <p> 我们已经看到，当模式匹配成功在默认情况下AWK打印全部记录。但是，我们可以指示AWK只打印某些字段。比如下面的例子打印第三和第四字段，当模式匹配成功。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'/a/ {print $3 "\t" $4}'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
Maths&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;90
Biology&nbsp;&nbsp;&nbsp;&nbsp;87
English&nbsp;&nbsp;&nbsp;&nbsp;85
History&nbsp;&nbsp;&nbsp;&nbsp;89</pre> 
 <h2> 按任何顺序打印列</h2> 
 <p> 可以以任何顺序打印列？是的！当然，我们可以做到这一点。比如下面的例子打印第4列后是第3列。</p>   
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'/a/ {print $4 "\t" $3}'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
90&nbsp;&nbsp;&nbsp;&nbsp;Maths
87&nbsp;&nbsp;&nbsp;&nbsp;Biology
85&nbsp;&nbsp;&nbsp;&nbsp;English
89&nbsp;&nbsp;&nbsp;&nbsp;History</pre> 
 <h2> 计算并打印匹配模式</h2> 
 <p> 让我们试着一个有趣的例子，我们将计算并打印行的数量，模式匹配成功的数量。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'/a/{++cnt} END {print "Count = ", cnt}'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
Count = 4</pre> 
 <p> 在上面的例子中，我们增加计数器的值在模式匹配成功时，打印END块这个值。请注意，不像其他的编程语言，这里不需要声明变量就可以直接使用它。</p> 
 <h2> 打印超过18个字符的行</h2> 
 <p> 仅打印那些含有多于18个字符的行。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">jerry</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">]</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">$ awk </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'length($0) &gt; 18'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> marks</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">txt</span></pre> 
 <p> 在执行上面的代码后，得到以下结果：</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
3)&nbsp;&nbsp;&nbsp;&nbsp;Shyam&nbsp;&nbsp;&nbsp;&nbsp;Biology&nbsp;&nbsp;&nbsp;&nbsp;87
4)&nbsp;&nbsp;&nbsp;&nbsp;Kedar&nbsp;&nbsp;&nbsp;&nbsp;English&nbsp;&nbsp;&nbsp;&nbsp;85</pre> 
 <p> AWK提供了内置的长度函数返回字符串的长度。$0 变量存储整行，并在没有主体块默认采取动作即打印操作。因此，如果一行超过18个字符，比较结果为true那么这一行将被打印出来。</p> 
 <br>      
</div></body></html>