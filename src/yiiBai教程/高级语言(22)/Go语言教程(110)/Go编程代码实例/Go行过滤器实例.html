<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Go行过滤器实例</h1><div style="width:100%;float:left;" class="article-content">   
 <p>线过滤器是一种常见类型的程序，它读取<code>stdin</code>上的输入，处理它，然后将一些派生结果打印到<code>stdout</code>。<code>grep</code>和<code>sed</code>是常用的行过滤器。</p> 
 <p>这里是一个示例行过滤器，将写入所有输入文本转换为大写。可以使用此模式来编写自己的Go行过滤器。</p> 
 <blockquote> 
  <p>所有的示例代码，都放在 <code>F:\worksp\golang</code> 目录下。安装Go编程环境请参考：<a target="_blank" href="http://www.yiibai.com/go/go_environment.html">http://www.yiibai.com/go/go_environment.html</a> </p> 
 </blockquote> 
 <p><code>line-filters.go</code>的完整代码如下所示 -</p> 
 <pre><code class="lang-go">package main

import (
    "bufio"
    "fmt"
    "os"
    "strings"
)

func main() {

    // Wrapping the unbuffered `os.Stdin` with a buffered
    // scanner gives us a convenient `Scan` method that
    // advances the scanner to the next token; which is
    // the next line in the default scanner.
    scanner := bufio.NewScanner(os.Stdin)

    for scanner.Scan() {
        // `Text` returns the current token, here the next line,
        // from the input.
        ucl := strings.ToUpper(scanner.Text())

        // Write out the uppercased line.
        fmt.Println(ucl)
    }

    // Check for errors during `Scan`. End of file is
    // expected and not reported by `Scan` as an error.
    if err := scanner.Err(); err != nil {
        fmt.Fprintln(os.Stderr, "error:", err)
        os.Exit(1)
    }
}
</code></pre> 
 <p>执行上面代码，将得到以下输出结果 - </p>   
 <pre><code class="lang-go">F:\worksp\golang&gt;go run line-filters.go
this is a Line filters demo by yiibai.com
THIS IS A LINE FILTERS DEMO BY YIIBAI.COM
yes
YES
No
NO
</code></pre>
 <br>      
</div></body></html>