<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">TestNG分组测试</h1><div style="width:100%;float:left;" class="article-content">   
 <p>分组测试是TestNG中的一个新的创新功能，它在JUnit框架中是不存在的。 它允许您将方法调度到适当的部分，并执行复杂的测试方法分组。 您不仅可以声明属于某个分组的方法，还可以指定包含其他组的组。 然后调用<code>TestNG</code>，并要求其包含一组特定的组(或正则表达式)，同时排除另一个分组。 组测试提供了如何分区测试的最大灵活性，如果您想要背靠背运行两组不同的测试，则不需要重新编译任何内容。</p> 
 <p>使用<code>&lt;groups&gt;</code>标记在<code>testng.xml</code>文件中指定分组。 它可以在<code>&lt;test&gt;</code>或<code>&lt;suite&gt;</code>标签下找到。 <code>&lt;suite&gt;</code>标签中指定分组适用于其下的所有<code>&lt;test&gt;</code>标签。</p> 
 <p>在本教程中，我们将演示如何在TestNG中进行分组测试。</p> 
 <h2 id="h2-1-"><a name="1. 在方法上的分组" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. 在方法上的分组</h2>
 <p>下面是一个测试分组示例 - </p> 
 <ul> 
  <li><code>runSelenium()</code>和<code>runSelenium1()</code>属于分组：<code>selenium-test</code>。</li>
  <li><code>testConnectOracle()</code>和<code>testConnectMsSQL()</code>属于分组：<code>database</code> 。</li>
  <li>如果分组<code>selenium-test</code>和<code>database</code>通过，则<code>runFinal()</code>将被执行。</li>
 </ul> 
 <p>创建一个 Maven 项目：<strong>GroupsTest</strong>，其目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201705/0205/554160500_18525.png" alt=""></p> 
 <p>创建一个测试类：<em>TestGroup.java</em> ，其代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai;

import org.testng.annotations.AfterGroups;
import org.testng.annotations.BeforeGroups;
import org.testng.annotations.Test;

public class TestGroup {

    @BeforeGroups("database")
    public void setupDB() {
        System.out.println("setupDB()");
    }

    @AfterGroups("database")
    public void cleanDB() {
        System.out.println("cleanDB()");
    }

    @Test(groups = "selenium-test")
    public void runSelenium() {
        System.out.println("runSelenium()");
    }

    @Test(groups = "selenium-test")
    public void runSelenium1() {
        System.out.println("runSelenium()1");
    }

    @Test(groups = "database")
    public void testConnectOracle() {
        System.out.println("testConnectOracle()");
    }

    @Test(groups = "database")
    public void testConnectMsSQL() {
        System.out.println("testConnectMsSQL");
    }

    @Test(dependsOnGroups = { "database", "selenium-test" })
    public void runFinal() {
        System.out.println("runFinal");
    }

}
</code></pre> 
 <p>运行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">[TestNG] Running:
  C:\Users\Administrator\AppData\Local\Temp\testng-eclipse-326443385\testng-customsuite.xml

runSelenium()
runSelenium()1
setupDB()
testConnectMsSQL
testConnectOracle()
cleanDB()
runFinal
PASSED: runSelenium
PASSED: runSelenium1
PASSED: testConnectMsSQL
PASSED: testConnectOracle
PASSED: runFinal

===============================================
    Default test
    Tests run: 5, Failures: 0, Skips: 0
===============================================


===============================================
Default suite
Total tests run: 5, Failures: 0, Skips: 0
===============================================

[TestNG] Time taken by org.testng.reporters.XMLReporter@1b40d5f0: 14 ms
[TestNG] Time taken by org.testng.reporters.SuiteHTMLReporter@6ea6d14e: 38 ms
[TestNG] Time taken by org.testng.reporters.EmailableReporter2@4563e9ab: 5 ms
[TestNG] Time taken by [FailedReporter passed=0 failed=0 skipped=0]: 0 ms
[TestNG] Time taken by org.testng.reporters.jq.Main@2aaf7cc2: 41 ms
[TestNG] Time taken by org.testng.reporters.JUnitReportReporter@45c8e616: 4 ms
</code></pre> 
 <h2 id="h2-2-"><a name="2. 在类上的分组" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. 在类上的分组</h2>
 <p>“分组”可以在类上应用。 在下面的示例中，“<code>TestSelenium</code>”类的每个公共方法都属于分组：<code>selenium-test</code> 。</p> 
 <p>创建一个测试类：<em>TestSelenium.java</em> ，其代码如下所示 -</p>   
 <pre><code class="lang-java">package com.yiibai;

import org.testng.annotations.Test;

@Test(groups = "selenium-test")
public class TestSelenium {

    public void runSelenium() {
        System.out.println("runSelenium()");
    }

    public void runSelenium1() {
        System.out.println("runSelenium()1");
    }

}
</code></pre> 
 <p>创建一个XML文件来运行<code>2</code>个测试类。</p> 
 <p>创建一个测试类：<em>testng.xml</em> ，其代码如下所示 -</p> 
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE suite SYSTEM "http://testng.org/testng-1.0.dtd" &gt;

&lt;suite name="TestAll"&gt;

    &lt;test name="final"&gt;
        &lt;classes&gt;
            &lt;class name="com.yiibai.TestSelenium" /&gt;
            &lt;class name="com.yiibai.TestGroup" /&gt;
        &lt;/classes&gt;
    &lt;/test&gt;

    &lt;!-- Run test method on group "selenium" only --&gt;
    &lt;test name="selenium"&gt;

        &lt;groups&gt;
            &lt;run&gt;
                &lt;include name="selenium-test" /&gt;
            &lt;/run&gt;
        &lt;/groups&gt;

        &lt;classes&gt;
            &lt;class name="com.yiibai.TestSelenium" /&gt;
            &lt;class name="com.yiibai.TestGroup" /&gt;
        &lt;/classes&gt;

    &lt;/test&gt;

&lt;/suite&gt;
</code></pre> 
 <p>运行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">[TestNG] Running:
  F:\worksp\testng\GroupsTest\src\main\java\com\yiibai\testng.xml

runSelenium()
runSelenium()1
runSelenium()
runSelenium()1
setupDB()
testConnectMsSQL
testConnectOracle()
cleanDB()
runFinal
runSelenium()
runSelenium()1
runSelenium()
runSelenium()1

===============================================
TestAll
Total tests run: 11, Failures: 0, Skips: 0
===============================================
</code></pre> 
 <h2 id="h2-3-"><a name="3. 其它分组" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. 其它分组</h2>
 <p>测试方法也可以同时属于多个分组，如下代码所示 -</p> 
 <pre><code class="lang-java">@Test(groups = {"mysql","database"})
public void testConnectMsSQL() {
    System.out.println("testConnectMsSQL");
}
</code></pre>
 <br>      
</div></body></html>