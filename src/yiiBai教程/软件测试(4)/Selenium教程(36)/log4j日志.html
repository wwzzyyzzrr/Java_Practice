<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">log4j日志</h1><div style="width:100%;float:left;" class="article-content">   
 <h2> log4j日志</h2> 
 <p> Log4j是审计日志框架，提供有关执行过程中发生了什么样的信息。它具有以下优点：</p> 
 <ul> 
  <li> <p> 让我们来了解应用程序运行。</p> </li> 
  <li> <p> 日志输出可以保存，可以在以后进行分析。</p> </li> 
  <li> <p> 有助于调试，以防自动化测试失败</p> </li> 
  <li> <p> 也可用于审计目的看应用的健康。</p> </li> 
 </ul> 
 <h2> 组件</h2> 
 <p> 1，Logger类的实例。</p> 
 <p> 2，用于记录该消息为以下之一日志级别的方法</p> 
 <ul> 
  <li> <p> error</p> </li> 
  <li> <p> warn</p> </li> 
  <li> <p> info</p> </li> 
  <li> <p> debug</p> </li> 
  <li> <p> log</p> </li> 
 </ul> 
 <h2> 示例</h2> 
 <p> 让我们同样用百分比计算器这个演示。</p> 
 <p> 第1步：从https://logging.apache.org/log4j/1.2/download.htmll下载log4j的JAR文件，并将下载JAR文件的解压缩格式。</p> 
 <img alt="selenium_ide_158" src="/uploads/allimg/140928/0H2336102-0.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> 第2步：通过浏览到文件菜单中创建'New Java Project'。</p> 
 <img alt="selenium_ide_159" src="/uploads/allimg/140928/0H23361U-1.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第3步：</strong>输入项目的名称为“log4j_demo”，然后单击“Next”</p> 
 <img alt="selenium_ide_160" src="/uploads/allimg/140928/0H233I09-2.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第4步：</strong>单击添加外部JAR，并添加“Log4j-1.2.17.jar”</p> 
 <img alt="selenium_ide_161" src="/uploads/allimg/140928/0H2333A8-3.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第5步：</strong>单击添加外部JAR，并添加Selenium webdriver的类库。</p> 
 <img alt="selenium_ide_162" src="/uploads/allimg/140928/0H2332636-4.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第6步：</strong>单击添加外部JAR，并添加Selenium webdriver的JAR文件的位于libs文件夹中。</p> 
 <img alt="selenium_ide_163" src="/uploads/allimg/140928/0H233G29-5.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第7步：</strong>使用它我们可以指定Log4j的属性添加一个新的XML文件。</p> 
 <img alt="selenium_ide_164" src="/uploads/allimg/140928/0H2331054-6.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第8步：</strong>输入日志文件的名称为“log4j.xml”。</p> 
 <img alt="selenium_ide_165" src="/uploads/allimg/140928/0H2334514-7.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第9步：</strong>下面的最终文件夹结构如下所示。</p> 
 <img alt="selenium_ide_166" src="/uploads/allimg/140928/0H2336133-8.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> <strong>第10步：</strong>现在增加Log4j 这将被记录执行过程中的性能。</p> 
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE log4j:configuration SYSTEM "log4j.dtd"&gt;
&lt;log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/" debug="false"&gt;
	&lt;appender name="fileAppender" class="org.apache.log4j.FileAppender"&gt;
		&lt;param name="Threshold" value="INFO" /&gt;
		&lt;param name="File" value="percent_calculator.log"/&gt;
			&lt;layout class="org.apache.log4j.PatternLayout"&gt;
				&lt;param name="ConversionPattern" value="%d{yyyy-MM-dd HH:mm:ss}  [%c] (%t:%x) %m%n" /&gt;
			&lt;/layout&gt;
	&lt;/appender&gt;
	&lt;root&gt;
		&lt;level value="INFO"/&gt;
		&lt;appender-ref ref="fileAppender"/&gt;
	&lt;/root&gt;
&lt;/log4j:configuration&gt;</pre> 
 <p> <strong>第11步：</strong>现在用于演示的目的，我们将结合log4j在相同的测试，我们已经完成（百分比计算器）。添加一个类文件“Main”方法功能</p>   
 <pre class="prettyprint" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
package log4j_demo;
import org.apache.log4j.LogManager;
import org.apache.log4j.Logger;
import org.apache.log4j.xml.DOMConfigurator;

import java.util.concurrent.TimeUnit;
import org.openqa.selenium.*;
import org.openqa.selenium.firefox.FirefoxDriver;


public class log4j_demo 
{
	
  static final Logger logger = LogManager.getLogger(log4j_demo.class.getName());
  public static void main(String[] args) 
  {

	DOMConfigurator.configure("log4j.xml");

	logger.info("# # # # # # # # # # # # # # # # # # # # # # # # # # # ");
	logger.info("TEST Has Started");
	
	WebDriver driver = new FirefoxDriver();

	//Puts a Implicit wait, Will wait for 10 seconds before throwing exception
	driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);

	//Launch website
	driver.navigate().to("http://www.calculator.net/"); logger.info("Open Calc Application");
	
	//Maximize the browser
	driver.manage().window().maximize();

	// Click on Math Calculators
	driver.findElement(By.xpath(".//*[@id='menu']/div[3]/a")).click();  logger.info("Clicked Math Calculator Link");
  
	// Click on Percent Calculators
	driver.findElement(By.xpath(".//*[@id='menu']/div[4]/div[3]/a")).click(); logger.info("Clicked Percent Calculator Link");

	// Enter value 10 in the first number of the percent Calculator
	driver.findElement(By.id("cpar1")).sendKeys("10"); logger.info("Entered Value into First Text Box");


	// Enter value 50 in the second number of the percent Calculator
	driver.findElement(By.id("cpar2")).sendKeys("50");  logger.info("Entered Value into Second Text Box");
	
	// Click Calculate Button
	driver.findElement(By.xpath(".//*[@id='content']/table/tbody/tr/td[2]/input")).click(); logger.info("Click Calculate Button");

	// Get the Result Text based on its xpath
	String result = driver.findElement(By.xpath(".//*[@id='content']/p[2]/span/font/b")).getText();  logger.info("Get Text Value");
	
	//Print a Log In message to the screen
	logger.info(" The Result is " + result);
	
	if(result.equals("5"))
	{
		logger.info("The Result is Pass");

	}
	else
	{
		logger.error("TEST FAILED. NEEDS INVESTIGATION");

	}
	
	logger.info("# # # # # # # # # # # # # # # # # # # # # # # # # # # ");
	
	//Close the Browser.
	driver.close();    
  }
}</pre> 
 <h2> 执行</h2> 
 <p> 在执行日志文件的根文件夹中创建如下图所示。在Eclipse中不能找出文件。应该打开“Windows资源管理器”来显示相同。</p> 
 <img alt="selenium_ide_167" src="/uploads/allimg/140928/0H2335B4-9.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> 该文件的内容如下所示。</p> 
 <img alt="selenium_ide_168" src="/uploads/allimg/140928/0H2334D2-10.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <div>
   &nbsp;
 </div> 
 <br>      
</div></body></html>