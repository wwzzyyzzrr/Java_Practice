<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">ASP.NET多视图</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>MultiView</code>和<code>View</code>控件允许将页面的内容分成不同的组，每次只显示一个组。每个<code>View</code>控件管理一组内容，所有的<code>View</code>控件一起放在一个<code>MultiView</code>控件中。</p> 
 <p><code>MultiView</code>控件一次负责显示一个<code>View</code>控件。显示的视图称为活动视图。</p> 
 <p><code>MultiView</code>控件的语法是：</p> 
 <pre><code class="lang-aspnet">&lt;asp:MultView ID= "MultiView1" runat= "server"&gt;&lt;/asp:MultiView&gt;
</code></pre> 
 <p><code>View</code>控件的语法是：</p> 
 <pre><code class="lang-aspnet">&lt;asp:View ID= "View1" runat= "server"&gt;&lt;/asp:View&gt;
</code></pre> 
 <p>但是，<code>View</code>控件不能独立存在。如果尝试单独使用它，则会导致错误。它始终与多视图控件一起使用，如下所示：</p> 
 <pre><code class="lang-aspnet">&lt;asp:MultView ID= "MultiView1" runat= "server"&gt;
   &lt;asp:View ID= "View1" runat= "server"&gt; &lt;/asp:View&gt;
&lt;/asp:MultiView&gt;
</code></pre> 
 <h2 id="h2-u89C6u56FEu548Cu591Au89C6u56FEu63A7u4EF6u7684u5C5Eu6027"><a name="视图和多视图控件的属性" class="reference-link"></a><span class="header-link octicon octicon-link"></span>视图和多视图控件的属性</h2>
 <p><code>View</code>和<code>MultiView</code>控件都是从<code>Control</code>类派生的，并继承了它的所有属性，方法和事件。 <code>View</code>控件最重要的属性是<code>Boolean</code>类型的<code>Visible</code>属性，它设置视图的可见性。</p> 
 <p><code>MultiView</code>控件具有以下重要属性：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>属性</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>Views</code></td> 
    <td><code>MultiView</code>中的<code>View</code>控件的集合。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>ActiveViewIndex</code></td> 
    <td>表示活动视图的基于<code>0</code>的索引。如果没有视图处于活动状态，则索引为<code>-1</code>。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>与<code>MultiView</code>控件导航关联的按钮控件的<code>CommandName</code>属性与<code>MultiView</code>控件的某个相关字段相关联。</p> 
 <p>例如，如果<code>CommandName</code>值为<code>NextView</code>的按钮控件与多视图的导航相关联，则单击按钮时会自动导航到下一个视图。</p> 
 <p>下表显示了上述属性的默认命令名称：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>属性</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>NextViewCommandName</code></td> 
    <td><code>NextView</code></td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>PreviousViewCommandName</code></td> 
    <td><code>PrevView</code></td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>SwitchViewByIDCommandName</code></td> 
    <td><code>SwitchViewByID</code></td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>SwitchViewByIndexCommandName</code></td> 
    <td><code>SwitchViewByIndex</code></td> 
   </tr> 
  </tbody> 
 </table> 
 <p>多视图控制的重要方法是：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>SetActiveview</code></td> 
    <td>设置活动视图</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>GetActiveview</code></td> 
    <td>检索活动视图</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>每次更改视图时，页面都会回发到服务器，并引发许多事件。一些重要事件是：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>ActiveViewChanged</code></td> 
    <td>当视图改变时引发</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>Activate</code></td> 
    <td>由活动的视图引发</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>Deactivate</code></td> 
    <td>由非活动的视图引发</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>除了上面提到的属性，方法和事件，<code>multiview</code>控件继承了控件和对象类的成员。</p> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>示例页面有三个视图。每个视图都有两个按钮用于导航视图。首先打开<em>Visual Studio</em>，创建一个名称为：<em>MultiViews</em> 的空ASP.NET网站项目，如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/0612/565101221_89374.png" alt=""></p> 
 <p>在这个项目名称上点击右键，在弹出的选项中选择：<em>添加</em> -&gt; <em>添加新项</em>，选择<em>Web窗体</em>，创建一个文件：<em>Default.aspx</em>， 如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/0612/218101222_12738.png" alt=""></p> 
 <p>以下是<em>Default.aspx</em> 文件代码：</p> 
 <pre><code class="lang-aspnet">&lt;%@ Page Language="C#" AutoEventWireup="true" CodeFile="Default.aspx.cs" Inherits="_Default" %&gt;

&lt;!DOCTYPE html&gt;

&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head runat="server"&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"/&gt;
    &lt;title&gt;多视图示例&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;form id="form1" runat="server"&gt;

         &lt;div&gt;
            &lt;h2&gt;多视图和视图控件&lt;/h2&gt;

            &lt;hr /&gt;
            选择视图：&lt;asp:DropDownList ID="DropDownList1" runat="server" Autopostback="true" onselectedindexchanged="DropDownList1_SelectedIndexChanged"&gt;
                &lt;asp:ListItem Value="0"&gt;1&lt;/asp:ListItem&gt;  
                &lt;asp:ListItem Value="1"&gt;2&lt;/asp:ListItem&gt;  
                &lt;asp:ListItem Value="2"&gt;3&lt;/asp:ListItem&gt;          
            &lt;/asp:DropDownList&gt;



            &lt;asp:MultiView ID="MultiView1" runat="server" ActiveViewIndex="0"  onactiveviewchanged="MultiView1_ActiveViewChanged"&gt;
               &lt;asp:View ID="View1" runat="server"&gt;
                  &lt;h3&gt;这是第一个视图&lt;/h3&gt;
                  &lt;br /&gt;                  
                  &lt;asp:Button CommandArgument="View3" CommandName="SwitchViewByID" ID="btnlast" runat="server" Text  ="&lt;&lt;前一个视图" /&gt;
                  &lt;asp:Button CommandName="NextView" ID="btnnext1" runat="server" Text = "后一个视图&gt;&gt;" /&gt;
               &lt;/asp:View&gt; 

               &lt;asp:View ID="View2" runat="server"&gt;
                  &lt;h3&gt;这是第二个视图&lt;/h3&gt;

                  &lt;asp:Button CommandName="PrevView" ID="btnprevious2" runat="server" Text = "&lt;&lt;前一个视图" /&gt;
                   &lt;asp:Button CommandName="NextView" ID="btnnext2" runat="server" Text = "下一个视图&gt;&gt;" /&gt;
               &lt;/asp:View&gt; 

               &lt;asp:View ID="View3" runat="server"&gt;
                  &lt;h3&gt; 这是第三个视图&lt;/h3&gt;
                  &lt;br /&gt;
                  &lt;asp:Calendar ID="Calender1" runat="server"&gt;&lt;/asp:Calendar&gt;
                  &lt;br /&gt;                  
                  &lt;asp:Button CommandName="PrevView" ID="btnprevious" runat="server" Text = "&lt;&lt;前一个视图" /&gt;
                   &lt;asp:Button  CommandArgument="0" CommandName="SwitchViewByIndex" ID="btnfirst"   runat="server" Text = "后一个视图&gt;&gt;" /&gt;
               &lt;/asp:View&gt; 

            &lt;/asp:MultiView&gt;
         &lt;/div&gt;

      &lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>以下是<em>Default.aspx.cs</em> 文件代码：</p>   
 <pre><code class="lang-csharp">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

public partial class _Default : System.Web.UI.Page
{

    protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.QueryString["id"] != null)
        {
            MultiView1.ActiveViewIndex = Convert.ToInt32(Request.QueryString["id"]);
        }
    }

    protected void DropDownList1_SelectedIndexChanged(object sender, EventArgs e)
    {
        //设置当前被显示的控件为下拉列表被选中的值  
        MultiView1.ActiveViewIndex = Convert.ToInt32(DropDownList1.SelectedValue);

    }

    // 默认显示哪个视图？
    protected void MultiView1_ActiveViewChanged(object sender, EventArgs e)
    {
        // MultiView1.ActiveViewIndex = 0;
    }
}
</code></pre> 
 <p>运行上面项目，得到以第一个界面如下 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/0612/230101258_70696.png" alt=""></p> 
 <p>可通过上面的按钮提示，切换视图 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/0612/888111202_31253.png" alt=""></p> 
 <blockquote> 
  <p>注意以下几点：</p> 
 </blockquote> 
 <p><code>MultiView.ActiveViewIndex</code>确定将显示哪个视图。这是在页面上呈现的唯一视图。 当没有显示视图时，<code>ActiveViewIndex</code>的默认值是<code>-1</code>。由于<code>ActiveViewIndex</code>在本例中定义为<code>2</code>，所以在执行时会显示第三个视图。</p>
 <br>      
</div></body></html>