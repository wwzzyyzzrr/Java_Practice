<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">VueJS Reactive接口</h1><div style="width:100%;float:left;" class="article-content">   
 <p>VueJS提供了添加反应性到动态添加的属性的选项。考虑到已经创建了Vue实例并需要添加<code>watch</code>属性。它可以做到如下 -</p> 
 <p>创建一个文件：<em>reactive-interface.html</em> - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJS Reactive接口&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "app"&gt;
         &lt;p style = "font-size:25px;"&gt;Counter: {{ counter }}&lt;/p&gt;
         &lt;button @click = "counter++" style = "font-size:25px;"&gt;Click Me&lt;/button&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var vm = new Vue({
            el: '#app',
            data: {
               counter: 1
            }
         });
         vm.$watch('counter', function(nval, oval) {
            alert('Counter is incremented :' + oval + ' to ' + nval + '!');
         });
         setTimeout(
            function(){
               vm.counter = 20;
            },2000
         );
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>数据对象中有一个属性计数器(<code>counter</code>)被定义为<code>1</code>。当我们点击按钮时，计数器(<code>counter</code>)会增加。</p> 
 <p>Vue实例已经被创建。 为了增加监视(<code>watch</code>)，还需要这样做 -</p> 
 <pre><code class="lang-html">vm.$watch('counter', function(nval, oval) {
   alert('Counter is incremented :' + oval + ' to ' + nval + '!');
});
</code></pre> 
 <p>需要使用<code>$watch</code>在vue实例之外添加监视。 添加了一个警报(<code>alert()</code>)，显示计数器属性的值更改。 还增加了一个定时器功能，即<code>setTimeout</code>，它将计数器值设置为<code>20</code>。</p> 
 <pre><code class="lang-html">setTimeout(
   function(){
      vm.counter = 20;
   },2000
);
</code></pre> 
 <p>每当计数器发生变化时，<code>watch</code>方法中的警报就会被触发，如下图所示。<br><img src="http://www.yiibai.com/uploads/images/201712/2412/863111205_17310.png" alt=""></p> 
 <p>VueJS无法检测属性添加和删除。 最好的方法是始终声明属性，这些属性在Vue实例中需要被预先反应。如果需要在运行时添加属性，可以使用Vue全局<code>Vue.set</code>和<code>Vue.delete</code>方法。</p> 
 <h4 id="h4-1-vue-set"><a name="1. Vue.set" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. Vue.set</h4>
 <p>此方法有助于在对象上设置属性。它用来绕过Vue无法检测属性添加的限制。<br><strong>语法</strong></p> 
 <pre><code class="lang-html">Vue.set( target, key, value )
</code></pre> 
 <p>在这里，</p> 
 <ul> 
  <li><em>target</em>：可以是一个对象或一个数组</li>
  <li><em>key</em>：可以是字符串或数字</li>
  <li><em>value</em>：可以是任何类型的值</li>
 </ul> 
 <p>下面来看一个例子。创建一个文件：<em>vue-set.html</em> - </p> 
 <pre><code class="lang-html">

</code></pre> 
 <p>在上面的例子中，在开始时使用下面的一段代码创建了一个变量<code>myproduct</code>。</p> 
 <pre><code class="lang-js">var myproduct = {"id":1, name:"book", "price":"20.00"};
</code></pre> 
 <p>它被赋予Vue实例中的数据对象如下 -</p> 
 <pre><code class="lang-js">var vm = new Vue({
   el: '#app',
   data: {
      counter: 1,
      products: myproduct
   }
});
</code></pre> 
 <p>考虑一下，在创建Vue实例之后，如果想添加一个属性到<code>myproduct</code>数组中。可以通过如下方法做到 -</p> 
 <pre><code class="lang-js">vm.products.qty = "1";
</code></pre> 
 <p>下面来看看看控制台中的输出。如下所示 -<br><img src="http://www.yiibai.com/uploads/images/201712/2412/969111212_56527.png" alt=""></p> 
 <p>如上所见，在产品中添加数量。 <code>get/set</code>方法基本上增加了反应性，可用于<code>id</code>，<code>name</code>和<code>price</code>，不可用于<code>qty</code>。</p> 
 <p>不能通过添加vue对象来实现反应。VueJS大多希望在开始时创建所有的属性。 但是，如果稍后需要添加它，可以使用<code>Vue.set</code>。 为此，需要使用vue全局设置它，即<code>Vue.set</code>。</p> 
 <p><strong>示例</strong></p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;VueJs Instance&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "app"&gt;
         &lt;p style = "font-size:25px;"&gt;Counter: {{ products.id }}&lt;/p&gt;
         &lt;button @click = "products.id++" style = "font-size:25px;"&gt;Click Me&lt;/button&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var myproduct = {"id":1, name:"book", "price":"20.00"};
         var vm = new Vue({
            el: '#app',
            data: {
               counter: 1,
               products: myproduct
            }
         });
         Vue.set(myproduct, 'qty', 1);
         console.log(vm);
         vm.$watch('counter', function(nval, oval) {
            alert('Counter is incremented :' + oval + ' to ' + nval + '!');
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>上面示例中使用<code>Vue.set</code>添加数组到数组，使用下面的一段代码。</p>   
 <pre><code class="lang-html">Vue.set(myproduct, 'qty', 1);
</code></pre> 
 <p>vue对象如下控制台输出。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/2412/998111219_55750.png" alt=""></p> 
 <p>现在，可以看到使用<code>Vue.set</code>添加的数量的<code>get/set</code>。</p> 
 <h4 id="h4-2-vue-delete"><a name="2. Vue.delete" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. Vue.delete</h4>
 <p>该函数用于动态删除属性。</p> 
 <p><strong>示例</strong></p> 
 <pre><code class="lang-html">Vue.delete( target, key )
</code></pre> 
 <p>在这里，</p> 
 <ul> 
  <li><em>target</em>：可以是一个对象或一个数组</li>
  <li><em>key</em>：可以是字符串或数字</li>
  <li><em>value</em>：可以是任何类型的值</li>
 </ul> 
 <p>参考以下代码 - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;title&gt;VueJs Instance&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "app"&gt;
         &lt;p style = "font-size:25px;"&gt;Counter: {{ products.id }}&lt;/p&gt;
         &lt;button @click = "products.id++" style = "font-size:25px;"&gt;Click Me&lt;/button&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var myproduct = {"id":1, name:"book", "price":"20.00"};
         var vm = new Vue({
            el: '#app',
            data: {
               counter: 1,
               products: myproduct
            }
         });
         Vue.delete(myproduct, 'price');
         console.log(vm);
         vm.$watch('counter', function(nval, oval) {
            alert('Counter is incremented :' + oval + ' to ' + nval + '!');
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在上面的例子中，使用了Vue.delete来从数组中删除价格。</p> 
 <pre><code class="lang-html">Vue.delete(myproduct, 'price');
</code></pre> 
 <p>以下是在控制台中输出 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/2412/694111223_74141.png" alt=""></p> 
 <p>删除后，只能看到价格被删除的ID和名称。也可以注意到<code>get/set</code>方法被删除。</p>
 <br>      
</div></body></html>