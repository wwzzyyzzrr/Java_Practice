<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">VueJS计算属性</h1><div style="width:100%;float:left;" class="article-content">   
 <p>我们已经看到了Vue实例和组件的方法。 计算属性就像方法，但与方法相比有一些区别，我们将在本章中讨论。</p> 
 <p>在本章最后，您将能够理解并决定何时使用方法以及何时使用计算属性。</p> 
 <p>下面通过使用一个例子来理解计算属性。创建一个文件：<em>computed-properties.html</em> -</p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs计算属性示例&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "computed_props"&gt;
         名字 : &lt;input type = "text" v-model = "name" /&gt; &lt;br/&gt;&lt;br/&gt;
         城市 : &lt;input type = "text" v-model = "city"/&gt; &lt;br/&gt;&lt;br/&gt;
         &lt;p&gt;名字：{{name}}，所在城市：{{city}}&lt;/p&gt;
         &lt;p&gt;使用计算方法 : {{getinfo}}&lt;/p&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript" src = "js/vue_computedprops.js"&gt;&lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>创建另一个文件：<em>vue_computeprops.js</em> - </p> 
 <pre><code class="lang-js">var vm = new Vue({
   el: '#computed_props',
   data: {
      name :"",
      city :"",
      birthyear : ""
   },
   computed :{
      getinfo : function(){
         return this.name +" ，所在城市："+ this.city;
      }
   }
})
</code></pre> 
 <p>在这里，创建了带有名字和城市的<code>computed-properties.html</code>文件。 名字和城市是使用属性<code>name</code>和<code>city</code>绑定的文本框。调用计算方法 - <code>getinfo</code>，它返回输入的名字和城市。</p> 
 <pre><code class="lang-js">computed :{
      getinfo : function(){
         return this.name +" ，所在城市："+ this.city;
      }
   }
</code></pre> 
 <p>当键入文本框时，函数返回的是相同的，当属性<code>name</code>或<code>city</code>改变时。 因此，在计算属性的帮助下，不必做任何具体的事情，比如调用函数。 通过计算属性，它可以自己调用，就像名字和城市在变化中使用的属性一样。在下面的浏览器中显示相同的内容。输入文本框，并使用计算的功能更新。<br><img src="http://www.yiibai.com/uploads/images/201712/2012/224111204_17469.gif" alt=""></p> 
 <p>现在，我们试着了解一个方法和一个计算属性之间的区别。 两者都是对象。 有里面定义的函数，它返回一个值。</p> 
 <p>在方法的情况下，我们将其称为函数，并将其作为属性进行计算。 使用下面的例子，来了解方法和计算属性的区别。<br>创建一个文件：<em>computed-properties2.html</em> - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs计算属性VS函数示例&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "computed_props"&gt;
         &lt;p style = "background-color:#eee;"&gt;Random No from computed property: {{getrandomno}}&lt;/p&gt;
         &lt;p&gt;Random No from method: {{getrandomno1()}}&lt;/p&gt;
         &lt;p&gt;Random No from method : {{getrandomno1()}}&lt;/p&gt;
         &lt;p  style = "background-color:#eee;"&gt;Random No from computed property: {{getrandomno}}&lt;/p&gt;
         &lt;p  style = "background-color:#eee;"&gt;Random No from computed property: {{getrandomno}}&lt;/p&gt;
         &lt;p  style = "background-color:#eee;"&gt;Random No from computed
            property: {{getrandomno}}&lt;/h1&gt;
         &lt;p&gt;Random No from method: {{getrandomno1()}}&lt;/p&gt;
         &lt;p&gt;Random No from method: {{getrandomno1()}}&lt;/p&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var vm = new Vue({
            el: '#computed_props',
            data: {
               name : "helloworld"
            },
            methods: {
               getrandomno1 : function() {
                  return Math.random();
               }
            },
            computed :{
               getrandomno : function(){
                  return Math.random();
               }
            }
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在上面的代码中，我们创建了一个名为<code>getrandomno1</code>的方法和一个带有函数<code>getrandomno</code>的计算属性。两者都使用<code>Math.random()</code>函数返回随机数。<br>它显示在浏览器中，如下所示。 该方法和计算属性被称为多次显示差异。<br><img src="http://www.yiibai.com/uploads/images/201712/2012/864111209_22516.png" alt=""></p> 
 <p>如果看一下上面的值，会看到从计算属性返回的随机数保持不变，而不管它被调用的次数。 这意味着每次调用时都会更新最后一个值。 而对于一个方法来说，这是一个函数，因此，每次调用它都会返回一个不同的值。</p> 
 <h2 id="h2--strong-get-set-strong-"><a name="<strong>计算属性中的Get/Set</strong>函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span><strong>计算属性中的Get/Set</strong>函数</h2>
 <p>在本节中，我们将通过一个示例来了解计算属性中的<code>get/set</code>函数。创建一个文件：<em>computed-properties3.html</em> - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs计算属性VS函数示例&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "computed_props"&gt;
         &lt;input type = "text" v-model = "userinfo" /&gt;
         &lt;p&gt;名字：{{name}}&lt;/p&gt;
         &lt;p&gt;城市：{{city}}&lt;/p&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var vm = new Vue({
            el: '#computed_props',
            data: {
               name : "Maxsu",
               city : "海口"
            },
            methods: {
            },
            computed :{
               userinfo : {
                  get : function() {
                     return this.name+"，城市："+this.city;
                  }
               }
            }
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>上面已经定义了一个绑定到<code>userinfo</code>输入框，这是一个计算属性。 它返回一个调用<code>get</code>函数，它给出了用户信息，即名字和城市。 此外，显示的名字和城市的代码为 -</p>   
 <pre><code class="lang-html">&lt;p&gt;名字：{{name}}&lt;/p&gt;
&lt;p&gt;城市：{{city}}&lt;/p&gt;
</code></pre> 
 <p>在浏览器中查看，效果如下 -<br><img src="http://www.yiibai.com/uploads/images/201712/2012/741111216_63972.png" alt=""></p> 
 <p>现在，如果想要在文本框中更改名称或城市时，将会看到相同的内容不会反映在输入框的下方呢？如何做到？</p> 
 <p>在<code>userinfo</code>计算属性中添加<code>setter</code>函数。参考以下代码 - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs计算属性VS函数示例&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "computed_props"&gt;
         &lt;input type = "text" v-model = "userinfo" /&gt;
         &lt;p&gt;名字：{{name}}&lt;/p&gt;
         &lt;p&gt;城市：{{city}}&lt;/p&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var vm = new Vue({
            el: '#computed_props',
            data: {
               name : "Maxsu",
               city : "海口"
            },
            methods: {
            },
            computed :{
               userinfo : {
                  get : function() {
                      if(this.city){
                        return this.name+" "+this.city;    
                      }else{
                        return this.name;
                      }

                  },
                  set : function(name) {
                     var fname = name.split(" ");
                     this.name = fname[0];
                     if(fname[1]!=undefined){
                        this.city = fname[1];
                     }  
                  }
               }
            }
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>我们在<code>userinfo</code>计算属性中添加了<code>set</code>函数。</p> 
 <pre><code class="lang-js">computed :{
               userinfo : {
                  get : function() {
                      if(this.city){
                        return this.name+" "+this.city;    
                      }else{
                        return this.name;
                      }

                  },
                  set : function(name) {
                     var fname = name.split(" ");
                     this.name = fname[0];
                     if(fname[1]!=undefined){
                        this.city = fname[1];
                     }  
                  }
               }
            }
</code></pre> 
 <p>使用<code>name</code>作为参数，它是文本框中的值。之后使用空格符(<code>" "</code>)分割，得到名字和城市新值。当运行代码并编辑文本框时，浏览器中将显示相同的内容。名字和城市将因<code>set</code>函数的作用被更新。如果输入被编辑，那么 <code>get</code>函数返回名字和城市，而<code>set</code>函数负责更新它。如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/2012/790111255_94740.gif" alt=""></p>
 <br>      
</div></body></html>