<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">VueJS指令</h1><div style="width:100%;float:left;" class="article-content">   
 <p>指令是指示VueJS以某种方式执行某些操作。在前面的学习中，我们已经看到了诸如：<code>v-if</code>，<code>v-show</code>，<code>v-else</code>，<code>v-for</code>，<code>v-bind</code>，<code>v-model</code>，<code>v-on</code>等指令。</p> 
 <p>在本章中，将学习自定义指令。创建类似于我们在学习组件中使用的全局指令。</p> 
 <p><strong>语法</strong></p> 
 <pre><code class="lang-html">Vue.directive('nameofthedirective', {
   bind(e1, binding, vnode) {
   }
})
</code></pre> 
 <p>需要使用<code>Vue.directive</code>创建一个指令。它采用如上所示的指令名称。下面来看一个例子演示指令的工作细节。创建一个文件：<em>directives.html</em> - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs自定义指令&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "databinding"&gt;
         &lt;div v-changestyle&gt;VueJS 指令&lt;/div&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         Vue.directive("changestyle",{
            bind(e1,binding, vnode) {
               console.log(e1);
               e1.style.color = "red";
               e1.style.fontSize = "30px";
            }
         });
         var vm = new Vue({
            el: '#databinding',
            data: {
            },
            methods : {
            },
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在这个例子中，我们创建了一个自定义指令<code>changestyle</code>，如下面的一段代码所示。</p> 
 <pre><code class="lang-html">Vue.directive("changestyle",{
   bind(e1,binding, vnode) {
      console.log(e1);
      e1.style.color = "red";
      e1.style.fontSize = "30px";
   }
});
</code></pre> 
 <p>将下面的<code>changestyle</code>指令分配给一个<code>div</code>。</p> 
 <pre><code class="lang-html">&lt;div id = "databinding"&gt;
    &lt;div v-changestyle&gt;VueJS 指令&lt;/div&gt;
&lt;/div&gt;
</code></pre> 
 <p>如果在浏览器中打开上面文件可以看到，它将以红色显示文本：<code>"VueJs指令"</code>，并且字体大小为<code>30px</code>。<br><img src="http://www.yiibai.com/uploads/images/201712/2212/379151231_88582.png" alt=""></p> 
 <p>在上面代码中，已经使用了绑定方法，这是该指令的一部分。 它需要三个参数<code>e1</code>，自定义指令需要应用的元素。 绑定就像传递给自定义指令的参数一样：<code>v-changestyle = ”{color:’green’}”</code>，其中<code>green</code>将在绑定参数中读取，而<code>vnode</code>是元素，即<code>nodename</code>。<br>以下是传递给自定义指令的值的示例。创建一个文件：<em>directives-custom.html</em> - </p> 
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs自定义指令&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "databinding"&gt;
         &lt;div v-changestyle = "{color:'green'}"&gt;VueJS Directive&lt;/div&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         Vue.directive("changestyle",{
            bind(e1,binding, vnode) {
               console.log(e1);
               console.log(binding.value.color);
               console.log(vnode);
               e1.style.color=binding.value.color;
               e1.style.fontSize = "30px";
            }
         });
         var vm = new Vue({
            el: '#databinding',
            data: {
            },
            methods : {
            },
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在浏览器中打开上面示例文件，效果如下 -<br><img src="http://www.yiibai.com/uploads/images/201712/2212/546161205_74744.png" alt=""></p> 
 <p>文本的颜色更改为绿色。该值使用下面的一段代码传递。</p> 
 <pre><code class="lang-html">&lt;div v-changestyle = "{color:'green'}"&gt;VueJS Directive&lt;/div&gt;
And it is accessed using the following piece of code.
Vue.directive("changestyle",{
   bind(e1,binding, vnode) {
      console.log(e1);
      console.log(binding.value.color);
      console.log(vnode);
      e1.style.color=binding.value.color;
      e1.style.fontSize = "30px";
   }
});
</code></pre> 
 <h2 id="h2-u8FC7u6EE4u5668"><a name="过滤器" class="reference-link"></a><span class="header-link octicon octicon-link"></span>过滤器</h2>
 <p>VueJS支持文本格式的过滤器。它与<code>v-bind</code>和插值(<code>{{}}</code>)一起使用。但需要在JavaScript表达式的结尾处为过滤器使用管道符号。<br>创建一个文件：<em>directives-filter.html</em> - </p>   
 <pre><code class="lang-html">&lt;html&gt;
   &lt;head&gt;
      &lt;meta charset="utf-8" /&gt;
      &lt;title&gt;VueJs自定义指令&lt;/title&gt;
      &lt;script type = "text/javascript" src = "js/vue.js"&gt;&lt;/script&gt;
   &lt;/head&gt;
   &lt;body&gt;
      &lt;div id = "databinding"&gt;
         &lt;input  v-model = "name" placeholder = "输入名字..." /&gt;&lt;br/&gt;
         &lt;span style = "font-size:25px;"&gt;&lt;b&gt;Letter count is : {{name | countletters}}&lt;/b&gt;&lt;/span&gt;
      &lt;/div&gt;
      &lt;script type = "text/javascript"&gt;
         var vm = new Vue({
            el: '#databinding',
            data: {
               name : ""
            },
            filters : {
               countletters : function(value) {
                  return value.length;
               }
            }
         });
      &lt;/script&gt;
   &lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在上面的例子中，我们创建了一个简单的计数过滤器。计数过滤器计算在文本框中输入的字符数。 要使用过滤器，需要使用<code>filters</code>属性，可参考以下代码定义所使用的过滤器。</p> 
 <pre><code class="lang-html">filters : {
   countletters : function(value) {
      return value.length;
   }
}
</code></pre> 
 <p>定义方法<code>countletters</code>并返回输入字符串的长度。要在显示器中使用过滤器，使用了管道操作符和过滤器的名称，即计数器。</p> 
 <pre><code class="lang-html">&lt;span style = "font-size:25px;"&gt;&lt;b&gt;Letter count is : {{name | countletters}}&lt;/b&gt;&lt;/span&gt;
</code></pre> 
 <p>在浏览器中打开上面文件，可以看到以下效果 -<br><img src="http://www.yiibai.com/uploads/images/201712/2212/692161214_31147.gif" alt=""></p> 
 <p>也可以使用下面的一段代码将参数传递给过滤器。</p> 
 <pre><code class="lang-html">&lt;span style = "font-size:25px;"&gt;&lt;b&gt;Letter count is : {{name | countletters('a1', 'a2')}}&lt;/b&gt;&lt;/span&gt;
</code></pre> 
 <p>现在，计数器将有三个参数，即消息<code>a1</code>和<code>a2</code>。也可以使用下面的一段代码将多个过滤器传递给插值。</p> 
 <pre><code class="lang-html">&lt;span style = "font-size:25px;"&gt;&lt;b&gt;Letter count is : {{name | countlettersA, countlettersB}}&lt;/b&gt;&lt;/span&gt;
</code></pre> 
 <p>在<code>filter</code>属性<code>countlettersA</code>和<code>countlettersB</code>是两个方法，<code>countlettersA</code>将结果传递<code>countlettersB</code>。</p>
 <br>      
</div></body></html>