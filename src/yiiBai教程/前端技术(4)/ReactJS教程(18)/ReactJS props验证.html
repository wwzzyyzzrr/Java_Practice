<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">ReactJS props验证</h1><div style="width:100%;float:left;" class="article-content">   
 <p>属性验证是强制组件正确使用的有效方法。 这将有助于开发过程中避免未来的错误和问题，一旦应用程序变得更大。 这也使得代码更具可读性，因为我们可以看到每个组件应该如何使用。</p> 
 <h2 id="h2--props"><a name="验证props" class="reference-link"></a><span class="header-link octicon octicon-link"></span>验证props</h2>
 <p>在这个例子中，我们使用需要的所有<code>props</code>来创建App组件。 <code>App.propTypes</code>用于<code>props</code>验证。如果某些<code>props</code>没有使用指定的正确类型，那么将会得到一个控制台警告。在指定验证模式后，我们将设置<code>App.defaultProps</code>。</p> 
 <p>文件：<em>App.jsx</em> - </p> 
 <pre><code class="lang-js">import PropTypes from 'prop-types';
import React from 'react';
import ReactDOM from 'react-dom';

class App extends React.Component {
   render() {
      return ( 
         &lt;div&gt;
            &lt;h1&gt; Hello, {this.props.name} &lt;/h1&gt;
            &lt;h3&gt;Array: {this.props.propArray}&lt;/h3&gt;            
            &lt;h3&gt;Bool: {this.props.propBool ? "True..." : "False..."}&lt;/h3&gt;
            &lt;h3&gt;Func: {this.props.propFunc(3)}&lt;/h3&gt;
            &lt;h3&gt;Number: {this.props.propNumber}&lt;/h3&gt;
            &lt;h3&gt;String: {this.props.propString}&lt;/h3&gt;
         &lt;/div&gt;
      );
   }
}
App.propTypes = {
   name: PropTypes.string,
   propArray: PropTypes.array.isRequired,
   propBool: PropTypes.bool.isRequired,
   propFunc: PropTypes.func,
   propNumber: PropTypes.number,
   propString: PropTypes.string,
};
App.defaultProps = {
   name: 'Yiibai.com',
   propArray: [1, 2, 3, 4, 5],
   propBool: true,
   propFunc: function(e) {
      return e
   },
   propNumber: 1,
   propString: "String value..."
}
export default App;
</code></pre> 
 <p>文件：<em>main.js</em> - </p> 
 <pre><code class="lang-js">import React from 'react';
import PropTypes from 'prop-types';
import ReactDOM from 'react-dom';
import App from './App.jsx';

ReactDOM.render(&lt;App/&gt;, document.getElementById('app'));
</code></pre> 
 <p>文件： <em>webpack.config.js</em> - </p>   
 <pre><code class="lang-js">var config = {
   entry: './main.js',

   output: {
      path:'/',
      filename: 'index.js',
   },
   devServer: {
      inline: true,
      port: 8080
   },
   externals: {
      'react': 'React'
   },
   module: {
      loaders: [
         {
            test: /\.jsx?$/,
            exclude: /node_modules/,
            loader: 'babel-loader',

            query: {
               presets: ['es2015', 'react']
            }
         }
      ]
   }
}
module.exports = config;
</code></pre> 
 <p>由于所有的<code>props</code>都是有效的，会得到如下的结果。<br><img src="http://www.yiibai.com/uploads/images/201801/0201/283090157_46966.png" alt=""></p> 
 <p><strong>React Props验证示例</strong><br>可以注意到，在验证<code>propArray</code>和<code>propBool</code>时，我们使用了<code>isRequired</code>。如果其中一个不存在，它会给出一个错误。 如果从<code>App.defaultProps</code>对象中删除<code>propArray：[1,2,3,4,5]</code>，控制台将会记录一个警告。<br><img src="http://www.yiibai.com/uploads/images/201801/0201/369090156_40659.jpg" alt=""></p>
 <br>      
</div></body></html>