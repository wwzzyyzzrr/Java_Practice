<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">ReactJS组件API</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将学习React组件API。这里将讨论三个方法：<code>setState()</code>，<code>forceUpdate</code>和<code>ReactDOM.findDOMNode()</code>。 在新的ES6类中，必须手动绑定这个。在示例中使用<code>this.method.bind(this)</code>。</p> 
 <h2 id="h2-u8BBEu7F6Eu72B6u6001"><a name="设置状态" class="reference-link"></a><span class="header-link octicon octicon-link"></span>设置状态</h2>
 <p><code>setState()</code>方法用于更新组件的状态。 这种方法不会替代状态，而只是添加对原始状态的更改。</p> 
 <p>文件：<em>App.jsx</em> - </p> 
 <pre><code class="lang-js">import React from 'react';

class App extends React.Component {
   constructor() {
      super();

      this.state = {
         data: []
      }

      this.setStateHandler = this.setStateHandler.bind(this);
   };
   setStateHandler() {
      var item = "setState..."
      var myArray = this.state.data.slice();
      myArray.push(item);
      this.setState({data: myArray})
   };
   render() {
      return (
         &lt;div&gt;
            &lt;button onClick = {this.setStateHandler}&gt;SET STATE&lt;/button&gt;
            &lt;h4&gt;State Array: {this.state.data}&lt;/h4&gt;
         &lt;/div&gt;
      );
   }
}
export default App;
</code></pre> 
 <p>我们从一个空的数组开始。每次点击按钮，状态将被更新。 如果点击五次，将得到以下输出。<br><img src="http://www.yiibai.com/uploads/images/201801/0201/130100103_74496.png" alt=""></p> 
 <h2 id="h2-u5F3Au5236u66F4u65B0"><a name="强制更新" class="reference-link"></a><span class="header-link octicon octicon-link"></span>强制更新</h2>
 <p>有时可能想要手动更新组件。这可以使用<code>forceUpdate()</code>方法来实现。</p> 
 <p>文件：<em>App.jsx</em> - </p> 
 <pre><code class="lang-js">import React from 'react';

class App extends React.Component {
   constructor() {
      super();
      this.forceUpdateHandler = this.forceUpdateHandler.bind(this);
   };
   forceUpdateHandler() {
      this.forceUpdate();
   };
   render() {
      return (
         &lt;div&gt;
            &lt;button onClick = {this.forceUpdateHandler}&gt;FORCE UPDATE&lt;/button&gt;
            &lt;h4&gt;Random number: {Math.random()}&lt;/h4&gt;
         &lt;/div&gt;
      );
   }
}
export default App;
</code></pre> 
 <p>这个示例中，实现设置一个随机数字，每次单击按钮时都会更新。<br><img src="http://www.yiibai.com/uploads/images/201801/0201/442100105_43823.png" alt=""></p> 
 <h2 id="h2--dom-"><a name="查找Dom节点" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查找Dom节点</h2>
 <p>对于DOM操作，可以使用<code>ReactDOM.findDOMNode()</code>方法。 首先，需要导入<code>react-dom</code>。</p> 
 <p>文件：<em>App.jsx</em> - </p>   
 <pre><code class="lang-js">import React from 'react';
import ReactDOM from 'react-dom';

class App extends React.Component {
   constructor() {
      super();
      this.findDomNodeHandler = this.findDomNodeHandler.bind(this);
   };
   findDomNodeHandler() {
      var myDiv = document.getElementById('myDiv');
      ReactDOM.findDOMNode(myDiv).style.color = 'red';
   }
   render() {
      return (
         &lt;div&gt;
            &lt;button onClick = {this.findDomNodeHandler}&gt;FIND DOME NODE&lt;/button&gt;
            &lt;div id = "myDiv"&gt;这是MyDiv的内容&lt;/div&gt;
         &lt;/div&gt;
      );
   }
}
export default App;
</code></pre> 
 <p>当点击按钮，<code>myDiv</code>元素的颜色变成红色。如下所示 -<br><img src="http://www.yiibai.com/uploads/images/201801/0201/350100108_91516.png" alt=""></p> 
 <blockquote> 
  <p>注 - 自0.14更新以来，大多数旧的组件API方法都被弃用或删除以适应ES6。</p> 
 </blockquote>
 <br>      
</div></body></html>