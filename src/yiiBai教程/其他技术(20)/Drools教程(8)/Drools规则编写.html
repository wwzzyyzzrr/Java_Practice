<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Drools规则编写</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 如果有在看Hello World项目(Sample.drl)的默认规则，也有很多使用的关键字，我们现在将一个一个地来解释。</p> 
 <img alt="Default Rule" src="/uploads/allimg/150323/22105M617-0.jpg" style="box-sizing: border-box; vertical-align: middle; max-width: 100%; display: block; margin-left: auto; margin-right: auto; padding-bottom: 4px; color: rgb(49, 49, 49);  font-size: 14px; line-height: 22px;"> 
 <h3 style="box-sizing: border-box; color: rgb(0, 0, 0); font-weight: normal; margin: 0px; font-size: 1.3em; line-height: 1.5em; text-shadow: rgb(204, 204, 204) 1px 1px 2px; padding: 0px 0px 10px; border: 0px; position: relative; left: 0px; "> &nbsp;</h3> 
 <center style="box-sizing: border-box;">
   Sample.drl
 </center> 
 <ul> 
  <li> <p> 包: 每一个规则开始包的名称。包充当规则命名空间。包内的规则名称必须是唯一的。在规则中包类似于Java包。</p> </li> 
  <li> <p> <strong>Import</strong>语句: 要应用规则的任何<strong>fact</strong>，这些fact都需要导入。例如，com.sample.DroolsTest.Message; 在上面的例子。</p> </li> 
  <li> <p> 规则定义: 它由规则名称，条件和后果。 Drools的关键字：<strong>rule</strong>, <strong>when</strong>, <strong>then</strong>,&nbsp;以及&nbsp;<strong>end</strong>. 在上述的例子中，规则名 “Hello World” 和 “GoodBye”. &nbsp;<strong>when</strong>&nbsp;部分是两个规则中的条件，<strong>then</strong>&nbsp;部分是后果.在规则的术语, &nbsp;<strong>when</strong>&nbsp;部分也被称为LHS（左手侧）以及&nbsp;<strong>then</strong>&nbsp;部分作为规则的RHS（右手边）。</p> </li> 
 </ul> 
 <p> 现在让我们来看看在用于装载的Drools并执行规则的Java文件中使用的术语。</p> 
 <h2> 知识库</h2> 
 <p> 知识库是管理规则，流程，和内部类型的集合的接口. 它包含在包&nbsp;org.drools.KnowledgeBase&nbsp;内. 在Drools中，这些被统称为knowledge definitions&nbsp;或&nbsp;knowledge. 知识定义被分成&nbsp;knowledge packages. 知识的定义可以被添加或删除. 知识库的主要目的是为存储和重新使用它们，因为它们的创建是昂贵的。知识库提供了创造知识的会话方法。</p> 
 <h2> 知识会话</h2> 
 <p> 知识会话从知识库检索。它是用于与Drools的引擎进行交互的主要接口。知识会话有两种类型：</p> 
 <ul> 
  <li> 无状态知识会话</li> 
  <li> 有状态知识会话</li> 
 </ul> 
 <h2> 无状态会话知识</h2> 
 <p> 无状态会话知识是一个无状态的会话，形成最简单的使用情况，不会利用推断。一个无状态的会话可以被称为像一个函数，它传递了一些数据，然后将接收回来了一定的成效。无状态会话的常见例子包括：</p> 
 <ul> 
  <li> <strong>验证</strong> 
   <ul> 
    <li> 这个人有资格获得抵押贷款？</li> 
   </ul> </li> 
 </ul> 
 <ul> 
  <li> <strong>计算</strong> 
   <ul> 
    <li> 计算按揭保险费。</li> 
   </ul> </li> 
 </ul> 
 <ul> 
  <li> <strong>路由和过滤</strong> 
   <ul> 
    <li> 过滤传入的消息，如电子邮件，到文件夹中。</li> 
    <li> 发送传入的消息到目的地</li> 
   </ul> </li> 
 </ul> 
 <h2> 状态知识会话</h2>   
 <p> 状态会话更长保留，并允许随着时间的推移反复变化。一些常见的用例有状态会话包括：</p> 
 <ul> 
  <li> <strong>监控</strong> 
   <ul> 
    <li> 现货市场监测和分析半自动买盘。</li> 
   </ul> </li> 
 </ul> 
 <ul> 
  <li> <strong>诊断</strong> 
   <ul> 
    <li> 故障排除，医疗诊断</li> 
   </ul> </li> 
 </ul> 
 <ul> 
  <li> <strong>物流</strong> 
   <ul> 
    <li> 包裹跟踪和交付供应</li> 
   </ul> </li> 
 </ul> 
 <h2> 知识生成器</h2> 
 <p> KnoledgeBuilder接口负责构建从知识的定义（规则，流程，类型）一个KnowledgePackage。它包含在&nbsp;org.drools.builder.KnowledgeBuilder&nbsp;包内. &nbsp;知识的定义可以是各种格式。如果使用构建有任何问题，KnowledgeBuilder将报告通过这两种方法的错误：&nbsp;hasErrors&nbsp;以及&nbsp;getError.</p> 
 <p> 下图说明了过程</p> 
 <img alt="KnoledgeBuilder" src="/uploads/allimg/150323/22105G164-1.jpg" style="box-sizing: border-box; vertical-align: middle; max-width: 100%; display: block; margin-left: auto; margin-right: auto; padding-bottom: 4px; color: rgb(49, 49, 49);  font-size: 14px; line-height: 22px;"> 
 <p> 在上面的例子中，因为我们正在采取无状态会话知识的一个简单的例子，我们已经插入了事实的会话，然后fireAllRules()方法被调用，你会看到输出结果。</p> 
 <p> 如果有状态会话的知识，一旦规则被激发，有状态的知识会话对象必须调用方法Dispose()释放会话以避免内存泄漏。</p> 
 <br>      
</div></body></html>