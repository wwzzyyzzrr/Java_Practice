<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">locate命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>locate</code> 让使用者可以很快速的搜寻档案系统内是否有指定的档案。其方法是先建立一个包括系统内所有档案名称及路径的数据库，之后当寻找时就只需查询这个数据库，而不必实际深入档案系统之中了。在一般的 distribution 之中，数据库的建立都被放在 crontab 中自动执行。</p> 
 <h2 id="h2-1-"><a name="1．命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1．命令格式</h2>
 <pre><code class="lang-shell">Locate [选择参数] [样式]
</code></pre> 
 <h2 id="h2-2-"><a name="2．命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2．命令功能</h2>
 <p><code>locate</code>命令可以在搜寻数据库时快速找到档案，数据库由<code>updatedb</code>程序来更新，updatedb是由<code>cron daemon</code>周期性建立的，<code>locate</code>命令在搜寻数据库时比由整个由硬盘资料来搜寻资料来得快，但较差劲的是<code>locate</code>所找到的档案若是最近才建立或 刚更名的，可能会找不到，在内定值中，updatedb每天会跑一次，可以由修改<code>crontab</code>来更新设定值。(<code>etc/crontab</code>)<br>locate指定用在搜寻符合条件的档案，它会去储存档案与目录名称的数据库内，寻找合乎范本样式条件的档案或目录录，可以使用特殊字元(如”<code>*</code>” 或”<code>?</code>”等)来指定范本样式，如指定范本为kcpa<em>ner, <code>locate</code>会找出所有起始字串为</em>kcpa<em>且结尾为ner的档案或目录，如名称为kcpartner若目录录名称为</em>kcpa_ner*则会列出该目录下包括 子目录在内的所有档案。<br><code>locate</code>指令和<a target="_blank" href="http://www.yiibai.com/linux/find.html" title="find">find</a>找寻档案的功能类似，但<code>locate</code>是透过<code>update</code>程序将硬盘中的所有档案和目录资料先建立一个索引数据库，在 执行<code>loacte</code>时直接找该索引，查询速度会较快，索引数据库一般是由操作系统管理，但也可以直接下达<code>update</code>强迫系统立即修改索引数据库。</p> 
 <h2 id="h2-3-"><a name="3．命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3．命令参数</h2>
 <ul> 
  <li><code>-e</code> - 将排除在寻找的范围之外。</li>
  <li><code>-1</code> - 如果是<code>1</code>。则启动安全模式。在安全模式下，使用者不会看到权限无法看到的档案。这会始速度减慢，因为 <code>locate</code> 必须至实际的档案系统中取得档案的权限资料。</li>
  <li><code>-f</code> - 将特定的档案系统排除在外，例如没有到理要把 <code>proc</code> 档案系统中的档案放在资料库中。</li>
  <li><code>-q</code> 安静模式，不会显示任何错误讯息。</li>
  <li><code>-n</code> 至多显示 <code>n</code> 个输出。</li>
  <li><code>-r</code> 使用正规运算式 做寻找的条件。</li>
  <li><code>-o</code> 指定资料库存的名称。</li>
  <li><code>-d</code> 指定资料库的路径</li>
  <li><code>-h</code> 显示辅助讯息</li>
  <li><code>-V</code> 显示程式的版本讯息</li>
 </ul> 
 <blockquote> 
  <p>注意：运行<code>locate</code>命令时，系统报错：<strong>locate: command not found</strong>。查了相关资料，发现原因是系统上没有该执行文件，就需要安装。解决方案如下：<br> 执行命令：[root<a target="_blank" href="https://github.com/localhost" title="@localhost" class="at-link">@localhost</a> ~]# <code>yum install locate</code> //看locate属于哪个软件包<br>查出来mlocate.x86_64 : An utility for finding files by name 执行：[root<a target="_blank" href="https://github.com/localhost" title="@localhost" class="at-link">@localhost</a> ~]# <code>yum install mlocate</code><br>mlocate安装完成之后，再执行locate命令，就不会报错。实在不行，还可以使用命令：<br><code>yum install *locate</code> 来安装。执行 updatedb 手动构建库<br>[root<a target="_blank" href="https://github.com/localhost" title="@localhost" class="at-link">@localhost</a> ~]# <code>updatedb</code><br>完成后就可以执行locate了</p> 
 </blockquote> 
 <h2 id="h2-4-"><a name="4．使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4．使用实例</h2>
 <h3 id="h3--1-pwd-"><a name="实例1:查找和pwd相关的所有文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1:查找和pwd相关的所有文件</h3>
 <p>命令：</p>   
 <pre><code class="lang-shell">locate pwd
</code></pre> 
 <p>执行演示及输出：</p> 
 <pre><code class="lang-shell">[root@localhost yiibai]# locate pwd
/etc/.pwd.lock
/usr/bin/pwd
/usr/bin/pwdx
/usr/lib/modules/3.10.0-514.el7.x86_64/kernel/drivers/watchdog/hpwdt.ko
/usr/lib64/cracklib_dict.pwd
/usr/lib64/python2.7/lib-dynload/spwdmodule.so
/usr/sbin/unix_chkpwd
/usr/share/cracklib/cracklib-small.pwd
/usr/share/cracklib/pw_dict.pwd
/usr/share/man/man1/pwd.1.gz
/usr/share/man/man1/pwdx.1.gz
/usr/share/man/man8/unix_chkpwd.8.gz
[root@localhost yiibai]#
</code></pre> 
 <h3 id="h3--2-etc-sh-"><a name="实例2： 搜索etc目录下所有以sh开头的文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例2： 搜索etc目录下所有以sh开头的文件</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">locate /etc/sh
</code></pre> 
 <p>执行演示及输出：</p> 
 <pre><code class="lang-shell">[root@localhost yiibai]# locate /etc/sh
/etc/shadow
/etc/shadow-
/etc/shells
[root@localhost yiibai]#
</code></pre> 
 <h3 id="h3--3-etc-i-"><a name="实例3：搜索etc目录下，所有以i开头的文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：搜索etc目录下，所有以i开头的文件</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">locate /etc/i
</code></pre> 
 <p>执行演示及输出：</p> 
 <pre><code class="lang-shell">[root@localhost yiibai]# locate /etc/n
/etc/networks
/etc/nsswitch.conf
/etc/nsswitch.conf.bak
[root@localhost yiibai]# locate /etc/i
/etc/init.d
/etc/inittab
/etc/inputrc
/etc/iproute2
/etc/issue
/etc/issue.net
/etc/iproute2/ematch_map
/etc/iproute2/group
/etc/iproute2/nl_protos
/etc/iproute2/rt_dsfield
/etc/iproute2/rt_protos
/etc/iproute2/rt_realms
/etc/iproute2/rt_scopes
/etc/iproute2/rt_tables
[root@localhost yiibai]#
</code></pre>
 <br>      
</div></body></html>