<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">chmod命令示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p><strong>chmod</strong>命令用于改变linux系统文件或目录的访问权限。用它控制文件或目录的访问权限。该命令有两种用法。一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。</p> 
 <p>Linux系统中的每个文件和目录都有访问许可权限，用它来确定谁可以通过何种方式对文件和目录进行访问和操作。</p> 
 <p>文件或目录的访问权限分为只读，只写和可执行三种。以文件为例，只读权限表示只允许读其内容，而禁止对其做任何的更改操作。可执行权限表示允许将该文件作为一个程序执行。文件被创建时，文件所有者自动拥有对该文件的读、写和可执行权限，以便于对文件的阅读和修改。用户也可根据需要把访问权限设置为需要的任何组合。</p> 
 <p> 有三种不同类型的用户可对文件或目录进行访问：文件所有者，同组用户、其他用户。所有者一般是文件的创建者。所有者可以允许同组用户有权访问文件，还可以将文件的访问权限赋予系统中的其他用户。在这种情况下，系统中每一位用户都能访问该用户拥有的文件或目录。</p> 
 <p>每一文件或目录的访问权限都有三组，每组用三位表示，分别为文件属主的读、写和执行权限；与属主同组的用户的读、写和执行权限；系统中其他用户的读、写和执行权限。当用<code>ls -l</code>命令显示文件或目录的详细信息时，最左边的一列为文件的访问权限。 例如：<br>命令： </p> 
 <pre><code class="lang-shell">ls -al
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ll
total 16
-rwxr-xr-x. 1 yiibai yiibai 464 Feb 15 20:58 log1.log
-rw-rw-r--. 1 yiibai yiibai   0 Feb 15 20:43 log2018.log
-rw-rw-r--. 1 yiibai yiibai   0 Feb 15 20:43 log2019.log
-rw-rw-r--. 1 yiibai yiibai   0 Feb 15 20:43 log2020.log
-rwxrwxr-x. 1 yiibai yiibai   0 Feb 15 20:43 log2.log
-rw-rw-r--. 1 yiibai yiibai 384 Feb 15 20:59 log3.log
lrwxrwxrwx. 1 yiibai yiibai   7 Feb 15 22:46 log_link.log -&gt; log.log
-rwxr-xr-x. 1 yiibai yiibai   0 Feb 16 20:48 log.log
drwxrwxr-x. 3 yiibai yiibai  35 Feb 16 20:54 logs
drwxrwxr-x. 7 yiibai yiibai  66 Feb 15 20:48 project
drwxrwxr-x. 2 yiibai yiibai   6 Feb 15 21:12 test3
-rw-rw-r--. 1 yiibai yiibai   0 Feb 15 21:10 test3.log
drwxrwxr-x. 2 yiibai yiibai 177 Feb 16 21:28 test4
-rw-rw-r--. 1 yiibai yiibai  19 Feb 15 21:08 text.txt
-rw-rw-r--. 1 yiibai yiibai   1 Feb 15 20:46 tmpcore.log
</code></pre> 
 <p>以上面结果中的 <code>log2018.log</code> 文件为例：<br><code>-rw-rw-r--. 1 yiibai yiibai 0 Feb 15 20:43 log2018.log</code><br>第一列共有<code>10</code>个位置，第一个字符指定了文件类型。在通常意义上，一个目录也是一个文件。如果第一个字符是横线，表示是一个非目录的文件。如果是<code>d</code>，表示是一个目录。从第二个字符开始到第十个共<code>9</code>个字符，<code>3</code>个字符一组，分别表示了3组用户对文件或者目录的权限。权限字符用横线代表空许可，<code>r</code>代表只读，<code>w</code>代表写，<code>x</code>代表可执行。<br>例如：<br>　　-rw-rw-r—<br>　　表示<code>log2018.log</code>是一个普通文件；<code>log2018.log</code>的属主有读写权限；与<code>log2018.log</code>属主同组的用户只有读权限；其他用户也只有读权限。</p> 
 <p>　　确定了一个文件的访问权限后，用户可以利用Linux系统提供的<code>chmod</code>命令来重新设定不同的访问权限。也可以利用<code>chown</code>命令来更改某个文件或目录的所有者。利用<code>chgrp</code>命令来更改某个文件或目录的用户组。<br><code>chmod</code>命令是非常重要的，用于改变文件或目录的访问权限。用户用它控制文件或目录的访问权限。<code>chmod</code>命令详细情况如下。</p> 
 <h2 id="h2-1-"><a name="1. 命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. 命令格式</h2>
 <p>chmod [-cfvR] [—help] [—version] mode file </p> 
 <h2 id="h2-2-"><a name="2. 命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. 命令功能</h2>
 <p>用于改变文件或目录的访问权限，用它控制文件或目录的访问权限。</p> 
 <h2 id="h2-3-"><a name="3. 命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. 命令参数</h2>
 <p>必要参数：</p> 
 <ul> 
  <li><code>-c</code> 当发生改变时，报告处理信息</li>
  <li><code>-f</code> 错误信息不输出</li>
  <li><code>-R</code> 处理指定目录以及其子目录下的所有文件</li>
  <li><code>-v</code> 运行时显示详细处理信息</li>
 </ul> 
 <p><strong>选择参数：</strong></p> 
 <ul> 
  <li><code>--reference=</code>&lt;目录或者文件&gt; 设置成具有指定目录或者文件具有相同的权限</li>
  <li><code>--version</code> 显示版本信息<br>&lt;权限范围&gt;+&lt;权限设置&gt; 使权限范围内的目录或者文件具有指定的权限<br>&lt;权限范围&gt;-&lt;权限设置&gt; 删除权限范围的目录或者文件的指定权限<br>&lt;权限范围&gt;=&lt;权限设置&gt; 设置权限范围内的目录或者文件的权限为指定的值<br><strong>权限范围：</strong></li>
  <li><code>u</code> ：目录或者文件的当前的用户</li>
  <li><code>g</code> ：目录或者文件的当前的群组</li>
  <li><code>o</code> ：除了目录或者文件的当前用户或群组之外的用户或者群组</li>
  <li><code>a</code> ：所有的用户及群组</li>
 </ul> 
 <p><strong>权限代号：</strong></p> 
 <ul> 
  <li><code>r</code> ：读权限，用数字<code>4</code>表示</li>
  <li><code>w</code> ：写权限，用数字<code>2</code>表示</li>
  <li><code>x</code> ：执行权限，用数字<code>1</code>表示</li>
  <li><code>-</code> ：删除权限，用数字<code>0</code>表示</li>
  <li><code>s</code> ：特殊权限<br>该命令有两种用法。一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。
   <ul> 
    <li>(1). 文字设定法:<br>　chmod ［who］ ［+ | - | =］ ［mode］ 文件名</li>
    <li>(2). 数字设定法<br>　　我们必须首先了解用数字表示的属性的含义：<code>0</code>表示没有权限，<code>1</code>表示可执行权限，<code>2</code>表示可写权限，<code>4</code>表示可读权限，然后将其相加。所以数字属性的格式应为<code>3</code>个从<code>0</code>到<code>7</code>的八进制数，其顺序是(u)(g)(o)。<br>　　例如，如果想让某个文件的属主有“读/写”二种权限，需要把<code>4</code>(可读)+<code>2</code>(可写)＝6(读/写)。<br>数字设定法的一般形式为：<pre><code class="lang-shell">chmod ［mode］ 文件名
</code></pre> 数字与字符对应关系如下：<br><code>r=4</code>，<code>w=2</code>，<code>x=1</code><br>若要<code>rwx</code>属性则<code>4+2+1=7</code><br>若要<code>rw-</code>属性则<code>4+2=6</code>；<br>若要<code>r-x</code>属性则<code>4+1=7</code>。 </li>
   </ul> </li>
 </ul> 
 <h2 id="h2-4-"><a name="4. 使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. 使用实例</h2>
 <h3 id="h3--1-"><a name="实例1：增加文件所有用户组可执行权限" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1：增加文件所有用户组可执行权限</h3>
 <p>命令：</p>   
 <pre><code class="lang-shell">chmod a+x run.py
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost bin]$ ll
total 0
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
[yiibai@localhost bin]$
[yiibai@localhost bin]$ pwd
/home/yiibai/project/bin
[yiibai@localhost bin]$ ll
total 0
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$ chmod a+x run.py
[yiibai@localhost bin]$ ll
total 0
-rwxrwxr-x. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
</code></pre> 
 <h3 id="h3--2-"><a name="实例2：同时修改不同用户权限" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例2：同时修改不同用户权限</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">chmod ug+w,o-x run.py
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost bin]$ ll
total 0
-r--r--r-x. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$ chmod ug+w,o-x run.py
[yiibai@localhost bin]$ ll
total 0
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
</code></pre> 
 <blockquote> 
  <p>说明：即设定文件text的属性为：文件属主(u) 增加写权限;与文件属主同组用户(g) 增加写权限;其他用户(o) 删除执行权限</p> 
 </blockquote> 
 <h3 id="h3--3-"><a name="实例3：删除文件权限" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：删除文件权限</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">chmod a-x run.py
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost bin]$ ll
total 0
-rwxrwxr-x. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$ chmod a-x run.py
[yiibai@localhost bin]$ ll
total 0
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
</code></pre> 
 <blockquote> 
  <p>说明：删除所有用户的可执行权限 　</p> 
  <h3 id="h3--4-"><a name="实例4：使用“=”设置权限" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例4：使用“=”设置权限</h3>
  <p>命令：</p> 
  <pre><code class="lang-shell">chmod u=x run.py
</code></pre> 
  <p>输出：</p> 
  <pre><code class="lang-shell">[yiibai@localhost bin]$ ll
total 0
--w-rw-rw-. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
[yiibai@localhost bin]$ chmod u=x run.py
[yiibai@localhost bin]$ ll
total 0
---xrw-rw-. 1 yiibai yiibai 0 Feb 17 02:01 run.py
[yiibai@localhost bin]$
</code></pre> 
  <p>说明：撤销原来所有的权限，然后使拥有者具有可读权限 </p> 
 </blockquote> 
 <h3 id="h3--5-"><a name="实例5：对一个目录及其子目录所有文件添加权限" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例5：对一个目录及其子目录所有文件添加权限</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">chmod -R u+x scripts/
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ll scripts/
total 0
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:11 run.exe
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:11 run.pl
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:10 run.py
-rw-rw-r--. 1 yiibai yiibai 0 Feb 17 02:10 run.sh
[yiibai@localhost ~]$ chmod -R u+x scripts/
[yiibai@localhost ~]$ ll scripts/
total 0
-rwxrw-r--. 1 yiibai yiibai 0 Feb 17 02:11 run.exe
-rwxrw-r--. 1 yiibai yiibai 0 Feb 17 02:11 run.pl
-rwxrw-r--. 1 yiibai yiibai 0 Feb 17 02:10 run.py
-rwxrw-r--. 1 yiibai yiibai 0 Feb 17 02:10 run.sh
[yiibai@localhost ~]$
</code></pre> 
 <blockquote> 
  <p>说明：递归地给test4目录下所有文件和子目录的属主分配权限 </p> 
 </blockquote> 
 <h3 id="h3-u5176u4ED6u4E00u4E9Bu7528u6CD5"><a name="其他一些用法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>其他一些用法</h3>
 <ol> 
  <li><p>命令：</p> <pre><code class="lang-shell">chmod 751 file
</code></pre> <p>说明：给file的属主分配读、写、执行(7)的权限，给file的所在组分配读、执行(5)的权限，给其他用户分配执行(1)的权限</p> </li>
  <li><p>命令：</p> <pre><code class="lang-shell">chmod u=rwx,g=rx,o=x file
</code></pre> <p>说明：上例的另一种形式</p> </li>
  <li><p>命令</p> <pre><code class="lang-shell">chmod =r file
</code></pre> <p>说明：为所有用户分配读权限</p> </li>
  <li><p>命令：</p> <pre><code class="lang-shell">chmod 444 file
</code></pre> <p>说明： 同上例</p> </li>
  <li><p>命令：</p> <pre><code class="lang-shell">chmod a-wx,a+r   file
</code></pre> </li>
 </ol>
 <br>      
</div></body></html>