<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">rcp命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p><strong>rcp</strong>代表“remote file copy”(远程文件拷贝)。该命令用于在计算机之间拷贝文件。<code>rcp</code>命令有两种格式。第一种格式用于文件到文件的拷贝；第二种格式用于把文件或目录拷贝到另一个目录中。</p> 
 <h2 id="h2-1-"><a name="1．命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1．命令格式</h2>
 <pre><code class="lang-shell">rcp [参数] [源文件] [目标文件]
</code></pre> 
 <h2 id="h2-2-"><a name="2．命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2．命令功能</h2>
 <p><code>rcp</code>命令用在远端复制文件或目录，如同时指定两个以上的文件或目录，且最后的目的地是一个已经存在的目录，则它会把前面指定的所有文件或目录复制到该目录中。</p> 
 <h2 id="h2-3-"><a name="3．命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3．命令参数</h2>
 <p>各选项含义：</p> 
 <ul> 
  <li><code>-r</code> 递归地把源目录中的所有内容拷贝到目的目录中。要使用这个选项，目的必须是一个目录。</li>
  <li><code>-p</code> 试图保留源文件的修改时间和模式，忽略umask。</li>
  <li><code>-k</code> 请求rcp获得在指定区域内的远程主机的Kerberos 许可，而不是获得由krb_relmofhost⑶确定的远程主机区域内的远程主机的Kerberos许可。</li>
  <li><code>-x</code> 为传送的所有数据打开DES加密。这会影响响应时间和CPU利用率，但是可以提高安全性。如果在文件名中指定的路径不是完整的路径名，那么这个路径被解释为相对远程机上同名用户的主目录。如果没有给出远程用户名，就使用当前用户名。如果远程机上的路径包含特殊shell字符，需要用反斜线(<code>\\</code>)、双引号(”)或单引号(’)括起来，使所有的shell元字符都能被远程地解释。需要说明的是，rcp不提示输入口令，它通过rsh命令来执行拷贝。<br>directory 每个文件或目录参数既可以是远程文件名也可以是本地文件名。远程文件名具有如下形式：<code>rname<a target="_blank" href="https://github.com/rhost" title="@rhost" class="at-link">@rhost</a>：path</code>，其中<code>rname</code>是远程用户名，<code>rhost</code>是远程计算机名，<code>path</code>是这个文件的路径。</li>
 </ul> 
 <h2 id="h2-4-"><a name="4．使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4．使用实例</h2>
 <p>要使用 <code>rcp</code>，需要具备以下条件：<br>如果系统中有 <code>/etc/hosts</code> 文件，系统管理员应确保该文件包含要与之进行通信的远程主机的项。<br><code>/etc/hosts</code> 文件中有一行文字，其中包含每个远程系统的以下信息：<br>ip_address official_name alias</p> 
 <p>例如：</p> 
 <p>9.186.10.<em>*</em> myserver myserver.alias</p> 
 <p><strong>.rhosts 文件</strong><br><code>.rhosts</code> 文件位于远程系统的主目录下，其中包含本地系统的名称和本地登录名。<br>例如，远程系统的 <code>.rhosts</code> 文件中的项可能是：</p> 
 <pre><code class="lang-shell">myserver root
</code></pre> 
 <p>其中，<code>myserver</code> 是本地系统的名称，<code>root</code> 是本地登录名。这样，<code>myserver</code> 上的 <code>root</code> 即可在包含 <code>.rhosts</code> 文件的远程系统中来回复制文件。<br>配置过程:</p> 
 <p><strong>只对root用户生效</strong></p> 
 <ol> 
  <li><p>在双方<code>root</code>用户根目录下建立<code>.rhosts</code>文件,并将双方的<code>hostname</code>加进去. 在此之前应在双方的 <code>/etc/hosts</code> 文件中加入对方的IP和hostname</p> </li>
  <li><p>把rsh服务启动起来,redhat默认是不启动的。<br>方法：执行<code>ntsysv</code>命令,在<code>rsh</code>选项前用空格键选中,确定退出。然后执行：<br><code>service xinetd restart</code>即可。</p> </li>
  <li><p>到<code>/etc/pam.d/</code>目录下,把<code>rsh</code>文件中的auth required /lib/security/pam_securetty.so</p> </li>
 </ol> 
 <p>一行用“#”注释掉即可。(只有注释掉这一行，才能用<code>root</code>用户登录)</p> 
 <p><strong>命令使用:</strong><br>将文件复制到远程系统<br>要将本地系统中的文件复制到远程系统，请使用以下命令：</p> 
 <pre><code class="lang-shell">rcp local_file remote_hostname:remote_file
</code></pre> 
 <p>注意，如果当前目录下没有 <code>local_file</code>，则除本地文件名外，还需要提供相对路径(自当前目录开始)或绝对路径名(自 <code>/</code> 开始)。<br>仅当希望将 <code>remote_hostname</code> 上的 <code>remote_file</code> 放到其他目录(远程主目录除外)下时，才需要为其指定完整的(绝对)路径。</p> 
 <h3 id="h3--1-"><a name="使用实例1:" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例1:</h3>
 <p>将当前目录下的 <code>test1</code> 复制到名为 <code>myserver</code> 的远程系统<br>命令：</p> 
 <pre><code class="lang-shell">rcp test1 myserver:/home/root/test3
</code></pre> 
 <p><strong>说明：</strong><br>在这种情况下，<code>test1</code> 被复制到远程子目录 <code>test3</code> 下，名称仍为 <code>test1</code> 。如果仅提供了远程主机名，<code>rcp</code> 将把 <code>test1</code> 复制到远程主目录下，名称仍为 <code>test1</code> 。<br>还可以在目的目录中包含文件名。例如，将文件复制到名为 <code>myserver</code> 的系统中：</p> 
 <pre><code class="lang-shell">rcp test1 myserver:/home/root/test3
</code></pre> 
 <p>在这种情况下，将 <code>test1</code> 复制到远程目录 <code>root</code> 下并将其命名为 <code>test3</code>。</p> 
 <h2 id="h2--2-"><a name="使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例2：从远程系统复制文件：要将远程系统中的文件复制到本地目录下</h2>
 <p>命令：</p>   
 <pre><code class="lang-shell">rcp remote_hostname:remote_file local_file
</code></pre> 
 <h3 id="h3--3-myserver-test2-"><a name="使用实例:3:将远程系统 myserver 中的 test2 复制到当前目录：" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例:3:将远程系统 myserver 中的 test2 复制到当前目录：</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">rcp myserver:/home/root/test2  .
</code></pre> 
 <p>说明：<br>点 (<code>.</code>) 是“当前目录”的简写形式。在这种情况下，远程目录中的 <code>test2</code> 被复制到当前目录下，名称仍为 <code>test2</code> 。<br>如果希望用新名称复制文件，请提供目标文件名。<br>如果希望将 <code>test2</code> 复制到本地系统中的其他目录下，请使用以下绝对或相对路径名：</p> 
 <pre><code class="lang-shell">rcp myserver:/home/root/test2 otherdir/
</code></pre> 
 <p>或者，如果希望用其他文件名将文件复制到其他目录下：</p> 
 <pre><code class="lang-shell">rcp myserver:/home/root/test2 otherdir/otherfile
</code></pre> 
 <h3 id="h3--4-rcp-r-"><a name="使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用 rcp 和 -r(递归)选项。" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例4：将目录复制到远程系统：要将本地目录及其文件和子目录复制到远程系统，请同时使用 rcp 和 -r(递归)选项。</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">rcp –r local_dir remote_hostname:remote_dir
</code></pre> 
 <p>说明：<br>如果当前目录下没有 <code>local_dir</code>，则除本地目录名外，还需要提供相对路径名(自当前目录开始)或绝对路径名(自 / 顶级目录开始)。另外，如果主目录下没有 <code>remote_dir</code>，则 <code>remote_dir</code> 将需要一个相对路径(自主目录开始)或绝对路径(自 <code>/</code> 开始)。</p> 
 <h3 id="h3--5-"><a name="使用实例5:" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例5:</h3>
 <p>要将名为 <code>work</code> 的子目录完整地复制到 <code>myserver</code> 远程计算机中的主目录下名为 <code>products</code> 的目录，请键入以下内容：</p> 
 <pre><code class="lang-shell">rcp –r work myserver:/home/root/products
</code></pre> 
 <p>此命令在 <code>myserver:/home/root/products</code> 下创建名为 <code>work</code> 的目录及其全部内容(假定<code>/home/root/products</code> 已存在于 <code>myserver</code> 中)。<br>本示例假定用户处于包含 <code>work</code> 的本地目录下。否则，必须提供该目录的相对或绝对路径，如 <code>/home/root/work</code>。</p> 
 <h3 id="h3--6-"><a name="使用实例6：从远程系统复制目录：" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用实例6：从远程系统复制目录：</h3>
 <p>要将远程目录及其所有文件和子目录复制到本地目录，请在以下语法中使用 <code>rcp</code> 和 <code>-r</code>(递归)选项。<br>命令：</p> 
 <pre><code class="lang-shell">rcp –r remote_hostname:remote_dir local_dir
</code></pre> 
 <p>要将名为 <code>work</code> 的远程目录复制到当前目录，请键入以下内容：</p> 
 <pre><code class="lang-shell">rcp –r myserver:/home/root/work .
</code></pre> 
 <p>点 (<code>.</code>) 表示当前目录。将在此目录下创建 <code>work</code> 目录。</p>
 <br>      
</div></body></html>