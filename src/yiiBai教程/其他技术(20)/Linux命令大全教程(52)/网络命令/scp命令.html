<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">scp命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p><strong>scp</strong>是secure copy的简写，用于在Linux下进行远程拷贝文件的命令，和它类似的命令有cp，不过<code>cp</code>只是在本机进行拷贝不能跨服务器，而且<code>scp</code>传输是加密的。可能会稍微影响一下速度。当你服务器硬盘变为只读 read only system时，用<code>scp</code>可以帮你把文件移出来。另外，<code>scp</code>还非常不占资源，不会提高多少系统负荷，在这一点上，<code>rsync</code>就远远不及它了。虽然 <code>rsync</code>比<code>scp</code>会快一点，但当小文件众多的情况下，<code>rsync</code>会导致硬盘I/O非常高，而<code>scp</code>基本不影响系统正常使用。</p> 
 <h2 id="h2-1-"><a name="1．命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1．命令格式</h2>
 <pre><code class="lang-shell">scp [参数] [原路径] [目标路径]
</code></pre> 
 <h3 id="h3-2-"><a name="2．命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2．命令功能</h3>
 <p><code>scp</code>是 secure copy的缩写, <code>scp</code>是linux系统下基于<code>ssh</code>登陆进行安全的远程文件拷贝命令。linux的<code>scp</code>命令可以在linux服务器之间复制文件和目录。</p> 
 <h3 id="h3-3-"><a name="3．命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3．命令参数</h3>
 <ul> 
  <li><code>-1</code> 强制scp命令使用协议ssh1 </li>
  <li><code>-2</code> 强制scp命令使用协议ssh2 </li>
  <li><code>-4</code> 强制scp命令只使用IPv4寻址 </li>
  <li><code>-6</code> 强制scp命令只使用IPv6寻址 </li>
  <li><code>-B</code> 使用批处理模式(传输过程中不询问传输口令或短语) </li>
  <li><code>-C</code> 允许压缩。(将-C标志传递给ssh，从而打开压缩功能) </li>
  <li><code>-p</code> 保留原文件的修改时间，访问时间和访问权限。 </li>
  <li><code>-q</code> 不显示传输进度条。 </li>
  <li><code>-r</code> 递归复制整个目录。 </li>
  <li><code>-v</code> 详细方式显示输出。<code>scp</code>和ssh(1)会显示出整个过程的调试信息。这些信息用于调试连接，验证和配置问题。 </li>
  <li><code>-c</code> cipher 以cipher将数据传输进行加密，这个选项将直接传递给ssh。 </li>
  <li><code>-F</code> ssh_config 指定一个替代的ssh配置文件，此参数直接传递给ssh。 </li>
  <li><code>-i</code> identity_file 从指定文件中读取传输时使用的密钥文件，此参数直接传递给ssh。 </li>
  <li><code>-l</code> limit 限定用户所能使用的带宽，以Kbit/s为单位。 </li>
  <li><code>-o</code> ssh_option 如果习惯于使用ssh_config(5)中的参数传递方式， </li>
  <li><code>-P</code> port 注意是大写的P, port是指定数据传输用到的端口号 </li>
  <li><code>-S</code> program 指定加密传输时所使用的程序。此程序必须能够理解ssh(1)的选项。</li>
 </ul> 
 <h2 id="h2-4-"><a name="4．使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4．使用实例</h2>
 <p><code>scp</code>命令的实际应用概述：<br>从本地服务器复制到远程服务器：<br><strong>(1) 复制文件： </strong><br>命令格式： </p> 
 <pre><code class="lang-shell">scp local_file remote_username@remote_ip:remote_folder
</code></pre> 
 <p>或者</p> 
 <pre><code class="lang-shell">scp local_file remote_username@remote_ip:remote_file
</code></pre> 
 <p>或者 </p> 
 <pre><code class="lang-shell">scp local_file remote_ip:remote_folder
</code></pre> 
 <p>或者</p> 
 <pre><code class="lang-shell">scp local_file remote_ip:remote_file
</code></pre> 
 <p>第<code>1</code>,<code>2</code>个指定了用户名，命令执行后需要输入用户密码，第<code>1</code>个仅指定了远程的目录，文件名字不变，第<code>2</code>个指定了文件名<br>第<code>3</code>,<code>4</code>个没有指定用户名，命令执行后需要输入用户名和密码，第<code>3</code>个仅指定了远程的目录，文件名字不变，第<code>4</code>个指定了文件名。</p> 
 <p><strong>(2) 复制目录 </strong><br>命令格式：</p> 
 <pre><code class="lang-shell">scp -r local_folder remote_username@remote_ip:remote_folder
</code></pre> 
 <p>或者</p> 
 <pre><code class="lang-shell">scp -r local_folder remote_ip:remote_folder
</code></pre> 
 <p>第<code>1</code>个指定了用户名，命令执行后需要输入用户密码；<br>第<code>2</code>个没有指定用户名，命令执行后需要输入用户名和密码；</p> 
 <p><strong>从远程服务器复制到本地服务器： </strong><br>从远程复制到本地的<code>scp</code>命令与上面的命令雷同，只要将从本地复制到远程的命令后面<code>2</code>个参数互换顺序就行了。</p> 
 <blockquote> 
  <p>提示： 这里有两台虚拟机作为测试使用。<strong>主机A</strong>的IP是：192.168.0.197，<strong>主机B</strong>的IP是：192.168.0.174，在以下示例中，所有的操作是基于登录<strong>主机A</strong>，即把<strong>主机A</strong>作为本地机，<strong>主机B</strong>作为远程机。</p> 
 </blockquote> 
 <h3 id="h3--1-"><a name="实例1：从远处复制文件到本地目录" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1：从远处复制文件到本地目录</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">scp yiibai@192.168.0.174:/home/yiibai/Downloads/elasticsearch-5.2.0.tar.gz /home/yiibai/software/
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ scp yiibai@192.168.0.174:/home/yiibai/Downloads/elasticsearch-5.2.0.tar.gz /home/yiibai/software/
yiibai@192.168.0.174's password:
elasticsearch-5.2.0.tar.gz                    100%  272KB 271.5KB/s   00:00
[yiibai@localhost ~]$
[yiibai@localhost ~]$ ll /home/yiibai/software/
total 272
-rw-rw-r-- 1 yiibai yiibai 278047 Feb 22 20:58 elasticsearch-5.2.0.tar.gz
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong>从IP为<code>192.168.0.174</code>机器上的<code>/home/yiibai/Downloads/</code>的目录中下载 <code>elasticsearch-5.2.0.tar.gz</code> 文件到本地<code>/home/yiibai/software/</code>目录中。<br>这里是以 <code>yiibai</code> 这个用户登录的，如果以 <code>root</code> 用户登录，则可修改为：</p> 
 <pre><code class="lang-shell">```shell
scp root@192.168.0.174:/home/yiibai/Downloads/elasticsearch-5.2.0.tar.gz /home/yiibai/software/
</code></pre> 
 <pre><code>
### 实例2：从远处复制到本地
命令：
```shell
scp -r yiibai@192.168.0.174:/home/yiibai/Documents /home/yiibai/
</code></pre>
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ scp -r yiibai@192.168.0.174:/home/yiibai/Documents /home/yiibai/
yiibai@192.168.0.174's password:
dutext.txt                                    100%   50KB  50.2KB/s   00:00
[yiibai@localhost ~]$
[yiibai@localhost ~]$ ll /home/yiibai/Documents/
total 52
-rw-r--r-- 1 yiibai yiibai 51366 Feb 22 21:06 dutext.txt
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong>从<code>192.168.0.174</code>机器上的<code>/home/yiibai/</code>中下载 <code>Documents</code> 目录到本地的<code>/home/yiibai/</code>目录中来。</p> 
 <h3 id="h3--3-"><a name="实例3：上传本地文件到远程机器指定目录" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：上传本地文件到远程机器指定目录</h3>
 <p>命令：</p>   
 <pre><code class="lang-shell">scp /usr/local/src/jdk-8u121-linux-x64.rpm  yiibai@192.168.0.174:/home/yiibai/Downloads/
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ scp /usr/local/src/jdk-8u121-linux-x64.rpm  yiibai@192.168.0.174:/home/yiibai/Downloads/
yiibai@192.168.0.174's password:
jdk-8u121-linux-x64.rpm                       100%  160MB   8.4MB/s   00:19
[yiibai@localhost ~]$
</code></pre> 
 <p>登录远程主机(192.168.0.174)，查看上传结果：</p> 
 <pre><code class="lang-shell">上传之前：
root@ubuntu:/home/yiibai# ll Downloads/
total 349672
drwxr-xr-x  2 yiibai yiibai      4096 Feb  4 01:05 ./
drwxr-xr-x 18 yiibai yiibai      4096 Feb 22 17:48 ../
-rw-rw-r--  1 yiibai yiibai    278047 Feb  4 01:05 elasticsearch-5.2.0.tar.gz
-rw-rw-r--  1 yiibai yiibai  17054744 Feb  4 01:32 elasticsearch-5.2.0.tar.gz.1
-rw-rw-r--  1 yiibai yiibai 183326697 Nov 17  2015 jdk-8u65-linux-i586.tar.gz
-rw-rw-r--  1 yiibai yiibai 157387531 Feb  3 17:13 solr-6.4.0.zip

上传之后：
root@ubuntu:/home/yiibai# ll /home/yiibai/Downloads/
total 513480
drwxr-xr-x  2 yiibai yiibai      4096 Feb 22 18:11 ./
drwxr-xr-x 18 yiibai yiibai      4096 Feb 22 17:48 ../
-rw-rw-r--  1 yiibai yiibai    278047 Feb  4 01:05 elasticsearch-5.2.0.tar.gz
-rw-rw-r--  1 yiibai yiibai  17054744 Feb  4 01:32 elasticsearch-5.2.0.tar.gz.1
-rw-r--r--  1 yiibai yiibai 167733100 Feb 22 18:12 jdk-8u121-linux-x64.rpm
-rw-rw-r--  1 yiibai yiibai 183326697 Nov 17  2015 jdk-8u65-linux-i586.tar.gz
-rw-rw-r--  1 yiibai yiibai 157387531 Feb  3 17:13 solr-6.4.0.zip
root@ubuntu:/home/yiibai#
</code></pre> 
 <p><strong>说明：</strong>复制本地 <code>/usr/local/src/</code> 目录下的文件 <code>jdk-8u121-linux-x64.rpm</code> 到远程机器 <code>192.168.0.174</code> 的 <code>/home/yiibai/Downloads/</code> 目录</p> 
 <h3 id="h3--4-"><a name="实例4：上传本地目录到远程机器指定目录" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例4：上传本地目录到远程机器指定目录</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">scp -r /home/yiibai/scripts/ yiibai@192.168.0.174:/home/yiibai/
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ scp -r /home/yiibai/scripts/ yiibai@192.168.0.174:/home/yiibai/
yiibai@192.168.0.174's password:
run.py                                        100%  110     0.1KB/s   00:00
run.sh                                        100%    0     0.0KB/s   00:00
run.pl                                        100%    0     0.0KB/s   00:00
newfile.txt                                   100%   11     0.0KB/s   00:00
nohup.out                                     100%    0     0.0KB/s   00:00
[yiibai@localhost ~]$
</code></pre> 
 <p>登录远程主机(192.168.0.174)，查看上传结果：</p> 
 <pre><code class="lang-shell">root@ubuntu:/home/yiibai# ls
Desktop    Downloads         mkdir  mv-text.txt  Public     Videos
Documents  examples.desktop  Music  Pictures     Templates
上传之前：
root@ubuntu:/home/yiibai#
root@ubuntu:/home/yiibai# ls
Desktop    Downloads         mkdir  mv-text.txt  Public     Videos
Documents  examples.desktop  Music  Pictures     Templates

上传成功之后：
root@ubuntu:/home/yiibai# ls
Desktop    Downloads         mkdir  mv-text.txt  Public   Templates
Documents  examples.desktop  Music  Pictures     scripts  Videos
root@ubuntu:/home/yiibai# ll scripts/
total 16
drwxrwxr-x  2 yiibai yiibai 4096 Feb 22 18:17 ./
drwxr-xr-x 19 yiibai yiibai 4096 Feb 22 18:17 ../
-rw-r--r--  1 yiibai yiibai   11 Feb 22 18:17 newfile.txt
-rw-------  1 yiibai yiibai    0 Feb 22 18:17 nohup.out
-rw-rw-r--  1 yiibai yiibai    0 Feb 22 18:17 run.pl
-rw-rw-r--  1 yiibai yiibai  110 Feb 22 18:17 run.py
-rw-rw-r--  1 yiibai yiibai    0 Feb 22 18:17 run.sh
root@ubuntu:/home/yiibai#
</code></pre> 
 <p><strong>说明：</strong>上传本地目录 <code>/home/yiibai/scripts/</code> 到远程机器 192.168.0.174 上 /home/yiibai/ 的目录中去。</p>
 <br>      
</div></body></html>