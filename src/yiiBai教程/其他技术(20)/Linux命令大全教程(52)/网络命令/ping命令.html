<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">ping命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Linux系统的<code>ping</code>命令是常用的网络命令，它通常用来测试与目标主机的连通性，我们经常会说“<code>ping</code>一下某机器，看是不是开着”、不能打开网页时会说“先<code>ping</code>网关地址<code>192.168.1.1</code>试试”。它通过发送ICMP ECHO_REQUEST数据包到网络主机(send ICMP ECHO_REQUEST to network hosts)，并显示响应情况，这样就可以根据它输出的信息来确定目标主机是否可访问(但这不是绝对的)。有些服务器为了防止通过<code>ping</code>探测到，通过防火墙设置了禁止<code>ping</code>或者在内核参数中禁止<code>ping</code>，这样就不能通过<code>ping</code>确定该主机是否还处于开启状态。<br>linux下的<code>ping</code>命令和windows下的<code>ping</code>执行稍有区别,linux下<code>ping</code>不会自动终止,需要按<code>ctrl+c</code>终止或者用参数<code>-c</code>指定要求完成的回应次数。</p> 
 <h2 id="h2-1-"><a name="1.命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1.命令格式</h2>
 <p>ping [参数] [主机名或IP地址]</p> 
 <h2 id="h2-2-"><a name="2.命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2.命令功能</h2>
 <p><code>ping</code>命令用于：确定网络和各外部主机的状态；跟踪和隔离硬件和软件问题；测试、评估和管理网络。如果主机正在运行并连在网上，它就对回送信号进行响应。每个回送信号请求包含一个网际协议(IP)和 ICMP 头，后面紧跟一个 tim 结构，以及来填写这个信息包的足够的字节。缺省情况是连续发送回送信号请求直到接收到中断信号(Ctrl-C)。<br><code>ping</code> 命令每秒发送一个数据报并且为每个接收到的响应打印一行输出。<code>ping</code> 命令计算信号往返时间和(信息)包丢失情况的统计信息，并且在完成之后显示一个简要总结。<code>ping</code> 命令在程序超时或当接收到 SIGINT 信号时结束。<code>Host</code> 参数或者是一个有效的主机名或者是因特网地址。</p> 
 <h2 id="h2-3-"><a name="3.命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3.命令参数</h2>
 <ul> 
  <li><code>-d</code> 使用Socket的SO_DEBUG功能。</li>
  <li><code>-f</code> 极限检测。大量且快速地送网络封包给一台机器，看它的回应。</li>
  <li><code>-n</code> 只输出数值。</li>
  <li><code>-q</code> 不显示任何传送封包的信息，只显示最后的结果。</li>
  <li><code>-r</code> 忽略普通的Routing Table，直接将数据包送到远端主机上。通常是查看本机的网络接口是否有问题。</li>
  <li><code>-R</code> 记录路由过程。</li>
  <li><code>-v</code> 详细显示指令的执行过程。</li>
  <li><code>-c</code> 数目：在发送指定数目的包后停止。</li>
  <li><code>-i</code> 秒数：设定间隔几秒送一个网络封包给一台机器，预设值是一秒送一次。</li>
  <li><code>-I</code> 网络界面：使用指定的网络界面送出数据包。</li>
  <li><code>-l</code> 前置载入：设置在送出要求信息之前，先行发出的数据包。</li>
  <li><code>-p</code> 范本样式：设置填满数据包的范本样式。</li>
  <li><code>-s</code> 字节数：指定发送的数据字节数，预设值是<code>56</code>，加上8字节的ICMP头，一共是64ICMP数据字节。</li>
  <li><code>-t</code> 存活数值：设置存活数值<code>TTL</code>的大小。</li>
 </ul> 
 <h2 id="h2-4-"><a name="4.使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4.使用实例</h2>
 <h3 id="h3--1-ping-"><a name="实例1：ping的通的情况" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1：ping的通的情况</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping 192.168.0.5
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping 192.168.0.5
PING 192.168.0.5 (192.168.0.5) 56(84) bytes of data.
64 bytes from 192.168.0.5: icmp_seq=1 ttl=64 time=0.498 ms
64 bytes from 192.168.0.5: icmp_seq=2 ttl=64 time=0.384 ms
64 bytes from 192.168.0.5: icmp_seq=3 ttl=64 time=0.486 ms
64 bytes from 192.168.0.5: icmp_seq=4 ttl=64 time=0.482 ms
^C
--- 192.168.0.5 ping statistics ---
4 packets transmitted, 4 received, 0% packet loss, time 3006ms
rtt min/avg/max/mdev = 0.384/0.462/0.498/0.050 ms
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--2-ping-"><a name="实例2：ping不通的情况" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例2：ping不通的情况</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping 192.168.0.202
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping 192.168.0.202
PING 192.168.0.202 (192.168.0.202) 56(84) bytes of data.
From 192.168.0.197 icmp_seq=1 Destination Host Unreachable
From 192.168.0.197 icmp_seq=2 Destination Host Unreachable
From 192.168.0.197 icmp_seq=3 Destination Host Unreachable
From 192.168.0.197 icmp_seq=4 Destination Host Unreachable
From 192.168.0.197 icmp_seq=5 Destination Host Unreachable
From 192.168.0.197 icmp_seq=6 Destination Host Unreachable
^C
--- 192.168.0.202 ping statistics ---
7 packets transmitted, 0 received, +6 errors, 100% packet loss, time 6023ms
pipe 4
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--3-ping-"><a name="实例3：ping网关" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：ping网关</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping -b 192.168.0.0
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ route
Kernel IP routing table
Destination     Gateway         Genmask         Flags Metric Ref    Use Iface
default         gateway         0.0.0.0         UG    100    0        0 ens33
192.168.0.0     0.0.0.0         255.255.255.0   U     100    0        0 ens33
[yiibai@localhost ~]$ ping -b 192.168.0.0
WARNING: pinging broadcast address
PING 192.168.0.0 (192.168.0.0) 56(84) bytes of data.
</code></pre> 
 <h3 id="h3--4-ping-"><a name="实例4：ping指定次数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例4：ping指定次数</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping -c 10 www.baidu.com
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping -c 10 www.baidu.com
PING www.baidu.com (14.215.177.38) 56(84) bytes of data.
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=1 ttl=56 time=11.8 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=2 ttl=56 time=12.4 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=3 ttl=56 time=13.3 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=4 ttl=56 time=12.2 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=5 ttl=56 time=11.7 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=6 ttl=56 time=12.8 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=7 ttl=56 time=17.6 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=8 ttl=56 time=12.7 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=9 ttl=56 time=12.2 ms
64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=10 ttl=56 time=12.1 ms

--- www.baidu.com ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 9078ms
rtt min/avg/max/mdev = 11.782/12.942/17.696/1.644 ms
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong> ping 百度(www.baidu.com) 10 次后自动退出。</p> 
 <h3 id="h3--5-ping"><a name="实例5：时间间隔和次数限制的ping" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例5：时间间隔和次数限制的ping</h3>
 <p>命令：</p>   
 <pre><code class="lang-shell">ping -c 10 -i 0.5 www.yiibai.com
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping -c 10 -i 0.5 www.yiibai.com
PING www.yiibai.com (112.124.103.85) 56(84) bytes of data.
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=1 ttl=55 time=45.7 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=2 ttl=55 time=45.6 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=3 ttl=55 time=46.1 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=4 ttl=55 time=45.4 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=5 ttl=55 time=45.8 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=6 ttl=55 time=46.1 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=7 ttl=55 time=46.1 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=8 ttl=55 time=45.3 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=9 ttl=55 time=45.3 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=10 ttl=55 time=45.5 ms

--- www.yiibai.com ping statistics ---
10 packets transmitted, 10 received, 0% packet loss, time 4531ms
rtt min/avg/max/mdev = 45.301/45.729/46.187/0.339 ms
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong> 每隔 <code>0.5</code> 秒的时间间隔，ping www.yiibai.com ，到达 <code>10</code> 次数后退出。</p> 
 <h3 id="h3--6-ping-"><a name="实例6：通过域名ping公网上的站点" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例6：通过域名ping公网上的站点</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping -c 5 www.yiibai.com
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping -c 5 www.yiibai.com
PING www.yiibai.com (112.124.103.85) 56(84) bytes of data.
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=1 ttl=55 time=45.6 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=2 ttl=55 time=45.9 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=3 ttl=55 time=46.1 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=4 ttl=55 time=45.3 ms
64 bytes from 112.124.103.85 (112.124.103.85): icmp_seq=5 ttl=55 time=46.1 ms

--- www.yiibai.com ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4017ms
rtt min/avg/max/mdev = 45.332/45.848/46.166/0.413 ms
[yiibai@localhost ~]$ ping -c 5 www.studyoracle.cn
PING www.studyoracle.cn (123.57.223.216) 56(84) bytes of data.
64 bytes from 123.57.223.216 (123.57.223.216): icmp_seq=1 ttl=53 time=54.3 ms
64 bytes from 123.57.223.216 (123.57.223.216): icmp_seq=2 ttl=53 time=54.1 ms
64 bytes from 123.57.223.216 (123.57.223.216): icmp_seq=3 ttl=53 time=53.9 ms
64 bytes from 123.57.223.216 (123.57.223.216): icmp_seq=4 ttl=53 time=54.4 ms
64 bytes from 123.57.223.216 (123.57.223.216): icmp_seq=5 ttl=53 time=54.0 ms

--- www.studyoracle.cn ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4034ms
rtt min/avg/max/mdev = 53.981/54.184/54.438/0.232 ms
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--7-"><a name="实例7：多参数使用" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例7：多参数使用</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ping -i 3 -s 1024 -t 255 192.168.0.5
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ping -i 3 -s 1024 -t 255 192.168.0.5
PING 192.168.0.5 (192.168.0.5) 1024(1052) bytes of data.
1032 bytes from 192.168.0.5: icmp_seq=1 ttl=64 time=0.644 ms
1032 bytes from 192.168.0.5: icmp_seq=2 ttl=64 time=1.36 ms
1032 bytes from 192.168.0.5: icmp_seq=3 ttl=64 time=0.377 ms
1032 bytes from 192.168.0.5: icmp_seq=4 ttl=64 time=1.45 ms
1032 bytes from 192.168.0.5: icmp_seq=5 ttl=64 time=1.46 ms
1032 bytes from 192.168.0.5: icmp_seq=6 ttl=64 time=1.45 ms
^C
--- 192.168.0.5 ping statistics ---
6 packets transmitted, 6 received, 0% packet loss, time 15038ms
rtt min/avg/max/mdev = 0.377/1.125/1.468/0.444 ms
[yiibai@localhost ~]$
</code></pre> 
 <p>说明：<code>-i 3</code> 发送周期为 <code>3</code> 秒， <code>-s</code> 设置发送包的大小为<code>1024</code>， <code>-t</code> 设置TTL值为 <code>255</code>。</p>
 <br>      
</div></body></html>