<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">grep命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Linux系统中<code>grep</code>命令是一种强大的文本搜索工具，它能使用正则表达式搜索文本，并把匹 配的行打印出来。<code>grep</code>全称是<strong>Global Regular Expression Print</strong>，表示全局正则表达式版本，它的使用权限是所有用户。</p> 
 <p><code>grep</code>的工作方式是这样的，它在一个或多个文件中搜索字符串模板。如果模板包括空格，则必须被引用，模板后的所有字符串被看作文件名。搜索的结果被送到标准输出，不影响原文件内容。<br><code>grep</code>可用于shell脚本，因为<code>grep</code>通过返回一个状态值来说明搜索的状态，如果模板搜索成功，则返回<code>0</code>，如果搜索不成功，则返回<code>1</code>，如果搜索的文件不存在，则返回<code>2</code>。我们利用这些返回值就可进行一些自动化的文本处理工作。</p> 
 <h2 id="h2-1-"><a name="1．命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1．命令格式</h2>
 <p>grep [option] pattern file</p> 
 <h2 id="h2-2-"><a name="2．命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2．命令功能</h2>
 <p>用于过滤/搜索的特定字符。可使用正则表达式能多种命令配合使用，使用上十分灵活。</p> 
 <h2 id="h2-3-"><a name="3．命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3．命令参数</h2>
 <ul> 
  <li><code>-a</code> —text #不要忽略二进制的数据。 </li>
  <li><code>-A</code>&lt;显示行数&gt; —after-context=&lt;显示行数&gt; #除了显示符合范本样式的那一列之外，并显示该行之后的内容。 </li>
  <li><code>-b</code> —byte-offset #在显示符合样式的那一行之前，标示出该行第一个字符的编号。 </li>
  <li><code>-B</code>&lt;显示行数&gt; —before-context=&lt;显示行数&gt; #除了显示符合样式的那一行之外，并显示该行之前的内容。 </li>
  <li><code>-c</code> —count #计算符合样式的列数。 </li>
  <li><code>-C</code>&lt;显示行数&gt; —context=&lt;显示行数&gt;或-&lt;显示行数&gt; #除了显示符合样式的那一行之外，并显示该行之前后的内容。 </li>
  <li><code>-d</code> &lt;动作&gt; —directories=&lt;动作&gt; #当指定要查找的是目录而非文件时，必须使用这项参数，否则grep指令将回报信息并停止动作。 </li>
  <li><code>-e</code>&lt;范本样式&gt; —regexp=&lt;范本样式&gt; #指定字符串做为查找文件内容的样式。 </li>
  <li><code>-E</code> —extended-regexp #将样式为延伸的普通表示法来使用。 </li>
  <li><code>-f</code>&lt;规则文件&gt; —file=&lt;规则文件&gt; #指定规则文件，其内容含有一个或多个规则样式，让grep查找符合规则条件的文件内容，格式为每行一个规则样式。 </li>
  <li><code>-F</code> —fixed-regexp #将样式视为固定字符串的列表。 </li>
  <li><code>-G</code> —basic-regexp #将样式视为普通的表示法来使用。 </li>
  <li><code>-h</code> —no-filename #在显示符合样式的那一行之前，不标示该行所属的文件名称。 </li>
  <li><code>-H</code> —with-filename #在显示符合样式的那一行之前，表示该行所属的文件名称。 </li>
  <li><code>-i</code> —ignore-case #忽略字符大小写的差别。 </li>
  <li><code>-l</code> —file-with-matches #列出文件内容符合指定的样式的文件名称。 </li>
  <li><code>-L</code> —files-without-match #列出文件内容不符合指定的样式的文件名称。 </li>
  <li><code>-n</code> —line-number #在显示符合样式的那一行之前，标示出该行的列数编号。 </li>
  <li><code>-q</code> —quiet或—silent #不显示任何信息。 </li>
  <li><code>-r</code> —recursive #此参数的效果和指定“-d recurse”参数相同。 </li>
  <li><code>-s</code> —no-messages #不显示错误信息。 </li>
  <li><code>-v</code> —revert-match #显示不包含匹配文本的所有行。 </li>
  <li><code>-V</code> —version #显示版本信息。 </li>
  <li><code>-w</code> —word-regexp #只显示全字符合的列。 </li>
  <li><code>-x</code> —line-regexp #只显示全列符合的列。 </li>
  <li><code>-y</code> #此参数的效果和指定“-i”参数相同。</li>
 </ul> 
 <h2 id="h2-4-"><a name="4．规则表达式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4．规则表达式</h2>
 <p><code>grep</code>的规则表达式:</p> 
 <ul> 
  <li><code>^</code> #锚定行的开始 如：’^grep’匹配所有以grep开头的行。 </li>
  <li><code>$</code> #锚定行的结束 如：’grep$’匹配所有以grep结尾的行。 </li>
  <li><code>.</code> #匹配一个非换行符的字符 如：’gr.p’匹配gr后接一个任意字符，然后是p。 </li>
  <li><code>*</code> #匹配零个或多个先前字符 如：’*grep’匹配所有一个或多个空格后紧跟grep的行。 </li>
  <li><code>.*</code> #一起用代表任意字符。 </li>
  <li><code>[]</code> #匹配一个指定范围内的字符，如’[Gg]rep’匹配Grep和grep。 </li>
  <li><code>[^]</code> #匹配一个不在指定范围内的字符，如：’[^A-FH-Z]rep’匹配不包含A-R和T-Z的一个字母开头，紧跟rep的行。 </li>
  <li><code>\(..\)</code> #标记匹配字符，如’(love)‘，love被标记为1。 </li>
  <li><code>\&lt;</code> #锚定单词的开始，如:’\&lt;grep’匹配包含以grep开头的单词的行。 </li>
  <li><code>\&gt;</code> #锚定单词的结束，如’grep&gt;‘匹配包含以grep结尾的单词的行。 </li>
  <li><code>x\{m\}</code> #重复字符x，m次，如：’0{5}‘匹配包含5个o的行。 </li>
  <li><code>x\{m,\}</code> #重复字符x,至少m次，如：’o{5,}‘匹配至少有5个o的行。 </li>
  <li><code>x\{m,n\}</code> #重复字符x，至少m次，不多于n次，如：’o{5,10}‘匹配5—10个o的行。 </li>
  <li><code>\w</code> #匹配文字和数字字符，也就是[A-Za-z0-9]，如：’G\w*p’匹配以G后跟零个或多个文字或数字字符，然后是p。 </li>
  <li><code>\W</code> #\w的反置形式，匹配一个或多个非单词字符，如点号句号等。 </li>
  <li><code>\b</code> #单词锁定符，如: ‘\bgrep\b’只匹配<code>grep</code>。</li>
 </ul> 
 <p><strong>POSIX字符:</strong><br>为了在不同国家的字符编码中保持一至，POSIX(The Portable Operating System Interface)增加了特殊的字符类，如[:alnum:]是[A-Za-z0-9]的另一个写法。要把它们放到[]号内才能成为正则表达式，如[A- Za-z0-9]或[[:alnum:]]。在linux下的grep除fgrep外，都支持POSIX的字符类。</p> 
 <ul> 
  <li><code>[:alnum:]</code> #文字数字字符 </li>
  <li><code>[:alpha:]</code> #文字字符 </li>
  <li><code>[:digit:]</code> #数字字符 </li>
  <li><code>[:graph:]</code> #非空字符(非空格、控制字符) </li>
  <li><code>[:lower:]</code> #小写字符 </li>
  <li><code>[:cntrl:]</code> #控制字符 </li>
  <li><code>[:print:]</code> #非空字符(包括空格) </li>
  <li><code>[:punct:]</code> #标点符号 </li>
  <li><code>[:space:]</code> #所有空白字符(新行，空格，制表符) </li>
  <li><code>[:upper:]</code> #大写字符 </li>
  <li><code>[:xdigit:]</code> #十六进制数字(0-9，a-f，A-F) </li>
 </ul> 
 <h2 id="h2-5-"><a name="5．使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>5．使用实例</h2>
 <h3 id="h3--1-"><a name="实例1：查找指定进程" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1：查找指定进程</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ps -ef|grep python
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost yiibai]$ ps -ef|grep python
root        920      1  0 Feb25 ?        00:00:14 /usr/bin/python -Es /usr/sbin/tuned -l -P
root       4705   4631 91 08:05 pts/0    00:00:36 python run.py
yiibai     4726   4712  0 08:05 pts/0    00:00:00 grep --color=auto python
[yiibai@localhost yiibai]$
</code></pre> 
 <p><strong>说明：</strong>第一条记录是查找出的进程；第二条结果是<code>grep</code>进程本身，并非真正要找的进程。</p> 
 <h3 id="h3--2-"><a name="实例2：查找指定进程个数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例2：查找指定进程个数</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ps -ef|grep python -c
ps -ef|grep -c python
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[root@localhost yiibai]# ps -ef|grep python -c
3
[root@localhost yiibai]# ps -ef|grep -c python
3
[root@localhost yiibai]#
</code></pre> 
 <h3 id="h3--3-"><a name="实例3：从文件中读取关键词进行搜索" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：从文件中读取关键词进行搜索</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat file2.txt |grep -f file1.txt
</code></pre> 
 <p>输出：</p>   
 <pre><code class="lang-shell">[yiibai@localhost ~]$ cat file1.txt
java
python
linux
[yiibai@localhost ~]$ cat file2.txt
windows 10
windows 7
linux
C#
java
PHP
python
1003
Hello Word.
[yiibai@localhost ~]$ cat file2 |grep -f file1.txt
cat: file2: No such file or directory
[yiibai@localhost ~]$ cat file2.txt |grep -f file1.txt
linux
java
python
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong>输出<code>file2.txt</code>文件中含有从<code>file1.txt</code>文件中读取出的关键词的内容行。</p> 
 <h3 id="h3--4-"><a name="实例4：从文件中读取关键词进行搜索 且显示行号" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例4：从文件中读取关键词进行搜索 且显示行号</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat file2.txt | grep -nf file1.txt
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ cat file2.txt | grep -nf file1.txt
3:linux
5:java
7:python
[yiibai@localhost ~]$
</code></pre> 
 <p>说明：输出 <code>file2.txt</code> 文件中含有从 <code>file1.txt</code> 文件中读取出的关键词的内容行，并显示每一行的行号。</p> 
 <h3 id="h3--5-"><a name="实例5：从文件中查找关键词" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例5：从文件中查找关键词</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">grep 'linux' file1.txt
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ grep 'linux' file1.txt
linux
[yiibai@localhost ~]$ grep 'java' file1.txt
java
[yiibai@localhost ~]$ grep 'ruby' file1.txt
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--6-"><a name="实例6：从多个文件中查找关键词" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例6：从多个文件中查找关键词</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">grep 'linux' file1.txt file2.txt
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ grep 'linux' file1.txt file2.txt
file1.txt:linux
file2.txt:linux
[yiibai@localhost ~]$
</code></pre> 
 <p>说明：多文件时，输出查询到的信息内容行时，会把文件的命名在行最前面输出并且加上”:”作为标示符。</p> 
 <h3 id="h3--7-grep-"><a name="实例7：grep不显示本身进程" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例7：grep不显示本身进程</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">ps aux|grep \[s]sh
ps aux | grep ssh | grep -v "grep"
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ps aux|grep \[s]sh
root       1219  0.0  0.1  82468  1332 ?        Ss   Feb25   0:00 /usr/sbin/sshd
root       4409  0.0  0.4 145700  4064 ?        Ss   07:28   0:00 sshd: yiibai [priv]
yiibai     4411  0.0  0.2 145700  2068 ?        S    07:29   0:05 sshd: yiibai@pts/0
[yiibai@localhost ~]$ ps aux | grep ssh | grep -v "grep"
root       1219  0.0  0.1  82468  1332 ?        Ss   Feb25   0:00 /usr/sbin/sshd
root       4409  0.0  0.4 145700  4064 ?        Ss   07:28   0:00 sshd: yiibai [priv]
yiibai     4411  0.0  0.2 145700  2068 ?        S    07:29   0:05 sshd: yiibai@pts/0
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--8-w-"><a name="实例8：找出已w开头的行内容" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例8：找出已w开头的行内容</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat file1.txt |grep ^w
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ cat file2.txt
windows 10
windows 7
linux
C#
java
PHP
python
1003
Hello Word.
[yiibai@localhost ~]$ cat file2.txt | grep ^w
windows 10
windows 7
[yiibai@localhost ~]$ cat file2.txt | grep ^p
python
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--9-w-"><a name="实例9：输出非w开头的行内容" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例9：输出非w开头的行内容</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat file2.txt |grep ^[^w]
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ cat file2.txt
windows 10
windows 7
linux
C#
java
PHP
python
1003
Hello Word.
[yiibai@localhost ~]$ cat file2.txt |grep ^[^w]
linux
C#
java
PHP
python
1003
Hello Word.
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--10-hat-"><a name="实例10：输出以hat结尾的行内容" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例10：输出以hat结尾的行内容</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat test.txt |grep hat$
</code></pre> 
 <p>输出：</p> 
 <h3 id="h3--11-on-on-"><a name="实例11：显示包含on或者on字符的内容行" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例11：显示包含on或者on字符的内容行</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">cat file2.txt |grep -E "on|va"
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ cat file2.txt
windows 10
windows 7
linux
C#
java
PHP
python
1003
Hello Word.
[yiibai@localhost ~]$
[yiibai@localhost ~]$
[yiibai@localhost ~]$ cat file2.txt |grep -E "on|va"
java
python
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--12-txt-7-"><a name="实例12：显示当前目录下面以.txt 结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例12：显示当前目录下面以.txt 结尾的文件中的所有包含每个字符串至少有7个连续小写字符的字符串的行</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">grep '[a-z]\{7\}' *.txt
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ grep '[a-z]\{7\}' *.txt
file2.txt:windows 10
file2.txt:windows 7
[yiibai@localhost ~]$
</code></pre>
 <br>      
</div></body></html>