<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">du命令示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Linux中的<code>du</code>命令也是查看使用空间的，与<code>df</code>命令不同的是，Linux <code>du</code>命令是对文件和目录磁盘使用的空间的查看，所以它和<code>df</code>命令还是有一些区别的。</p> 
 <h2 id="h2-1-"><a name="1．命令格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1．命令格式</h2>
 <pre><code class="lang-shell">du [选项][文件]
</code></pre> 
 <h2 id="h2-2-"><a name="2．命令功能" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2．命令功能</h2>
 <p>显示每个文件和目录的磁盘使用空间。</p> 
 <h2 id="h2-3-"><a name="3．命令参数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3．命令参数</h2>
 <ul> 
  <li><code>-a</code>或<code>-all</code> 显示目录中个别文件的大小。 </li>
  <li><code>-b</code>或<code>-bytes</code> 显示目录或文件大小时，以<code>byte</code>为单位。 </li>
  <li><code>-c</code>或<code>--total</code> 除了显示个别目录或文件的大小外，同时也显示所有目录或文件的总和。 </li>
  <li><code>-k</code>或<code>--kilobytes</code> 以<code>KB(1024bytes)</code>为单位输出。</li>
  <li><code>-m</code>或<code>--megabytes</code> 以<code>MB</code>为单位输出。 </li>
  <li><code>-s</code>或<code>--summarize</code> 仅显示总计，只列出最后加总的值。</li>
  <li><code>-h</code>或<code>--human-readable</code> 以<code>K</code>，<code>M</code>，<code>G</code>为单位，提高信息的可读性。</li>
  <li><code>-x</code>或<code>--one-file-xystem</code> 以一开始处理时的文件系统为准，若遇上其它不同的文件系统目录则略过。 </li>
  <li><code>-L</code>&lt;符号链接&gt;或<code>--dereference</code>&lt;符号链接&gt; 显示选项中所指定符号链接的源文件大小。 </li>
  <li><code>-S</code>或<code>--separate-dirs</code> 显示个别目录的大小时，并不含其子目录的大小。 </li>
  <li><code>-X</code>&lt;文件&gt;或<code>--exclude-from=</code>&lt;文件&gt; 在&lt;文件&gt;指定目录或文件。 </li>
  <li><code>--exclude=</code>&lt;目录或文件&gt; 略过指定的目录或文件。 </li>
  <li><code>-D</code>或<code>--dereference-args</code> 显示指定符号链接的源文件大小。 </li>
  <li><code>-H</code>或<code>--si</code> 与<code>-h</code>参数相同，但是<code>K</code>，<code>M</code>，<code>G</code>是以<code>1000</code>为换算单位。 </li>
  <li><code>-l</code>或<code>--count-links</code> 重复计算硬件链接的文件。 </li>
 </ul> 
 <h2 id="h2-4-"><a name="4．使用实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4．使用实例</h2>
 <h3 id="h3--1-"><a name="实例1：显示目录或者文件所占空间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例1：显示目录或者文件所占空间</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du
24      ./test4
0       ./project/lib
0       ./project/bin
0       ./project/doc/info
0       ./project/doc/product
0       ./project/doc
0       ./project/logs/info
0       ./project/logs/product
0       ./project/logs
0       ./project/service/deploy/info
0       ./project/service/deploy/product
0       ./project/service/deploy
0       ./project/service
0       ./project
4       ./logs/test3
4       ./logs
4       ./scripts
84      .
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong><br>只显示当前目录下面的子目录的目录大小和当前目录的总的大小，最下面的1288为当前目录的总大小</p> 
 <h3 id="h3--2-"><a name="实例2：显示指定文件所占空间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例2：显示指定文件所占空间</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du log3.log
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du log3.log
560     log3.log
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--3-"><a name="实例3：查看指定目录的所占空间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例3：查看指定目录的所占空间</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du /usr/local
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du /usr/local/
0       /usr/local/bin
0       /usr/local/etc
0       /usr/local/games
0       /usr/local/include
0       /usr/local/lib
0       /usr/local/lib64
0       /usr/local/libexec
0       /usr/local/sbin
0       /usr/local/share/applications
0       /usr/local/share/info
0       /usr/local/share/man/man1
0       /usr/local/share/man/man1x
0       /usr/local/share/man/man2
0       /usr/local/share/man/man2x
0       /usr/local/share/man/man3
0       /usr/local/share/man/man3x
0       /usr/local/share/man/man4
0       /usr/local/share/man/man4x
0       /usr/local/share/man/man5
0       /usr/local/share/man/man5x
0       /usr/local/share/man/man6
0       /usr/local/share/man/man6x
0       /usr/local/share/man/man7
0       /usr/local/share/man/man7x
0       /usr/local/share/man/man8
0       /usr/local/share/man/man8x
0       /usr/local/share/man/man9
0       /usr/local/share/man/man9x
0       /usr/local/share/man/mann
0       /usr/local/share/man
0       /usr/local/share
163804  /usr/local/src
163804  /usr/local/
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--4-"><a name="实例4：显示多个文件所占空间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例4：显示多个文件所占空间</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du file1 file2
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost test4]$ du log.tar log3.log
12      log.tar
448     log3.log
[yiibai@localhost test4]$
</code></pre> 
 <h3 id="h3--5-"><a name="实例5：只显示总和的大小" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例5：只显示总和的大小</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du -s
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du -s
1084    .
[yiibai@localhost ~]$ du -s project/
0       project/
[yiibai@localhost ~]$ du -s test4/
468     test4/
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--6-"><a name="实例6：方便阅读的格式显示" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例6：方便阅读的格式显示</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du -h dir
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du -h project/
0       project/lib
0       project/bin
0       project/doc/info
0       project/doc/product
40K     project/doc
0       project/logs/info
0       project/logs/product
152K    project/logs
0       project/service/deploy/info
0       project/service/deploy/product
0       project/service/deploy
0       project/service
192K    project/
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--7-"><a name="实例7：文件和目录都显示" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例7：文件和目录都显示</h3>
 <p>命令执行和输出：</p>   
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du -ah project/
0       project/lib
0       project/bin/run.py
0       project/bin
0       project/doc/info
0       project/doc/product
40K     project/doc/test.txt
40K     project/doc
0       project/logs/info
0       project/logs/product
148K    project/logs/readme.txt
4.0K    project/logs/log201710.log
152K    project/logs
0       project/service/deploy/info
0       project/service/deploy/product
0       project/service/deploy
0       project/service
192K    project/
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--8-"><a name="实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的总和" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例8：显示几个文件或目录各自占用磁盘空间的大小，还统计它们的总和</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du -c log3.log log1.log text.txt
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ll
total 572
-rwxr-xr-x. 1 yiibai yiibai    464 Feb 15 20:58 log1.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2018.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2019.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2020.log
-rwxrwxr-x. 1 yiibai yiibai      0 Feb 15 20:43 log2.log
-rw-rw-r--. 1 yiibai yiibai 571759 Feb 17 04:02 log3.log
lrwxrwxrwx. 1 yiibai yiibai      7 Feb 15 22:46 log_link.log -&gt; log.log
-rwxr-xr-x. 1 yiibai yiibai      0 Feb 16 21:38 log.log
drwxrwxr-x. 3 yiibai yiibai     35 Feb 16 20:54 logs
drwxrwxr-x. 7 yiibai yiibai     66 Feb 15 20:48 project
-rw-rw-r--. 1 yiibai yiibai      0 Feb 17 02:01 run.py
drwxrwxr-x. 2 root   yiibai     67 Feb 17 02:38 scripts
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 21:10 test3.log
drwxrwxr-x. 2 yiibai yiibai    177 Feb 16 21:28 test4
-rw-rw-r--. 1 yiibai yiibai     19 Feb 15 21:08 text.txt
-rw-rw-r--. 1 yiibai yiibai      1 Feb 15 20:46 tmpcore.log
[yiibai@localhost ~]$ du -c log3.log log1.log text.txt
560     log3.log
4       log1.log
4       text.txt
568     total
[yiibai@localhost ~]$
</code></pre> 
 <p><strong>说明：</strong><br>加上<code>-c</code>选项后，<code>du</code>不仅显示两个目录各自占用磁盘空间的大小，还在最后一行统计它们的总和。</p> 
 <h3 id="h3--9-"><a name="实例9：按照空间大小排序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例9：按照空间大小排序</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du|sort -nr|more
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ du|sort -nr|more
1276    .
468     ./test4
192     ./project
152     ./project/logs
40      ./project/doc
4       ./scripts
4       ./logs/test3
4       ./logs
0       ./project/service/deploy/product
0       ./project/service/deploy/info
0       ./project/service/deploy
0       ./project/service
0       ./project/logs/product
0       ./project/logs/info
0       ./project/lib
0       ./project/doc/product
0       ./project/doc/info
0       ./project/bin
[yiibai@localhost ~]$
</code></pre> 
 <h3 id="h3--10-"><a name="实例10：输出当前目录下各个子目录所使用的空间" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例10：输出当前目录下各个子目录所使用的空间</h3>
 <p>命令：</p> 
 <pre><code class="lang-shell">du -h  --max-depth=1
</code></pre> 
 <p>输出：</p> 
 <pre><code class="lang-shell">[yiibai@localhost ~]$ ll
total 572
-rwxr-xr-x. 1 yiibai yiibai    464 Feb 15 20:58 log1.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2018.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2019.log
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 20:43 log2020.log
-rwxrwxr-x. 1 yiibai yiibai      0 Feb 15 20:43 log2.log
-rw-rw-r--. 1 yiibai yiibai 571759 Feb 17 04:02 log3.log
lrwxrwxrwx. 1 yiibai yiibai      7 Feb 15 22:46 log_link.log -&gt; log.log
-rwxr-xr-x. 1 yiibai yiibai      0 Feb 17 04:16 log.log
drwxrwxr-x. 3 yiibai yiibai     35 Feb 16 20:54 logs
drwxrwxr-x. 7 yiibai yiibai     66 Feb 15 20:48 project
-rw-rw-r--. 1 yiibai yiibai      0 Feb 17 02:01 run.py
drwxrwxr-x. 2 root   yiibai     67 Feb 17 02:38 scripts
-rw-rw-r--. 1 yiibai yiibai      0 Feb 15 21:10 test3.log
drwxrwxr-x. 2 yiibai yiibai    177 Feb 16 21:28 test4
-rw-rw-r--. 1 yiibai yiibai     19 Feb 15 21:08 text.txt
-rw-rw-r--. 1 yiibai yiibai      1 Feb 15 20:46 tmpcore.log
[yiibai@localhost ~]$ du -h  --max-depth=1
468K    ./test4
192K    ./project
4.0K    ./logs
4.0K    ./scripts
1.3M    .
[yiibai@localhost ~]$
</code></pre>
 <br>      
</div></body></html>