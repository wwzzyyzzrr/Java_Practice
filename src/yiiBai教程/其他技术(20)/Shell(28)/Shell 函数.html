<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Shell 函数</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 函数允许您对分解成更小的，逻辑子部分，然后可以被要求执行各项任务时，它需要一个脚本的整体功能。</p> 
 <p> 使用函数来执行重复性的任务，是一个很好的方式来创建代码的重用。代码重用是现代面向对象编程的原则的重要组成部分。</p> 
 <p> Shell函数是类似于其他编程语言中的子程序，过程和函数。</p> 
 <h2> 创建函数：</h2> 
 <p> 声明一个函数，只需使用以下语法：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">function_name </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;"> 
   list of commands
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span></pre> 
 <p> 函数名 function_name，这就是你将使用它从其他地方在你的脚本调用。函数名必须遵循括号内，后括号内的命令的列表。</p> 
 <h2> 例如：</h2> 
 <p> 以下是使用函数简单的例子：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Define your function here</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
   echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Hello World"</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Invoke your function</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 当你想执行上面的脚本，它会产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">./</span><span class="pln" style="margin: 0px; padding: 0px;">test</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sh
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">World</span><span class="pln" style="margin: 0px; padding: 0px;">
$</span></pre> 
 <h2> 参数传递给函数：</h2> 
 <p> 你可以定义一个函数，它接受参数，而调用这些函数。将这些参数代表$1，$2，依此类推。</p> 
 <p> 以下是一个例子，我们传递两个参数Zara和Ali&nbsp;，然后我们捕获和打印这些参数函数。</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Define your function here</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
   echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Hello World $1 $2"</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Invoke your function</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Zara</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Ali</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">./</span><span class="pln" style="margin: 0px; padding: 0px;">test</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sh
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">World</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Zara</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Ali</span><span class="pln" style="margin: 0px; padding: 0px;">
$</span></pre> 
 <h2> 从函数的返回值：</h2> 
 <p> 如果你执行一个exit命令从一个函数内部，其效果不仅是终止执行的功能，而且Shell 程序中调用该函数。</p> 
 <p> 如果你不是想，只是终止执行该函数，再有就是退出来的一个定义的函数。</p> 
 <p> 根据实际情况，你可以从你的函数返回任何值，使用返回的命令，其语法如下：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">return</span><span class="pln" style="margin: 0px; padding: 0px;"> code</span></pre> 
 <p> 这里的代码可以是任何你选择这里，但很明显，你应该选择你的脚本作为一个整体的背景下是有意义的或有用的东西。</p> 
 <h2> 例子：</h2> 
 <p> 下面的函数返回一个值1：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Define your function here</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
   echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Hello World $1 $2"</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">return</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">10</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Invoke your function</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Zara</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Ali</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Capture value returnd by last command</span><span class="pln" style="margin: 0px; padding: 0px;">
ret</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">?</span><span class="pln" style="margin: 0px; padding: 0px;">

echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Return value is $ret"</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">./</span><span class="pln" style="margin: 0px; padding: 0px;">test</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sh
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">World</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Zara</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Ali</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Return</span><span class="pln" style="margin: 0px; padding: 0px;"> value </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">is</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">10</span><span class="pln" style="margin: 0px; padding: 0px;">
$</span></pre> 
 <h2> 嵌套函数：</h2> 
 <p> 函数更有趣的功能之一是，他们可以调用本身以及调用其他函数。被称为递归函数调用自身的函数。</p> 
 <p> 经过简单的例子演示了一个嵌套的两个函数：</p>   
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Calling one function from another</span><span class="pln" style="margin: 0px; padding: 0px;">
number_one </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
   echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"This is the first function speaking..."</span><span class="pln" style="margin: 0px; padding: 0px;">
   number_two
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">

number_two </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
   echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"This is now the second function speaking..."</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);"># Calling function one.</span><span class="pln" style="margin: 0px; padding: 0px;">
number_one</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">This</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">is</span><span class="pln" style="margin: 0px; padding: 0px;"> the first </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">function</span><span class="pln" style="margin: 0px; padding: 0px;"> speaking</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">...</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">This</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">is</span><span class="pln" style="margin: 0px; padding: 0px;"> now the second </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">function</span><span class="pln" style="margin: 0px; padding: 0px;"> speaking</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">...</span></pre> 
 <h2> 从提示的函数调用：</h2> 
 <p> 你可以把常用功能&nbsp;.profile&nbsp;的定义，这样他们就会每当登录，在命令提示符下，您可以使用它们。</p> 
 <p> 或者，你可以在一个文件中的定义分组为 test.sh，然后通过键入当前shell中执行该文件：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;"> test</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sh</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这样做的效果造成任何test.sh内定义的函数，可以阅读在如下定义为当前shell：</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$ number_one
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">This</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">is</span><span class="pln" style="margin: 0px; padding: 0px;"> the first </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">function</span><span class="pln" style="margin: 0px; padding: 0px;"> speaking</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">...</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">This</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">is</span><span class="pln" style="margin: 0px; padding: 0px;"> now the second </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">function</span><span class="pln" style="margin: 0px; padding: 0px;"> speaking</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">...</span><span class="pln" style="margin: 0px; padding: 0px;">
$</span></pre> 
 <p> 要删除从 shell 函数的定义，可以使用unset命令 .f 选项。这是相同的命令来删除一个变量的定义Shell。</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$unset </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">f function_name</span></pre> 
 <br>      
</div></body></html>