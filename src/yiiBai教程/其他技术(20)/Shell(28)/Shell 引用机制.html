<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Shell 引用机制</h1><div style="width:100%;float:left;" class="article-content">   
 <h2> 元字符：</h2> 
 <p> UNIX Shell提供各种元字符有特殊的意义，同时利用他们在任何Shell脚本，并导致终止一个字，除非引用。</p> 
 <p> 举个例子： ?匹配一个单一的系统字符，而列出文件中的目录和*匹配多个字符。下面是一个清单shell特殊字符（也称为元字符）：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">*</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">?</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">' "  $ ; &amp; ( ) | ^ &lt; &gt; new-line space tab</span></pre> 
 <p> 它与前可能被引用的字符（例如，放置自身） .</p> 
 <h2> 例子：</h2> 
 <p> 下面的例子，显示了如何打印 &nbsp;a&nbsp;*&nbsp;或 a&nbsp;?:</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

echo </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Word</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生下面的结果。</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">./</span><span class="pln" style="margin: 0px; padding: 0px;">test</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">sh</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> line </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">2</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Word</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> command </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">not</span><span class="pln" style="margin: 0px; padding: 0px;"> found

shell returned </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">127</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 现在，让我们尝试使用带引号的字符：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

echo </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;">; </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Word</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Word</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> $符号是一个元字符，所以它必须被引用，以避免特殊处理：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/bin/sh</span><span class="pln" style="margin: 0px; padding: 0px;">

echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"I have $1200"</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">I have $1200</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 是以下四种形式引用：</p> 
 <table class="src" style="margin: 8px 0px; padding: 0px;  border-color: rgb(214, 214, 214); width: 560px; border-collapse: collapse; vertical-align: top; background-color: rgb(247, 247, 247); color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
  <tbody style="margin: 0px; padding: 0px;"> 
   <tr style="margin: 0px; padding: 0px;"> 
    <th style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); background-color: rgb(238, 238, 238); width: 129px;"> 引用</th> 
    <th style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); background-color: rgb(238, 238, 238); width: 409px;"> 描述</th> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> <b style="margin: 0px; padding: 0px;">Single quote</b></td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> All special characters between these quotes lose their special meaning.</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> <b style="margin: 0px; padding: 0px;">Double quote</b></td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Most special characters between these quotes lose their special meaning with these exceptions:<br style="margin: 0px; padding: 0px;"> 
     <ul style="margin: 0px; padding-right: 0px; padding-left: 0px;"> 
      <li style="margin: 0px; padding: 0px;"> $</li> 
      <li style="margin: 0px; padding: 0px;"> `</li> 
      <li style="margin: 0px; padding: 0px;"> $</li> 
      <li style="margin: 0px; padding: 0px;"> '</li> 
      <li style="margin: 0px; padding: 0px;"> "</li> 
      <li style="margin: 0px; padding: 0px;"> </li> 
     </ul> </td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> <b style="margin: 0px; padding: 0px;">Backslash</b></td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Any character immediately following the backslash loses its special meaning.</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> <b style="margin: 0px; padding: 0px;">Back Quote</b></td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Anything in between back quotes would be treated as a command and would be executed.</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2> 单引号：</h2> 
 <p> 考虑echo命令，其中包含许多特殊的shell字符：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">echo </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&lt;-</span><span class="pln" style="margin: 0px; padding: 0px;">$1500</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.**&gt;;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">update</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">?)</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[</span><span class="pln" style="margin: 0px; padding: 0px;">y</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">|</span><span class="pln" style="margin: 0px; padding: 0px;">n</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 将在每个特殊字符前的反斜杠是繁琐的，使该行难以阅读：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">echo &lt;</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-</span><span class="pln" style="margin: 0px; padding: 0px;">$</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">1500.</span><span class="pln" style="margin: 0px; padding: 0px;">**&gt;; (update?) [y|n]</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 有一个简单的方法来引用一大组字符。将一个单引号（'）的开头和结尾的字符串：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'&lt;-$1500.**&gt;; (update?) [y|n]'</span></pre> 
 <p> 单引号内的任何字符均以一个反斜杠，就好像是在前面的每个字符。所以，现在这个echo命令将显示正确。</p> 
 <p> 如果要输出一个字符串内出现一个单引号，你不应该把单引号内的整个字符串，而不是对子进行使用反斜杠（）如下：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'It's Shell Programming'</span></pre> 
 <h2> 双引号：</h2> 
 <p> 尝试执行以下shell脚本。这个shell脚本使用单引号：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">
VAR</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;">ZARA
echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'$VAR owes &lt;-$1500.**&gt;; [ as of (`date +%m/%d`) ]'</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下输出结果：</p>   
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">$VAR owes </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&lt;-</span><span class="pln" style="margin: 0px; padding: 0px;">$1500</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.**&gt;;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">as</span><span class="pln" style="margin: 0px; padding: 0px;"> of </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">`date +%m/%d`</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 所以这不是你想显示什么。很明显，单引号防止变量替换。如果想替换的变量值和倒置逗号如预期那样运作，那么就需要在双引号命令如下：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">VAR</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;">ZARA
echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"$VAR owes &lt;-$1500.**&gt;; [ as of (`date +%m/%d`) ]"</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">ZARA owes </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&lt;-</span><span class="pln" style="margin: 0px; padding: 0px;">$1500</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.**&gt;;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">as</span><span class="pln" style="margin: 0px; padding: 0px;"> of </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">07</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">/</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">02</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]</span></pre> 
 <p> 双引号带走下列以外的所有字符的特殊含义：</p> 
 <ul> 
  <li> <p> $ 参数替代。</p> </li> 
  <li> <p> 用于命令替换的反引号。</p> </li> 
  <li> <p> $&nbsp;使字面美元标志。</p> </li> 
  <li> <p> ` 使文字反引号。</p> </li> 
  <li> <p> " 启用嵌入式双引号。</p> </li> 
  <li> <p> 启用嵌入式反斜杠。</p> </li> 
  <li> <p> 所有其他字符是文字（而不是指定）。</p> </li> 
 </ul> 
 <p> 单引号内的任何字符均以一个反斜杠，就好像是在前面的每个字符。所以，现在这个echo命令将显示正确。</p> 
 <p> 如果要输出一个字符串内出现一个单引号，不应该把单引号内的整个字符串，而不是对子进行使用反斜杠（）如下：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'It's Shell Programming'</span></pre> 
 <h2> 反引号：</h2> 
 <p> 把反引号之间的任何shell命令将执行命令</p> 
 <h2> 语法</h2> 
 <p> 下面是一个简单的语法，把反引号之间的任何Shell命令：</p> 
 <h2> 例子：</h2> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">var</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">`command`</span></pre> 
 <h2> 例子：</h2> 
 <p> 继执行date命令，产生的结果将被存储在 DATA 变量。</p> 
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <div style="float:left;margin-bottom: 10px;">  
 </div>
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">DATE</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">`date`</span><span class="pln" style="margin: 0px; padding: 0px;">

echo </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Current Date: $DATE"</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 这将产生以下输出结果：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Current</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Date</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Thu</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Jul</span><span class="pln" style="margin: 0px; padding: 0px;">  </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">2</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">05</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">28</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">45</span><span class="pln" style="margin: 0px; padding: 0px;"> MST </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">2009</span></pre> 
 <br>      
</div></body></html>