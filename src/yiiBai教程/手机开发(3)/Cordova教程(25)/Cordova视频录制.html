<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Cordova视频录制</h1><div style="width:100%;float:left;" class="article-content">   这个插件用于访问设备捕获选项。 
 <div> 
  <h2> 
   <div>
     第1步&nbsp;-&nbsp;安装媒体捕获插件 
   </div> </h2> 
  <p style="text-align:justify;"> 要安装这个插件，我们将打开命令提示符，然后运行下面的代码&nbsp;− </p> 
  <pre>C:\Users\username\Desktop\CordovaProject&gt;cordova plugin add cordova-plugin-media-capture</pre> 
  <h2> 
   <div>
     第2步&nbsp;-&nbsp;添加按钮 
   </div> </h2> 
  <div>
    我们来学习如何捕获音频，图像和视频，我们将在&nbsp;index.html&nbsp;文件中创建三个按钮。 
  </div> 
  <pre>&lt;button id = "audioCapture"&gt;AUDIO&lt;/button&gt;
&lt;button id = "imageCapture"&gt;IMAGE&lt;/button&gt;
&lt;button id = "videoCapture"&gt;VIDEO&lt;/button&gt;</pre> 
  <h2> 
   <div>
     第3步&nbsp;-&nbsp;添加事件监听器 
   </div> </h2> 
  <div>
    下一步骤是在index.js内的&nbsp;onDeviceReady&nbsp;函数中添加事件侦听器。 
  </div> 
  <pre>document.getElementById("audioCapture").addEventListener("click", audioCapture);
document.getElementById("imageCapture").addEventListener("click", imageCapture);
document.getElementById("videoCapture").addEventListener("click", videoCapture);</pre> 
  <h2> 
   <div>
     步骤4A&nbsp;-&nbsp;捕获音频功能 
   </div> </h2> 
  <p style="text-align:justify;"> 在 index.js 的第一个回调函数是&nbsp;audioCapture.&nbsp;要启动我们将使用&nbsp;captureAudio 方法录音。&nbsp;我们使用两个选项&nbsp;−&nbsp;limit&nbsp;使记录每一个捕获操作只有一个音频剪辑并持续时间的声音片段的秒数。 </p> 
  <pre>function audioCapture() {

   var options = {
      limit: 1,
      duration: 10
   };

   navigator.device.capture.captureAudio(onSuccess, onError, options);

   function onSuccess(mediaFiles) {
      var i, path, len;
		
      for (i = 0, len = mediaFiles.length; i &lt; len; i += 1) {
         path = mediaFiles[i].fullPath;
         console.log(mediaFiles);
      }
   }

   function onError(error) {
      navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
   }
	
}</pre> 
  <div>
    当我们按下AUDIO按钮，录音机将打开。
   <br> 
   <img src="/uploads/tutorial/20160220/1-16022011494C09.jpg" alt="">
   <br> 
  </div> 
  <h2> 
   <div>
     步骤4B&nbsp;-&nbsp;捕获图像函数功能 
   </div> </h2> 
  <p style="text-align:justify;"> 用于捕捉图像的函数将与最后一个相同。唯一的区别是，我们这次使用&nbsp;captureImage&nbsp;方法。 </p>   
  <pre>function imageCapture() {

   var options = {
      limit: 1
   };

   navigator.device.capture.captureImage(onSuccess, onError, options);

   function onSuccess(mediaFiles) {
      var i, path, len;
		
      for (i = 0, len = mediaFiles.length; i &lt; len; i += 1) {
         path = mediaFiles[i].fullPath;
         console.log(mediaFiles);
      }
   }

   function onError(error) {
      navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
   }
	
}</pre> 
  <div>
    现在，我们可以点击 IMAGE 按钮来启动相机。
   <br> 
   <img src="/uploads/tutorial/20160220/1-160220115010242.jpg" alt="">
   <br> 
  </div> 
  <h2> 
   <div>
     步骤4C&nbsp;-&nbsp;捕捉视频函数功能 
   </div> </h2> 
  <div>
    重复相同的概念用于捕获视频。我们这次将使用videoCapture方法。 
  </div> 
  <pre>function videoCapture() {

   var options = {
      limit: 1,
      duration: 10
   };

   navigator.device.capture.captureVideo(onSuccess, onError, options);

   function onSuccess(mediaFiles) {
      var i, path, len;
		
      for (i = 0, len = mediaFiles.length; i &lt; len; i += 1) {
         path = mediaFiles[i].fullPath;
         console.log(mediaFiles);
      }
   }

   function onError(error) {
      navigator.notification.alert('Error code: ' + error.code, null, 'Capture Error');
   }
	
}</pre> 
  <div>
    如果按下&nbsp;VIDEO&nbsp;键，相机就会打开，现在可以录制视频了。
   <br> 
   <img src="/uploads/tutorial/20160220/1-160220115034296.jpg" alt="">
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>