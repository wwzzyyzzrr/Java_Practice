<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Meteor帐号</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    此软件包提供完整的用户认证功能。您可以通过在命令提示符执行下面的代码来添加它。 
  </div> 
 </div> 
 <div> 
  <pre>C:\Users\Administrator\Desktop\meteorApp&gt;meteor add accounts-password</pre> 
  <h2> 
   <div>
     认证范例 
   </div> </h2> 
  <p style="text-align:justify;"> 这个例子显示基本身份验证功能。我们将创建注册，登录和主页这几个模板。如果有一个&nbsp;currentUser(如果用户成功注册或登录)，主页模板将被显示。&nbsp;如果没有 currentUser，注册和登录模板将被显示。 </p> 
  <h3> meteorApp/client/app.html </h3> 
  <pre>&lt;head&gt;
   &lt;title&gt;meteorApp&lt;/title&gt;
&lt;/head&gt;
 
&lt;body&gt;
   {{#if currentUser}}
      {{&gt; home}}
      {{else}}
      {{&gt; register}}
      {{&gt; login}}
   {{/if}}
&lt;/body&gt;

&lt;template name = "register"&gt;
   &lt;h2&gt;REGISTER:&lt;/h2&gt;
   &lt;form&gt;
      &lt;input type = "email" name = "registerEmail"&gt;&lt;br&gt;
      &lt;input type = "password" name = "registerPassword"&gt;&lt;br&gt;
      &lt;input type = "submit" value = "Register"&gt;&lt;br&gt;
   &lt;/form&gt;
&lt;/template&gt;

&lt;template name = "login"&gt;
   &lt;h2&gt;LOGIN:&lt;/h2&gt;
   &lt;form&gt;
      &lt;input type = "email" name = "loginEmail"&gt;&lt;br&gt;
      &lt;input type = "password" name="loginPassword"&gt;&lt;br&gt;
      &lt;input type = "submit" value = "Login"&gt;&lt;br&gt;
   &lt;/form&gt;
&lt;/template&gt;

&lt;template name = "home"&gt;
   &lt;p&gt;You're logged in.&lt;/p&gt;
   &lt;button class = "logout"&gt;Logout&lt;/button&gt;
&lt;/template&gt;&nbsp;</pre> 
  <p style="text-align:justify;"> 首先，我们需要创建注册事件。这个功能将读取注册输入，创建新的用户，并将其存储到数据库。 </p> 
  <p style="text-align:justify;"> 第二个事件登录。这一次的功能将读取登录模板的用户输入信息，如果电子邮件地址和密码是有效的，或者无效则返回一个错误。 </p> 
  <div>
    最后注销事件将用于当用户点击注销按钮。 
  </div> 
  <h3> meteorApp/client/app.js </h3> 
  <pre>if (Meteor.isClient) {
   Template.register.events({
      'submit form': function(event) {
         event.preventDefault();
			
         var registerData = {
            email: event.target.registerEmail.value,
            password: event.target.registerPassword.value
         }
			
         Accounts.createUser(registerData, function(error){
            if (Meteor.user()) {
               console.log(Meteor.userId());
            } else {
               console.log("ERROR: " + error.reason);
            }
         });
      }
   });

   Template.login.events({
      'submit form': function(event){
         event.preventDefault();
         var myEmail = event.target.loginEmail.value;
         var myPassword = event.target.loginPassword.value;
			
         Meteor.loginWithPassword(myEmail, myPassword, function(error){
            if (Meteor.user()) {
               console.log(Meteor.userId());
            } else {
               console.log("ERROR: " + error.reason);
            }
         });
      }
   });

   Template.home.events({
      'click .logout': function(event){
         event.preventDefault();
			
         Meteor.logout(function(error) {
            if(error) {
               console.log("ERROR: " + error.reason);
            }
         });
      }
   });
}</pre> 
  <div>
    当应用程序已经开始启动运行，我们将进入以下页面。
   <br> 
   <img src="/uploads/tutorial/20160426/1-160426212ZG96.png" alt="">
   <br> 
  </div> 
  <p style="text-align:justify;"> 如果我们在注册表单中输入电子邮件地址和密码，就可以注册并登入新用户。现在可以看到控制台登录的用户ID&nbsp;以及&nbsp;home&nbsp;模板将显示。<br> <img src="/uploads/tutorial/20160426/1-16042621292HF.png" alt=""> </p> 
  <p style="text-align:justify;"> 登录事件将检查数据库并日志记录用户信息，检查电子邮件地址和密码是否正确。如果不正确，控制台将记录一个错误。<br> <img src="/uploads/tutorial/20160426/1-160426212949A4.png" alt=""> </p> 
  <p style="text-align:justify;"> 如果用户点击LOGOUT 按钮，该应用程序会记录退出并显示注册和登录的模板。 </p> 
  <div> 
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>