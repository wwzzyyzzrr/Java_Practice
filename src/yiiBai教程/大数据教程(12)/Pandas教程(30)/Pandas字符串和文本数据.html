<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Pandas字符串和文本数据</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将使用基本系列/索引来讨论字符串操作。在随后的章节中，将学习如何将这些字符串函数应用于数据帧(<em>DataFrame</em>)。</p> 
 <p><em>Pandas</em>提供了一组字符串函数，可以方便地对字符串数据进行操作。 最重要的是，这些函数忽略(或排除)丢失/NaN值。</p> 
 <p>几乎这些方法都使用Python字符串函数(请参阅： <a target="_blank" href="http://docs.python.org/3/library/stdtypes.html#string-methods">http://docs.python.org/3/library/stdtypes.html#string-methods</a> )。 因此，将Series对象转换为String对象，然后执行该操作。</p> 
 <p>下面来看看每个操作的执行和说明。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>函数</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>lower()</code></td> 
    <td>将<code>Series/Index</code>中的字符串转换为小写。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>upper()</code></td> 
    <td>将<code>Series/Index</code>中的字符串转换为大写。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>len()</code></td> 
    <td>计算字符串长度。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>strip()</code></td> 
    <td>帮助从两侧的系列/索引中的每个字符串中删除空格(包括换行符)。</td> 
   </tr> 
   <tr> 
    <td>5</td> 
    <td><code>split(' ')</code></td> 
    <td>用给定的模式拆分每个字符串。</td> 
   </tr> 
   <tr> 
    <td>6</td> 
    <td><code>cat(sep=' ')</code></td> 
    <td>使用给定的分隔符连接系列/索引元素。</td> 
   </tr> 
   <tr> 
    <td>7</td> 
    <td><code>get_dummies()</code></td> 
    <td>返回具有单热编码值的数据帧(DataFrame)。</td> 
   </tr> 
   <tr> 
    <td>8</td> 
    <td><code>contains(pattern)</code></td> 
    <td>如果元素中包含子字符串，则返回每个元素的布尔值<code>True</code>，否则为<code>False</code>。</td> 
   </tr> 
   <tr> 
    <td>9</td> 
    <td><code>replace(a,b)</code></td> 
    <td>将值<code>a</code>替换为值<code>b</code>。</td> 
   </tr> 
   <tr> 
    <td>10</td> 
    <td><code>repeat(value)</code></td> 
    <td>重复每个元素指定的次数。</td> 
   </tr> 
   <tr> 
    <td>11</td> 
    <td><code>count(pattern)</code></td> 
    <td>返回模式中每个元素的出现总数。</td> 
   </tr> 
   <tr> 
    <td>12</td> 
    <td><code>startswith(pattern)</code></td> 
    <td>如果系列/索引中的元素以模式开始，则返回<code>true</code>。</td> 
   </tr> 
   <tr> 
    <td>13</td> 
    <td><code>endswith(pattern)</code></td> 
    <td>如果系列/索引中的元素以模式结束，则返回<code>true</code>。</td> 
   </tr> 
   <tr> 
    <td>14</td> 
    <td><code>find(pattern)</code></td> 
    <td>返回模式第一次出现的位置。</td> 
   </tr> 
   <tr> 
    <td>15</td> 
    <td><code>findall(pattern)</code></td> 
    <td>返回模式的所有出现的列表。</td> 
   </tr> 
   <tr> 
    <td>16</td> 
    <td><code>swapcase</code></td> 
    <td>变换字母大小写。</td> 
   </tr> 
   <tr> 
    <td>17</td> 
    <td><code>islower()</code></td> 
    <td>检查系列/索引中每个字符串中的所有字符是否小写，返回布尔值</td> 
   </tr> 
   <tr> 
    <td>18</td> 
    <td><code>isupper()</code></td> 
    <td>检查系列/索引中每个字符串中的所有字符是否大写，返回布尔值</td> 
   </tr> 
   <tr> 
    <td>19</td> 
    <td><code>isnumeric()</code></td> 
    <td>检查系列/索引中每个字符串中的所有字符是否为数字，返回布尔值。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>现在创建一个系列，看看上述所有函数是如何工作的。</p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t', np.nan, '1234','SteveMinsu'])

print (s)
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             Tom
1    William Rick
2            John
3         Alber@t
4             NaN
5            1234
6      SteveMinsu
dtype: object
</code></pre> 
 <p><strong>1. lower()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t', np.nan, '1234','SteveMinsu'])

print (s.str.lower())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             tom
1    william rick
2            john
3         alber@t
4             NaN
5            1234
6      steveminsu
dtype: object
</code></pre> 
 <p><strong>2. upper()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t', np.nan, '1234','SteveMinsu'])

print (s.str.upper())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             TOM
1    WILLIAM RICK
2            JOHN
3         ALBER@T
4             NaN
5            1234
6      STEVESMITH
dtype: object
</code></pre> 
 <p><strong>3. len()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t', np.nan, '1234','SteveMinsu'])
print (s.str.len())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0     3.0
1    12.0
2     4.0
3     7.0
4     NaN
5     4.0
6    10.0
dtype: float64
</code></pre> 
 <p><strong>4. strip()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s)
print ("=========== After Stripping ================")
print (s.str.strip())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             Tom 
1     William Rick
2             John
3          Alber@t
dtype: object
=========== After Stripping ================
0             Tom
1    William Rick
2            John
3         Alber@t
dtype: object
</code></pre> 
 <p><strong>5. split(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s)
print ("================= Split Pattern: ==================")
print (s.str.split(' '))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             Tom 
1     William Rick
2             John
3          Alber@t
dtype: object
================= Split Pattern: ==================
0              [Tom, ]
1    [, William, Rick]
2               [John]
3            [Alber@t]
dtype: object
</code></pre> 
 <p><strong>6. cat(sep=pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])

print (s.str.cat(sep=' &lt;=&gt; '))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">Tom  &lt;=&gt;  William Rick &lt;=&gt; John &lt;=&gt; Alber@t
</code></pre> 
 <p><strong>7. get_dummies()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
import numpy as np

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])

print (s.str.get_dummies())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">    William Rick  Alber@t  John  Tom 
0              0        0     0     1
1              1        0     0     0
2              0        0     1     0
3              0        1     0     0
</code></pre> 
 <p><strong>8. contains()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s.str.contains(' '))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0     True
1     True
2    False
3    False
dtype: bool
</code></pre> 
 <p><strong>9. replace(a,b)函数示例</strong></p>   
 <pre><code class="lang-python">import pandas as pd
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s)
print ("After replacing @ with $: ============== ")
print (s.str.replace('@','$'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             Tom 
1     William Rick
2             John
3          Alber@t
dtype: object
After replacing @ with $: ============== 
0             Tom 
1     William Rick
2             John
3          Alber$t
dtype: object
</code></pre> 
 <p><strong>10. repeat(value)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])

print (s.str.repeat(2))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0                      Tom Tom 
1     William Rick William Rick
2                      JohnJohn
3                Alber@tAlber@t
dtype: object
</code></pre> 
 <p><strong>11. count(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])

print ("The number of 'm's in each string:")
print (s.str.count('m'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">The number of 'm's in each string:
0    1
1    1
2    0
3    0
dtype: int64
</code></pre> 
 <p><strong>12. startswith(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])

print ("Strings that start with 'T':")
print (s.str. startswith ('T'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">Strings that start with 'T':
0     True
1    False
2    False
3    False
dtype: bool
</code></pre> 
 <p><strong>13. endswith(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print ("Strings that end with 't':")
print (s.str.endswith('t'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">Strings that end with 't':
0    False
1    False
2    False
3     True
dtype: bool
</code></pre> 
 <p><strong>14. find(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s.str.find('e'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0   -1
1   -1
2   -1
3    3
dtype: int64
</code></pre> 
 <blockquote> 
  <p>注意：<code>-1</code>表示元素中没有这样的模式可用。</p> 
 </blockquote> 
 <p><strong>15. findall(pattern)函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom ', ' William Rick', 'John', 'Alber@t'])
print (s.str.findall('e'))
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0     []
1     []
2     []
3    [e]
dtype: object
</code></pre> 
 <blockquote> 
  <p>空列表(<code>[]</code>)表示元素中没有这样的模式可用。</p> 
 </blockquote> 
 <p><strong>16. swapcase()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t'])
print (s.str.swapcase())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0             tOM
1    wILLIAM rICK
2            jOHN
3         aLBER@T
dtype: object
</code></pre> 
 <p><strong>17. islower()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['Tom', 'William Rick', 'John', 'Alber@t'])
print (s.str.islower())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0    False
1    False
2    False
3    False
dtype: bool
</code></pre> 
 <p><strong>18. isupper()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd

s = pd.Series(['TOM', 'William Rick', 'John', 'Alber@t'])

print (s.str.isupper())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0    True
1    False
2    False
3    False
dtype: bool
</code></pre> 
 <p><strong>19. isnumeric()函数示例</strong></p> 
 <pre><code class="lang-python">import pandas as pd
s = pd.Series(['Tom', '1199','William Rick', 'John', 'Alber@t'])
print (s.str.isnumeric())
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <pre><code class="lang-shell">0    False
1     True
2    False
3    False
4    False
dtype: bool
</code></pre>
 <br>      
</div></body></html>