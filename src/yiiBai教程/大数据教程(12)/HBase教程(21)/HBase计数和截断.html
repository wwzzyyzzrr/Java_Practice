<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">HBase计数和截断</h1><div style="width:100%;float:left;" class="article-content">   
 <h2> count</h2> 
 <p> 可以使用count命令计算表的行数量。它的语法如下：</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">count </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">‘&lt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">table name</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;’</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span></pre> 
 <p> 删除第一行后，表emp就只有两行。验证它，如下图所示。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">hbase</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">main</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">):</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">023</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">:</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> count </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'emp'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">2</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> row</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">s</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">in</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0.090</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> seconds
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">2</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span></pre> 
 <h2> truncate</h2> 
 <p> 此命令将禁止删除并重新创建一个表。truncate 的语法如下：</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">hbase</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> truncate </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'table name'</span></pre> 
 <p> 下面给出是 truncate 命令的例子。在这里，我们已经截断了emp表。</p> 
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">hbase</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">main</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">):</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">011</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">:</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> truncate </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'emp'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Truncating</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">'one'</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> table </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">it may take a </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">while</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">):</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
   </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">-</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Disabling</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> table</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">...</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
   </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">-</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Truncating</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> table</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">...</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
  </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> row</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">s</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">in</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">1.5950</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> seconds
</span></pre> 
 <p> 截断表之后，使用scan 命令来验证。会得到表的行数为零。</p>   
 <pre class="prettyprint notranslate prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">hbase</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">main</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">):</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">017</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">:</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> scan </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">‘</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">emp</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">’</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
ROW                  COLUMN</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">+</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">CELL
</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> row</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">s</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">in</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">0.3110</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);"> seconds</span></pre> 
 <br>      
</div></body></html>