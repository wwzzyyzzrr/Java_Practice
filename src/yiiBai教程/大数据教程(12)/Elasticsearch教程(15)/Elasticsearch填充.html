<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Elasticsearch填充</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本节中，我们将向<strong>Elasticsearch</strong>添加一些索引，映射和数据。此数据将用于本教程中解释的示例中。</p> 
 <h2 id="h2-u521Bu5EFAu7D22u5F15"><a name="创建索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建索引</h2>
 <pre><code class="lang-c">POST http://localhost:9200/schools
</code></pre> 
 <p><strong>请求正文</strong><br>它可以包含索引特定的设置，但是现在，它的默认设置为空。</p> 
 <p><strong>响应</strong></p> 
 <pre><code class="lang-json">{"acknowledged": true}
</code></pre> 
 <p>这意味着创建索引成功</p> 
 <h3 id="h3-u521Bu5EFAu6620u5C04u548Cu6DFBu52A0u6570u636E"><a name="创建映射和添加数据" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建映射和添加数据</h3>
 <p>Elasticsearch将根据请求体中提供的数据自动创建映射，我们将使用其批量功能在此索引中添加多个JSON对象。</p> 
 <pre><code>POST http://localhost:9200/schools/_bulk
</code></pre>
 <h3 id="h3-u8BF7u6C42u4F53"><a name="请求体" class="reference-link"></a><span class="header-link octicon octicon-link"></span>请求体</h3>
 <pre><code class="lang-json">{
   "index":{
      "_index":"schools", "_type":"school", "_id":"1"
   }
}
{
   "name":"Central School", "description":"CBSE Affiliation", "street":"Nagan",
   "city":"paprola", "state":"HP", "zip":"176115", "location":[31.8955385, 76.8380405],
   "fees":2000, "tags":["Senior Secondary", "beautiful campus"], "rating":"3.5"
}
{
   "index":{
      "_index":"schools", "_type":"school", "_id":"2"
   }
}
{
   "name":"Saint Paul School", "description":"ICSE 
   Afiliation", "street":"Dawarka", "city":"Delhi", "state":"Delhi", "zip":"110075",
   "location":[28.5733056, 77.0122136], "fees":5000,
   "tags":["Good Faculty", "Great Sports"], "rating":"4.5"
}
{
   "index":{"_index":"schools", "_type":"school", "_id":"3"}
}
{
   "name":"Crescent School", "description":"State Board Affiliation", "street":"Tonk Road", 
   "city":"Jaipur", "state":"RJ", "zip":"176114","location":[26.8535922, 75.7923988],
   "fees":2500, "tags":["Well equipped labs"], "rating":"4.5"
}
</code></pre> 
 <p>响应结果 - </p> 
 <pre><code class="lang-json">{
   "took":328, "errors":false,"items":[
      {
         "index":{
            "_index":"schools", "_type":"school", "_id":"1", "_version":1, "_shards":{
               "total":2, "successful":1, "failed":0
            }, "status":201
         }
      },

      {
         "index":{
            "_index":"schools", "_type":"school", "_id":"2", "_version":1, "_shards":{
               "total":2, "successful":1, "failed":0
            }, "status":201
         }
      },

      {
         "index":{
            "_index":"schools", "_type":"school", "_id":"3", "_version":1, "_shards":{
               "total":2, "successful":1, "failed":0
            }, "status":201
         }
      }
   ]
}
</code></pre> 
 <h3 id="h3-u6DFBu52A0u53E6u4E00u4E2Au7D22u5F15"><a name="添加另一个索引" class="reference-link"></a><span class="header-link octicon octicon-link"></span>添加另一个索引</h3>
 <p><strong>创建索引</strong></p>   
 <pre><code>POST http://localhost:9200/schools_gov
</code></pre>
 <p><strong>请求正文</strong></p> 
 <p>它可以包含索引特定的设置，但现在它的默认设置为空。</p> 
 <p><strong>响应</strong></p> 
 <pre><code>{"acknowledged": true} (This means index is created)
</code></pre>
 <h3 id="h3-u521Bu5EFAu6620u5C04u548Cu6DFBu52A0u6570u636E"><a name="创建映射和添加数据" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建映射和添加数据</h3>
 <pre><code>POST http://localhost:9200/schools_gov/_bulk
</code></pre>
 <p><strong>请求正文</strong></p> 
 <pre><code class="lang-json">{
   "index":{
      "_index":"schools_gov", "_type":"school", "_id":"1"
   }
}
{
   "name":"Model School", "description":"CBSE Affiliation", "street":"silk city",
   "city":"Hyderabad", "state":"AP", "zip":"500030", "location":[17.3903703, 78.4752129],
   "fees":200, "tags":["Senior Secondary", "beautiful campus"], "rating":"3"
}
{
   "index":{
      "_index":"schools_gov", "_type":"school", "_id":"2"
   }
}
{
   "name":"Government School", "description":"State Board Affiliation",
   "street":"Hinjewadi", "city":"Pune", "state":"MH", "zip":"411057",
   "location": [18.599752, 73.6821995], "fees":500, "tags":["Great Sports"], "rating":"4"
}
</code></pre> 
 <p><strong>响应</strong></p> 
 <pre><code class="lang-json">{
   "took":179, "errors":false, "items":[
      {
        "index":{
           "_index":"schools_gov", "_type":"school", "_id":"1", "_version":1, "_shards":{
              "total":2, "successful":1, "failed":0
            }, "status":201
         }
      },

      {
         "index":{
            "_index":"schools_gov", "_type":"school", "_id":"2", "_version":1, "_shards":{
               "total":2, "successful":1, "failed":0
            }, "status":201
         }
      }
   ]
}
</code></pre>
 <br>      
</div></body></html>