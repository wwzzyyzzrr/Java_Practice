<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Solr核心（内核）</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Solr核心(Core)是Lucene索引的运行实例，包含使用它所需的所有Solr配置文件。我们需要创建一个Solr Core来执行索引和分析等操作。</p> 
 <p>Solr应用程序可以包含一个或多个核心。 如果需要，Solr应用程序中的两个核心可以相互通信。</p> 
 <h2 id="h2-u521Bu5EFAu4E00u4E2Au6838u5FC3"><a name="创建一个核心" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建一个核心</h2>
 <p>安装和启动<strong>Solr</strong>后，可以连接到Solr的客户端(Web界面)。访问以下网址：</p> 
 <ul> 
  <li><a target="_blank" href="http://Localhost:8983/solr/">http://Localhost:8983/solr/</a></li>
 </ul> 
 <p><img src="http://www.yiibai.com/uploads/images/201702/0302/800160203_71981.png" alt=""></p> 
 <p>如下面的截图(箭头指向)所示，最初Apache Solr中并没有核心。 现在我们来学习如何在Solr中创建一个核心。</p> 
 <h2 id="h2--create-"><a name="使用create命令" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用create命令</h2>
 <p>创建核心的一种方法是使用<code>create</code>命令来创建无架构的核心，如下所示 -</p> 
 <pre><code class="lang-shell">[Hadoop@localhost bin]$ ./Solr create -c solr_sample
</code></pre> 
 <p>这里，我们试图在Apache Solr中创建一个<code>solr_sample</code>核心。此命令将创建一个核心，显示以下消息。</p> 
 <pre><code class="lang-shell">Copying configuration to new core instance directory:
/home/Hadoop/Solr/server/Solr/Solr_sample 

Creating new core 'Solr_sample' using command: 
http://localhost:8983/Solr/admin/cores?action=CREATE&amp;name=Solr_sample&amp;instanceD 
ir = Solr_sample {  
   "responseHeader":{    
      "status":0,    
      "QTime":850
   },  
   "core":"solr_sample" 
}
</code></pre> 
 <p>可以在Solr中创建多个核心。在Solr Admin的左侧下方，有一个核心选择器(<strong>core selector</strong>)，可以在其中选择新创建的核心，在弹出的表单中填入要创建的核心的相关信息，如以下屏幕截图所示。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201702/0302/612160210_18709.png" alt=""></p> 
 <h2 id="h2--create_core-"><a name="使用create_core命令" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用create_core命令</h2>
 <p>或者，也可以使用<code>create_core</code>命令来创建核心。此命令具有以下选项 -</p> 
 <table> 
  <thead> 
   <tr> 
    <th>–c <strong>core_name</strong></th> 
    <th>要创建的核心的名称</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>-p <strong>port_name</strong></td> 
    <td>要创建的核心的端口</td> 
   </tr> 
   <tr> 
    <td>-d <strong>conf_dir</strong></td> 
    <td>端口的配置目录</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>下面来看看如何使用<code>create_core</code>命令。 在这里，我们将尝试创建一个名称为<code>my_core</code>的核心。</p>   
 <pre><code class="lang-shell">[Hadoop@localhost bin]$ ./Solr create_core -c my_core
</code></pre> 
 <p>在执行时，上述命令创建一个核心，它会显示以下消息 -</p> 
 <pre><code class="lang-shell">Copying configuration to new core instance directory: 
/home/Hadoop/Solr/server/Solr/my_core  

Creating new core 'my_core' using command: 
http://localhost:8983/Solr/admin/cores?action=CREATE&amp;name=my_core&amp;instanceD
ir = my_core {  
   "responseHeader":{  
      "status":0,  
      "QTime":750
   },  
   "core":"my_core" 
}
</code></pre> 
 <h2 id="h2-u5220u9664u6838u5FC3"><a name="删除核心" class="reference-link"></a><span class="header-link octicon octicon-link"></span>删除核心</h2>
 <p>可以使用Apache Solr的<code>delete</code>命令删除核心。现在假设在Solr中有一个名称为<code>my_core</code>的核心，如下面的截图所示。<br><img src="http://www.yiibai.com/uploads/images/201702/0302/805160257_24221.png" alt=""><br>可以使用<code>delete</code>命令删除此核心，方法是将核心名称传递到此命令，如下所示 -</p> 
 <pre><code class="lang-shell">[Hadoop@localhost bin]$ ./solr delete -c my_core
</code></pre> 
 <p>在执行上述命令时，将删除指定的内核，显示以下消息。</p> 
 <pre><code class="lang-shell">Deleting core 'my_core' using command: 
http://localhost:8983/Solr/admin/cores?action=UNLOAD&amp;core = my_core&amp;deleteIndex
   = true&amp;deleteDataDir = true&amp;deleteInstanceDir = true  {

   "responseHeader" :{    
      "status":0,    
      "QTime":170
   }
}
</code></pre> 
 <p>可以打开Solr的Web界面以验证核心是否已成功删除。</p>
 <br>      
</div></body></html>