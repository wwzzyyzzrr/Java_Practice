<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Zookeeper安装配置</h1><div style="width:100%;float:left;" class="article-content">   
 <p style="text-align:justify;"> 在安装ZooKeeper之前，请确保在以下任何操作系统上运行 − </p> 
 <ul class="list"> 
  <li> <p style="text-align:justify;"> 任意Linux OS&nbsp;− 支持开发和部署。它是演示应用程序的首选。 </p> </li> 
  <li> <p style="text-align:justify;"> Windows OS&nbsp;− 仅支持开发。 </p> </li> 
  <li> <p style="text-align:justify;"> Mac OS&nbsp;− 仅支持开发。 </p> </li> 
 </ul> 
 <p style="text-align:justify;"> ZooKeeper服务器是用Java编写创建，它运行在JVM。所以需要使用JDK 6或更高版本。 </p> 
 <p style="text-align:justify;"> 现在，请按照下面给您的步骤在计算机上安装ZooKeeper框架。 </p> 
 <h2> 第1步：验证安装Java </h2> 
 <p style="text-align:justify;"> 假设你已经在系统上安装Java环境。只需使用下面的命令验证它。 </p> 
 <pre class="result notranslate">$ java -version</pre> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 如果您的计算机上已经安装了Java，那么可以查看已安装的Java版本。否则，请执行以下的简单步骤来安装Java最新版本。 </p> 
 <h3> 步骤1.1：下载JDK </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 通过访问以下链接并下载最新的版本：<a target="_blank" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java</a> </p> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 最新的版本（在写这篇教程）是JDK8U65和文件：“jdk-8u65-linuxx64.tar.gz”，请下载文件到本机。 </p> 
 <h3> 步骤1.2：提取文件 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 一般情况下，文件下载到Downloads文件夹中。验证它，使用下面的命令提取 tar 文件。 </p> 
 <pre class="result notranslate">$ cd /go/to/download/path
$ tar -zxf jdk-8u65-linux-x64.gz</pre> 
 <h3> 步骤1.3：移动到opt目录 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 为了使Java提供给所有用户，将提取java内容到 <strong>“/usr/local/java”</strong> 文件夹中。 </p> 
 <pre class="result notranslate">$ su 
password: (type password of root user)
$ mkdir /opt/jdk
$ mv jdk-1.8.0_65 /opt/jdk/</pre> 
 <h3> 步骤1.4：设置路径 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 要设置 JAVA_HOME 变量, 添加下面的命令到~/.bashrc文件。 </p> 
 <pre class="result notranslate">export JAVA_HOME = /usr/jdk/jdk-1.8.0_65
export PATH=$PATH:$JAVA_HOME/bin</pre> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 现在，提交所有更改到当前正在运行的系统。 </p> 
 <pre class="result notranslate">$ source ~/.bashrc</pre> 
 <h3> 步骤1.5：Java替代方案 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 使用以下命令来更改Java的替代方案。 </p> 
 <pre class="result notranslate">update-alternatives --install /usr/bin/java java /opt/jdk/jdk1.8.0_65/bin/java 100</pre> 
 <h3> Step 1.6 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 验证使用验证命令（Java的版本），在第1步学习了Java的安装。 </p> 
 <h2> 第2步：ZooKeeper框架的安装 </h2> 
 <h3> 步骤2.1：下载ZooKeeper </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 要在计算机上安装ZooKeeper框架，请访问以下链接并下载ZooKeeper的最新版本：<a target="_blank" href="http://zookeeper.apache.org/releases.html">http://zookeeper.apache.org/releases.html</a> </p> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 截至目前，ZooKeeper的最新版本是3.4.6 (ZooKeeper-3.4.6.tar.gz). </p> 
 <h3> 步骤2.2：tar文件解压 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 使用以下命令解压 tar 文件 - </p>   
 <pre class="result notranslate">$ cd opt/
$ tar -zxf zookeeper-3.4.6.tar.gz
$ cd zookeeper-3.4.6
$ mkdir data</pre> 
 <h3> 步骤2.3：创建配置文件 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 使用命令 vi 打开 conf/zoo.cfg 配置文件，并将以下所有参数设置为开始点。 </p> 
 <pre class="result notranslate">$ vi conf/zoo.cfg

tickTime = 2000
dataDir = /path/to/zookeeper/data
clientPort = 2181
initLimit = 5
syncLimit = 2</pre> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 当配置文件已经保存成功后，再返回到终端。现在，就可以启动zookeeper服务器。 </p> 
 <h3> 步骤2.4：启动ZooKeeper服务器 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 执行以下命令 − </p> 
 <pre class="result notranslate">$ bin/zkServer.sh start</pre> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 执行此命令后，你会得到一个响应如下 - </p> 
 <pre class="result notranslate">$ JMX enabled by default
$ Using config: /Users/../zookeeper-3.4.6/bin/../conf/zoo.cfg
$ Starting zookeeper ... STARTED</pre> 
 <h3> 步骤2.5: 启动 CLI </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 输入以下命令 - </p> 
 <pre class="result notranslate">$ bin/zkCli.sh</pre> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 输入上面的命令后，将连接到 ZooKeeper 服务器，你应该得到以下响应。 </p> 
 <pre class="result notranslate">Connecting to localhost:2181
................
................
................
Welcome to ZooKeeper!
................
................
WATCHER::
WatchedEvent state:SyncConnected type: None path:null
[zk: localhost:2181(CONNECTED) 0]</pre> 
 <h3> 停止ZooKeeper服务器 </h3> 
 <p style="text-align:justify;font-family:Verdana, Geneva, Tahoma,  Helvetica, font-size:15px !important;"> 连接服务器并执行所有操作后，可以使用以下命令停止zookeeper服务器。 </p> 
 <pre class="result notranslate">$ bin/zkServer.sh stop</pre>
 <br>      
</div></body></html>