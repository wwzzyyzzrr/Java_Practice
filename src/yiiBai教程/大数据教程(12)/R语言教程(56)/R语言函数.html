<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">R语言函数</h1><div style="width:100%;float:left;" class="article-content">   
 <p>一个函数是组合在一起以执行特定任务的一组语句。R具有大量内置函数，当然用户也可以创建自己的功能。</p> 
 <p>在R中，函数是一个对象，所以R解释器能够将控制传递给函数，以将参数传递函数完成操作。</p> 
 <p>该函数又执行其任务并将控制权返回给解释器以及可存储在其他对象中的任何结果。</p> 
 <h2 id="h2-u51FDu6570u5B9Au4E49"><a name="函数定义" class="reference-link"></a><span class="header-link octicon octicon-link"></span>函数定义</h2>
 <p>使用关键字<code>function</code>来创建一个R函数。R函数定义的基本语法如下：</p> 
 <pre><code class="lang-r">function_name &lt;- function(arg_1, arg_2, ...) {
   Function body 
}
</code></pre> 
 <h2 id="h2-u51FDu6570u7EC4u4EF6"><a name="函数组件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>函数组件</h2>
 <p>函数中有许多不同的部分，它们是 -</p> 
 <ul> 
  <li><em>函数名称</em> - 这是函数的实际名称。 它以R名称作为对象存储在R环境中。</li>
  <li><em>参数</em> - 参数是一个占位符。调用函数时，将值传递给参数。参数是可选的; 也就是说，函数可能不包含参数。参数也可以有默认值。</li>
  <li><em>函数体</em> - 函数体包含一组语句，用于定义函数的作用。</li>
  <li><em>返回值</em> - 函数的返回值是要评估/计算的函数体中的最后一个表达式。</li>
 </ul> 
 <p>R具有许多内置函数，可以直接在程序中调用，而不必定义它们。我们还可以创建和使用自己创建的函数，称为用户定义函数。</p> 
 <h2 id="h2-u5185u7F6Eu51FDu6570"><a name="内置函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>内置函数</h2>
 <p>内置函数的简单示例有：<code>seq()</code>，<code>mean()</code>，<code>max()</code>，<code>sum(x)</code>和<code>paste(...)</code>等。它们可在用户编写的程序直接调用。可以参考<a target="_blank" href="http://cran.r-project.org/doc/contrib/Short-refcard.pdf" title="广泛使用的R函数">广泛使用的R函数</a>。</p> 
 <pre><code class="lang-r"># Create a sequence of numbers from 32 to 44.
print(seq(32,44))

# Find mean of numbers from 25 to 82.
print(mean(25:82))

# Find sum of numbers frm 41 to 68.
print(sum(41:68))
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">[1] 32 33 34 35 36 37 38 39 40 41 42 43 44
[1] 53.5
[1] 1526
</code></pre> 
 <h2 id="h2-u7528u6237u81EAu5B9Au4E49u51FDu6570"><a name="用户自定义函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>用户自定义函数</h2>
 <p>我们可以在R中创建用户定义的函数。它们用于实现用户想要的功能，当创建了这些用户自定义函数后，就可以像内置函数那样使用。以下是如何创建和使用函数的示例 - </p> 
 <pre><code class="lang-r"># Create a function to print squares of numbers in sequence.
new.function &lt;- function(a) {
   for(i in 1:a) {
      b &lt;- i^2
      print(b)
   }
}
</code></pre> 
 <p><strong>调用函数</strong></p> 
 <pre><code class="lang-r"># Create a function to print squares of numbers in sequence.
new.function &lt;- function(a) {
   for(i in 1:a) {
      b &lt;- i^2
      print(b)
   }
}

# Call the function new.function supplying 6 as an argument.
new.function(10)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">[1] 1
[1] 4
[1] 9
[1] 16
[1] 25
[1] 36
[1] 49
[1] 64
[1] 81
[1] 100
</code></pre> 
 <p><strong>调用没有参数的函数</strong></p> 
 <pre><code class="lang-r"># Create a function without an argument.
new.function &lt;- function() {
   for(i in 10:20) {
      print(i^2)
   }
}    

# Call the function without supplying an argument.
new.function()
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p>   
 <pre><code class="lang-shell">[1] 100
[1] 121
[1] 144
[1] 169
[1] 196
[1] 225
[1] 256
[1] 289
[1] 324
[1] 361
[1] 400
</code></pre> 
 <p><strong>用参数值调用函数(按位置和名称)</strong></p> 
 <p>函数调用的参数可以按照函数中定义的顺序提供，也可以按不同的顺序提供，只需要分配给参数的名称即可。参考以下示例代码 - </p> 
 <pre><code class="lang-r"># Create a function with arguments.
new.function &lt;- function(a,b,c) {
   result &lt;- a * b + c
   print(result)
}

# 按参数的顺序来提供值调用
new.function(10,20,30)

# 按参数的名称来提供值调用
new.function(a = 10, c = 30, b = 20)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">[1] 230
[1] 230
</code></pre> 
 <p><strong>使用默认参数调用函数</strong></p> 
 <p>我们可以在函数定义中定义参数的值，并调用函数，而不提供任何参数来获取默认结果。 但是也可以通过提供参数的新值来获取非默认参考值来调用这些函数。</p> 
 <pre><code class="lang-r"># Create a function with arguments.
new.function &lt;- function(a = 10, b = 20) {
   result &lt;- a * b
   print(result)
}

# Call the function without giving any argument.
new.function()

# Call the function with giving new values of the argument.
new.function(11, 22)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">[1] 200
[1] 242
</code></pre> 
 <h2 id="h2-u61D2u60F0u8BA1u7B97u51FDu6570"><a name="懒惰计算函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>懒惰计算函数</h2>
 <p>函数的参数被执行懒评估/求值，这表示它们只有在函数体需要的时候进行评估/求值。</p> 
 <pre><code class="lang-r"># Create a function with arguments.
new.function &lt;- function(a, b) {
   print(a^2)
   print(a)
   print(b)
}

# Evaluate the function without supplying one of the arguments.
new.function(8)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">[1] 64
[1] 8
Error in print(b) : 缺少参数"b",也没有缺省值
</code></pre> 
 <p>如上所示，只有在<code>print(b)</code>，才发现没有提供参数<code>b</code>的值。所以我们在编写程序时要注意此类问题的发生，最好给定参数<code>b</code>一个默认值。</p>
 <br>      
</div></body></html>