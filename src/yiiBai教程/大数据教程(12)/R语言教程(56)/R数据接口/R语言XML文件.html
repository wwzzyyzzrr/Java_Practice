<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">R语言XML文件</h1><div style="width:100%;float:left;" class="article-content">   
 <p>XML是万维网上使用标准ASCII文本，内部网和其他地方共享文件格式和数据的文件格式。 它代表可扩展标记语言(XML)。 与HTML类似，它包含标记标签。但与标记标签描述页面结构的HTML不同，标记标签描述了文件中包含的数据的含义。</p> 
 <p>可以使用<em>“XML”</em>包读取R中的xml文件，使用以下命令安装此软件包。</p> 
 <pre><code class="lang-r">install.packages("XML")
</code></pre> 
 <h2 id="h2--xml-"><a name="准备XML文件数据" class="reference-link"></a><span class="header-link octicon octicon-link"></span>准备XML文件数据</h2>
 <p>通过将以下数据复制到文本编辑器(如记事本)中来创建XMl文件。 使用<code>.xml</code>扩展名保存文件，并将文件类型选为所有文件(<code>*.*</code>)。创建一个XML文件：<em>input.xml</em>，内容如下 -</p> 
 <pre><code class="lang-xml">&lt;RECORDS&gt;
   &lt;EMPLOYEE&gt;
      &lt;ID&gt;1&lt;/ID&gt;
      &lt;NAME&gt;Rick&lt;/NAME&gt;
      &lt;SALARY&gt;623.3&lt;/SALARY&gt;
      &lt;STARTDATE&gt;1/1/2012&lt;/STARTDATE&gt;
      &lt;DEPT&gt;IT&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;2&lt;/ID&gt;
      &lt;NAME&gt;Dan&lt;/NAME&gt;
      &lt;SALARY&gt;515.2&lt;/SALARY&gt;
      &lt;STARTDATE&gt;9/23/2013&lt;/STARTDATE&gt;
      &lt;DEPT&gt;Operations&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;3&lt;/ID&gt;
      &lt;NAME&gt;Michelle&lt;/NAME&gt;
      &lt;SALARY&gt;611&lt;/SALARY&gt;
      &lt;STARTDATE&gt;11/15/2014&lt;/STARTDATE&gt;
      &lt;DEPT&gt;IT&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;4&lt;/ID&gt;
      &lt;NAME&gt;Ryan&lt;/NAME&gt;
      &lt;SALARY&gt;729&lt;/SALARY&gt;
      &lt;STARTDATE&gt;5/11/2014&lt;/STARTDATE&gt;
      &lt;DEPT&gt;HR&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;5&lt;/ID&gt;
      &lt;NAME&gt;Gary&lt;/NAME&gt;
      &lt;SALARY&gt;843.25&lt;/SALARY&gt;
      &lt;STARTDATE&gt;3/27/2015&lt;/STARTDATE&gt;
      &lt;DEPT&gt;Finance&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;6&lt;/ID&gt;
      &lt;NAME&gt;Nina&lt;/NAME&gt;
      &lt;SALARY&gt;578&lt;/SALARY&gt;
      &lt;STARTDATE&gt;5/21/2013&lt;/STARTDATE&gt;
      &lt;DEPT&gt;IT&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;7&lt;/ID&gt;
      &lt;NAME&gt;Simon&lt;/NAME&gt;
      &lt;SALARY&gt;632.8&lt;/SALARY&gt;
      &lt;STARTDATE&gt;7/30/2013&lt;/STARTDATE&gt;
      &lt;DEPT&gt;Operations&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

   &lt;EMPLOYEE&gt;
      &lt;ID&gt;8&lt;/ID&gt;
      &lt;NAME&gt;Guru&lt;/NAME&gt;
      &lt;SALARY&gt;722.5&lt;/SALARY&gt;
      &lt;STARTDATE&gt;6/17/2014&lt;/STARTDATE&gt;
      &lt;DEPT&gt;Finance&lt;/DEPT&gt;
   &lt;/EMPLOYEE&gt;

&lt;/RECORDS&gt;
</code></pre> 
 <h2 id="h2--xml-"><a name="读取XML文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>读取XML文件</h2>
 <p>R使用<code>xmlParse()</code>函数来读取<code>xml</code>文件，它作为列表存储在R中。</p> 
 <pre><code class="lang-r"># Load the package required to read XML files.
library("XML")

# Also load the other required package.
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Print the result.
print(result)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">&lt;?xml version="1.0"?&gt;
&lt;RECORDS&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;1&lt;/ID&gt;
    &lt;NAME&gt;Rick&lt;/NAME&gt;
    &lt;SALARY&gt;623.3&lt;/SALARY&gt;
    &lt;STARTDATE&gt;1/1/2012&lt;/STARTDATE&gt;
    &lt;DEPT&gt;IT&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;2&lt;/ID&gt;
    &lt;NAME&gt;Dan&lt;/NAME&gt;
    &lt;SALARY&gt;515.2&lt;/SALARY&gt;
    &lt;STARTDATE&gt;9/23/2013&lt;/STARTDATE&gt;
    &lt;DEPT&gt;Operations&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;3&lt;/ID&gt;
    &lt;NAME&gt;Michelle&lt;/NAME&gt;
    &lt;SALARY&gt;611&lt;/SALARY&gt;
    &lt;STARTDATE&gt;11/15/2014&lt;/STARTDATE&gt;
    &lt;DEPT&gt;IT&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;4&lt;/ID&gt;
    &lt;NAME&gt;Ryan&lt;/NAME&gt;
    &lt;SALARY&gt;729&lt;/SALARY&gt;
    &lt;STARTDATE&gt;5/11/2014&lt;/STARTDATE&gt;
    &lt;DEPT&gt;HR&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;5&lt;/ID&gt;
    &lt;NAME&gt;Gary&lt;/NAME&gt;
    &lt;SALARY&gt;843.25&lt;/SALARY&gt;
    &lt;STARTDATE&gt;3/27/2015&lt;/STARTDATE&gt;
    &lt;DEPT&gt;Finance&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;6&lt;/ID&gt;
    &lt;NAME&gt;Nina&lt;/NAME&gt;
    &lt;SALARY&gt;578&lt;/SALARY&gt;
    &lt;STARTDATE&gt;5/21/2013&lt;/STARTDATE&gt;
    &lt;DEPT&gt;IT&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;7&lt;/ID&gt;
    &lt;NAME&gt;Simon&lt;/NAME&gt;
    &lt;SALARY&gt;632.8&lt;/SALARY&gt;
    &lt;STARTDATE&gt;7/30/2013&lt;/STARTDATE&gt;
    &lt;DEPT&gt;Operations&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
  &lt;EMPLOYEE&gt;
    &lt;ID&gt;8&lt;/ID&gt;
    &lt;NAME&gt;Guru&lt;/NAME&gt;
    &lt;SALARY&gt;722.5&lt;/SALARY&gt;
    &lt;STARTDATE&gt;6/17/2014&lt;/STARTDATE&gt;
    &lt;DEPT&gt;Finance&lt;/DEPT&gt;
  &lt;/EMPLOYEE&gt;
&lt;/RECORDS&gt;
</code></pre> 
 <p><strong>获取XML文件中存在的节点数</strong></p>   
 <pre><code class="lang-r"># Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Find number of nodes in the root.
rootsize &lt;- xmlSize(rootnode)

# Print the result.
print(rootsize)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-r">output
[1] 8
</code></pre> 
 <p><strong>第一个节点的详细信息</strong></p> 
 <p>下面来看看如何解析文件的第一条记录，它将给出对顶级节点中存在的各种元素的详细信息。</p> 
 <pre><code class="lang-r"># Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Print the result.
print(rootnode[1])
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">$EMPLOYEE
&lt;EMPLOYEE&gt;
  &lt;ID&gt;1&lt;/ID&gt;
  &lt;NAME&gt;Rick&lt;/NAME&gt;
  &lt;SALARY&gt;623.3&lt;/SALARY&gt;
  &lt;STARTDATE&gt;1/1/2012&lt;/STARTDATE&gt;
  &lt;DEPT&gt;IT&lt;/DEPT&gt;
&lt;/EMPLOYEE&gt; 

attr(,"class")
[1] "XMLInternalNodeList" "XMLNodeList"
</code></pre> 
 <p><strong>获取节点的其它元素</strong></p> 
 <pre><code class="lang-r"># Load the packages required to read XML files.
library("XML")
library("methods")

# Give the input file name to the function.
result &lt;- xmlParse(file = "input.xml")

# Exract the root node form the xml file.
rootnode &lt;- xmlRoot(result)

# Get the first element of the first node.
print(rootnode[[1]][[1]])

# Get the fifth element of the first node.
print(rootnode[[1]][[5]])

# Get the second element of the third node.
print(rootnode[[3]][[2]])
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">&lt;ID&gt;1&lt;/ID&gt; 
&lt;DEPT&gt;IT&lt;/DEPT&gt; 
&lt;NAME&gt;Michelle&lt;/NAME&gt;
</code></pre> 
 <h2 id="h2-xml-"><a name="XML转到数据帧" class="reference-link"></a><span class="header-link octicon octicon-link"></span>XML转到数据帧</h2>
 <p>为了在大文件中有效处理数据，我们以<em>xml</em>文件的形式读取数据作为数据帧。然后处理数据帧进行数据分析。</p> 
 <pre><code class="lang-r"># Load the packages required to read XML files.
library("XML")
library("methods")

# Convert the input xml file to a data frame.
xmldataframe &lt;- xmlToDataFrame("input.xml")
print(xmldataframe)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">  ID     NAME SALARY  STARTDATE       DEPT
1  1     Rick  623.3   1/1/2012         IT
2  2      Dan  515.2  9/23/2013 Operations
3  3 Michelle    611 11/15/2014         IT
4  4     Ryan    729  5/11/2014         HR
5  5     Gary 843.25  3/27/2015    Finance
6  6     Nina    578  5/21/2013         IT
7  7    Simon  632.8  7/30/2013 Operations
8  8     Guru  722.5  6/17/2014    Finance
</code></pre> 
 <p>由于数据现在已经转为数据帧，所以我们可以使用数据帧相关函数来读取和操作文件。</p>
 <br>      
</div></body></html>