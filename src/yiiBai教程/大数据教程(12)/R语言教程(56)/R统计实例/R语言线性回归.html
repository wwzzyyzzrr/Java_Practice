<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">R语言线性回归</h1><div style="width:100%;float:left;" class="article-content">   
 <p>回归分析是一个广泛使用的统计工具，用于建立两个变量之间的关系模型。 这些变量之一称为预测变量，其值通过实验收集。 另一个变量称为响应变量，其值来自预测变量。</p> 
 <p>在线性回归中，这两个变量通过一个等式相关联，其中这两个变量的指数(幂)是<code>1</code>。数学上，当绘制为图形时，线性关系表示直线。任何变量的指数不等于<code>1</code>的非线性关系产生曲线。</p> 
 <p>线性回归的一般数学方程为 -</p> 
 <pre><code class="lang-r">y = ax + b
</code></pre> 
 <p>以下是使用的参数的描述 - </p> 
 <ul> 
  <li><em>y</em> - 是响应变量。</li>
  <li><em>x</em> - 是预测变量。</li>
  <li><code>a</code>和<code>b</code> - 叫作系数的常数。</li>
 </ul> 
 <h2 id="h2-u5EFAu7ACBu56DEu5F52u7684u6B65u9AA4"><a name="建立回归的步骤" class="reference-link"></a><span class="header-link octicon octicon-link"></span>建立回归的步骤</h2>
 <p>一个简单的线性回归例子：是否能根据一个人的已知身高来预测人的体重。要做到这一点，我们需要有一个人的身高和体重之间的关系。</p> 
 <p>创建线性回归关系的步骤是 -</p> 
 <ul> 
  <li>进行收集高度和相应重量观测值样本的实验。</li>
  <li>使用R中的<code>lm()</code>函数创建关系模型。</li>
  <li>从所创建的模型中找到系数，并使用这些系数创建数学方程。</li>
  <li>获取关系模型的摘要，以了解预测中的平均误差(也称为残差)。</li>
  <li>为了预测新人的体重，请使用R中的<code>predict()</code>函数。</li>
 </ul> 
 <p><strong>输入数据样本</strong></p> 
 <p>以下是表示观察结果的样本数据 -</p> 
 <pre><code class="lang-r"># Values of height
151, 174, 138, 186, 128, 136, 179, 163, 152, 131

# Values of weight.
63, 81, 56, 91, 47, 57, 76, 72, 62, 48
</code></pre> 
 <h3 id="h3-lm-"><a name="lm()函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>lm()函数</h3>
 <p>该<code>lm()</code>函数创建预测变量与响应变量之间的关系模型。</p> 
 <p><strong>语法</strong></p> 
 <p>线性回归中<code>lm()</code>函数的基本语法是 -</p> 
 <pre><code class="lang-r">lm(formula,data)
</code></pre> 
 <p>以下是使用的参数的描述 - </p> 
 <ul> 
  <li><em>formula</em> - 是表示<code>x</code>和<code>y</code>之间的关系的符号。</li>
  <li><em>data</em> - 是应用公式的向量。</li>
 </ul> 
 <p><strong>示例：</strong> 创建关系模型并得到系数</p> 
 <pre><code class="lang-r">x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

print(relation)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">Call:
lm(formula = y ~ x)

Coefficients:
(Intercept)            x  
   -38.4551          0.6746
</code></pre> 
 <p>获取关系的概要 - </p> 
 <pre><code class="lang-r">x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

print(summary(relation))
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">Call:
lm(formula = y ~ x)

Residuals:
    Min      1Q     Median      3Q     Max 
-6.3002    -1.6629  0.0412    1.8944  3.9775 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) -38.45509    8.04901  -4.778  0.00139 ** 
x             0.67461    0.05191  12.997 1.16e-06 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

Residual standard error: 3.253 on 8 degrees of freedom
Multiple R-squared:  0.9548,    Adjusted R-squared:  0.9491 
F-statistic: 168.9 on 1 and 8 DF,  p-value: 1.164e-06
</code></pre> 
 <h3 id="h3-predict-"><a name="predict()函数" class="reference-link"></a><span class="header-link octicon octicon-link"></span>predict()函数</h3>
 <p><strong>语法</strong></p> 
 <p>线性回归中的<code>predict()</code>的基本语法是 -</p>   
 <pre><code class="lang-r">predict(object, newdata)
</code></pre> 
 <p>以下是使用的参数的描述 - </p> 
 <ul> 
  <li><em>object</em> - 是已经使用<code>lm()</code>函数创建的公式。</li>
  <li><em>newdata</em> - 是包含预测变量的新值的向量。</li>
 </ul> 
 <p><strong>示例：</strong> 预测新人的体重 </p> 
 <pre><code class="lang-r"># The predictor vector.
x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)

# The resposne vector.
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)

# Apply the lm() function.
relation &lt;- lm(y~x)

# Find weight of a person with height 170.
a &lt;- data.frame(x = 170)
result &lt;-  predict(relation,a)
print(result)
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <pre><code class="lang-shell">       1 
76.22869
</code></pre> 
 <p><strong>示例：</strong>以图形方式可视化线性回归，参考以下代码实现 - </p> 
 <pre><code class="lang-r"># Create the predictor and response variable.
x &lt;- c(151, 174, 138, 186, 128, 136, 179, 163, 152, 131)
y &lt;- c(63, 81, 56, 91, 47, 57, 76, 72, 62, 48)
relation &lt;- lm(y~x)

# Give the chart file a name.
png(file = "linearregression.png")

# Plot the chart.
plot(y,x,col = "blue",main = "身高和体重回归",
abline(lm(x~y)),cex = 1.3,pch = 16,xlab = "体重(Kg)",ylab = "身高(cm)")

# Save the file.
dev.off()
</code></pre> 
 <p>当我们执行上述代码时，会产生以下结果 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201708/2408/866110844_23448.png" alt=""></p>
 <br>      
</div></body></html>