<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring Boot SLF4J日志实例</h1><div style="width:100%;float:left;" class="article-content">   
 <p>默认情况下，SLF4j日志记录包含在Spring Boot Web应用程序中，只需要启用它就可以了。</p> 
 <blockquote> 
  <p>注意：查看此<a target="_blank" href="http://github.com/spring-projects/spring-boot/tree/master/spring-boot/src/main/resources/org/springframework/boot/logging/logback" title="Spring Boot Logback XML模板">Spring Boot Logback XML模板</a>以了解默认的日志记录模式和配置。</p> 
 </blockquote> 
 <h2 id="h2-slf4j-"><a name="SLF4j示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>SLF4j示例</h2>
 <p>我们将在接下来的文章中，创建一个项目：<code>web-slf4j-logging</code>，演示这几种常用的日志配置方法。</p> 
 <h3 id="h3-1-application-properties"><a name="1. application.properties" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. application.properties</h3>
 <p>要启用日志记录，请在资源文件夹的根目录中创建一个<code>application.properties</code>文<code>件。logging.level</code>- 定义日志记录级别，日志记录将被输出到控制台。</p> 
 <p><em>文件： application.properties</em></p> 
 <pre><code>logging.level.org.springframework.web=ERROR
logging.level.com.yiibai=DEBUG
</code></pre>
 <p><code>logging.file</code> – 定义日志文件(可根据需要写上，如：<code>c:/logs/mylog.log</code>)，将日志记录输出到文件和控制台。<br><em>文件： application.properties</em></p> 
 <pre><code>logging.level.org.springframework.web=ERROR
logging.level.com.yiibai=DEBUG

#output to a temp_folder/file
logging.file=${java.io.tmpdir}/application.log

#output to a file
#logging.file=c:/logs/mylog.log
</code></pre>
 <p><code>logging.pattern</code> - 定义自定义日志记录模式。<br><em>文件： application.properties</em></p> 
 <pre><code>logging.level.org.springframework.web=ERROR
logging.level.com.yiibai=DEBUG

# Logging pattern for the console
logging.pattern.console= "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# Logging pattern for file
logging.pattern.file= "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

logging.file=c:/logs/mylog.log
</code></pre>
 <h3 id="h3-2-application-yml"><a name="2. application.yml" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. application.yml</h3>
 <p>上面的配置，也可以使用YAML格式实现相同的效果。<br><em>文件：application.yml</em></p> 
 <pre><code class="lang-shell">logging:
  level:
    org.springframework.web: ERROR
    com.yiibai: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"
    file: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"
  file: c:/logs/mylog.log
</code></pre> 
 <h3 id="h3-3-logback-xml"><a name="3. 经典Logback.xml" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. 经典Logback.xml</h3>
 <p>如果您不喜欢Spring Boot日志记录模板，也可以在资源文件夹的根目录或类路径的根目录中创建一个标准的<code>logback.xml</code>文件。它将会覆盖Spring Boot日志记录模板。<br><em>文件：logback.xml</em></p> 
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;configuration&gt;

    &lt;property name="DEV_HOME" value="c:/logs" /&gt;

    &lt;appender name="FILE-AUDIT"
        class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
        &lt;file&gt;${DEV_HOME}/debug.log&lt;/file&gt;
        &lt;encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder"&gt;
            &lt;Pattern&gt;
                %d{yyyy-MM-dd HH:mm:ss} - %msg%n
            &lt;/Pattern&gt;
        &lt;/encoder&gt;

        &lt;rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy"&gt;
            &lt;!-- rollover daily --&gt;
            &lt;fileNamePattern&gt;${DEV_HOME}/archived/debug.%d{yyyy-MM-dd}.%i.log
                        &lt;/fileNamePattern&gt;
            &lt;timeBasedFileNamingAndTriggeringPolicy
                class="ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP"&gt;
                &lt;maxFileSize&gt;10MB&lt;/maxFileSize&gt;
            &lt;/timeBasedFileNamingAndTriggeringPolicy&gt;
        &lt;/rollingPolicy&gt;

    &lt;/appender&gt;

    &lt;logger name="com.yiibai" level="debug"
        additivity="false"&gt;
        &lt;appender-ref ref="FILE-AUDIT" /&gt;
    &lt;/logger&gt;

    &lt;root level="error"&gt;
        &lt;appender-ref ref="FILE-AUDIT" /&gt;
    &lt;/root&gt;

&lt;/configuration&gt;
</code></pre> 
 <h3 id="h3-4-"><a name="4. 设置根级别" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. 设置根级别</h3>
 <p><em>文件：application.properties</em> </p>   
 <pre><code class="lang-shell"># root logging level, warning : too much output
logging.level.=DEBUG
</code></pre> 
 <p><em>文件：application.yml</em></p> 
 <pre><code>logging:
  level:
    ROOT: DEBUG
</code></pre>
 <p>使用 <code>mvn spring-boot:run</code> 命令运行上面示例，应该会看到有日志输出。代码下载请找到<strong>Spring Boot</strong>目录中的项目：<code>web-slf4j-logging</code>。</p>
 <br>      
</div></body></html>