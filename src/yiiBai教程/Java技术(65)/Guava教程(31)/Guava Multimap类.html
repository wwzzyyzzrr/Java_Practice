<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Guava Multimap类</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 多重映射接口扩展映射，使得其键一次可被映射到多个值。</p> 
 <h2> 接口声明</h2> 
 <p> 以下是com.google.common.collect.Multimap&lt;K，V&gt;接口的声明：</p> 
 <pre class="prettyprint" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
@GwtCompatible
public interface Multimap&lt;K,V&gt;</pre> 
 <h2> 接口方法</h2> 
 <table class="src" style="box-sizing: border-box; border-collapse: collapse; border-spacing: 0px;  border-color: rgb(214, 214, 214); width: 603.333374023438px; vertical-align: top; margin-top: 8px; margin-bottom: 8px; color: rgb(49, 49, 49);    font-size: 14.4444446563721px; line-height: 22px; background-color: rgb(247, 247, 247);"> 
  <tbody style="box-sizing: border-box;"> 
   <tr style="box-sizing: border-box;"> 
    <th style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px; width: 38.8888893127441px; background: rgb(238, 238, 238);"> S.N.</th> 
    <th style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px; background: rgb(238, 238, 238);"> 方法及说明</th> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 1</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Map&lt;K,Collection&lt;V&gt;&gt; asMap()</b><br style="box-sizing: border-box;"> 返回此multimap中的视图，从每个不同的键在键的关联值的非空集合映射。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 2</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">void clear()</b><br style="box-sizing: border-box;"> 将删除所有multimap中的键值对，留下空。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 3</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean containsEntry(Object key, Object value)</b><br style="box-sizing: border-box;"> 返回true如果此多重映射包含至少一个键 - 值对用键键和值value。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 4</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean containsKey(Object key)</b><br style="box-sizing: border-box;"> 返回true，如果这个multimap中至少包含一个键值对的键key。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 5</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean containsValue(Object value)</b><br style="box-sizing: border-box;"> 返回true，如果这个multimap至少包含一个键值对的值值。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 6</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Collection&lt;Map.Entry&lt;K,V&gt;&gt; entries()</b><br style="box-sizing: border-box;"> 返回包含在此multimap中，为Map.Entry的情况下，所有的键 - 值对的视图集合。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 7</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean equals(Object obj)</b><br style="box-sizing: border-box;"> 比较指定对象与此多重映射是否相等。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 8</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Collection&lt;V&gt; get(K key)</b><br style="box-sizing: border-box;"> 返回，如果有的话，在这个multimap中键关联的值的视图集合。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 9</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">int hashCode()</b><br style="box-sizing: border-box;"> 返回此多重映射的哈希码。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 10</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean isEmpty()</b><br style="box-sizing: border-box;"> 返回true，如果这个multimap中未包含键 - 值对。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 11</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Multiset&lt;K&gt; keys()</b><br style="box-sizing: border-box;"> 返回一个视图集合包含从每个键值对这个multimap中的关键，没有折叠重复。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 12</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Set&lt;K&gt; keySet()</b><br style="box-sizing: border-box;"> Returns a view collection of all distinct keys contained in this multimap.</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 13</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean put(K key, V value)</b><br style="box-sizing: border-box;"> 存储键 - 值对在这个multimap中。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 14</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean putAll(K key, Iterable&lt;? extends V&gt; values)</b><br style="box-sizing: border-box;"> 存储一个键 - 值对在此multimap中的每个值，都使用相同的键 key。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 15</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean putAll(Multimap&lt;? extends K,? extends V&gt; multimap)</b><br style="box-sizing: border-box;"> 存储了所有键 - 值对多重映射在这个multimap中，通过返回&nbsp;multimap.entries()&nbsp;的顺序<span style="font-size: 14.4444446563721px;">.</span></td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 16</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">boolean remove(Object key, Object value)</b><br style="box-sizing: border-box;"> 删除一个键 - 值对用键键，并从该多重映射的值的值，如果这样的存在。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 17</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Collection&lt;V&gt; removeAll(Object key)</b><br style="box-sizing: border-box;"> 删除与键键关联的所有值。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 18</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Collection&lt;V&gt; replaceValues(K key, Iterable&lt;? extends V&gt; values)</b><br style="box-sizing: border-box;"> 存储与相同的键值，替换任何现有值的键的集合。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 19</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">int size()</b><br style="box-sizing: border-box;"> 返回此多重映射键 - 值对的数量。</td> 
   </tr> 
   <tr style="box-sizing: border-box;"> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> 20</td> 
    <td style="box-sizing: border-box; border-collapse: collapse;  border-color: rgb(214, 214, 214); padding: 5px;"> <b style="box-sizing: border-box;">Collection&lt;V&gt; values()</b><br style="box-sizing: border-box;"> 返回一个视图集合包含从包含在该multimap中的每个键 - 值对的值，而不发生重复 (so values().size() == size()).</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2> Multimap 示例</h2> 
 <p> 使用所选择的任何编辑器创建下面的java程序&nbsp;<strong>C:/&gt; Guava</strong></p> 
 <i style="box-sizing: border-box; color: rgb(49, 49, 49);    font-size: 14.4444446563721px; line-height: 22px;">GuavaTester.java</i>   
 <pre class="prettyprint tryit" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); cursor: default; background-image: url(http://www.yiibai.com/guava/images/try-it.jpg) !important; background-attachment: initial !important; background-size: initial !important; background-origin: initial !important; background-clip: initial !important; background-position: 100% 0%; background-repeat: no-repeat !important;">
import java.util.Collection;
import java.util.List;
import java.util.Map;
import java.util.Set;

import com.google.common.collect.ArrayListMultimap;
import com.google.common.collect.Multimap;

public class GuavaTester {
   public static void main(String args[]){
      GuavaTester tester = new GuavaTester();
      Multimap&lt;String,String&gt; multimap = tester.getMultimap();

      List&lt;String&gt; lowerList = (List&lt;String&gt;)multimap.get("lower");
      System.out.println("Initial lower case list");
      System.out.println(lowerList.toString());
      lowerList.add("f");
      System.out.println("Modified lower case list");
      System.out.println(lowerList.toString());

      List&lt;String&gt; upperList = (List&lt;String&gt;)multimap.get("upper");
      System.out.println("Initial upper case list");
      System.out.println(upperList.toString());
      upperList.remove("D");
      System.out.println("Modified upper case list");
      System.out.println(upperList.toString());

      Map&lt;String, Collection&lt;String&gt;&gt; map = multimap.asMap();
      System.out.println("Multimap as a map");
      for (Map.Entry&lt;String,  Collection&lt;String&gt;&gt; entry : map.entrySet()) {
         String key = entry.getKey();
         Collection&lt;String&gt; value =  multimap.get("lower");
         System.out.println(key + ":" + value);
      }

      System.out.println("Keys of Multimap");
      Set&lt;String&gt; keys =  multimap.keySet();
      for(String key:keys){
         System.out.println(key);
      }

      System.out.println("Values of Multimap");
      Collection&lt;String&gt; values = multimap.values();
      System.out.println(values);
   }	

   private Multimap&lt;String,String&gt; getMultimap(){
      //Map&lt;String, List&lt;String&gt;&gt;
      // lower -&gt; a, b, c, d, e 
      // upper -&gt; A, B, C, D

      Multimap&lt;String,String&gt; multimap = ArrayListMultimap.create();		

      multimap.put("lower", "a");
      multimap.put("lower", "b");
      multimap.put("lower", "c");
      multimap.put("lower", "d");
      multimap.put("lower", "e");

      multimap.put("upper", "A");
      multimap.put("upper", "B");
      multimap.put("upper", "C");
      multimap.put("upper", "D");		
      return multimap;		
   }
}</pre> 
 <h2> 验证结果</h2> 
 <p> 使用javac编译器编译如下类</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
C:\Guava&gt;javac GuavaTester.java</pre> 
 <p> 现在运行GuavaTester看到的结果</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
C:\Guava&gt;java GuavaTester</pre> 
 <p> 看到结果。</p> 
 <pre class="result" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; margin-bottom: 0px; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 603.767395019531px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49); line-height: 22px; background-color: rgb(241, 241, 241);">
Initial lower case list
[a, b, c, d, e]
Modified lower case list
[a, b, c, d, e, f]
Initial upper case list
[A, B, C, D]
Modified upper case list
[A, B, C]
Multimap as a map
upper:[a, b, c, d, e, f]
lower:[a, b, c, d, e, f]
Keys of Multimap
upper
lower
Values of Multimap
[A, B, C, a, b, c, d, e, f]</pre> 
 <br>      
</div></body></html>