<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">EasyMock期望调用</h1><div style="width:100%;float:left;" class="article-content">   
 <p style="box-sizing: border-box; color: rgb(0, 0, 0); line-height: 24px; margin: 0em 0.2em 1em; padding: 0px; text-align: justify; font-family: 'Open Sans', Arial, sans-serif; font-size: 14px;"> EasyMock提供，可以在特定的方法来的调用的数目的特别检查。假设MathApplication使用其的任意方法，其中CalculatorService.serviceUsed()方法表示CalculatorService的用于获得所需要的操作结果之前调用CalculatorService.serviceUsed()方法，只有一次。<br> MathApplication应该不能够调用CalculatorService.serviceUsed()一次以上。</p> 
 <pre class="prettyprint" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
//add the behavior of calc service to add two numbers and serviceUsed.
EasyMock.expect(calcService.add(10.0,20.0)).andReturn(30.00);
calcService.serviceUsed();
//limit the method call to 1, no less and no more calls are allowed
EasyMock.expectLastCall().times(1);</pre> 
 <p> 创建CalculatorService的界面如下。</p> CalculatorService.java 
 <pre class="prettyprint" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
public interface CalculatorService {
   public double add(double input1, double input2);
   public double subtract(double input1, double input2);
   public double multiply(double input1, double input2);
   public double divide(double input1, double input2);
   public void serviceUsed();
}</pre> 
 <p> <a target="_blank" href="http://www.yiibai.com/easymock/easymock_times_call_once.html">calcService.serviceUsed()被调用一次例子</a></p> 
 <p> <a target="_blank" href="http://www.yiibai.com/easymock/easymock_times_call_twice.html">calcService.serviceUsed()调用两次例子</a></p> 
 <p> <a target="_blank" href="http://www.yiibai.com/easymock/easymock_times_call_none.html">无需调用calcService.serviceUsed()示例</a></p> 
 <div>
   &nbsp;
 </div> 
 <br>      
</div></body></html>