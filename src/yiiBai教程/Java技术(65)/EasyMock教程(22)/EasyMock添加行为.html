<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">EasyMock添加行为</h1><div style="width:100%;float:left;" class="article-content">   
 <p> EasyMock使用expect()方法或expectLassCall()方法添加一个功能，一个模拟对象。请看下面的代码片段。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="com" style="box-sizing: border-box; color: rgb(136, 0, 0);">//add the behavior of calc service to add two numbers</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">EasyMock</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">expect</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">calcService</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">add</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">10.0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">20.0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)).</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">andReturn</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">30.00</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span></pre> 
 <p> 这里，我们已经指示EasyMock，行为添加10和20到calcService的添加方法并作为其结果，到返回值30.00</p> 
 <p> 在这个时间点上，模拟简单记录的行为，但它本身不作为一个模拟对象。调用回放后，按预期工作。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; font-family: Menlo, Monaco, Consolas, 'Courier New', monospace; border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="com" style="box-sizing: border-box; color: rgb(136, 0, 0);">//add the behavior of calc service to add two numbers</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">EasyMock</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">expect</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">calcService</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">add</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">10.0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">20.0</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)).</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">andReturn</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">30.00</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">

</span><span class="com" style="box-sizing: border-box; color: rgb(136, 0, 0);">//activate the mock</span><span class="pln" style="box-sizing: border-box; color: rgb(0, 0, 0);">
</span><span class="com" style="box-sizing: border-box; color: rgb(136, 0, 0);">//EasyMock.replay(calcService);</span></pre> 
 <p> <a target="_blank" href="http://www.yiibai.com/easymock/easymock_example_without_replay.html">不需要EasyMock.Replay()的示例</a></p> 
 <p> <a target="_blank" href="http://www.yiibai.com/easymock/easymock_example_with_replay.html">需要EasyMock.Replay()的示例</a></p> 
 <br>      
</div></body></html>