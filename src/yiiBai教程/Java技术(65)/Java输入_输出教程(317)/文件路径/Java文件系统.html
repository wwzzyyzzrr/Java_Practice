<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java文件系统</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Java7 引入了新的输入/输出2(NIO.2)API并提供了一个新的I/O API。</p> 
 <p>它向Java类库添加了三个包：<code>java.nio.file</code>，<code>java.nio.file.attribute</code>和<code>java.nio.file.spi</code>。</p> 
 <h2 id="h2-u6587u4EF6u7CFBu7EDF"><a name="文件系统" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件系统</h2>
 <p><code>FileSystem</code>类的对象表示Java程序中的文件系统。<code>FileSystem</code>对象用于执行两个任务：</p> 
 <ul> 
  <li>Java程序和文件系统之间的接口。</li>
  <li>一个工厂，它用于创建许多类型的文件系统相关对象和服务。</li>
 </ul> 
 <p><code>FileSystem</code>对象与平台相关。</p> 
 <h2 id="h2-u521Bu5EFAu6587u4EF6u7CFBu7EDF"><a name="创建文件系统" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建文件系统</h2>
 <p>要获取默认的<code>FileSystem</code>对象，需要使用<code>FileSystems</code>类的<code>getDefault()</code>静态方法，如下所示：</p> 
 <pre><code class="lang-java">FileSystem fs  = FileSystems.getDefault();
</code></pre> 
 <p><code>FileSystem</code>由一个或多个<code>FileStore</code>组成。<code>FileSystem</code>的<code>getFileStores()</code>方法返回<code>FileStore</code>对象的迭代器(<code>Iterator</code>)。<br><code>FileSystem</code>的<code>getRootDirectories()</code>方法返回<code>Path</code>对象的迭代器，它表示到所有顶级目录的路径。<br><code>FileSystem</code>的<code>isReadOnly()</code>方法判断是否获得文件存储的只读访问权限。例<br>以下代码显示如何使用<code>FileSystem</code>对象。</p> 
 <pre><code class="lang-java">import java.nio.file.FileStore;
import java.nio.file.FileSystem;
import java.nio.file.FileSystems;
import java.nio.file.Path;
import java.io.IOException;

public class Main {
  public static void main(String[] args) {
    FileSystem fs = FileSystems.getDefault();

    System.out.println("Read-only file system: " + fs.isReadOnly());
    System.out.println("File name separator: " + fs.getSeparator());

    for (FileStore store : fs.getFileStores()) {
      printDetails(store);
    }
    for (Path root : fs.getRootDirectories()) {
      System.out.println(root);
    }
  }

  public static void printDetails(FileStore store) {
    try {
      String desc = store.toString();
      String type = store.type();
      long totalSpace = store.getTotalSpace();
      long unallocatedSpace = store.getUnallocatedSpace();
      long availableSpace = store.getUsableSpace();
      System.out.println(desc + ", Total: " + totalSpace + ",  Unallocated: "
          + unallocatedSpace + ",  Available: " + availableSpace);
    } catch (IOException e) {
      e.printStackTrace();
    }
  }
}
</code></pre> 
 <p>上面的代码生成以下结果(不同的环境可能结果不太一样)。</p>   
 <pre><code class="lang-java">Read-only file system: false
File name separator: \
System (C:), Total: 53694595072,  Unallocated: 9739976704,  Available: 9739976704
Software (D:), Total: 149264121856,  Unallocated: 50061234176,  Available: 50061234176
Documents (E:), Total: 149264121856,  Unallocated: 75025080320,  Available: 75025080320
Others (F:), Total: 147882274816,  Unallocated: 57207463936,  Available: 57207463936
C:\
D:\
E:\
F:\
</code></pre>
 <br>      
</div></body></html>