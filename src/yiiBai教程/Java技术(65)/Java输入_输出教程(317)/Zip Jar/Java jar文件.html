<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java jar文件</h1><div style="width:100%;float:left;" class="article-content">   
 <h2 id="h2-jar-"><a name="JAR文件格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>JAR文件格式</h2>
 <p>JAR(Java Archive)是基于ZIP文件格式的文件格式。</p> 
 <p>它用于捆绑Java应用程序或小程序的资源，类文件，声音文件，图像等。 它还提供数据压缩。一个JAR文件作为一种特殊类型的ZIP文件。可以对JAR文件的内容进行数字签名，以提供安全性。 它提供了一个平台无关的文件格式。</p> 
 <p>可以使用JAR API在Java程序中处理JAR文件。JAR文件可以具有可选的<code>META-INF</code>目录，以包含包含应用程序配置信息的文件和目录。</p> 
 <h2 id="h2-meta-inf-"><a name="META-INF目录" class="reference-link"></a><span class="header-link octicon octicon-link"></span>META-INF目录</h2>
 <p>下表列出了<code>META-INF</code>目录中的条目。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>名称</th> 
    <th>类型</th> 
    <th>目的</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>MANIFEST.MF</td> 
    <td>文件</td> 
    <td>它包含扩展和包相关数据。</td> 
   </tr> 
   <tr> 
    <td>INDEX.LIST</td> 
    <td>文件</td> 
    <td>它包含软件包的位置信息。 类加载器使用它来加快类搜索和加载过程。</td> 
   </tr> 
   <tr> 
    <td>X.SF</td> 
    <td>文件</td> 
    <td>X是基本文件名。 它存储jar文件的签名。</td> 
   </tr> 
   <tr> 
    <td>X.DSA</td> 
    <td>文件</td> 
    <td>X是基本文件名。 它存储相应签名文件的数字签名。</td> 
   </tr> 
   <tr> 
    <td>/services</td> 
    <td>目录</td> 
    <td>此目录包含所有服务提供程序配置文件。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2-jar-"><a name="Jar工具" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Jar工具</h2>
 <p>JDK提供了一个jar工具来创建和操作JAR文件。还可以使用<code>java.util.jar</code>包中的类使用Java API创建和操作JAR文件。</p> 
 <p>JAR API有一些新类来处理清单文件。<code>Manifest</code>类表示清单文件。要使用<code>jar</code>工具创建JAR文件，许多命令行选项都可用。<br>以下代码列出了<code>jar</code>工具的命令行选项。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>选项</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>-c</td> 
    <td>创建一个新的JAR文件。</td> 
   </tr> 
   <tr> 
    <td>-u</td> 
    <td>更新现有的JAR文件。</td> 
   </tr> 
   <tr> 
    <td>-x</td> 
    <td>从JAR文件中提取命名文件或所有文件。</td> 
   </tr> 
   <tr> 
    <td>-t</td> 
    <td>列出JAR文件的目录。</td> 
   </tr> 
   <tr> 
    <td>-f</td> 
    <td>指定JAR文件名。</td> 
   </tr> 
   <tr> 
    <td>-m</td> 
    <td>包括来自指定文件的清单信息。</td> 
   </tr> 
   <tr> 
    <td>-M</td> 
    <td>不要创建清单文件。</td> 
   </tr> 
   <tr> 
    <td>-i</td> 
    <td>为指定的JAR文件生成索引信息。它在JAR文件中的<code>META-INF</code>目录下创建一个<code>INDEX.LIST</code>文件。</td> 
   </tr> 
   <tr> 
    <td>-0</td> 
    <td>不要压缩JAR文件中的条目。 只存储它们，选项值为零，表示零压缩。</td> 
   </tr> 
   <tr> 
    <td>-e</td> 
    <td>将指定的类名添加为清单文件主要部分中<code>Main-Class</code>条目的值。</td> 
   </tr> 
   <tr> 
    <td>-v</td> 
    <td>在标准输出上生成详细输出</td> 
   </tr> 
   <tr> 
    <td>-C</td> 
    <td>切换到指定的目录并在JAR文件中包括以下文件。 请注意，该选项为大写(C)。 小写字母(c)用于指示创建JAR文件选项。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2--jar-"><a name="创建JAR文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建JAR文件</h2>
 <p>使用以下命令创建一个带有两个名为<code>A.class</code>和<code>B.class</code>类的JAR类型文件的<code>test.jar</code>：</p> 
 <pre><code class="lang-java">jar cf test.jar  A.class B.class
</code></pre> 
 <p>在上面的命令中，选项<code>c</code>表示创建一个新的JAR文件，选项<code>f</code>表示指定一个JAR文件名，这里是:<code>test.jar</code>。</p> 
 <p>在命令结束时，可以指定要包括在JAR文件中的一个或多个文件名或目录名。要查看<code>test.jar</code>文件的内容，请执行以下命令：</p> 
 <pre><code class="lang-java">jar tf test.jar
</code></pre> 
 <p>选项<code>t</code>表示对JAR文件的目录感兴趣。选项<code>f</code>表示指定了JAR文件名，在这个示例中是<code>test.jar</code>。<br>上述命令将生成以下输出：</p> 
 <pre><code class="lang-java">META-INF/
META-INF/MANIFEST.MF A.class
B.class
</code></pre> 
 <p>jar命令自动在<code>META-INF</code>目录中创建了两个额外的东西：一个名为<code>META-INF</code>的目录和一个名为<code>MANIFEST.MF</code>的文件。</p> 
 <p>以下命令将通过在当前工作目录中包含所有内容来创建<code>test.jar</code>文件。</p> 
 <pre><code class="lang-java">jar cf test.jar  *
</code></pre> 
 <p>以下命令将创建一个JAR文件，其中包含<code>book/archives</code>目录中的所有类文件以及<code>book/images</code>目录中的所有图片。</p> 
 <pre><code class="lang-java">jar cf test.jar  book/archives/*.class  book/images
</code></pre> 
 <p>可以在创建JAR文件时使用命令行选项指定清单文件。<code>Manifest</code>文件是一个文本文件，其中包含JAR文件的所有列表条目。<br><code>Manifest</code>文件必须在文件末尾有一个空行。 否则，将不处理列表文件中的最后一个条目。</p> 
 <p>以下命令将在创建<code>test.jar</code>文件(包括当前目录中的所有文件和子目录)时使用<code>manifest.txt</code>文件。</p> 
 <p>上述命令中使用的选项的顺序很重要。 <code>f</code>出现在<code>m</code>之前，必须在<code>Manifest</code>文件名<code>manifest.txt</code>之前指定<code>JAR文件名test.jar</code>。</p> 
 <p>可以按如下方式重写上述命令：</p>   
 <pre><code class="lang-java">jar cmf manifest.txt test.jar *
</code></pre> 
 <h2 id="h2--jar-"><a name="更新JAR文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>更新JAR文件</h2>
 <p>使用选项<code>u</code>更新现有的JAR文件条目或其<code>Manifest</code>文件。以下命令将向现有的<code>test.jar</code>文件添加一个<code>C.class</code>文件：</p> 
 <pre><code class="lang-java">jar uf  test.jar  C.class
</code></pre> 
 <p>假设有一个<code>test.jar</code>文件，并且要将它的<code>Manifest</code>文件中的<code>Main-Class</code>条目更改为<code>HelloWorld</code>类。可以使用以下命令：</p> 
 <pre><code class="lang-java">jar ufe  test.jar HelloWorld
</code></pre> 
 <p>在此命令中，选项<code>u</code>表示正在更新<code>JAR</code>文件; 选项<code>f</code>指示指定<code>JAR</code>文件名，即<code>test.jar</code>，选项<code>e</code>表示在<code>test.jar</code>文件中为<code>MANIFEST.MF</code>文件指定<code>Main-Class</code>条目的值为<code>HelloWorld</code>。</p> 
 <h2 id="h2--jar-"><a name="索引JAR文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>索引JAR文件</h2>
 <p>可以为JAR文件生成一个索引文件。 它用于加快类加载。在创建JAR文件后，必须在单独的命令中使用选项<code>i</code>和<code>jar</code>命令。</p> 
 <pre><code class="lang-java">jar i test.jar
</code></pre> 
 <p>此命令将向<code>test.jar</code>文件添加一个<code>META-INF/INDEX.LIST</code>文件。可以通过使用以下命令列出<code>test.jar</code>文件的目录来验证它：</p> 
 <pre><code class="lang-java">jar tf test.jar
</code></pre> 
 <h2 id="h2--jar-"><a name="提取JAR文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>提取JAR文件</h2>
 <p>要从JAR文件中提取所有或部分条目，请使用选项<code>x</code>和<code>jar</code>命令。从<code>test.jar</code>文件中提取所有条目如下 - </p> 
 <pre><code class="lang-java">jar xf  test.jar
</code></pre> 
 <p>选项<code>x</code>是从JAR文件中提取条目。选项<code>f</code>指定文件名，在这个示例中它是<code>test.jar</code>。<br>上述命令将从当前工作目录中的<code>test.jar</code>文件中提取所有条目。它将创建与<code>test.jar</code>文件中存在的相同的目录结构。要从JAR文件中提取单个条目，请在命令结尾处列出它们。 条目应该用空格分隔。</p> 
 <p>以下命令将从<code>test.jar</code>文件中提取<code>A.class</code>和<code>book/HelloWorld.class</code>条目：</p> 
 <pre><code class="lang-java">jar xf  test.jar A.class  book/HelloWorld.class
</code></pre> 
 <p>要从<code>book</code>目录中提取所有类文件，可以使用以下命令：</p> 
 <pre><code class="lang-java">jar xf  test.jar  book/*.class
</code></pre> 
 <h2 id="h2--jar-"><a name="列表JAR文件内容" class="reference-link"></a><span class="header-link octicon octicon-link"></span>列表JAR文件内容</h2>
 <p>使用选项<code>t</code>与<code>jar</code>命令来列出标准输出上的JAR文件的目录。</p> 
 <pre><code class="lang-java">jar tf test.jar
</code></pre>
 <br>      
</div></body></html>