<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java Reader/Writer</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Java读取器和写入器(<code>Reader/Writer</code>)是基于字符的流。当要从数据源读取基于字符的数据时，使用读取器(<code>Reader</code>)。当想要写入基于字符的数据时使用写入器(<code>Writer</code>)。</p> 
 <p>如果有一个流提供字节，想通过将这些字节解码为字符读取字符，应该使用<code>InputStreamReader</code>类。</p> 
 <p>例如，如果有一个名为<code>iso</code>的<code>InputStream</code>对象，并且想要获取一个<code>Reader</code>对象实例，那么可以这样做：</p> 
 <pre><code class="lang-java">Reader  reader = new InputStreamReader(iso);
</code></pre> 
 <p>如果知道在基于字节的流中使用的编码，可在创建<code>Reader</code>对象时指定它，如下所示：</p> 
 <pre><code class="lang-java">Reader  reader = new InputStreamReader(iso,  "US-ASCII");
</code></pre> 
 <p>类似地，可以创建一个<code>Writer</code>对象，从基于字节的输出流中输出的字符，如下所示，假设<code>oso</code>是一个<code>OutputStream</code>对象。以下代码使从<code>OutputStream</code>使用平台默认编码创建<code>Writer</code>对象。</p> 
 <pre><code class="lang-java">Writer writer  = new OutputStreamWriter(oso);
</code></pre> 
 <p>使用“<code>US-ASCII</code>”编码从<code>OutputStream</code>创建<code>Writer</code>对象</p> 
 <pre><code class="lang-java">Writer writer  = new OutputStreamWriter(oso,  "US-ASCII");
</code></pre> 
 <p><strong>示例</strong> - </p> 
 <pre><code class="lang-java">import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;

public class Main {
  public static void main(String[] args) {
    String destFile = "test.txt";

    try (BufferedWriter bw = new BufferedWriter(new FileWriter(destFile))) {
      bw.append("test");
      bw.newLine();
      bw.append("test1");
      bw.newLine();
      bw.append("test2");
      bw.newLine();
      bw.append("test3");

      bw.flush();
    }  catch (Exception e2) {
      e2.printStackTrace();
    }
  }
}
</code></pre> 
 <p>以下代码从<code>test.txt</code>文件中读取文本。</p> 
 <pre><code class="lang-java">import java.io.BufferedReader;
import java.io.FileReader;

public class Main {
  public static void main(String[] args) throws Exception{
    String srcFile = "test.txt";
    BufferedReader br = new BufferedReader(new FileReader(srcFile));
    String text = null;

    while ((text = br.readLine()) != null) {
      System.out.println(text);
    }
    br.close();
  }
}
</code></pre> 
 <p>将基于字节的流转换为基于字符的流是直接的。如果有一个<code>InputStream</code>对象，可以通过将它包装在一个<code>InputStreamReader</code>对象中来获得一个<code>Reader</code>对象，如下所示：</p> 
 <pre><code class="lang-java">InputStream is = create your  InputStream object here; 
Reader  reader = new InputStreamReader(is);
</code></pre> 
 <p>要从<code>InputStream</code>对象构造<code>BufferedReader</code>对象，那么可以这样做：</p>   
 <pre><code class="lang-java">InputStream is = create your  InputStream object here; 
BufferedReader br  = new BufferedReader(new InputStreamReader(is));
</code></pre> 
 <p>可以从<code>OutputStream</code>对象构造一个<code>Writer</code>对象，如下所示：</p> 
 <pre><code class="lang-java">OutputStream os  = create your  OutputStream object here; Writer writer  = new OutputStreamWriter(os);
</code></pre> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <pre><code class="lang-java">import java.io.FileReader;
import java.io.BufferedReader;
import java.io.Reader;
import java.io.FilterReader;
import java.io.IOException;

class LowerCaseReader extends FilterReader {
    public LowerCaseReader(Reader in) {
        super(in);
    }

    @Override
    public int read(char[] cbuf, int off, int len) throws IOException {
        int count = super.read(cbuf, off, len);
        if (count != -1) {
            // Convert all read characters to lowercase
            int limit = off + count;
            for (int i = off; i &lt; limit; i++) {
                cbuf[i] = Character.toLowerCase(cbuf[i]);
            }
        }
        return count;
    }
}

public class Main {
    public static void main(String[] args) throws Exception {
        String fileName = "test.txt";
        LowerCaseReader lcr = new LowerCaseReader(new FileReader(fileName));
        int c = -1;
        while ((c = lcr.read()) != -1) {
            System.out.print((char) c);
        }
        lcr.close();
        BufferedReader br = new BufferedReader(new LowerCaseReader(new FileReader(fileName)));
        String str = null;
        while ((str = br.readLine()) != null) {
            System.out.println(str);
        }
        br.close();
    }
}
</code></pre> 
 <p>执行上面代码，得到以下结果 - </p> 
 <pre><code class="lang-java">Yiibai.com BufferedInputStream Usge.
The Line 2..yiibai.com bufferedinputstream usge.
the line 2..
</code></pre>
 <br>      
</div></body></html>