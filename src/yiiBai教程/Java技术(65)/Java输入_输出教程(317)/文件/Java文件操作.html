<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java文件操作</h1><div style="width:100%;float:left;" class="article-content">   
 <h2 id="h2-u6587u4EF6u521Bu5EFA"><a name="文件创建" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件创建</h2>
 <p>可以使用<code>File</code>类的<code>createNewFile()</code>方法创建一个新文件：</p> 
 <pre><code class="lang-java">File dummyFile = new File("test.txt");
boolean fileCreated  = dummyFile.createNewFile();
</code></pre> 
 <p>如果具有指定名称的文件尚不存在，<code>createNewFile()</code>方法将创建一个新的空文件。如果文件已成功创建则返回<code>true</code>; 否则返回<code>false</code>。 如果发生<code>I/O</code>错误，该方法将抛出<code>IOException</code>。</p> 
 <p>还可以在默认的临时文件目录或目录中创建一个临时文件。要在默认临时目录中创建临时文件，请使用<code>File</code>类的<code>createTempFile()</code>静态方法，该方法接受前缀和后缀以生成临时文件名。</p> 
 <pre><code class="lang-java">File  tempFile = File.createTempFile("abc", ".txt");
</code></pre> 
 <h2 id="h2-u6587u4EF6u5939u521Bu5EFA"><a name="文件夹创建" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件夹创建</h2>
 <p>可以使用<code>mkdir()</code>或<code>mkdirs()</code>方法创建一个新目录。仅当路径名中指定的父目录已存在时，<code>mkdir()</code>方法才创建目录。</p> 
 <pre><code class="lang-java">File newDir  = new File("C:\\users\\home");
</code></pre> 
 <p>只有当<code>C:\users</code>目录已经存在时，<code>newDir.mkdir()</code>方法才会创建<code>home</code>目录。<code>newDir.mkdirs()</code>方法将创建<code>users</code>目录(如果它不存在于<code>C:</code>驱动器中)，它将在<code>C:\ users</code>目录下创建<code>home</code>目录，也就是说不管<code>C:\\users</code>目录存在不存在，都会直接创建<code>home</code>目录。</p> 
 <h2 id="h2-u6587u4EF6u5220u9664"><a name="文件删除" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件删除</h2>
 <p>要使用<code>File</code>类的<code>delete()</code>方法来删除文件/目录。目录必须为空时才能删除它。如果文件/目录被删除，该方法返回<code>true</code>; 否则返回<code>false</code>。还可以延迟删除文件，直到JVM通过使用<code>deleteOnExit()</code>方法终止。<br>如果在程序中创建临时文件，比如在程序退出时删除这些临时文件，这是非常有用的。立即删除<code>dummy.txt</code>文件，如下代码 - </p> 
 <pre><code class="lang-java">File dummyFile = new File("dummy.txt"); 
dummyFile.delete();
</code></pre> 
 <p>在JVM终止时删除<code>dummy.txt</code>文件</p> 
 <pre><code class="lang-java">File dummyFile = new File("dummy.txt"); 
dummyFile.deleteOnExit();
</code></pre> 
 <h2 id="h2-u6587u4EF6u91CDu547Du540D"><a name="文件重命名" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件重命名</h2>
 <p>要重命名文件，可以使用<code>renameTo()</code>方法，它使用一个<code>File</code>对象来表示新文件：</p> 
 <pre><code class="lang-java">boolean fileRenamed = oldFile.renameTo(newFile);
</code></pre> 
 <p>完整的源代码示例 - </p> 
 <pre><code class="lang-java">import java.io.File;

public class Main {
  public static void main(String[] argv) {
    // Rename old-dummy.txt to new_dummy.txt
    File oldFile = new File("old_dummy.txt");
    File newFile = new File("new_dummy.txt");

    boolean fileRenamed = oldFile.renameTo(newFile);
    if (fileRenamed) {
      System.out.println(oldFile + "  renamed  to " + newFile);
    } else {
      System.out.println("Renaming " + oldFile + "  to " + newFile
          + "  failed.");
    }

  }
}
</code></pre> 
 <p>如果文件的重命名成功，<code>renameTo()</code>方法返回<code>true</code>; 否则返回<code>false</code>。需要检查返回值，以确保重命名成功。<br>上面的代码生成以下结果。</p> 
 <pre><code class="lang-java">Renaming old_dummy.txt  to new_dummy.txt  failed.
</code></pre> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p><code>File</code>对象是不可变的。 创建后它始终表示相同的路径名。当重命名文件时，旧的<code>File</code>对象仍然代表原始的路径名。<br><code>File</code>对象表示路径名，而不是文件系统中的实际文件。以下代码显示了如何进行文件创建，删除和重命名。</p> 
 <pre><code class="lang-java">import java.io.File;

public class Main {
  public static void main(String[] args) throws Exception {
    File newFile = new File("my_new_file.txt");
    printFileDetails(newFile);

    // Create a new file
    boolean fileCreated = newFile.createNewFile();
    if (!fileCreated) {
      System.out.println(newFile + "  could   not  be  created.");
    }
    printFileDetails(newFile);

    // Delete the new file
    newFile.delete();

    System.out.println("After deleting the new file:");
    printFileDetails(newFile);

    // recreate the file
    newFile.createNewFile();

    printFileDetails(newFile);

    // Let's tell the JVM to delete this file on exit
    newFile.deleteOnExit();

    System.out.println("After  using deleteOnExit() method:");
    printFileDetails(newFile);

    // Create a new file and rename it
    File firstFile = new File("my_first_file.txt");
    File secondFile = new File("my_second_file.txt");

    fileCreated = firstFile.createNewFile();
    if (fileCreated || firstFile.exists()) {
      printFileDetails(firstFile);
      printFileDetails(secondFile);

      boolean renamedFlag = firstFile.renameTo(secondFile);
      if (!renamedFlag) {
        System.out.println("Could not  rename  " + firstFile);
      }
      printFileDetails(firstFile);
      printFileDetails(secondFile);
    }
  }
  public static void printFileDetails(File f) {
    System.out.println("Absolute Path: " + f.getAbsoluteFile());
    System.out.println("File exists:  " + f.exists());
  }
}
</code></pre> 
 <p>上面的代码生成以下结果。</p> 
 <pre><code class="lang-java">Absolute Path: F:\website\yiibai\worksp\my_new_file.txt
File exists:  false
Absolute Path: F:\website\yiibai\worksp\my_new_file.txt
File exists:  true
After deleting the new file:
Absolute Path: F:\website\yiibai\worksp\my_new_file.txt
File exists:  false
Absolute Path: F:\website\yiibai\worksp\my_new_file.txt
File exists:  true
After  using deleteOnExit() method:
Absolute Path: F:\website\yiibai\worksp\my_new_file.txt
File exists:  true
Absolute Path: F:\website\yiibai\worksp\my_first_file.txt
File exists:  true
Absolute Path: F:\website\yiibai\worksp\my_second_file.txt
File exists:  false
Absolute Path: F:\website\yiibai\worksp\my_first_file.txt
File exists:  false
Absolute Path: F:\website\yiibai\worksp\my_second_file.txt
File exists:  true
</code></pre> 
 <h2 id="h2-u6587u4EF6u5C5Eu6027"><a name="文件属性" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件属性</h2>
 <p><code>File</code>类包含可获取/设置文件和目录的属性的方法。可以分别使用<code>setReadOnly()</code>，<code>setReadable()</code>，<code>setWritable()</code>和<code>setExecutable()</code>方法将文件设置为只读，可读，可写和可执行。<br>也可以使用<code>lastModified()</code>和<code>setLastModified()</code>方法来获取和设置文件的最后修改日期和时间。使用<code>isHidden()</code>方法检查文件是否被隐藏。</p> 
 <h2 id="h2-u6587u4EF6u5927u5C0F"><a name="文件大小" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件大小</h2>
 <p>可以使用<code>File</code>类的<code>length()</code>方法获取文件的大小(以字节为单位)。如下代码 - </p> 
 <pre><code class="lang-java">File myFile  = new File("myfile.txt");
long  fileLength = myFile.length();
</code></pre> 
 <p>如果<code>File</code>对象表示不存在的文件，则<code>length()</code>方法返回零。<code>length()</code>方法的返回类型是<code>long</code>，而不是<code>int</code>。</p> 
 <h2 id="h2-u5217u51FAu6587u4EF6u548Cu76EEu5F55"><a name="列出文件和目录" class="reference-link"></a><span class="header-link octicon octicon-link"></span>列出文件和目录</h2>
 <p>可以使用<code>File</code>类的<code>listRoots()</code>静态方法获取文件系统中可用根目录的列表。它返回一个<code>File</code>对象数组。</p> 
 <pre><code class="lang-java">File[] roots = File.listRoots();
</code></pre> 
 <p>以下代码显示如何列出所有可用的根目录。</p>   
 <pre><code class="lang-java">import java.io.File;

public class Main {
  public static void main(String[] args) {
    File[] roots = File.listRoots();
    System.out.println("List  of  root directories:");
    for (File f : roots) {
      System.out.println(f.getPath());
    }
  }
}
</code></pre> 
 <p>可以使用<code>File</code>类的<code>list()</code>或<code>listFiles()</code>方法列出目录中的所有文件和目录。<code>list()</code>方法返回一个<code>String</code>数组，而<code>listFiles()</code>方法返回一个<code>File</code>数组。</p> 
 <p>还可以使用这些方法作为文件过滤器从返回的结果中排除一些文件和目录。以下代码显示如何列出目录中的所有文件和目录。</p> 
 <pre><code class="lang-java">import java.io.File;

public class Main {
    public static void main(String[] args) {
        // Change the dirPath value to list files from your directory
        String dirPath = "C:\\";

        File dir = new File(dirPath);
        File[] list = dir.listFiles();

        for (File f : list) {
            if (f.isFile()) {
                System.out.println(f.getPath() + "  (File)");
            } else if (f.isDirectory()) {
                System.out.println(f.getPath() + "  (Directory)");
            }
        }
    }
}
</code></pre> 
 <p>上面的代码生成以下结果。</p> 
 <pre><code class="lang-java">C:\$GetCurrent  (Directory)
C:\$RECYCLE.BIN  (Directory)
C:\.rnd  (File)
C:\AVScanner.ini  (File)
C:\Boot  (Directory)
C:\bootmgr  (File)
C:\BOOTNXT  (File)
C:\BOOTSECT.BAK  (File)
C:\Documents and Settings  (Directory)
C:\drivers  (Directory)
C:\file-for-download.txt  (File)
C:\grldr  (File)
C:\grldr.bak  (File)
C:\HaxLogs.txt  (File)
C:\inetpub  (Directory)
C:\Intel  (Directory)
C:\LibAntiPrtSc_ERROR.log  (File)
C:\LibAntiPrtSc_INFORMATION.log  (File)
C:\mydata  (Directory)
C:\OKDOS  (Directory)
C:\okldr  (File)
C:\okldr.mbr  (File)
C:\oraclebackup  (Directory)
C:\PerfLogs  (Directory)
C:\Program Files  (Directory)
C:\Program Files (x86)  (Directory)
C:\ProgramData  (Directory)
C:\Python27  (Directory)
C:\Python34  (Directory)
C:\Recovery  (Directory)
C:\report.rpt  (File)
C:\setup.log  (File)
C:\setupinfidb.db  (File)
C:\swapfile.sys  (File)
C:\System Volume Information  (Directory)
C:\TEMP  (Directory)
C:\Tencent  (Directory)
C:\Users  (Directory)
C:\Windows  (Directory)
C:\Windows10Upgrade  (Directory)
</code></pre> 
 <h2 id="h2-u6587u4EF6u8FC7u6EE4u5668"><a name="文件过滤器" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文件过滤器</h2>
 <p>要从列表中排除扩展名为<code>.SYS</code>的所有文件，可以使用由<code>FileFilter</code>接口的实例表示的文件过滤器来实现。<br>它包含一个<code>accept()</code>方法，它将<code>File</code>作为参数列出，如果有文件列出则返回<code>true</code>。 返回<code>false</code>不会列出文件。</p> 
 <p>以下代码创建一个文件过滤器，将过滤扩展名为<code>.SYS</code>的文件。</p> 
 <pre><code class="lang-java">FileFilter filter = file -&gt;  {
    if (file.isFile()) {
        String fileName   = file.getName().toLowerCase();
        if (fileName.endsWith(".sys"))  {
            return false;
        }
    }
    return true;
};
</code></pre> 
 <p>以下代码创建两个文件过滤器 - 一个仅过滤文件，另一个仅过滤目录：</p> 
 <pre><code class="lang-java">// Filters only  files
FileFilter fileOnlyFilter = File::isFile;

// Filters only  directories
FileFilter  dirOnlyFilter = File::isDirectory;
</code></pre> 
 <p>以下代码显示如何使用<code>FileFilter</code>过滤文件。</p> 
 <pre><code class="lang-java">import java.io.File;
import java.io.FileFilter;

public class Main {
    public static void main(String[] args) {
        String dirPath = "C:\\";
        File dir = new File(dirPath);
        // Create a file filter to exclude any .SYS file
        FileFilter filter = file -&gt; {
            if (file.isFile()) {
                String fileName = file.getName().toLowerCase();
                if (fileName.endsWith(".sys")) {
                    return false;
                }
            }
            return true;
        };
        File[] list = dir.listFiles(filter);
        for (File f : list) {
            if (f.isFile()) {
                System.out.println(f.getPath() + "  (File)");
            } else if (f.isDirectory()) {
                System.out.println(f.getPath() + "  (Directory)");
            }
        }
    }
}
</code></pre> 
 <p>上面的代码生成以下结果。</p> 
 <pre><code class="lang-java">C:\$GetCurrent  (Directory)
C:\$RECYCLE.BIN  (Directory)
C:\.rnd  (File)
C:\AVScanner.ini  (File)
C:\Boot  (Directory)
C:\bootmgr  (File)
C:\BOOTNXT  (File)
C:\BOOTSECT.BAK  (File)
C:\Documents and Settings  (Directory)
C:\drivers  (Directory)
C:\file-for-download.txt  (File)
C:\grldr  (File)
C:\grldr.bak  (File)
C:\HaxLogs.txt  (File)
C:\inetpub  (Directory)
C:\Intel  (Directory)
C:\LibAntiPrtSc_ERROR.log  (File)
C:\LibAntiPrtSc_INFORMATION.log  (File)
C:\mydata  (Directory)
C:\OKDOS  (Directory)
C:\okldr  (File)
C:\okldr.mbr  (File)
C:\oraclebackup  (Directory)
C:\PerfLogs  (Directory)
C:\Program Files  (Directory)
C:\Program Files (x86)  (Directory)
C:\ProgramData  (Directory)
C:\Python27  (Directory)
C:\Python3  (Directory)
C:\Python34  (Directory)
C:\Recovery  (Directory)
C:\report.rpt  (File)
C:\SecurityScanner.dll  (File)
C:\setup.log  (File)
C:\setupinfidb.db  (File)
C:\System Volume Information  (Directory)
C:\TEMP  (Directory)
C:\Tencent  (Directory)
C:\Users  (Directory)
C:\Windows  (Directory)
C:\Windows10Upgrade  (Directory)
</code></pre>
 <br>      
</div></body></html>