<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java9 CompletableFuture API</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>CompletableFuture</code>类是在Java 8中引入的，可以通过设置其值和状态显式来完成。 它可以用作<code>java.util.concurrent.CompletionStage</code>。 它支持未来完成时触发的相关函数和操作。 在Java 9中，CompletableFuture API进一步得到了增强。 以下是对API进行的相关更改。</p> 
 <ul> 
  <li>支持延迟和超时。</li>
  <li>改进了对子类的支持。</li>
  <li>添加了新的工厂方法。</li>
 </ul> 
 <p><strong>1. 支持延迟和超时</strong></p> 
 <pre><code class="lang-java">public CompletableFuture&lt;T&gt; completeOnTimeout(T value, long timeout, TimeUnit unit)
</code></pre> 
 <p>如果在给定超时之前未完成，则此方法使用给定值完成<code>CompletableFuture</code>。</p> 
 <pre><code class="lang-java">public CompletableFuture&lt;T&gt; orTimeout(long timeout, TimeUnit unit)
</code></pre> 
 <p>如果在给定的超时之前没有完成，则此方法异常地完成此<code>CompletableFuture</code>并带有<code>TimeoutException</code>异常。</p> 
 <p><strong>2. 改进了对子类的支持</strong></p> 
 <pre><code class="lang-java">public Executor defaultExecutor()
</code></pre> 
 <p>它将返回用于未指定<code>Executor</code>异步方法的默认<code>Executor</code>。 可以在子类中重写此方法以返回<code>Executor</code>以提供一个最小的独立线程。</p> 
 <pre><code class="lang-java">public &lt;U&gt; CompletableFuture&lt;U&gt; newIncompleteFuture()
</code></pre> 
 <p>返回由<code>CompletionStage</code>方法返回类型的新不完整<code>CompletableFuture</code>。 <code>CompletableFuture</code>类的子类应该重写此方法以返回与<code>CompletableFuture</code>相同的类的实例。 默认实现返回<code>CompletableFuture</code>类的一个实例。</p> 
 <p><strong>3. 新工厂方法</strong></p>   
 <pre><code class="lang-java">public static &lt;U&gt; CompletableFuture&lt;U&gt; completedFuture(U value)
</code></pre> 
 <p>这个工厂方法返回一个已经用给定值完成的新的<code>CompletableFuture</code>。</p> 
 <pre><code class="lang-java">public static &lt;U&gt; CompletionStage&lt;U&gt; completedStage(U value)
</code></pre> 
 <p>这个工厂方法返回一个新的<code>CompletionStage</code>，它已经用给定的值完成，并且只支持接口<code>CompletionStage</code>中存在的那些方法。</p> 
 <pre><code class="lang-java">public static &lt;U&gt; CompletionStage&lt;U&gt; failedStage(Throwable ex)
</code></pre> 
 <p>该工厂方法返回一个新的<code>CompletionStage</code>，该异常已经异常完成，并且仅支持<code>CompletionStage</code>接口中存在的那些方法。</p>
 <br>      
</div></body></html>