<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JUnit4参数化测试实例</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   在JUnit中，可以同时使用@RunWith 和 @parameter 注解来为单元测试传递参数。 
 </div> 
 <div> 
  <p> 注意： </p> 
 </div> 
 <p> 在Eclipse中因为版本问题，可能无法使用@parameters(name = "xxx")，详见解决办法(文章的最后部分： IDE Bug - Eclipse)： </p> 
 <p> &nbsp;<a target="_blank" href="https://github.com/junit-team/junit/wiki/Parameterized-tests">https://github.com/junit-team/junit/wiki/Parameterized-tests</a> </p> 
 <p> <img src="/uploads/tutorial/20151106/1-1511060H0225Y.png" alt=""> </p> 
 <p> <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/73b13002da204c5282ec5cb1a827325e/clipboard.png"> </p> 
 <h2> 1. MathUtils – 参数化测试 </h2> 
 <p> 查看一个简单的 add 方法。 </p> 
 <p> MathUtils.java </p> 
 <pre class="prettyprint lang-java">package com.yiibai.match.utils;

public class MathUtils {

	public static int add(int a, int b) {
		return a + b;
	}

}</pre> 
 <p> 这里有一个为上面的JUnit测试类，阅读不言自明的注释。 </p> 
 <p> MathUtilsTest.java </p> 
 <pre class="prettyprint lang-java">package com.yiibai.match.utils;

import static org.junit.Assert.assertEquals;
import java.util.Arrays;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(value = Parameterized.class)
public class MathUtilsTest {

	private int numberA;
	private int numberB;
	private int expected;

	//parameters pass via this constructor
	public MathUtilsTest(int numberA, int numberB, int expected) {
		this.numberA = numberA;
		this.numberB = numberB;
		this.expected = expected;
	}

	//Declares parameters here
	@Parameters(name = "{index}: add({0}+{1})={2}")
	public static Iterable&lt;Object[]&gt; data1() {
		return Arrays.asList(new Object[][] { 
			{ 1, 1, 2 }, 
			{ 2, 2, 4 }, 
			{ 8, 2, 10 }, 
			{ 4, 5, 9 } 
		});
	}

	@Test
	public void test_add() {	
		assertEquals(expected,MathUtils.add(numberA, numberB));
	}

}</pre> 
 <p> <br> </p> 
 <p> 什么是 {0}, {1} 和 {2}?<br> 如果参数是 “{ 3, 4, 7 }”, 那么 {0} = 3, {1} = 4, {2} = 7. 请参考以下的输出： </p> 
 <p> <img src="/uploads/tutorial/20151106/1-1511060H24bH.png" alt=""> </p> 
 <div style="text-align:center;"> 
  <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/fe2d5a3df6944ab0a6de06baeaaf4fa0/clipboard.png"> 
 </div> 
 <h2> 2. DomainUtils – 参数化测试 </h2> 
 <p> 查看域名验证程序。 </p> 
 <p> DomainUtils.java </p> 
 <pre class="prettyprint lang-java">package com.yiibai.regex.utils;

import java.util.regex.Pattern;

public class DomainUtils {

	private static Pattern pDomainName;

	private static final String DOMAIN_NAME_PATTERN = "^((?!-)[A-Za-z0-9-]{1,63}(?&lt;!-)\\.)+[A-Za-z]{2,6}$";

	static {
		pDomainName = Pattern.compile(DOMAIN_NAME_PATTERN);
	}

	//is this a valid domain name?
	public static boolean isValidDomainName(String domainName) {
		return pDomainName.matcher(domainName).find();
	}

}</pre> 
 <p> <br> </p> 
 <p> 这里有一个 JUnit 测试上面的类。 </p> 
 <p> DomainUtilsTest.java </p>   
 <pre class="prettyprint lang-java">package com.yiibai.regex.utils;

import static org.junit.Assert.assertEquals;
import java.util.Arrays;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.junit.runners.Parameterized;
import org.junit.runners.Parameterized.Parameters;

@RunWith(value = Parameterized.class)
public class DomainUtilsTest {

	private String domain;
	private boolean expected;

	public DomainUtilsTest(String domain, boolean expected) {
		this.domain = domain;
		this.expected = expected;
	}

	@Parameters(name= "{index}: isValid({0})={1}")
 	public static Iterable&lt;Object[]&gt; data() {
 		return Arrays.asList(new Object[][] { 
 		{ "google.com", true },
		{ "yiibai.com", true },
                { "-yiibai.com", false },
                { "yiibai-.com", false },
                { "3423kjk", false },
                { "mk#$kdo.com", false }
            }
 	);
     }

	@Test
	public void test_validDomains() {
		assertEquals(expected,DomainUtils.isValidDomainName(domain));
	}

}</pre> 
 <p> <br> </p> 
 <p> 输出结果： </p> 
 <p> <img src="/uploads/tutorial/20151106/1-1511060H443336.png" alt=""> </p> 
 <div style="text-align:center;"> 
  <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/f109332159f44d1f80f0b66f7d3af629/clipboard.png"> 
 </div> 
 <p> 完成 </p> 
 <div style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;background-color:#E6E6FC;"> 
  <strong>注</strong>
  <br> 不需要必须去遵循“JUnit”声明参数提供者的方式，并把它传递到通过构造单元测试。如果和TestNG比较，TestNG更加灵活，传递参数为单元测试的方式。 
 </div>
 <br>      
</div></body></html>