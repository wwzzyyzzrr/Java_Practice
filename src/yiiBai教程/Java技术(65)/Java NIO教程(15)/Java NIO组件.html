<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java NIO组件</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在Java中，NIO读写是I/O的基本过程。 <em>从通道读取</em>：创建一个缓冲区，然后请求通道读取数据。<em>通道写入</em>：创建一个缓冲区，填充数据，并要求通道写入数据。</p> 
 <p>读写操作中使用的核心部件有：</p> 
 <ul> 
  <li><em>Channels</em></li>
  <li><em>Buffers</em></li>
  <li><em>Selectors</em></li>
 </ul> 
 <p>Java NIO还有其它更多的组件和类，但是<code>Channel</code>，<code>Buffer</code>和<code>Selector</code>用作API的核心。</p> 
 <h2 id="h2-u901Au9053u548Cu7F13u51B2u533A"><a name="通道和缓冲区" class="reference-link"></a><span class="header-link octicon octicon-link"></span>通道和缓冲区</h2>
 <p>在标准I/O API中，使用字符流和字节流。 在NIO中使用通道和缓冲区。 NIO中的所有I/O都是通过一个通道开始的。数据总是从缓冲区写入通道，并从通道读取到缓冲区。</p> 
 <p><strong>数据读取操作：</strong></p> 
 <p>下面来看看将数据从通道读入缓冲区，如下图所示：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201709/2809/309170906_70762.png" alt=""></p> 
 <p><strong>数据写入操作：</strong></p> 
 <p>下面来看看从缓冲区将数据写入通道，如下图所示：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201709/2809/826170907_45719.png" alt=""></p> 
 <h2 id="h2-u901Au9053u5217u8868"><a name="通道列表" class="reference-link"></a><span class="header-link octicon octicon-link"></span>通道列表</h2>
 <p>在Java NIO中，主要使用的通道如下：</p> 
 <ul> 
  <li><em>DatagramChannel</em></li>
  <li><em>SocketChannel</em></li>
  <li><em>FileChannel</em></li>
  <li><em>ServerSocketChannel</em></li>
 </ul> 
 <p>上述通道涵盖UDP(用户数据报协议)+ TCP(传输控制协议)网络I/O和文件I/O。</p> 
 <h2 id="h2-u7F13u51B2u5217u8868"><a name="缓冲列表" class="reference-link"></a><span class="header-link octicon octicon-link"></span>缓冲列表</h2>  
 <p>在Java NIO中使用的核心缓冲区如下：</p> 
 <ul> 
  <li>CharBuffer</li>
  <li>DoubleBuffer</li>
  <li>IntBuffer</li>
  <li>LongBuffer</li>
  <li>ByteBuffer</li>
  <li>ShortBuffer</li>
  <li>FloatBuffer</li>
 </ul> 
 <p>上述缓冲区覆盖了通过I/O发送的基本数据类型：<code>characters</code>，<code>double</code>，<code>int</code>，<code>long</code>，<code>byte</code>，<code>short</code>和<code>float</code>。</p> 
 <h2 id="h2-u9009u62E9u5668"><a name="选择器" class="reference-link"></a><span class="header-link octicon octicon-link"></span>选择器</h2>
 <p>Java NIO提供了“选择器”的概念。这是一个可以用于监视多个通道的对象，如数据到达，连接打开等。因此，单线程可以监视多个通道中的数据。</p> 
 <p>如果应用程序有多个通道(连接)打开，但每个连接的流量都很低，则可考虑使用它。 例如：在聊天服务器中。</p> 
 <p>下面来看看线程使用选择器来处理<code>3</code>个通道，如下图所示：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201709/2809/842170920_76561.png" alt=""></p>
 <br>      
</div></body></html>