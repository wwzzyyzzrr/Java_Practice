<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Gson树模型</h1><div style="width:100%;float:left;" class="article-content">   
 <p>树模型准备JSON文档的内存树表示。 它构建了一个JsonObject节点树。 这是一种灵活的方法，类似于XML的DOM解析器。</p> 
 <h2 id="h2--json-"><a name="从JSON创建树" class="reference-link"></a><span class="header-link octicon octicon-link"></span>从JSON创建树</h2>
 <p>在读取JSON之后，<code>JsonParser</code>提供了一个指向树的根节点的指针。根节点可以用来遍历整个树。 考虑下面的代码片段来获取提供的JSON字符串的根节点。</p> 
 <pre><code class="lang-java">//Create an JsonParser instance 
JsonParser parser = new JsonParser(); 

String jsonString = 
"{\"name\":\"Maxsu\", \"age\":26,\"verified\":false,\"marks\": [100,90,85]}"; 

//create tree from JSON 
JsonElement rootNode = parser.parse(jsonString);
</code></pre> 
 <h2 id="h2-u904Du5386u6811u6A21u578B"><a name="遍历树模型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>遍历树模型</h2>
 <p>在遍历树并处理数据时，使用到根节点的相对路径获取每个节点。 以下代码片段显示了如何遍历树。</p> 
 <pre><code class="lang-java">JsonObject details = rootNode.getAsJsonObject(); 

JsonElement nameNode = details.get("name"); 
System.out.println("Name: " +nameNode.getAsString()); 

JsonElement ageNode = details.get("age"); 
System.out.println("Age: " + ageNode.getAsInt());
</code></pre> 
 <p><strong>示例</strong></p> 
 <p>创建一个名为<code>GsonTester</code>的Java类文件，如下代码实现:<em>GsonTester.java</em> - </p> 
 <pre><code class="lang-java">import com.google.gson.JsonArray; 
import com.google.gson.JsonElement; 
import com.google.gson.JsonObject; 
import com.google.gson.JsonParser;
import com.google.gson.JsonPrimitive;  

public class GsonTester { 
   public static void main(String args[]) { 
      String jsonString = 
         "{\"name\":\"Maxsu\", \"age\":26,\"verified\":false,\"marks\": [100,90,85]}";
      JsonParser parser = new JsonParser();  
      JsonElement rootNode = parser.parse(jsonString);  

      if (rootNode.isJsonObject()) { 
         JsonObject details = rootNode.getAsJsonObject();  
         JsonElement nameNode = details.get("name"); 
         System.out.println("Name: " +nameNode.getAsString());  

         JsonElement ageNode = details.get("age"); 
         System.out.println("Age: " + ageNode.getAsInt());  

         JsonElement verifiedNode = details.get("verified"); 
         System.out.println("Verified: " + (verifiedNode.getAsBoolean() ? "Yes":"No"));  
         JsonArray marks = details.getAsJsonArray("marks"); 

         for (int i = 0; i &lt; marks.size(); i++) { 
            JsonPrimitive value = marks.get(i).getAsJsonPrimitive(); 
            System.out.print(value.getAsInt() + " ");  
         } 
      } 
   }   
}
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p>   
 <pre><code class="lang-shell">Name: Maxsu
Age: 26
Verified: No 
100 90 85
</code></pre>
 <br>      
</div></body></html>