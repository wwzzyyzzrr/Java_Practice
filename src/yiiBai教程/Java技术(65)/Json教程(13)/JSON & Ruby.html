<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JSON &amp; Ruby</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 本教程将教你如何使用<a target="_blank" href="http://www.yiibai.com/html/ruby/">Ruby</a>编程语言进行编码和解码<a target="_blank" href="http://www.yiibai.com/html/json/">JSON</a>对象。让我们开始准备使用Ruby编程环境对 JSON 操作。</p> 
 <h2> 环境</h2> 
 <p> 在开始使用Ruby编码和解码JSON，将需要安装JSON模块用于Ruby。可能需要安装Ruby的gem，但如果运行的是最新版本的Ruby，那么必须要求gem已经安装在你的机器上，遵循以下单步骤假设已经安装有gem：</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
$gem install json&nbsp;</pre> 
 <h2> 使用Ruby解析JSON</h2> 
 <p> 下面的例子显示，第两个键持有字符串值和最后3个键保存字符串数组。让我们继续下面的内容一个名为 input.json 文档</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
{
  "President": "Alan Isaac",
  "CEO": "David Richardson",
  
  "India": [
    "Sachin Tendulkar",
    "Virender Sehwag",
    "Gautam Gambhir",
  ],

  "Srilanka": [
    "Lasith Malinga",
    "Angelo Mathews",
    "Kumar Sangakkara"
  ],

  "England": [
    "Alastair Cook",
    "Jonathan Trott",
    "Kevin Pietersen"
  ]
}
</pre> 
 <p> 以下是Ruby程序，用来解析上述的JSON文档：</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">#!/usr/bin/ruby</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'rubygems'</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'json'</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">require</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'pp'</span><span class="pln" style="margin: 0px; padding: 0px;">

json </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">File</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">read</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'input.json'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
obj </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="pln" style="margin: 0px; padding: 0px;"> JSON</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">parse</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="pln" style="margin: 0px; padding: 0px;">json</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">

pp obj</span></pre> 
 <p> 在执行过程中，这将产生以下结果：</p>   
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
{"President"=&gt;"Alan Isaac",
 "CEO"=&gt;"David Richardson",

 "India"=&gt;
  ["Sachin Tendulkar", "Virender Sehwag", "Gautam Gambhir"],

"Srilanka"=&gt;
  ["Lasith Malinga ", "Angelo Mathews", "Kumar Sangakkara"],

 "England"=&gt;
  ["Alastair Cook", "Jonathan Trott", "Kevin Pietersen"]
}</pre> 
 <br>      
</div></body></html>