<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">部署基于Maven的war文件到Tomcat</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   在本教程中，我们将学习如何使用Maven的Tomcat插件打包并部署一个WAR文件到Tomcat(Tomcat的6和7。 
 </div> 
 <p> 要用到工具： </p> 
 <ol> 
  <li> Maven 3 </li> 
  <li> Tomcat 6.0.37 </li> 
  <li> Tomcat 7.0.53 </li> 
 </ol> 
 <div style="background-color:#E6E6FC;color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> 
  <strong>Tomcat 7</strong>
  <br> 发布URL =&nbsp;
  <em>http://localhost:8080/manager/text</em>
  <br> 命令 =&nbsp;mvn tomcat7:deploy 
  <p style="background-color:inherit;"> <strong>Tomcat 6</strong><br> 发布 URL =&nbsp;<em>http://localhost:8080/manager/</em><br> 命令 =&nbsp;mvn tomcat6:deploy </p> 
 </div> 
 <h2> 1. Tomcat 7 示例 </h2> 
 <p> 这个例子说明了如何在Tomcat7打包并部署WAR文件。 </p> 
 <p> 1.1 Tomcat 认证<br> 添加具有角色管理器GUI和管理脚本的用户。 </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> %TOMCAT7_PATH%/conf/tomcat-users.xml </p> 
 <pre>&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;tomcat-users&gt;

	&lt;role rolename="manager-gui"/&gt;
	&lt;role rolename="manager-script"/&gt;
	&lt;user username="admin" password="password" roles="manager-gui,manager-script" /&gt;

&lt;/tomcat-users&gt;<span style="font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;line-height:1.5;background-color:#E6E6FC;"></span></pre> 
 <p> <br> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>1.2 Maven 认证</strong><br> 添加在上面Maven 设置文件的&nbsp;Tomcat 用户，是之后Maven使用此用户来登录Tomcat服务器。 </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> %MAVEN_PATH%/conf/settings.xml </p> 
 <pre class="prettyprint lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;settings ...&gt;
	&lt;servers&gt;
	   
		&lt;server&gt;
			&lt;id&gt;TomcatServer&lt;/id&gt;
			&lt;username&gt;admin&lt;/username&gt;
			&lt;password&gt;password&lt;/password&gt;
		&lt;/server&gt;

	&lt;/servers&gt;
&lt;/settings&gt;</pre> 
 <p> <br> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>1.3 Tomcat7 Maven 插件</strong><br> 声明一个Maven的Tomcat插件。 </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> pom.xml </p> 
 <pre class="prettyprint lang-xml">	&lt;plugin&gt;
		&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
		&lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;
		&lt;version&gt;2.2&lt;/version&gt;
		&lt;configuration&gt;
			&lt;url&gt;http://localhost:8080/manager/text&lt;/url&gt;
			&lt;server&gt;TomcatServer&lt;/server&gt;
			&lt;path&gt;/yiibaiWebApp&lt;/path&gt;
		&lt;/configuration&gt;
	&lt;/plugin&gt;</pre> 
 <p> <br> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>怎么运行的？</strong><br> 在部署过程中，它告诉 Maven 通过部署 WAR 文件Tomcat服务器， “http://localhost:8080/manager/text” , 在路径“/yiibaiWebApp“上, 使用 “TomcatServer” (settings.xml) 用户名和密码来进行认证。 </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>1.4 发布到Tomcat</strong><br> 以下的命令是用来操纵Tomcat WAR文件。 </p> 
 <pre>mvn tomcat7<span style="background-color:inherit;color:#999999;">:</span>deploy 
mvn tomcat7<span style="background-color:inherit;color:#999999;">:</span>undeploy 
mvn tomcat7<span style="background-color:inherit;color:#999999;">:</span>redeploy</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>示例</strong> </p> 
 <pre class="prettyprint lang-bsh">&gt; mvn tomcat7:deploy

...
[INFO] Deploying war to http://localhost:8080/yiibaiWebApp
Uploading: http://localhost:8080/manager/text/deploy?path=%2FyiibaiWebApp&amp;update=true
Uploaded: http://localhost:8080/manager/text/deploy?path=%2FyiibaiWebApp&amp;update=true (13925 KB at 35250.9 KB/sec)

[INFO] tomcatManager status code:200, ReasonPhrase:OK
[INFO] OK - Deployed application at context path /yiibaiWebApp
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 8.507 s
[INFO] Finished at: 2015-08-05T11:35:25+08:00
[INFO] Final Memory: 28M/308M
[INFO] ------------------------------------------------------------------------</pre> 
 <div style="background-color:#F9F9F9;color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;text-align:center;"> 
  <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/b792c337fead49a380256495959dbb25/ploy-tomcat7.png" alt="maven-war-file-deploy-tomcat7" width="714" height="503" style="height:auto;"> 
 </div> 
 <h2> 2. Tomcat 6 示例 </h2> 
 <p> 这个例子说明了如何在Tomcat6打包和部署WAR文件。这些步骤和Tomcat7是一样的，只是部署URL和命令名称不同。 </p> 
 <p> 2.1 Tomcat 认证 </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> %TOMCAT6_PATH%/conf/tomcat-users.xml </p> 
 <pre class="prettyprint lang-bsh">&lt;?xml version='1.0' encoding='utf-8'?&gt;
&lt;tomcat-users&gt;

	&lt;role rolename="manager-gui"/&gt;
	&lt;role rolename="manager-script"/&gt;
	&lt;user username="admin" password="password" roles="manager-gui,manager-script" /&gt;

&lt;/tomcat-users&gt;</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>2.2 Maven 认证</strong> </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> %MAVEN_PATH%/conf/settings.xml </p>   
 <pre class="prettyprint lang-bsh">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;settings ...&gt;
	&lt;servers&gt;
	   
		&lt;server&gt;
			&lt;id&gt;TomcatServer&lt;/id&gt;
			&lt;username&gt;admin&lt;/username&gt;
			&lt;password&gt;password&lt;/password&gt;
		&lt;/server&gt;

	&lt;/servers&gt;
&lt;/settings&gt;</pre> 
 <p> <br> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>2.3 Tomcat6 Maven 插件</strong> </p> 
 <p style="background-color:#E6E6FC;color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;font-size:16px;"> pom.xml </p> 
 <pre class="prettyprint lang-xml">&lt;plugin&gt;
		&lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
		&lt;artifactId&gt;tomcat6-maven-plugin&lt;/artifactId&gt;
		&lt;version&gt;2.2&lt;/version&gt;
		&lt;configuration&gt;
			&lt;url&gt;http://localhost:8080/manager&lt;/url&gt;
			&lt;server&gt;TomcatServer&lt;/server&gt;
			&lt;path&gt;/yiibaiWebApp&lt;/path&gt;
		&lt;/configuration&gt;
	&lt;/plugin&gt;	</pre> 
 <p> <br> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>2.4 发布到Tomcat</strong> </p> 
 <pre>mvn tomcat6<span style="background-color:inherit;color:#999999;">:</span>deploy 
mvn tomcat6<span style="background-color:inherit;color:#999999;">:</span>undeploy 
mvn tomcat6<span style="background-color:inherit;color:#999999;">:</span>redeploy</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>示例</strong> </p> 
 <pre class="prettyprint lang-bsh">&gt; mvn tomcat6:deploy

...
[INFO] Deploying war to http://localhost:8080/yiibaiWebApp
Uploading: http://localhost:8080/manager/deploy?path=%2FyiibaiWebApp
Uploaded: http://localhost:8080/manager/deploy?path=%2FyiibaiWebApp (13925 KB at 32995.5 KB/sec)

[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 22.652 s
[INFO] Finished at: 2014-08-05T12:18:54+08:00
[INFO] Final Memory: 30M/308M
[INFO] ------------------------------------------------------------------------</pre> 
 <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;"> 参考 </h2> 
 <ol style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> 
  <li style="background-color:inherit;"> <a target="_blank" href="http://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html">Apache Tomcat 7 Manager App HOW-TO</a> </li> 
  <li style="background-color:inherit;"> <a target="_blank" href="http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html">Apache Tomcat 6 Manager App HOW-TO</a> </li> 
  <li style="background-color:inherit;"> <a target="_blank" href="http://tomcat.apache.org/maven-plugin.html">Tomcat Maven Plugin</a> </li> 
  <li style="background-color:inherit;"> <a target="_blank" href="http://tomcat.apache.org/maven-plugin-trunk/context-goals.html">Tomcat Maven Plugin – Context Goals</a> </li> 
 </ol> 
 <p> <br> </p>
 <br>      
</div></body></html>