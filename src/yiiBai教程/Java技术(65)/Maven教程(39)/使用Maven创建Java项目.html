<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">使用Maven创建Java项目</h1><div style="width:100%;float:left;" class="article-content">   
 <p> <span style="line-height:1.5;">在本教程中，我们将向你展示如何使用 Maven 来创建一个 Java 项目，导入其到Eclipse IDE，并打包 Java 项目到一个 JAR 文件。</span> </p> 
 <p> 所需要的工具： </p> 
 <ol> 
  <li> Maven 3.3.3 </li> 
  <li> Eclipse 4.2 </li> 
  <li> JDK 8 </li> 
 </ol> 
 <div>
   注意：请确保 Maven 是正确安装和配置（在Windows，*nix，Mac OSX系统中），然后再开始本教程，避免 mvn 命令未找到错误。 
 </div> 
 <h2> 1. 从 Maven 模板创建一个项目 </h2> 
 <p> 在终端（* UNIX或Mac）或命令提示符（Windows）中，浏览到要创建 Java 项目的文件夹。键入以下命令： </p> 
 <pre>mvn archetype<span style="background-color:inherit;color:#999999;">:</span>generate <span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>DgroupId<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">=</span><span style="background-color:inherit;color:#999999;">{</span>project<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>packaging<span style="background-color:inherit;color:#999999;">} </span><span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>DartifactId<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">=</span><span style="background-color:inherit;color:#999999;">{</span>project<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>name<span style="background-color:inherit;color:#999999;">}</span><span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>DarchetypeArtifactId<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">=</span>maven<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>archetype<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>quickstart <span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">-</span>DinteractiveMode<span style="background-color:rgba(255, 255, 255, 0.498039);color:#A67F59;">=</span><span style="background-color:inherit;color:#990055;">false</span></pre> 
 <p> 这告诉 Maven 来从&nbsp;maven-archetype-quickstart 模板创建&nbsp;Java 项目。如果忽视&nbsp;archetypeArtifactId&nbsp;选项，一个巨大的 Maven 模板列表将列出。 </p> 
 <p> 例如，这里的工作目录是：C:\worksp，执行命令过程时间可能比较久，看个人的网络状况。 </p> 
 <pre class="prettyprint">C:\worksp&gt;mvn archetype:generate -DgroupId=com.yiibai -DartifactId=NumberGenerat
or -DarchetypeArtifactId=maven -archetype-quickstart -DinteractiveMode=false
[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
[INFO]
[INFO] &gt;&gt;&gt; maven-archetype-plugin:2.4:generate (default-cli) &gt; generate-sources
@ standalone-pom &gt;&gt;&gt;
[INFO]
[INFO] &lt;&lt;&lt; maven-archetype-plugin:2.4:generate (default-cli) &lt; generate-sources
@ standalone-pom &lt;&lt;&lt;
[INFO]
[INFO] --- maven-archetype-plugin:2.4:generate (default-cli) @ standalone-pom --
-
[INFO] Generating project in Batch mode
[INFO] -------------------------------------------------------------------------
---
[INFO] Using following parameters for creating project from Old (1.x) Archetype:
 maven-archetype-quickstart:1.0
[INFO] -------------------------------------------------------------------------
---
[INFO] Parameter: basedir, Value: C:\worksp
[INFO] Parameter: package, Value: com.yiibai
[INFO] Parameter: groupId, Value: com.yiibai
[INFO] Parameter: artifactId, Value: NumberGenerator
[INFO] Parameter: packageName, Value: com.yiibai
[INFO] Parameter: version, Value: 1.0-SNAPSHOT
[INFO] project created from Old (1.x) Archetype in dir: C:\worksp\NumberGenerato
r
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 23.166 s
[INFO] Finished at: 2015-10-27T11:03:48+08:00
[INFO] Final Memory: 17M/114M
[INFO] ------------------------------------------------------------------------</pre> 
 <p> 在上述情况下，一个新的Java项目命名 “NumberGenerator”, 而整个项目的目录结构会自动创建。 </p> 
 <div style="color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#E6E6FC;"> 
  <strong>注意</strong>
  <br> 有少数用户说&nbsp;mvn archetype:generate&nbsp;命令未能生成项目结构。 如果您有任何类似的问题，不用担心，只需跳过此步骤，手动创建文件夹，请参阅步骤2的项目结构。 
 </div> 
 <h2> 2.Maven目录布局 </h2> 
 <p> 使用&nbsp;mvn archetype:generate&nbsp;+&nbsp;maven-archetype-quickstart&nbsp;模板, 以下项目的目录结构被创建。 </p> 
 <pre class="prettyprint">NumberGenerator
   |-src
   |---main
   |-----java
   |-------com
   |---------yiibai   
   |-----------App.java
   |---test|-----java
   |-------com
   |---------yiibai
   |-----------AppTest.java
   |-pom.xml</pre> 
 <p> 很简单的，所有的源代码放在文件夹&nbsp;/src/main/java/, 所有的单元测试代码放入&nbsp;/src/test/java/. </p> 
 <div style="color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#E6E6FC;"> 
  <strong>注意，请阅读</strong>&nbsp;
  <a target="_blank" href="http://maven.apache.org/guides/introduction/introduction-to-the-standard-directory-layout.html">Maven标准目录布局</a> 
 </div> 
 <p> 附加的一个标准的 pom.xml 被生成。这个POM文件类似于 Ant build.xml 文件，它描述了整个项目的信息，一切从目录结构，项目的插件，项目依赖，如何构建这个项目等，请阅读<a target="_blank" href="http://maven.apache.org/guides/introduction/introduction-to-the-pom.html">POM官方指南</a>&nbsp; </p> 
 <div style="color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;background-color:#E6E6FC;">
   pom.xml 
 </div> 
 <h2> 3. Eclipse IDE </h2> 
 <p> 为了使它成为一个 Eclipse 项目，在终端进入到 “NumberGenerator” 项目，键入以下命令： </p> 
 <pre class="prettyprint">C:\worksp\NumberGenerator&gt;mvn eclipse:eclipse
.... ...
[INFO] Using Eclipse Workspace: null
[INFO] Adding default classpath container: org.eclipse.jdt.launching.JRE_CONTAIN
ER
[INFO] Not writing settings - defaults suffice
[INFO] Wrote Eclipse project for "NumberGenerator" to C:\worksp\NumberGenerator.
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 04:47 min
[INFO] Finished at: 2015-10-27T15:24:48+08:00
[INFO] Final Memory: 15M/164M
[INFO] ------------------------------------------------------------------------</pre> 
 <p> 执行以上命令后，它自动下载更新相关资源和配置信息（需要等待一段时间），并产生 Eclipse IDE所要求的所有项目文件。要导入项目到Eclipse IDE中，选择 “File -&gt; Import… -&gt; General-&gt;Existing Projects into Workspace” </p> 
 <p> 图片: 项目导入到 Eclipse IDE中。 </p> 
 <p> <img src="/uploads/tutorial/20151027/1-15102H01521Z2.png" alt=""> </p> 
 <p> <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/2de7f4fb7a3c4ff2b453408058490e83/clipboard.png"> </p> 
 <h2> 4. 更新POM </h2> 
 <p> 默认的 pom.xml 太简单了，很多时候，你需要添加编译器插件来告诉 Maven 使用哪个 JDK 版本是用来编译项目。（默认JDK1.4，这的确太旧了点） </p> 
 <pre class="prettyprint">      &lt;plugin&gt;
		&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
		&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
		&lt;version&gt;2.3.2&lt;/version&gt;
		&lt;configuration&gt;
			&lt;source&gt;1.6&lt;/source&gt;
			&lt;target&gt;1.6&lt;/target&gt;
		&lt;/configuration&gt;
	&lt;/plugin&gt;</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#FFFFFF;"> 从更新JUnit&nbsp;3.8.1到最新的 4.11。 </p> 
 <pre class="prettyprint">&lt;dependency&gt;
	&lt;groupId&gt;junit&lt;/groupId&gt;
	&lt;artifactId&gt;junit&lt;/artifactId&gt;
	&lt;version&gt;4.11&lt;/version&gt;
	&lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</pre> 
 <div style="color:#333333;font-family:'Helvetica Neue', Helvetica, Arial, sans-serif;background-color:#E6E6FC;"> 
  <strong>Maven 坐标</strong>
  <br> 
  <div style="background-color:inherit;"> 
   <span style="line-height:1.5;">上面的XML代码片段被称为“Maven坐标”，如果你需要 JUnit 的 jar，你需要找出其相应的 Maven 坐标。它适用于所有其他的依赖，如Spring，Hibernate，Apache&nbsp;</span>
   <span style="line-height:1.5;">普通的</span>
   <span style="line-height:1.5;">等，只要到<a target="_blank" href="http://search.maven.org/">Maven中心储存库</a>，并找出哪些是依赖正确的 Maven 坐标。</span> 
  </div> 
 </div> 
 <div style="color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;background-color:#E6E6FC;">
   pom.xml – 更新版本 
 </div> 
 <pre>&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
	http://maven.apache.org/maven-v4_0_0.xsd"&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;com.mkyong&lt;/groupId&gt;
	&lt;artifactId&gt;NumberGenerator&lt;/artifactId&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
	&lt;name&gt;NumberGenerator&lt;/name&gt;
	&lt;url&gt;http://maven.apache.org&lt;/url&gt;
	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;junit&lt;/groupId&gt;
			&lt;artifactId&gt;junit&lt;/artifactId&gt;
			&lt;version&gt;4.11&lt;/version&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

	&lt;build&gt;
	  &lt;plugins&gt;
		&lt;plugin&gt;
			&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
			&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
			&lt;version&gt;2.3.2&lt;/version&gt;
			&lt;configuration&gt;
				&lt;source&gt;1.6&lt;/source&gt;
				&lt;target&gt;1.6&lt;/target&gt;
			&lt;/configuration&gt;
		&lt;/plugin&gt;
	  &lt;/plugins&gt;
	&lt;/build&gt;

&lt;/project&gt;</pre> 
 <p> 在终端，再次发出同样的命令&nbsp;mvn eclipse:eclipse&nbsp;,Maven将从Maven中心储存库下载插件项目依赖关系（JUnit），它会自动保存到你的本地仓库。 </p> 
 <h2> 5. 更新业务逻辑 </h2> 
 <p> 测试驱动开发（TDD），先更新单元测试，以确保应用程序（APP）对象有一个方法来生成包含恰好36位字母表的唯一密钥。 </p> 
 <div style="color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;background-color:#E6E6FC;">
   AppTest.java 
 </div>   
 <pre>package com.yiibai;

import org.junit.Assert;
import org.junit.Test;

public class AppTest {

	@Test
	public void testLengthOfTheUniqueKey() {

		App obj = new App();
		Assert.assertEquals(36, obj.generateUniqueKey().length());

	}
}</pre> 
 <p> 完成业务逻辑。 </p> 
 <div style="color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;background-color:#E6E6FC;">
   App.java 
 </div> 
 <pre>package com.yiibai;

import java.util.UUID;

/**
 * Generate a unique number
 *
 */
public class App 
{

    public static void main( String[] args )
    {
        App obj = new App();
        System.out.println("Unique ID : " + obj.generateUniqueKey());
    }
    
    public String generateUniqueKey(){
    	
    	String id = UUID.randomUUID().toString();
    	return id;
    	
    }
}</pre> 
 <h2> 6. Maven 打包 </h2> 
 <p> 现在，我们将使用Maven这个项目，并输出编译成一个 “jar” 的文件。 请参考 pom.xml 文件，包元素定义应该包应该输出什么。 </p> 
 <div style="color:#333333;font-family:Consolas, Monaco, 'Andale Mono', monospace;background-color:#E6E6FC;">
   pom.xml 
 </div> 
 <pre>&lt;project ...&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;com.yiibai&lt;/groupId&gt;
	&lt;artifactId&gt;NumberGenerator&lt;/artifactId&gt;	
	&lt;packaging&gt;jar&lt;/packaging&gt;	
	&lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</pre> 
 <p> 在终端输入&nbsp;mvn package&nbsp;: </p> 
 <pre>C:\worksp\NumberGenerator&gt; mvn package
... ...
ha-2/classworlds-1.1-alpha-2.jar&nbsp;(37&nbsp;KB&nbsp;at&nbsp;20.2&nbsp;KB/sec)
Downloaded:&nbsp;<a target="_blank" href="https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2">https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-io/2</a> .0.2/plexus-io-2.0.2.jar&nbsp;(57&nbsp;KB&nbsp;at&nbsp;28.1&nbsp;KB/sec)
Downloaded:&nbsp;<a target="_blank" href="https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-inte">https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-inte</a> rpolation/1.15/plexus-interpolation-1.15.jar&nbsp;(60&nbsp;KB&nbsp;at&nbsp;21.4&nbsp;KB/sec)
Downloaded:&nbsp;<a target="_blank" href="https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-arch">https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-arch</a> iver/2.1/plexus-archiver-2.1.jar&nbsp;(181&nbsp;KB&nbsp;at&nbsp;61.5&nbsp;KB/sec)
Downloaded:&nbsp;<a target="_blank" href="https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-util">https://repo.maven.apache.org/maven2/org/codehaus/plexus/plexus-util</a> s/3.0/plexus-utils-3.0.jar&nbsp;(221&nbsp;KB&nbsp;at&nbsp;60.3&nbsp;KB/sec)
[INFO]&nbsp;Building&nbsp;jar:&nbsp;C:\worksp\NumberGenerator\target\NumberGenerator-1.0-SNAPSH
OT.jar
[INFO]&nbsp;------------------------------------------------------------------------
[INFO]&nbsp;BUILD&nbsp;SUCCESS
[INFO]&nbsp;------------------------------------------------------------------------
[INFO]&nbsp;Total&nbsp;time:&nbsp;01:00&nbsp;min
[INFO]&nbsp;Finished&nbsp;at:&nbsp;2015-10-27T20:00:17+08:00
[INFO]&nbsp;Final&nbsp;Memory:&nbsp;10M/54M
[INFO]&nbsp;------------------------------------------------------------------------</pre> 
 <p> 它编译，运行单元测试并打包项目成一个 jar 文件，并把它放在 project/target 文件夹。如果出错：<strong>ERROR: Unable to locate the Javac Compiler in:,&nbsp; C:\Program Files (x86)\Java\jre6\..\lib\tools.jar,Please ensure you are using JDK 1.4 or above and,not a JRE (the com.sun.tools.javac.Main class is required)...</strong> </p> 
 <p> 参考：<a target="_blank" href="http://my.oschina.net/u/1449336/blog/199802">http://my.oschina.net/u/1449336/blog/199802</a> </p> 
 <p> &nbsp;最终项目的目录结构,&nbsp;如下图片 : </p> 
 <p> <img src="/uploads/tutorial/20151027/1-15102H01550423.png" alt=""> </p> 
 <div style="text-align:center;"> 
  <img src="file://D:/Program%20Files/qq24B39E2329F08D9F4C3146A571A415EF/ab5ea256eb93491fa4803d8e501e62b3/clipboard.png"> 
 </div> 
 <h2> 7. 示例 </h2> 
 <p> 从项目的 jar 文件运行应用程序示例 </p> 
 <pre class="prettyprint">C:\worksp\NumberGenerator&gt;java -cp target/NumberGenerator-1.0-SNAPSHOT.jar com.y
iibai.App
Unique ID : 94e5fd1a-c038-415f-a8ed-7fc58c397369
C:\worksp\NumberGenerator&gt;
C:\worksp\NumberGenerator&gt;java -cp target/NumberGenerator-1.0-SNAPSHOT.jar com.y
iibai.App
Unique ID : 48df568a-4b4b-4964-b767-664e206ca4b5
C:\worksp\NumberGenerator&gt;java -cp target/NumberGenerator-1.0-SNAPSHOT.jar com.y
iibai.App
Unique ID : 4ac9156c-2e4a-45f4-8644-0707ae28d5a6</pre> 
 <h2> 下载代码 </h2> 
 <div>
   下载代码 -&nbsp;
  <a target="_blank" href="http://pan.baidu.com/s/1hqwbe5I">Maven-NumberGenerator.zip&nbsp;</a> 
 </div> 
 <p> <br> </p>
 <br>      
</div></body></html>