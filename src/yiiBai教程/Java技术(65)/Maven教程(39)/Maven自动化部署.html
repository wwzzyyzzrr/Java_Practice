<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Maven自动化部署</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 在项目开发中，通常是部署过程包含以下步骤</p> 
 <ul> 
  <li> <p> 检入代码在建项目全部进入SVN或源代码库中，并标记它。</p> </li> 
  <li> <p> 从SVN下载完整的源代码。</p> </li> 
  <li> <p> 构建应用程序。</p> </li> 
  <li> <p> 生成输出要么WAR或EAR文件存储到一个共同的网络位置。</p> </li> 
  <li> <p> 从网络获取的文件和文件部署到生产现场。</p> </li> 
  <li> <p> 更新日期和应用程序的更新版本号的文件。</p> </li> 
 </ul> 
 <h2> 问题说明</h2> 
 <p> 通常有多人参与了上述部署过程。一个团队可能手动签入的代码，其他人可以处理构建等。这很可能是任何一个步骤可能会错过了，由于涉及和由于多团队环境手动工作。例如，较旧的版本可能不会被更换网络设备和部署团队再部署旧版本。</p> 
 <h2> 解决</h2> 通过结合自动化的部署过程
 <br> 
 <ul> 
  <li> <p> Maven构建和释放项目，</p> </li> 
  <li> <p> SubVersion源代码库，管理源代码，</p> </li> 
  <li> <p> 和远程存储库管理器（Jfrog/ Nexus）来管理项目的二进制文件。</p> </li> 
 </ul> 
 <h2> 更新项目的pom.xml</h2> 
 <p> 我们将使用Maven发布插件来创建一个自动释放过程。</p> 
 <p> 例如：bus-core-api 项目POM.xml</p> 
 <pre class="prettyprint prettyprinted" style="font-size: 12px;">
<span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;project</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="atn" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">xmlns</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="atv" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"http://maven.apache.org/POM/4.0.0"</span><span class="pln" style="margin: 0px; padding: 0px;"> 
   </span><span class="atn" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">xmlns:xsi</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="atv" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"http://www.w3.org/2001/XMLSchema-instance"</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="atn" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">xsi:schemaLocation</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span><span class="atv" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/xsd/maven-4.0.0.xsd"</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;modelVersion&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">4.0.0</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/modelVersion&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;groupId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">bus-core-api</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/groupId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;artifactId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">bus-core-api</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/artifactId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;version&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">1.0-SNAPSHOT</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/version&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;packaging&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">jar</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/packaging&gt;</span><span class="pln" style="margin: 0px; padding: 0px;"> 
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;scm&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;url&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">http://www.svn.com</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/url&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;connection&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">scm:svn:http://localhost:8080/svn/jrepo/trunk/
      Framework</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/connection&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;developerConnection&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">scm:svn:${username}/${password}@localhost:8080:
      common_core_api:1101:code</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/developerConnection&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/scm&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;distributionManagement&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;repository&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
         </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;id&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">Core-API-Java-Release</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/id&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
         </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;name&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">Release repository</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/name&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
         </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;url&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">http://localhost:8081/nexus/content/repositories/
         Core-Api-Release</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/url&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/repository&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/distributionManagement&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;build&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;plugins&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
         </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;plugin&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
            </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;groupId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">org.apache.maven.plugins</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/groupId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
            </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;artifactId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">maven-release-plugin</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/artifactId&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
            </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;version&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">2.0-beta-9</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/version&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
            </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;configuration&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
               </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;useReleaseProfile&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">false</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/useReleaseProfile&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
               </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;goals&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">deploy</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/goals&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
               </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;scmCommentPrefix&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">[bus-core-api-release-checkin]-&lt;
               /scmCommentPrefix&gt;
            </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/configuration&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
         </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/plugin&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/plugins&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
   </span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/build&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="tag" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">&lt;/project&gt;</span></pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 在pom.xml中，下面是我们使用的重要元素</p> 
 <table class="src" style="margin: 8px 0px; padding: 0px;  border-color: rgb(214, 214, 214); width: 560px; border-collapse: collapse; vertical-align: top; background-color: rgb(247, 247, 247); color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
  <tbody style="margin: 0px; padding: 0px;"> 
   <tr style="margin: 0px; padding: 0px;"> 
    <th style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); background-color: rgb(238, 238, 238); width: 101px;"> 元素</th> 
    <th style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214); background-color: rgb(238, 238, 238);"> 描述</th> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> SCM</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Configures the SVN location from where Maven will check out the source code.</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Repositories</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Location where built WAR/EAR/JAR or any other artifact will be stored after code build is successful.</td> 
   </tr> 
   <tr style="margin: 0px; padding: 0px;"> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> Plugin</td> 
    <td style="margin: 0px; padding: 5px; border-collapse: collapse;  border-color: rgb(214, 214, 214);"> maven-release-plugin is configured to automate the deployment process.</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2> Maven发布插件</h2> 
 <p> Maven使用确实下列有用的任务<i style="margin: 0px; padding: 0px;">maven-release-plugin</i>.</p>   
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
mvn release:clean
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 它清除以防工作区的最后一个释放的过程并不顺利。</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
mvn release:rollback
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 回滚是为了以防工作空间代码和配置更改的最后一个释放的过程并不顺利。</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
mvn release:prepare
</pre> 
 <p> 执行多个操作次数</p> 
 <ul> 
  <li> <p> 检查是否有任何未提交的本地更改或不</p> </li> 
  <li> <p> 确保没有快照依赖</p> </li> 
  <li> <p> 更改应用程序的版本并删除快照从版本，以释放</p> </li> 
  <li> <p> 更新文件到 SVN.</p> </li> 
  <li> <p> 运行测试用例</p> </li> 
  <li> <p> 提交修改后POM文件</p> </li> 
  <li> <p> 标签代码在subversion中</p> </li> 
  <li> <p> 增加版本号和附加快照以备将来发行</p> </li> 
  <li> <p> 提交修改后的POM文件到SVN。</p> </li> 
 </ul> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
mvn release:perform
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 检查出使用前面定义的标签代码并运行Maven的部署目标来部署战争或内置工件档案库。</p> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 让我们打开命令控制台，到&nbsp;<b style="margin: 0px; padding: 0px;">C: &gt; MVN &gt;bus-core-api&nbsp;</b><span style="color: rgb(34, 34, 34); font-family: Arial, Verdana, sans-serif;">目录并执行以下命令mvn命令。</span></p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
C:MVNus-core-api&gt;mvn release:prepare
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> Maven将开始建设该项目。一旦构建成功运行以下命令mvn命令。</p> 
 <pre class="result" style="margin-bottom: 0px; background-color: rgb(241, 241, 241); font-size: 12px;">
C:MVNus-core-api&gt;mvn release:perform
</pre> 
 <p style="margin: 0.8em 0px 1em; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 一旦构建成功，您可以在资料库验证上传的JAR文件。</p> 
 <br>      
</div></body></html>