<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Maven快照</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 大型应用软件一般由多个模块组成，一般它是多个团队开发同一个应用程序的不同模块，这是比较常见的场景。例如，一个团队正在对应用程序的应用程序，用户界面项目(app-ui.jar:1.0)&nbsp;的前端进行开发，他们使用的是数据服务工程 (data-service.jar:1.0)。 </p> 
 <p> 现在，它可能会有这样的情况发生，工作在数据服务<span>团队开发人员<span>快速地</span>开发</span>&nbsp;bug 修复或增强功能，他们<span>几乎每隔一天就要</span>释放出库到远程仓库。 </p> 
 <p> 现在，如果数据服务团队上传新版本后，会出现下面的问题： </p> 
 <ul> 
  <li> <p> 数据服务团队应该发布更新时每次都告诉应用程序UI团队，他们已经发布更新了代码。 </p> </li> 
  <li> <p> UI团队需要经常更新自己 pom.xml 以获得更新应用程序的<span>版本</span>。 </p> </li> 
 </ul> 
 <p> 为了处理这类情况，引入快照的概念，并发挥作用。 </p> 
 <h2> 什么是快照？ </h2> 
 <p> 快照（<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">SNAPSHOT&nbsp;</span>）是一个特殊版本，指出目前开发拷贝。不同于常规版本，Maven <span>每生成一个远程存储库都</span>会检查新的快照版本。 </p> 
 <p> 现在，数据服务团队将在每次<span>发布代码</span><span>后<span>更新</span></span>快照存储库为：<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">data-service:1.0-SNAPSHOT&nbsp;</span>替换旧的 SNAPSHOT jar。 </p> 
 <h2> 快照与版本 </h2> 
 <p> 在使用版本时，如果 Maven 下载所提到的版本为 data-service:1.0，那么它永远不会尝试<span>在库中</span>下载已经更新的版本1.0。要下载更新的代码，<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">data-service</span>的版本必须要升级到1.1。 </p> 
 <p> 在使用快照（<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">SNAPSHOT</span>）时，Maven会在每次应用程序UI团队建立自己的项目时<span>自动获取最新的快照（data-service:1.0-SNAPSHOT）</span>。 </p> 
 <h2> app-ui pom.xml </h2> 
 <p> app-ui 项目使用数据服务（<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">data-service</span>）的&nbsp;<span>&nbsp;</span><span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">1.0-SNAPSHOT&nbsp;<br> </span></p>
 <pre class="prettyprint lang-xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
   &lt;groupId&gt;app-ui&lt;/groupId&gt;
   &lt;artifactId&gt;app-ui&lt;/artifactId&gt;
   &lt;version&gt;1.0&lt;/version&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;name&gt;health&lt;/name&gt;
   &lt;url&gt;http://maven.apache.org&lt;/url&gt;
   &lt;properties&gt;
      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
   &lt;/properties&gt;
   &lt;dependencies&gt;
      &lt;dependency&gt;
      &lt;groupId&gt;data-service&lt;/groupId&gt;
         &lt;artifactId&gt;data-service&lt;/artifactId&gt;
         &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
         &lt;scope&gt;test&lt;/scope&gt;
      &lt;/dependency&gt;
   &lt;/dependencies&gt;
&lt;/project&gt;</pre>  
 <p></p> 
 <h2> data-service pom.xml </h2> 
 <p> 数据服务（data-service）项目对于每一个微小的变化释放 1.0 快照：<br> </p>
 <pre class="prettyprint lang-xml">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
   http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
   &lt;groupId&gt;data-service&lt;/groupId&gt;
   &lt;artifactId&gt;data-service&lt;/artifactId&gt;
   &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;
   &lt;name&gt;health&lt;/name&gt;
   &lt;url&gt;http://maven.apache.org&lt;/url&gt;
   &lt;properties&gt;
      &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
   &lt;/properties&gt;
   &lt;/project&gt;</pre> 
 <p></p> 
 <p style="text-align:justify;"> 虽然，在使用快照（<span style="font-family:Verdana, Geneva, Tahoma, Arial, Helvetica, sans-serif;font-size:15px;background-color:#FFFFFF;">SNAPSHOT</span>）时，Maven 自动获取最新的快照版本。不过我们也可以强制使用 -U 切换到任何 maven 命令来下载最新的快照版本。 </p>   
 <pre class="result">mvn clean package -U</pre> 
 <p style="text-align:justify;"> 打开命令控制台，进入到&nbsp;C: \MVN\app-ui&nbsp;&nbsp;目录，然后执行以下命令mvn命令。 </p> 
 <pre class="result">C:\MVN\app-ui&gt;mvn clean package -U</pre> 
 <p style="text-align:justify;"> Maven会下载数据服务的最新快照后并开始构建该项目，如下所输出： </p> 
 <pre class="result">[INFO] Scanning for projects...
[INFO] -------------------------------------------------------------------
[INFO] Building consumerBanking
[INFO]    task-segment: [clean, package]
[INFO] -------------------------------------------------------------------
[INFO] Downloading data-service:1.0-SNAPSHOT
[INFO] 290K downloaded.
[INFO] [clean:clean {execution: default-clean}]
[INFO] Deleting directory C:MVNapp-ui	arget
[INFO] [resources:resources {execution: default-resources}]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources,
i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:MVNapp-uisrcmain
resources
[INFO] [compiler:compile {execution: default-compile}]
[INFO] Compiling 1 source file to C:MVNapp-ui	argetclasses
[INFO] [resources:testResources {execution: default-testResources}]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources,
i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:MVNapp-uisrc	est
resources
[INFO] [compiler:testCompile {execution: default-testCompile}]
[INFO] Compiling 1 source file to C:MVNapp-ui	arget	est-classes
[INFO] [surefire:test {execution: default-test}]
[INFO] Surefire report directory: C:MVNapp-ui	arget
surefire-reports
-------------------------------------------------------
 T E S T S
-------------------------------------------------------
Running com.companyname.bank.AppTest
Tests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 0.027 sec

Results :

Tests run: 1, Failures: 0, Errors: 0, Skipped: 0

[INFO] [jar:jar {execution: default-jar}]
[INFO] Building jar: C:MVNapp-ui	arget
app-ui-1.0-SNAPSHOT.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 seconds
[INFO] Finished at: Tue Jul 10 16:52:18 IST 2015
[INFO] Final Memory: 16M/89M
[INFO] ------------------------------------------------------------------------</pre>
 <br>      
</div></body></html>