<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java并发线程间通信</h1><div style="width:100%;float:left;" class="article-content">   
 <p>如果你知道进程间通信，那么就很容易理解线程间通信。 当您开发两个或多个线程交换一些信息的应用程序时，线程间通信很重要。</p> 
 <p>有三个简单的方法和一个小技巧，使线程通信成为可能。 所有三种方法都列在下面 -</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public void wait()</code></td> 
    <td>使当前线程等到另一个线程调用<code>notify()</code>方法。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public void notify()</code></td> 
    <td>唤醒在此对象监视器上等待的单个线程。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>public void notifyAll()</code></td> 
    <td>唤醒所有在同一个对象上调用<code>wait()</code>的线程。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>这些方法已被实现为<code>Object</code>中的最终(<code>final</code>)方法，因此它们在所有类中都可用。 所有这三种方法只能从<strong>同步</strong>上下文中调用。</p> 
 <h2 id="h2-u5B9Eu4F8B"><a name="实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例</h2>
 <p>这个例子显示了两个线程如何使用<code>wait()</code>和<code>notify()</code>方法进行通信。 您可以使用相同的概念来创建一个复杂的系统。</p> 
 <pre><code class="lang-java">class Chat {
   boolean flag = false;

   public synchronized void Question(String msg) {
      if (flag) {
         try {
            wait();
         }catch (InterruptedException e) {
            e.printStackTrace();
         }
      }
      System.out.println(msg);
      flag = true;
      notify();
   }

   public synchronized void Answer(String msg) {
      if (!flag) {
         try {
            wait();
         }catch (InterruptedException e) {
            e.printStackTrace();
         }
      }

      System.out.println(msg);
      flag = false;
      notify();
   }
}

class T1 implements Runnable {
   Chat m;
   String[] s1 = { "Hi", "How are you ?", "I am also doing fine!" };

   public T1(Chat m1) {
      this.m = m1;
      new Thread(this, "Question").start();
   }

   public void run() {
      for (int i = 0; i &lt; s1.length; i++) {
         m.Question(s1[i]);
      }
   }
}

class T2 implements Runnable {
   Chat m;
   String[] s2 = { "Hi", "I am good, what about you?", "Great!" };

   public T2(Chat m2) {
      this.m = m2;
      new Thread(this, "Answer").start();
   }

   public void run() {
      for (int i = 0; i &lt; s2.length; i++) {
         m.Answer(s2[i]);
      }
   }
}
public class TestThread {
   public static void main(String[] args) {
      Chat m = new Chat();
      new T1(m);
      new T2(m);
   }
}
</code></pre> 
 <p>当执行上述程序时，会产生以下结果 -</p>   
 <pre><code class="lang-java">Hi
Hi
How are you ?
I am good, what about you?
I am also doing fine!
Great!
</code></pre>
 <br>      
</div></body></html>