<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring MVC生成RSS源</h1><div style="width:100%;float:left;" class="article-content">   
 <p>下面的示例演示如何使用<strong>Spring Web MVC</strong>框架生成RSS源。 首先使用Eclipse IDE，并按照以下步骤使用<strong>Spring Web Framework</strong>开发基于动态表单的Web应用程序：</p> 
 <ol> 
  <li>创建一个名称为 <strong>GenerateRSSFeed</strong> 的动态WEB项目。</li>
  <li>在 <code>com.yiibai.springmvc</code> 包下创建三个Java类：<code>RSSMessage</code>, <code>RSSFeedViewer</code> 和 <code>RSSController</code>。</li>
  <li>从相同的<code>maven</code>存储库页面下载 <a target="_blank" href="http://mvnrepository.com/artifact/com.rometools/rome/1.5.0" title="Rome">Rome</a> 库及其依赖项<a target="_blank" href="http://mvnrepository.com/artifact/com.rometools/rome-utils/1.5.0" title="rome-utils">rome-utils</a>，<a target="_blank" href="http://mvnrepository.com/artifact/org.jdom/jdom/2.0.2" title="jdom">jdom</a>和<a target="_blank" href="http://mvnrepository.com/artifact/org.slf4j/slf4j-api/1.7.7" title="slf4j">slf4j</a>。和所需的依赖关系存并将它们放在<code>CLASSPATH</code>中。</li>
  <li>在<code>src</code>文件夹下创建属性文件<code>messages.properties</code>。</li>
  <li>最后一步是创建所有源和配置文件的内容并运行应用程序，详细如下所述。</li>
 </ol> 
 <p>完整的项目文件目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2201/156150158_93423.png" alt=""></p> 
 <p><strong>RSSMessage.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

import java.util.Date;

public class RSSMessage {
   String title;
   String url;
   String summary;
   Date createdDate;
   public String getTitle() {
      return title;
   }
   public void setTitle(String title) {
      this.title = title;
   }
   public String getUrl() {
      return url;
   }
   public void setUrl(String url) {
      this.url = url;
   }
   public String getSummary() {
      return summary;
   }
   public void setSummary(String summary) {
      this.summary = summary;
   }
   public Date getCreatedDate() {
      return createdDate;
   }
   public void setCreatedDate(Date createdDate) {
      this.createdDate = createdDate;
   }    
}
</code></pre> 
 <p><strong>RSSFeedViewer.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.view.feed.AbstractRssFeedView;

import com.rometools.rome.feed.rss.Channel;
import com.rometools.rome.feed.rss.Content;
import com.rometools.rome.feed.rss.Item;

public class RSSFeedViewer extends AbstractRssFeedView {

   @Override
   protected void buildFeedMetadata(Map&lt;String, Object&gt; model, Channel feed,
      HttpServletRequest request) {

      feed.setTitle("YiibaiPoint Dot Com");
      feed.setDescription("Java Yiibai and Examples");
      feed.setLink("http://www.yiibai.com");

      super.buildFeedMetadata(model, feed, request);
   }

   @Override
   protected List&lt;Item&gt; buildFeedItems(Map&lt;String, Object&gt; model,
      HttpServletRequest request, HttpServletResponse response) throws Exception {

      List&lt;RSSMessage&gt; listContent = (List&lt;RSSMessage&gt;) model.get("feedContent");
      List&lt;Item&gt; items = new ArrayList&lt;Item&gt;(listContent.size());

      for(RSSMessage tempContent : listContent ){

         Item item = new Item();

         Content content = new Content();
         content.setValue(tempContent.getSummary());
         item.setContent(content);

         item.setTitle(tempContent.getTitle());
         item.setLink(tempContent.getUrl());
         item.setPubDate(tempContent.getCreatedDate());

         items.add(item);
      }

      return items;        
   }
}
</code></pre> 
 <p><strong>RSSController.java</strong> 文件中的代码如下所示 - </p> 
 <pre><code class="lang-java">import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;

@Controller
public class RSSController {
   @RequestMapping(value="/rssfeed", method = RequestMethod.GET)
   public ModelAndView getFeedInRss() {

      List&lt;RSSMessage&gt; items = new ArrayList&lt;RSSMessage&gt;();

      RSSMessage content  = new RSSMessage();
      content.setTitle("Spring教程");
      content.setUrl("http://www.yiibai/spring");
      content.setSummary("Spring tutorial summary...");
      content.setCreatedDate(new Date());
      items.add(content);

      RSSMessage content2  = new RSSMessage();
      content2.setTitle("Spring MVC教程");
      content2.setUrl("http://www.yiibai/spring_mvc");
      content2.setSummary("Spring MVC tutorial summary...");
      content2.setCreatedDate(new Date());
      items.add(content2);

      ModelAndView mav = new ModelAndView();
      mav.setViewName("rssViewer");
      mav.addObject("feedContent", items);

      return mav;
   }
}
</code></pre> 
 <p><strong>GenerateRSSFeed-servlet.xml</strong> 配置如下所示 - </p>   
 <pre><code class="lang-xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;

    &lt;context:component-scan base-package="com.yiibai.springmvc" /&gt;
    &lt;bean class="org.springframework.web.servlet.view.BeanNameViewResolver" /&gt;
    &lt;bean id="rssViewer" class="com.yiibai.springmvc.RSSFeedViewer" /&gt;
&lt;/beans&gt;
</code></pre> 
 <p>上面的代码中创建了一个<strong>RSS feed POJO RSSMessage</strong>和一个<strong>RSS Message Viewer</strong>，它扩展了<code>AbstractRssFeedView</code>并覆盖了它的方法。 在<code>RSSController</code>中，生成了一个示例<code>RSS Feed</code>。</p> 
 <p>完成创建源和配置文件后，发布应用程序到Tomcat服务器。</p> 
 <p>现在启动Tomcat服务器，当访问URL =&gt; <a target="_blank" href="http://localhost:8080/GenerateRSSFeed/rssfeed">http://localhost:8080/GenerateRSSFeed/rssfeed</a> ， 如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2201/108160110_22096.png" alt=""></p>
 <br>      
</div></body></html>