<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring MVC生成JSON数据</h1><div style="width:100%;float:left;" class="article-content">   
 <p>以下示例演示如何使用Spring Web MVC框架生成JSON数据格式。首先使用Eclipse IDE，并按照以下步骤使用<strong>Spring Web Framework</strong>开发基于动态表单的Web应用程序：</p> 
 <ol> 
  <li>创建一个名称为 <strong>GenerateJson</strong> 的动态WEB项目。</li>
  <li>在 <code>com.yiibai.springmvc</code> 包下创建三个Java类：<code>User</code> 和 <code>UserController</code>。</li>
  <li>从Maven仓库页面下载Jackson库：<a target="_blank" href="http://mvnrepository.com/artifact/com.fasterxml.jackson.core" title="Jackson Core，Jackson Databind和Jackson Annotations">Jackson Core，Jackson Databind和Jackson Annotations</a>。把它们放在<code>CLASSPATH</code>中。</li>
  <li>最后一步是创建所有源和配置文件的内容并运行应用程序，详细如下所述。</li>
 </ol> 
 <p>完整的项目文件目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2201/206160155_91026.png" alt=""></p> 
 <p><strong>User.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

public class User {
   private String name;
   private int id;
   public String getName() {
      return name;
   }  
   public void setName(String name) {
      this.name = name;
   }
   public int getId() {
      return id;
   }   
   public void setId(int id) {
      this.id = id;
   }    
}
</code></pre> 
 <p><strong>UserController.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.ResponseBody;

@Controller
@RequestMapping("/user")
public class UserController {

   @RequestMapping(value="{name}", method = RequestMethod.GET)
   public @ResponseBody User getUser(@PathVariable String name) {

      User user = new User();

      user.setName(name);
      user.setId(1100);
      return user;
   }
}
</code></pre> 
 <p><strong>GenerateJson-servlet.xml</strong> 配置如下所示 - </p> 
 <pre><code class="lang-xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:context="http://www.springframework.org/schema/context"   
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd
   http://www.springframework.org/schema/mvc
   http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd"&gt;
   &lt;context:component-scan base-package="com.yiibai.springmvc" /&gt;
   &lt;mvc:annotation-driven /&gt;
&lt;/beans&gt;
</code></pre> 
 <p>在上面的代码中创建了一个简单的POJO用户，在<code>UserController</code>中返回了<code>User</code>对象。 Spring基于类路径中的<code>RequestMapping</code>和<code>Jackson jar</code>自动处理JSON转换。</p> 
 <p>完成创建源和配置文件后，发布应用程序到Tomcat服务器。</p> 
 <p>现在启动Tomcat服务器，当访问URL =&gt; <a target="_blank" href="http://localhost:8080/GenerateJson/user/yiibai">http://localhost:8080/GenerateJson/user/yiibai</a> ， 如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2201/800160157_65234.png" alt=""></p>
 <br>      
</div></body></html>