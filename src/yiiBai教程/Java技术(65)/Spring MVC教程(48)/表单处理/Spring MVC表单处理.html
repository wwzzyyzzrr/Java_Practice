<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring MVC表单处理</h1><div style="width:100%;float:left;" class="article-content">   
 <p>以下示例演示如何编写一个简单的基于Web的应用程序，它使用<strong>Spring Web MVC</strong>框架使用HTML表单。 首先使用Eclipse IDE，并按照以下步骤使用<strong>Spring Web Framework</strong>开发基于动态表单的<strong>Web</strong>应用程序：</p> 
 <ol> 
  <li>基于上一小节中的<strong>Spring MVC - Hello World实例</strong>章节所创建的 <strong>HelloWeb</strong>来创建一个新的工程为：<code>FormHandling</code>，并创建一个包名称为 <code>com.yiibai.springmvc</code>。<br><img src="http://www.yiibai.com/uploads/images/201701/18/849150134_52838.png" alt=""></li>
  <li>在<code>com.yiibai.springmvc</code>包下创建两个Java类<code>Student</code>，<code>StudentController</code>。</li>
  <li>在<code>jsp</code>子文件夹下创建两个视图文件<code>student.jsp</code>，<code>result.jsp</code>。</li>
  <li>最后一步是创建所有源和配置文件的内容并运行应用程序，如下所述。</li>
 </ol> 
 <p>完整的项目文件结构如下所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/18/874160136_97079.png" alt=""></p> 
 <p><strong>Student.java</strong>文件中的代码内容 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

public class Student {
   private Integer age;
   private String name;
   private Integer id;

   public void setAge(Integer age) {
      this.age = age;
   }
   public Integer getAge() {
      return age;
   }

   public void setName(String name) {
      this.name = name;
   }
   public String getName() {
      return name;
   }

   public void setId(Integer id) {
      this.id = id;
   }
   public Integer getId() {
      return id;
   }
}
</code></pre> 
 <p><strong>StudentController.java</strong> 文件中的代码内容 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.ui.ModelMap;

@Controller
public class StudentController {

   @RequestMapping(value = "/student", method = RequestMethod.GET)
   public ModelAndView student() {
      return new ModelAndView("student", "command", new Student());
   }

   @RequestMapping(value = "/addStudent", method = RequestMethod.POST)
   public String addStudent(@ModelAttribute("SpringWeb")Student student, 
   ModelMap model) {
      model.addAttribute("name", student.getName());
      model.addAttribute("age", student.getAge());
      model.addAttribute("id", student.getId());

      return "result";
   }
}
</code></pre> 
 <p>这里的第一个服务方法<code>student()</code>，我们已经在<code>ModelAndView</code>对象中传递了一个名为“<code>command</code>”的空对象，因为如果在JSP中使用<code>&lt;form：form&gt;</code>标签，<strong>spring</strong>框架需要一个名为“<code>command</code>”的对象文件。 所以当调用<code>student()</code>方法时，它返回<code>student.jsp</code>视图。</p> 
 <p>第二个服务方法<code>addStudent()</code>将在 URL<code>HelloWeb/addStudent</code>上的POST方法提交时调用。将根据提交的信息准备模型对象。最后，将从服务方法返回“<code>result</code>”视图，这将最终渲染<code>result.jsp</code>视图。</p> 
 <p><strong>student.jsp</strong>文件的内容如下所示 -</p> 
 <pre><code class="lang-html">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Spring MVC表单处理&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h2&gt;Student Information&lt;/h2&gt;
&lt;form:form method="POST" action="/FormHandling/addStudent"&gt;
   &lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;form:label path="name"&gt;名字：&lt;/form:label&gt;&lt;/td&gt;
        &lt;td&gt;&lt;form:input path="name" /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;form:label path="age"&gt;年龄：&lt;/form:label&gt;&lt;/td&gt;
        &lt;td&gt;&lt;form:input path="age" /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;form:label path="id"&gt;编号：&lt;/form:label&gt;&lt;/td&gt;
        &lt;td&gt;&lt;form:input path="id" /&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td colspan="2"&gt;
            &lt;input type="submit" value="提交表单"/&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;  
&lt;/form:form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p><strong>result.jsp</strong>文件的内容如下 - </p>   
 <pre><code class="lang-html">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;title&gt;Spring MVC表单处理&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

&lt;h2&gt;提交的学生信息如下 - &lt;/h2&gt;
   &lt;table&gt;
    &lt;tr&gt;
        &lt;td&gt;名称：&lt;/td&gt;
        &lt;td&gt;${name}&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;年龄：&lt;/td&gt;
        &lt;td&gt;${age}&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;编号：&lt;/td&gt;
        &lt;td&gt;${id}&lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;  
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>完成创建源和配置文件后，导出应用程序。 右键单击应用程序，并使用<strong>导出&gt; WAR文件</strong>选项，并将 <code>FormHandling.war</code> 文件保存在Tomcat的<code>webapps</code>文件夹中。或者直接右键选择“<strong>Run As -&gt; Run On Server</strong>”。</p> 
 <p>启动Tomcat服务器，并确保您能够使用标准浏览器从<strong>webapps</strong>文件夹访问其他网页。现在尝试URL =&gt; <a target="_blank" href="http://localhost:8080/FormHandling/student">http://localhost:8080/FormHandling/student</a> ，如果<strong>Spring Web</strong>应用程序没有问题，那么应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/18/628160137_81802.png" alt=""></p> 
 <p>提交所需信息后，点击提交按钮提交表单。 如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/18/856160138_86192.png" alt=""></p>
 <br>      
</div></body></html>