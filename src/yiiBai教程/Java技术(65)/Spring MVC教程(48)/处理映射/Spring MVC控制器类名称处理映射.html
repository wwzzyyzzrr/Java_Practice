<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring MVC控制器类名称处理映射</h1><div style="width:100%;float:left;" class="article-content">   
 <p>以下示例显示如何使用<strong>Spring Web MVC</strong>框架使用控制器类名称处理程序映射。 <code>ControllerClassNameHandlerMapping</code>类是基于约定的处理程序映射类，它将URL请求映射到配置中提到的控制器的名称。这个类接受控制器名称并将其转换为带有前导“<code>/</code>”的小写形式。 例如<code>HelloController</code>映射到URL: “<code>/hello*</code>”。</p> 
 <p>所下所示配置 - </p> 
 <pre><code class="lang-xml">&lt;beans&gt;
   &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
      &lt;property name="prefix" value="/WEB-INF/jsp/"/&gt;
      &lt;property name="suffix" value=".jsp"/&gt;
   &lt;/bean&gt;

   &lt;bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping"/&gt;

   &lt;bean class="com.yiibai.springmvc.HelloController" /&gt;

   &lt;bean class="com.yiibai.springmvc.WelcomeController"/&gt;   
&lt;/beans&gt;
</code></pre> 
 <p>例如，使用上面的配置，URI：</p> 
 <ul> 
  <li>对于<code>/helloWorld.html</code>或 <code>/hello{任何字母}.html</code>，<code>DispatcherServlet</code>将请求转发到<code>HelloController</code>类。</li>
  <li>对于<code>/welcome.html</code>，<code>DispatcherServlet</code>会将请求转发给<code>WelcomeController</code>类。</li>
  <li>对于<code>/welcome1.html</code>，<code>DispatcherServlet</code>将不会找到任何控制器，服务器将抛出<code>404</code>状态错误。</li>
 </ul> 
 <p>首先，让我们使用Eclipse IDE，并按照以下步骤使用<strong>Spring Web Framework</strong>开发基于动态表单的Web应用程序：</p> 
 <ol> 
  <li>创建一个名称为 <strong>ControllerClassNameHandlerMapping</strong> 的动态WEB项目。</li>
  <li>在 <code>com.yiibai.springmvc</code> 包下创建两个Java类<code>HelloController</code>和 <code>WelcomeController</code>。</li>
  <li>在<code>jsp</code>子文件夹下创建两个视图文件：<code>hello.jsp</code> 和 <code>welcome.jsp</code>。</li>
  <li>最后一步是创建所有源和配置文件的内容并运行应用程序，详细如下所述。</li>
 </ol> 
 <p>完整的项目文件目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2001/669140155_42930.png" alt=""></p> 
 <p><strong>HelloController.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;

public class HelloController extends AbstractController{

   @Override
   protected ModelAndView handleRequestInternal(HttpServletRequest request,
      HttpServletResponse response) throws Exception {
      ModelAndView model = new ModelAndView("hello");
      model.addObject("message", "Hello World!");
      return model;
   }
}
</code></pre> 
 <p><strong>WelcomeController.java</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.springmvc;

import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.servlet.mvc.AbstractController;

public class WelcomeController extends AbstractController{

   @Override
   protected ModelAndView handleRequestInternal(HttpServletRequest request,
      HttpServletResponse response) throws Exception {
      ModelAndView model = new ModelAndView("welcome");
      model.addObject("message", "Welcome!");
      return model;
   }
}
</code></pre> 
 <p><strong>ControllerClassNameHandlerMapping-servlet.xml</strong> 的代码如下所示 - </p> 
 <pre><code class="lang-xml">&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans     
   http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
   http://www.springframework.org/schema/context 
   http://www.springframework.org/schema/context/spring-context-3.0.xsd"&gt;

    &lt;bean
        class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix" value="/WEB-INF/jsp/" /&gt;
        &lt;property name="suffix" value=".jsp" /&gt;
    &lt;/bean&gt;

    &lt;bean
        class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" /&gt;

    &lt;bean class="com.yiibai.springmvc.HelloController" /&gt;

    &lt;bean class="com.yiibai.springmvc.WelcomeController" /&gt;
&lt;/beans&gt;
</code></pre> 
 <p><strong>hello.jsp</strong> 的代码如下所示 -</p>   
 <pre><code class="lang-html">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Hello World&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h2&gt;${message}&lt;/h2&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p><strong>welcome.jsp</strong> 的代码如下所示 -</p> 
 <pre><code class="lang-html">&lt;%@ page contentType="text/html; charset=UTF-8" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Welcome&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
   &lt;h2&gt;${message}&lt;/h2&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>完成创建源和配置文件后，发布应用程序到Tomcat服务器。</p> 
 <p>现在启动Tomcat服务器，现在尝试访问URL =&gt; <a target="_blank" href="http://localhost:8080/ControllerClassNameHandlerMapping/helloWorld.html">http://localhost:8080/ControllerClassNameHandlerMapping/helloWorld.html</a> ，如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2001/928140149_77770.png" alt=""></p> 
 <p>当访问URL =&gt; <a target="_blank" href="http://localhost:8080/ControllerClassNameHandlerMapping/hello.html">http://localhost:8080/ControllerClassNameHandlerMapping/hello.html</a> ， 如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2001/965140150_68447.png" alt=""></p> 
 <p>当访问URL =&gt; <a target="_blank" href="http://localhost:8080/ControllerClassNameHandlerMapping/welcome.html">http://localhost:8080/ControllerClassNameHandlerMapping/welcome.html</a> ， 如果<strong>Spring Web</strong>应用程序没有问题，应该看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2001/714140151_68555.png" alt=""></p> 
 <p>当访问URL =&gt; <a target="_blank" href="http://localhost:8080/ControllerClassNameHandlerMapping/Welcome.html">http://localhost:8080/ControllerClassNameHandlerMapping/Welcome.html</a> ， 如果<strong>Spring Web</strong>应用程序没有问题，因此没有匹配此请求URL, 应该会看到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201701/2001/932140152_87250.png" alt=""></p>
 <br>      
</div></body></html>