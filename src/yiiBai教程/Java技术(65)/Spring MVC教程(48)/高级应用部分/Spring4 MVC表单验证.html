<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring4 MVC表单验证</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    在这篇文章中，我们将学习如何使用Spring表单标签，&nbsp;表单验证使用&nbsp;JSR303&nbsp;的验证注解，hibernate-validators，提供了使用MessageSource和访问静态资源(如CSS，JavaScript，图片)国际化支持我们的视图，使用ResourceHandlerRegistry，全部采用基于注解的配置。 
  </div> 
 </div> 
 <p> 我们将创建一个包含一个学生注册表格的简单应用，用户输入表单提交验证通过&nbsp;JSR303&nbsp;的验证注释验证，通过覆盖属性文件可使用国际验证消息的默认消息，还访问静态资源(如应用引导CSS到网页中)。 </p> 
 <blockquote style="color:#404040;font-size:15px;"> 
  <p style="font-family:inherit;font-style:inherit;background-color:inherit;"> <span style="line-height:1.5;">请注意，JSR303是一种规范，hibernate-validator是我们在这篇文章中使用的一种实现，</span><span style="line-height:1.5;">它也提供了几个不包含在规范中自己的验证注释。</span> </p> 
 </blockquote> 
 <p> 使用以下技术： </p> 
 <ul style="color:#333333;font-size:15px;"> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> Spring 4.0.6.RELEASE </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> validation-api 1.1.0.Final </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> hibernate-validator 5.1.2.Final </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> Bootstrap v3.1.0 </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> Maven 3 </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> JDK 1.6 </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> Tomcat 7.0.54 </li> 
  <li style="background-color:inherit;font-family:inherit;font-style:inherit;"> Eclipse JUNO Service Release 2 </li> 
 </ul> 
 <p> 我们现在开始！ </p> 
 <h4> 
  <div>
    第1步：创建目录结构 
  </div> </h4> 
 <div>
   以下将是最终的项目结构(这里需要先创建一个Maven工程为：Spring4MVCFormValidationExample)： 
 </div> 
 <p> <br> </p> 
 <div>
   现在让我们在每个细节上述结构中提到的内容来做一点解释。 
 </div> 
 <h4> 
  <div>
    第2步：更新pom.xml，包括所需的依赖关系 
  </div> </h4> 
 <pre>&lt;?xml version="1.0"?&gt;
&lt;project xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"
	xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;

	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;com.yiibai.springmvc&lt;/groupId&gt;
	&lt;artifactId&gt;Spring4MVCFormValidationExample&lt;/artifactId&gt;
	&lt;packaging&gt;war&lt;/packaging&gt;
	&lt;version&gt;1.0.0&lt;/version&gt;
	&lt;name&gt;Spring4MVCFormValidationExample&lt;/name&gt;

	&lt;properties&gt;
		&lt;springframework.version&gt;4.0.6.RELEASE&lt;/springframework.version&gt;
		&lt;hibernate.validator.version&gt;5.1.2.Final&lt;/hibernate.validator.version&gt;
		&lt;javax.validation.version&gt;1.1.0.Final&lt;/javax.validation.version&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;!-- Spring dependencies --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;
			&lt;version&gt;${springframework.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-web&lt;/artifactId&gt;
			&lt;version&gt;${springframework.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
			&lt;version&gt;${springframework.version}&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;!-- jsr303 validation dependencies--&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;javax.validation&lt;/groupId&gt;
			&lt;artifactId&gt;validation-api&lt;/artifactId&gt;
			&lt;version&gt;${javax.validation.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.hibernate&lt;/groupId&gt;
			&lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;
			&lt;version&gt;${hibernate.validator.version}&lt;/version&gt;
		&lt;/dependency&gt;

		&lt;!-- Servlet dependencies --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;javax.servlet&lt;/groupId&gt;
			&lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
			&lt;version&gt;3.1.0&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;javax.servlet.jsp&lt;/groupId&gt;
			&lt;artifactId&gt;javax.servlet.jsp-api&lt;/artifactId&gt;
			&lt;version&gt;2.3.1&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
		    &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
		    &lt;artifactId&gt;jstl&lt;/artifactId&gt;
		    &lt;version&gt;1.2&lt;/version&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

	&lt;build&gt;
		&lt;pluginManagement&gt;
			&lt;plugins&gt;
				&lt;plugin&gt;
					&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
					&lt;artifactId&gt;maven-war-plugin&lt;/artifactId&gt;
					&lt;version&gt;2.4&lt;/version&gt;
					&lt;configuration&gt;
						&lt;warSourceDirectory&gt;src/main/webapp&lt;/warSourceDirectory&gt;
						&lt;warName&gt;Spring4MVCFormValidationExample&lt;/warName&gt;
						&lt;failOnMissingWebXml&gt;false&lt;/failOnMissingWebXml&gt;
					&lt;/configuration&gt;
				&lt;/plugin&gt;
			&lt;/plugins&gt;
		&lt;/pluginManagement&gt;
		&lt;finalName&gt;Spring4MVCFormValidationExample&lt;/finalName&gt;
	&lt;/build&gt;
&lt;/project&gt;
&nbsp;</pre> 
 <p> 首先要注意这里是&nbsp;maven-war-plugin&nbsp;插件声明。由于我们使用的是全注解配置，我们甚至不包括在 web.xml 中，所以我们需要配置这个插件，以避免Maven构建war包失败。在验证部分 validation-api 代表规范，&nbsp;而hibernate-validator是本规范的一个实现。hibernate-validator还提供了一些它自己的注解(@Email，@NotEmpty等)不属于规范的一部分。 </p> 
 <p> 伴随着这一点，我们也包括JSP/Servlet/Jstl&nbsp;的依赖关系，也将需要为使用&nbsp;servlet&nbsp;API和JSTL视图在我们的代码中。在一般情况下，容器可能已经包含了这些库，从而在pom.xml中我们可以设置范围作为“provided”。 </p> 
 <div>
   此外，这里还单独下载了 bootstrap.css ，为了演示在基于注解的配置如何使用资源处理。 
 </div> 
 <h4> 
  <div>
    第3步：创建POJO/域对象 
  </div> </h4> 
 <p> 访问的对象将充当一个辅助bean的形式保存用户提供签证申请表提交的数据。我们将注释，以验证属性(使用验证注释)。 </p> 
 <p> com.yiibai.springmvc.model.Student </p> 
 <pre>package com.yiibai.springmvc.model;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.Date;
import java.util.List;

import javax.validation.constraints.NotNull;
import javax.validation.constraints.Past;
import javax.validation.constraints.Size;

import org.hibernate.validator.constraints.Email;
import org.hibernate.validator.constraints.NotEmpty;
import org.springframework.format.annotation.DateTimeFormat;

public class Student implements Serializable {

	@Size(min=3, max=30)
	private String firstName;

	@Size(min=3, max=30)
	private String lastName;

	@NotEmpty
	private String sex;

	@DateTimeFormat(pattern="yyyy-MM-dd")
	@Past @NotNull
	private Date dob;

	@Email @NotEmpty
	private String email;

	@NotEmpty
	private String section;

	@NotEmpty
	private String country;

	private boolean firstAttempt;

	@NotEmpty
	private List&lt;String&gt; subjects = new ArrayList&lt;String&gt;();

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

	public String getSex() {
		return sex;
	}

	public void setSex(String sex) {
		this.sex = sex;
	}

	public Date getDob() {
		return dob;
	}

	public void setDob(Date dob) {
		this.dob = dob;
	}

	public String getEmail() {
		return email;
	}

	public void setEmail(String email) {
		this.email = email;
	}

	public String getSection() {
		return section;
	}

	public void setSection(String section) {
		this.section = section;
	}

	public String getCountry() {
		return country;
	}

	public void setCountry(String country) {
		this.country = country;
	}

	public boolean isFirstAttempt() {
		return firstAttempt;
	}

	public void setFirstAttempt(boolean firstAttempt) {
		this.firstAttempt = firstAttempt;
	}

	public List&lt;String&gt; getSubjects() {
		return subjects;
	}

	public void setSubjects(List&lt;String&gt; subjects) {
		this.subjects = subjects;
	}

	@Override
	public String toString() {
		return "Student [firstName=" + firstName + ", lastName=" + lastName
				+ ", sex=" + sex + ", dob=" + dob + ", email=" + email
				+ ", section=" + section + ", country=" + country
				+ ", firstAttempt=" + firstAttempt + ", subjects=" + subjects
				+ "]";
	}

}</pre> 
 <p> 在上面的代码中：@Size,&nbsp;@Past&nbsp;&amp;&nbsp;@NotNull&nbsp;是标准的标注，而@NotEmpty＆@Emailare是规范的一部分。 </p> 
 <h4> 
  <div>
    第4步：添加控制器 
  </div> </h4> 
 <div>
   控制器加入将有助于处理GET和POST请求。 
 </div> 
 <p> com.yiibai.springmvc.controller.HelloWorldController </p> 
 <pre>package com.yiibai.springmvc.controller;

import java.util.ArrayList;
import java.util.List;

import javax.validation.Valid;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

import com.websystique.springmvc.model.Student;

@Controller
@RequestMapping("/")
public class HelloWorldController {

	/*
	 * This method will serve as default GET handler.
	 *
	 */
	@RequestMapping(method = RequestMethod.GET)
	public String newRegistration(ModelMap model) {
		Student student = new Student();
		model.addAttribute("student", student);
		return "enroll";
	}

	/*
	 * This method will be called on form submission, handling POST request
	 * It also validates the user input
	 */
	@RequestMapping(method = RequestMethod.POST)
	public String saveRegistration(@Valid Student student, BindingResult result, ModelMap model){

		if(result.hasErrors()) {
		        return "enroll";
		}

		model.addAttribute("success", "Dear "+ student.getFirstName()+" , your Registration completed successfully");
		return "success";
	}

	/*
	 * Method used to populate the Section list in view.
	 * Note that here you can call external systems to provide real data.
	 */
	@ModelAttribute("sections")
	public List&lt;String&gt; initializeSections() {

		List&lt;String&gt; sections = new ArrayList&lt;String&gt;();
		sections.add("Graduate");
		sections.add("Post Graduate");
		sections.add("Research");
 		return sections;
	}

	/*
	 * Method used to populate the country list in view.
	 * Note that here you can call external systems to provide real data.
	 */
	@ModelAttribute("countries")
	public List&lt;String&gt; initializeCountries() {

		List&lt;String&gt; countries = new ArrayList&lt;String&gt;();
		countries.add("USA");
		countries.add("CHINA");
		countries.add("FRANCE");
		countries.add("GERMANY");
		countries.add("ITALY");
		countries.add("OTHER");
 		return countries;
	}

	/*
	 * Method used to populate the subjects list in view.
	 * Note that here you can call external systems to provide real data.
	 */
	@ModelAttribute("subjects")
	public List&lt;String&gt; initializeSubjects() {

		List&lt;String&gt; subjects = new ArrayList&lt;String&gt;();
		subjects.add("Physics");
		subjects.add("Chemistry");
		subjects.add("Life Science");
		subjects.add("Political Science");
		subjects.add("Computer Science");
		subjects.add("Mathmatics");
 		return subjects;
	}

}&nbsp;</pre> 
 <p> @Controller表明这个类是一个控制器在处理具有模式映射的@RequestMapping请求。这里使用 ‘/’,&nbsp;它被作为默认的控制器。方法newRegistration是相当简单的，注解为@&nbsp;RequestMethod.GET服务默认是GET请求，使用模型对象，以服务为形式的数据，并呈现包含空白表单的网页。 </p> 
 <div>
   方法initializeSections,&nbsp;initializeCountries&nbsp;&amp;&nbsp;initializeSubjects是简单地创建请求级别的对象，其值在视图/JSP中将被使用。 
 </div> 
 <p> 方法saveRegistration&nbsp;标注有@&nbsp;RequestMethod.POST，并将处理表单提交POST请求。注意本方法的参数和它们的顺序。 </p> 
 <p> @Valid要求spring来验证相关的对象(学生)。&nbsp;BindingResult包含此验证，并可能在此验证过程中发生(产生)任何错误的结果。请注意，BindingResult一定要在之后立即生效对象，否则spring将无法验证并且将一个异常抛出。 </p> 
 <p> 注意，在校验失败后，默认/广义错误消息显示在屏幕上这可能不是所期望的。相反，可以重写此行为提供具体到每个字段中国际化消息。为了做到这一点，我们需要配置 MessageSource 在应用程序配置类，并提供包含我们下一步将配置实际的信息属性文件。 </p> 
 <h4> 
  <div>
    第5步：添加配置类 
  </div> </h4> 
 <p> com.yiibai.springmvc.configuration.HelloWorldConfiguration </p> 
 <pre>package com.yiibai.springmvc.configuration;

import org.springframework.context.MessageSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ResourceBundleMessageSource;
import org.springframework.web.servlet.ViewResolver;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.springframework.web.servlet.view.InternalResourceViewResolver;
import org.springframework.web.servlet.view.JstlView;

@Configuration
@EnableWebMvc
@ComponentScan(basePackages = "com.yiibai.springmvc")
public class HelloWorldConfiguration extends WebMvcConfigurerAdapter {

	/*
	 * Configure View Resolver
	 */
	@Bean
	public ViewResolver viewResolver() {
		InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
		viewResolver.setViewClass(JstlView.class);
		viewResolver.setPrefix("/WEB-INF/views/");
		viewResolver.setSuffix(".jsp");
		return viewResolver;
	}

	/*
	 * Configure ResourceHandlers to serve static resources like CSS/ Javascript etc...
	 *
	 */
	@Override
	public void addResourceHandlers(ResourceHandlerRegistry registry) {
	    registry.addResourceHandler("/static/**").addResourceLocations("/static/");
	}

	/*
	 * Configure MessageSource to provide internationalized messages
	 *
	 */

	@Bean
	public MessageSource messageSource() {
	    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
	    messageSource.setBasename("messages");
	    return messageSource;
	}

}&nbsp;</pre> 
 <p> @Configuration指示该类包含注解为@Bean生产Bean管理是由Spring容器的一个或多个&nbsp;bean&nbsp;的方法。@EnableWebMvc&nbsp;等效于&nbsp;mvc:annotation-driven&nbsp;在XML文件中。它能够为使用@RequestMapping&nbsp;向特定的方法传入的请求映射@Controller-annotated类。&nbsp;@ComponentScan&nbsp;等效于&nbsp;&nbsp;context:component-scan base-package="..."&nbsp;提供具有到哪里查找管理Spring&nbsp;beans/类。 </p> 
 <p> 方法 ViewResolver 配置一个 ViewResolver 用来找出真正的视图。方法 addResourceHandlers 配置 ResourceHandler 静态资源。CSS, JavaScript, images&nbsp;等都是静态的资源在你的页面里。上面的配置表示，所有的资源请求开始/static/，将从webapps文件夹下提供/static/。在这个例子中，我们把所有的css文件放在&nbsp;Web应用程序的&nbsp;/static/css&nbsp;目录中。注意，此方法在 WebMvcConfigurerAdapter 中定义，因此我们需要扩展这个类来注册我们的静态资源覆盖此方法。 </p> 
 <p> 方法为 messageSource 配置消息包，以支持[国际化]消息属性文件。请注意方法 baseName 提供的参数(消息)。Spring&nbsp;将搜索应用程序类路径中一个名为messages.properties文件。让我们添加的文件： </p> 
 <p> src/main/resources/messages.properties </p> 
 <pre>Size.student.firstName=First Name must be between {2} and {1} characters long
Size.student.lastName=Last Name must be between {2} and {1} characters long
NotEmpty.student.sex=Please specify your gender
NotNull.student.dob=Date of birth can not be blank
Past.student.dob=Date of birth must be in the past
Email.student.email=Please provide a valid Email address
NotEmpty.student.email=Email can not be blank
NotEmpty.student.country=Please select your country
NotEmpty.student.section=Please select your section
NotEmpty.student.subjects=Please select at least one subject
typeMismatch=Invalid format</pre> 
 <div>
   请注意，上述消息按照特定的模式 
 </div> 
 <pre>{ValidationAnnotationClass}.{modelObject}.{fieldName}&nbsp;</pre> 
 <p> 此外，根据具体的注释(如@Size)，也可以用传递参数给这些消息：{0},{1},..{i} </p> 
 <div>
   以XML格式上述结构将是 
 </div>   
 <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd"&gt;
 
    &lt;context:component-scan base-package="com.yiibai.springmvc" /&gt;
    &lt;mvc:annotation-driven/&gt;

    &lt;mvc:resources mapping="/static/**" location="/static/" /&gt;
    &lt;mvc:default-servlet-handler /&gt;


    &lt;bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource"&gt;
        &lt;property name="basename"&gt;
            &lt;value&gt;messages&lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;


    &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;
        &lt;property name="prefix"&gt;
            &lt;value&gt;/WEB-INF/views/&lt;/value&gt;
        &lt;/property&gt;
        &lt;property name="suffix"&gt;
            &lt;value&gt;.jsp&lt;/value&gt;
        &lt;/property&gt;
    &lt;/bean&gt;
 
&lt;/beans&gt;</pre> 
 <h4> 
  <div>
    第6步：添加视图(简单的JSP页面) 
  </div> </h4> 
 <p> 我们将添加两个简单的JSP页面。第一个将包含一个表单，从用户接收输入，&nbsp;而第二个在当表单输入验证成功时会显示成功消息给用户。 </p> 
 <div>
   下面是代码，用于包括静态资源(在我们的例子中使用&nbsp;bootstrap.css) 
 </div> 
 <pre>&lt;link href="&lt;c:url value='/static/css/bootstrap.css' /&gt;" rel="stylesheet"&gt;&lt;/link&gt;&nbsp;</pre> 
 <p> 注意静态资源路径。既然我们已经在前面的步骤配置资源处理程序&nbsp;/static/**,&nbsp;css文件将搜索&nbsp;/static/文件夹。 </p> 
 <div>
   完整的JSP文件如下所示： 
 </div> 
 <p> WEB-INF/views/enroll.jsp </p> 
 <pre>&lt;%@ page language="java" contentType="text/html; charset=utf-8"
    pageEncoding="utf-8"%&gt;
&lt;%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8"&gt;
	&lt;title&gt;Student Enrollment Form&lt;/title&gt;
	&lt;link href="&lt;c:url value='/static/css/bootstrap.css' /&gt;" rel="stylesheet"&gt;&lt;/link&gt;
	&lt;link href="&lt;c:url value='/static/css/custom.css' /&gt;" rel="stylesheet"&gt;&lt;/link&gt;
&lt;/head&gt;

&lt;body&gt;
 	&lt;div class="form-container"&gt;
 	&lt;h1&gt;Enrollment Form&lt;/h1&gt;
	&lt;form:form method="POST" modelAttribute="student" class="form-horizontal"&gt;
		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="firstName"&gt;First Name&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:input type="text" path="firstName" id="firstName" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="firstName" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="lastName"&gt;Last Name&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:input type="text" path="lastName" id="lastName" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="lastName" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="sex"&gt;Sex&lt;/label&gt;
				&lt;div class="col-md-7" class="form-control input-sm"&gt;
					&lt;form:radiobutton path="sex" value="M" /&gt;Male 
	    			&lt;form:radiobutton path="sex" value="F" /&gt;Female
					&lt;div class="has-error"&gt;
						&lt;form:errors path="sex" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="dob"&gt;Date of birth&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:input type="text" path="dob" id="dob" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="dob" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="email"&gt;Email&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:input type="text" path="email" id="email" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="email" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;


		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="section"&gt;Section&lt;/label&gt;
				&lt;div class="col-md-7" class="form-control input-sm"&gt;
					&lt;form:radiobuttons path="section" items="${sections}" /&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="section" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;


		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="country"&gt;Country&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:select path="country" id="country" class="form-control input-sm"&gt;
				        &lt;form:option value=""&gt;Select Country&lt;/form:option&gt;
			    	    &lt;form:options items="${countries}" /&gt;
				    &lt;/form:select&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="country" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="firstAttempt"&gt;First Attempt ?&lt;/label&gt;
				&lt;div class="col-md-1"&gt;
					&lt;form:checkbox path="firstAttempt" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="firstAttempt" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	

		&lt;div class="row"&gt;
			&lt;div class="form-group col-md-12"&gt;
				&lt;label class="col-md-3 control-lable" for="subjects"&gt;Subjects&lt;/label&gt;
				&lt;div class="col-md-7"&gt;
					&lt;form:select path="subjects" items="${subjects}" multiple="true" class="form-control input-sm"/&gt;
					&lt;div class="has-error"&gt;
						&lt;form:errors path="subjects" class="help-inline"/&gt;
					&lt;/div&gt;
				&lt;/div&gt;
			&lt;/div&gt;
		&lt;/div&gt;

		&lt;div class="row"&gt;
			&lt;div class="form-actions floatRight"&gt;
				&lt;input type="submit" value="Register" class="btn btn-primary btn-sm"&gt;
			&lt;/div&gt;
		&lt;/div&gt;
	&lt;/form:form&gt;
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p> WEB-INF/views/success.jsp </p> 
 <pre>&lt;%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%&gt;
&lt;%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %&gt;
&lt;html&gt;
&lt;head&gt;
	&lt;meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"&gt;
	&lt;title&gt;Student Enrollment Detail Confirmation&lt;/title&gt;
	&lt;link href="&lt;c:url value='/static/css/custom.css' /&gt;" rel="stylesheet"&gt;&lt;/link&gt;
&lt;/head&gt;
&lt;body&gt;
	&lt;div class="success"&gt;
		Confirmation message : ${success}
		&lt;br&gt;
		We have also sent you a confirmation mail to your email address : ${student.email}.
	&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <h4> 
  <div>
    第7步：添加初始化器类 
  </div> </h4> 
 <p> com.yiibai.springmvc.configuration.HelloWorldInitializer </p> 
 <pre>package com.yiibai.springmvc.configuration;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.ServletRegistration;

import org.springframework.web.WebApplicationInitializer;
import org.springframework.web.context.support.AnnotationConfigWebApplicationContext;
import org.springframework.web.servlet.DispatcherServlet;

public class HelloWorldInitializer implements WebApplicationInitializer {

	public void onStartup(ServletContext container) throws ServletException {

		AnnotationConfigWebApplicationContext ctx = new AnnotationConfigWebApplicationContext();
		ctx.register(HelloWorldConfiguration.class);
		ctx.setServletContext(container);

		ServletRegistration.Dynamic servlet = container.addServlet(
				"dispatcher", new DispatcherServlet(ctx));

		servlet.setLoadOnStartup(1);
		servlet.addMapping("/");
	}

}&nbsp;</pre> 
 <p> 内容上面类似之前教程的&nbsp;web.xml&nbsp;文件内容，因为我们使用的是前端控制器的DispatcherServlet，分配映射(URL模式的XML)和而不是提供给Spring配置文件(spring-servlet.xml)的路径，在这里，我们使用注册配置类。 </p> 
 <p> 更新：请注意，上面的类可以写成更加简洁[和这是最佳方法]，通过扩展&nbsp;AbstractAnnotationConfigDispatcherServletInitializer&nbsp;基类,如下所示： </p> 
 <pre>package com.websystique.springmvc.configuration;

import org.springframework.web.servlet.support.AbstractAnnotationConfigDispatcherServletInitializer;

public class HelloWorldInitializer extends AbstractAnnotationConfigDispatcherServletInitializer {

	@Override
	protected Class&lt;?&gt;[] getRootConfigClasses() {
		return new Class[] { HelloWorldConfiguration.class };
	}
 
	@Override
	protected Class&lt;?&gt;[] getServletConfigClasses() {
		return null;
	}
 
	@Override
	protected String[] getServletMappings() {
		return new String[] { "/" };
	}

}</pre> 
 <h4> 
  <div>
    第8步：构建和部署应用程序 
  </div> </h4> 
 <p> 有一点要记住，如：WebApplicationInitializer，Spring&nbsp;基于Java&nbsp;配置API是依赖Servlet3.0容器的。所以一定要确保你没有使用 Servlet 声明任何在 web.xml 小于3.0。对于我们的情况，我们要从应用程序中删除 web.xml 文件。 </p> 
 <p> 现在构建war&nbsp;或通过Maven&nbsp;命令行(mvn&nbsp;clean&nbsp;install)。&nbsp;部署&nbsp;war&nbsp;到Servlet3.0容器。 </p> 
 <div>
   运行应用程序，访问URL：
  <a target="_blank" href="http://localhost:8080/Spring4MVCFormValidationExample">http://localhost:8080/Spring4MVCFormValidationExample</a> 
 </div> 
 <div>
   得到的初始页面如下图所示： 
 </div> 
 <p> <img src="/uploads/tutorial/20160115/1-1601151H4345Q.png" alt=""> </p> 
 <div>
   现在，如果你提交，会得到验证错误(在 message.properties 中用户定义的消息) 
 </div> 
 <p> <img src="/uploads/tutorial/20160115/1-1601151H450330.png" alt=""> </p> 
 <div>
   现在提供示例输入 
 </div> 
 <p> <img src="/uploads/tutorial/20160115/1-1601151H512937.png" alt=""> </p> 
 <div>
   现在提交表单，结果如下： 
 </div> 
 <p> <img src="/uploads/tutorial/20160115/1-1601151H530O3.png" alt=""> </p> 
 <p> 到这里，完成！<br> 代码下载：<a target="_blank" href="http://pan.baidu.com/s/1nukn6HV">http://pan.baidu.com/s/1nukn6HV</a> </p>
 <br>      
</div></body></html>