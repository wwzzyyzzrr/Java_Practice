<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Mybatis trim标签</h1><div style="width:100%;float:left;" class="article-content">   
 <h2 style="font-family:Helvetica, Tahoma,  background-color:#FFFFFF;"> trim代替where/set标签 </h2> 
 <p style="font-family:Helvetica, Tahoma,  background-color:#FFFFFF;"> <span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">trim&nbsp;</span><span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">是更灵活用来去处多余关键字的标签，它可以用来实现&nbsp;</span><span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">where&nbsp;</span><span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">和&nbsp;</span><span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">set&nbsp;</span><span style="font-family:Helvetica, Tahoma,  font-size:14px;line-height:25.2000007629395px;background-color:#FFFFFF;">的效果。</span> </p> 
 <pre class="prettyprint lang-xml">&lt;!-- 使用 if/trim 代替 where(判断参数) - 将 User 类不为空的属性作为 where 条件 --&gt;  
&lt;select id="getUsertList_if_trim" resultMap="resultMap_User"&gt;  
    SELECT * 
      FROM user u
    &lt;trim prefix="WHERE" prefixOverrides="AND|OR"&gt;  
        &lt;if test="username !=null "&gt;  
            u.username LIKE CONCAT(CONCAT('%', #{username, jdbcType=VARCHAR}),'%')  
        &lt;/if&gt;  
        &lt;if test="sex != null and sex != '' "&gt;  
            AND u.sex = #{sex, jdbcType=INTEGER}  
        &lt;/if&gt;  
        &lt;if test="birthday != null "&gt;  
            AND u.birthday = #{birthday, jdbcType=DATE}  
        &lt;/if&gt;
    &lt;/trim&gt;     
&lt;/select&gt;  </pre> 
 <h3 style="font-size:1.2em;font-family:Helvetica, Tahoma, Arial, sans-serif;background-color:#FFFFFF;"> trim 代替 set </h3> 
 <pre class="prettyprint lang-xml">&lt;!-- if/trim代替set(判断参数) - 将 User 类不为空的属性更新 --&gt;  
&lt;update id="updateUser_if_trim" parameterType="com.yiibai.pojo.User"&gt;  
    UPDATE user  
    &lt;trim prefix="SET" suffixOverrides=","&gt;  
        &lt;if test="username != null and username != '' "&gt;  
            username = #{username},  
        &lt;/if&gt;  
        &lt;if test="sex != null and sex != '' "&gt;  
            sex = #{sex},  
        &lt;/if&gt;  
        &lt;if test="birthday != null "&gt;  
            birthday = #{birthday},  
        &lt;/if&gt;  
         
    &lt;/trim&gt;  
    WHERE user_id = #{user_id}  
&lt;/update&gt;  </pre> 
 <p> <strong>trim (对包含的内容加上 prefix,或者 suffix 等，前缀，后缀)</strong> </p>   
 <pre class="prettyprint lang-xml">&lt;select id="dynamicTrimTest" parameterType="Blog" resultType="Blog"&gt;
        select * from t_blog 
        &lt;trim prefix="where" prefixOverrides="and |or"&gt;
            &lt;if test="title != null"&gt;
                title = #{title}
            &lt;/if&gt;
            &lt;if test="content != null"&gt;
                and content = #{content}
            &lt;/if&gt;
            &lt;if test="owner != null"&gt;
                or owner = #{owner}
            &lt;/if&gt;
        &lt;/trim&gt;
    &lt;/select&gt;</pre> 
 <p> trim 元素的主要功能是可以在自己包含的内容前加上某些前缀，也可以在其后加上某些后缀，与之对应的属性是 prefix 和 suffix；可以把包含内容的首部某些内容覆盖，即忽略，也可以把尾部的某些内容覆盖，对应的属性是 prefixOverrides 和 suffixOverrides；正因为 trim 有这样的功能，所以我们也可以非常简单的利用 trim 来代替 where 元素的功能。 </p> 
 <p> <br> </p>
 <br>      
</div></body></html>