<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Gradle部署</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Gradle提供了几种部署构建工件(artifacts)存储库的方法。将工件的签名部署到<a target="_blank" href="http://www.yiibai.com/maven/" title="Maven">Maven</a>存储库时，还需要签署已发布的<code>POM</code>文件。</p> 
 <h2 id="h2--maven-"><a name="使用Maven插件发布" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用Maven插件发布</h2>
 <p>Gradle默认提供<code>maven-publish</code>插件。 它用于发布<code>gradle</code>脚本。 看看下面的代码。</p> 
 <pre><code class="lang-sql">apply plugin: 'java'
apply plugin: 'maven-publish'

publishing {
   publications {
      mavenJava(MavenPublication) {
         from components.java
      }
   }

   repositories {
      maven {
         url "$buildDir/repo"
      }
   }
}
</code></pre> 
 <p>当应用<a target="_blank" href="http://www.yiibai.com/java/" title="Java">Java</a>和<code>maven-publish</code>插件时，有几个发布选项。 看看下面的代码，它会将项目部署到远程仓库。</p> 
 <pre><code class="lang-sql">apply plugin: 'groovy'
apply plugin: 'maven-publish'

group 'workshop'
version = '1.0.0'

publishing {
   publications {
      mavenJava(MavenPublication) { 
         from components.java 
      }
   }

   repositories {
      maven {
          default credentials for a nexus repository manager
         credentials {
            username 'admin'
            password 'mypasswd'
         }
         // 发布maven存储库的url
         url "http://localhost:8080/nexus/content/repositories/releases/"
      }
   }
}
</code></pre> 
 <h2 id="h2--maven-gradle"><a name="将项目从Maven转换为Gradle" class="reference-link"></a><span class="header-link octicon octicon-link"></span>将项目从Maven转换为Gradle</h2>
 <p>有一个特殊的命令用于将Apache Maven <code>pom.xml</code>文件转换为<code>Gradle</code>构建文件，如果此任务已经知道使用的所有<code>Maven</code>插件。</p> 
 <p>在本节中，以下<code>pom.xml</code> 的<code>maven</code>配置将转换为<code>Gradle</code>项目。创建一个<code>D:/pom.xml</code>并使用下面的代码。</p> 
 <pre><code class="lang-xml">&lt;project xmlns = "http://maven.apache.org/POM/4.0.0" 
   xmlns:xsi = "http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation = "http://maven.apache.org/POM/4.0.0
   http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;

   &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
   &lt;groupId&gt;com.example.app&lt;/groupId&gt;
   &lt;artifactId&gt;example-app&lt;/artifactId&gt;
   &lt;packaging&gt;jar&lt;/packaging&gt;

   &lt;version&gt;1.0.0-SNAPSHOT&lt;/version&gt;

   &lt;dependencies&gt;
      &lt;dependency&gt;
         &lt;groupId&gt;junit&lt;/groupId&gt;
         &lt;artifactId&gt;junit&lt;/artifactId&gt;

         &lt;version&gt;4.11&lt;/version&gt;
         &lt;scope&gt;test&lt;/scope&gt;
      &lt;/dependency&gt;
   &lt;/dependencies&gt;

&lt;/project&gt;
</code></pre> 
 <p>可以命令行上使用以下命令，然后生成以下<code>Gradle</code>配置内容。</p>   
 <pre><code class="lang-shell">D:/&gt; gradle init --type pom
Starting a Gradle Daemon, 1 incompatible and 1 stopped Daemons could not be reused, use --status for details
:wrapper
:init
Maven to Gradle conversion is an incubating feature.

BUILD SUCCESSFUL

Total time: 11.542 secs
</code></pre> 
 <p><code>init</code>任务依赖于包装器任务，因此它创建了一个<code>Gradle</code>包装器。<br>生成的<code>build.gradle</code>文件类似于以下内容。</p> 
 <pre><code class="lang-sql">apply plugin: 'java'
apply plugin: 'maven'

group = 'com.yiibai.app'
version = '1.0.0-SNAPSHOT'

description = """"""

sourceCompatibility = 1.5
targetCompatibility = 1.5



repositories {

     maven { url "http://repo.maven.apache.org/maven2" }
}
dependencies {
    testCompile group: 'junit', name: 'junit', version:'4.11'
}
</code></pre>
 <br>      
</div></body></html>