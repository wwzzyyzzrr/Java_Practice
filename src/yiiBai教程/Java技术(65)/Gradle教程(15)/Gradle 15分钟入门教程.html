<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Gradle 15分钟入门教程</h1><div style="width:100%;float:left;" class="article-content">   
 <h2 id="h2-1-gradle-"><a name="1-Gradle入门介绍" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1-Gradle入门介绍</h2>
 <p>在阅读或实践本文中的实例前，必须首先确保已将<code>Gradle</code>插件安装到<code>Eclipse</code>中。如果没有，可以点击下面的链接查看<code>Gradle</code>安装说明：</p> 
 <ul> 
  <li><a target="_blank" href="http://www.yiibai.com/gradle/how-install-gradle-windows.html">http://www.yiibai.com/gradle/how-install-gradle-windows.html</a></li>
 </ul> 
 <p>本教程的目标：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/540181044_17854.png" alt=""></p> 
 <p>这是项目完成后的代码结构图：<br><img src="http://www.yiibai.com/uploads/images/201610/27/703161027_40763.png" alt=""></p> 
 <h2 id="h2-2-gradle-"><a name="2-创建Gradle项目" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2-创建Gradle项目</h2>
 <p>打开 <strong>Eclipse</strong>，单击并选择菜单 <code>File</code>-&gt;<code>New</code>-&gt;<code>Other</code> 并选择 <code>Gradle Project</code> 如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/27161013_77532.png" alt=""></p> 
 <p>点击下一步（<strong>Next</strong>)显示集成的一些说明，如下 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/27161014_16889.png" alt=""></p> 
 <p>点击下一步（<strong>Next</strong>)，并填入要创建的项目的名称 <code>HelloGradle</code> 并点击完成（<strong>Finish</strong>)，如下 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/27727161019_14795.png" alt=""></p> 
 <p>在第一次运行时，<code>Eclipse</code>将下载<code>Gradle</code>相关软件或要求指定本机安装 <code>Gradle</code> 的路径。请参考Eclipse+Gradle集成教程。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/27141013_70597.png" alt=""></p> 
 <blockquote> 
  <p>默认情况下，<code>Gradle</code>软件将通过<code>Eclipse</code>下载到 <code>C:/Users/{username}/.gradle</code>。不过可以配置更改到其它位置，此配置在本指南的最后一个附录中有说明。</p> 
 </blockquote> 
 <p><code>Gradle</code>将自动创建项目所需要的文件结构。其结构类似于<a target="_blank" href="http://www.yiibai.com/maven/" title="Maven">Maven</a>项目。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/703161027_40763.png" alt=""></p> 
 <p><strong>注意</strong>，这是一个 <code>gradle</code> 项目定义的项目结构，怎么样，是不是有点熟悉？</p> 
 <ul> 
  <li><code>src/main/java</code> - 文件夹包含所有java源文件。</li>
  <li><code>src/test/java</code> - 文件夹包含所有java测试用例。</li>
  <li><code>build.gradle</code> - 文件包含项目构建所使用的脚本。</li>
  <li><code>settings.gradle</code> - 文件将包含必要的一些设置，例如，任务或项目之间的依懒关系等。</li>
 </ul> 
 <h2 id="h2-3-gradle"><a name="3- 配置Gradle" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3- 配置Gradle</h2>
 <p><code>build.gradle</code>文件是配置项目中要使用的库的文件。它和<code>Maven</code>工程中的<code>pom.xml</code>相同。<br>打开<code>build.gradle</code>文件配置将要使用的库，默认生成的代码内容如下：</p> 
 <pre><code class="lang-groovy">/*
 * This build file was auto generated by running the Gradle 'init' task
 * by 'Administrator' at '16-10-30 下午4:20' with Gradle 3.1
 *
 * This generated file contains a sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.1/userguide/tutorial_java_projects.html
 */

// Apply the java plugin to add support for Java
apply plugin: 'java'

// In this section you declare where to find the dependencies of your project
repositories {
    // Use 'jcenter' for resolving your dependencies.
    // You can declare any Maven/Ivy/file repository here.
    jcenter()
}

// In this section you declare the dependencies for your production and test code
dependencies {
    // The production code uses the SLF4J logging API at compile time
    compile 'org.slf4j:slf4j-api:1.7.21'

    // Declare the dependency for your favourite test framework you want to use in your tests.
    // TestNG is also supported by the Gradle Test task. Just change the
    // testCompile dependency to testCompile 'org.testng:testng:6.8.1' and add
    // 'test.useTestNG()' to your build script.
    testCompile 'junit:junit:4.12'
}
</code></pre> 
 <p>向上面的源代码文件中添加以下代码 - </p> 
 <pre><code class="lang-groovy">// https://mvnrepository.com/artifact/org.apache.commons/commons-lang3

compile group: 'org.apache.commons', name: 'commons-lang3', version: '3.0'
</code></pre> 
 <p>添加后如下 -<br><img src="http://www.yiibai.com/uploads/images/201610/27/380161037_94215.png" alt=""></p> 
 <blockquote> 
  <p><strong>注意</strong>：如果<code>build.gradle</code>文件更新，Eclipse目前不会自动更新类路径。要在项目上或在<code>build.gradle</code>文件中点击右键选择 <strong>Gradle/Refresh Gradle</strong> 来更新项目。</p> 
 </blockquote> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/350161044_93699.png" alt=""></p> 
 <p>如果将新的库添加到 <code>build.gradle</code> 中声明，<code>Gradle</code> 将会把它们下载到本地计算机上。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/911161047_63918.png" alt=""></p> 
 <p>接下来，创建一些 <code>Java</code> 类来测试使用下载的类库，这里创建一个简单的 <code>CheckNumeric.java</code> 类，如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/804161051_56263.png" alt=""></p> 
 <p><code>CheckNumeric.java</code> 类的代码如下所示 -</p> 
 <pre><code class="lang-java">package com.yiibai.hellogradle;

import org.apache.commons.lang3.StringUtils;

public class CheckNumeric {

    public static void main(String[] args) {
        String text1 = "a12340";
        String text2 = "1234";

        boolean result1 = StringUtils.isNumeric(text1);
        boolean result2 = StringUtils.isNumeric(text2);

        System.out.println(text1 + " is a numeric? " + result1);
        System.out.println(text2 + " is a numeric? " + result2);

    }

}
</code></pre> 
 <p>运行 <code>CheckNumeric</code> 类应该会得到以下结果：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/281161055_31981.png" alt=""></p> 
 <p>可以在项目中清楚地看到使用的库，它在硬盘上的位置如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/662161057_90429.png" alt=""></p> 
 <h2 id="h2-4-gradle-"><a name="4-解释Gradle的操作原理" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4-解释Gradle的操作原理</h2>
 <p>上面的步骤中我们已经创建了项目，并且成功地运行了。该项目使用的<code>StringUtils</code>类，它是一个Apache类，而不是在JDK的标准库中的类。传统上做法，必须将这个类库复制到项目并声明类路径。但是，这里并不需要像传统方式那样复制和声明类路径。这些类库可以让<code>Gradle</code>来管理。 现在来看看<code>Gradle</code>是如何工作的，如下图中所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/839171005_48868.png" alt=""></p> 
 <p>上图显示了Gradle工作的整个过程，下面我们一步步来说明。</p> 
 <ul> 
  <li>在<code>build.gradle</code>中声明了该项目依赖于<code>common-lang3</code>库版本<code>3.0</code>。</li>
  <li>当使用Gradle工具刷新项目时，Gradle将检查指定的依赖库是否在计算机上有本地存储库。 如果没有，Gradle将从互联网的存储库中下载到本地。</li>
  <li>最后，Gradle将自动声明<code>Classpath</code>。</li>
 </ul> 
 <p>所以只需要在<code>build.gradle</code>文件中声明所有想要使用的库，这些库由<code>Gradle</code>自己管理。</p> 
 <h2 id="h2-5-"><a name="5-查看本地存储库" class="reference-link"></a><span class="header-link octicon octicon-link"></span>5-查看本地存储库</h2>
 <p>你会不会有这样的一个问题：本地存储库在我电脑的什么位置？如果是按上面所有套路来创建工程，那么看下图就知道了 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/612171029_42677.png" alt=""></p> 
 <p>而上面配置中使用到的 <code>commons-lang3</code> 库的路径在 <code>C:/Users/Administrator/.gradle/caches/modules-2/files-2.1/org.apache.commons</code>，如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/150171036_74517.png" alt=""></p> 
 <h2 id="h2-6-gradle-"><a name="6- Gradle位置配置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>6- Gradle位置配置</h2>
 <p>默认情况下，<code>Gradle</code>软件将通过 <code>Eclipse</code> 下载到<code>C:/Users/{username}/.gradle</code>目录中。但是可以将配置更改其位置。例如想要把这个下载目录修改为 <code>D:/worksp/gradle/Downloads</code>，那么可以按照以下操作来配置。</p> 
 <p>在 Eclipse 菜单中，打开 <code>Window</code> -&gt; <code>References</code> 选择目录 <code>D:/worksp/gradle/Downloads</code>，如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/261181025_14662.png" alt=""></p> 
 <p>右键单击项目，然后选择 <code>Gradle</code> -&gt; <code>Refresh Gradle Project</code>，<code>Gradle</code>将重新下载到刚刚设置的新文件夹。如下图所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/447181028_65914.png" alt=""></p> 
 <h2 id="h2-7-gradle-"><a name="7-在网络查看Gradle存储库" class="reference-link"></a><span class="header-link octicon octicon-link"></span>7-在网络查看Gradle存储库</h2>
 <p>问题：在哪里查找信息groupId，artifactId和版本呢？<br>可以去网站： <a target="_blank" href="http://mvnrepository.com">http://mvnrepository.com</a> ，例如在我们上面示例使用的 common-lang3 ，可在网站中搜索找到打开URL：<a target="_blank" href="http://mvnrepository.com/artifact/org.apache.commons/commons-lang3">http://mvnrepository.com/artifact/org.apache.commons/commons-lang3</a><br>如下图中所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/666181032_56727.png" alt=""></p> 
 <p>可根据你想要的一个版本，找到 gradle 的相关信息，如下所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201610/27/129181034_32562.png" alt=""></p>
 <br>      
</div></body></html>