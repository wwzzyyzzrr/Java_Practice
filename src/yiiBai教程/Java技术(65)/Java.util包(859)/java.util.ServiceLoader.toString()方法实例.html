<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">java.util.ServiceLoader.toString()方法实例</h1><div style="width:100%;float:left;" class="article-content">   
 <p> <strong>java.util.ServiceLoader.toString()&nbsp;</strong>方法返回描述此服务的字符串。</p> 
 <h2> 声明</h2> 
 <p> 以下是<strong>java.util.ServiceLoader.toString()</strong>方法的声明</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">String</span><span class="pln" style="margin: 0px; padding: 0px;"> toString</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span></pre> 
 <h2> 参数</h2> 
 <ul> 
  <li> <p> NA</p> </li> 
 </ul> 
 <h2> 返回值</h2> 
 <p> 此方法返回一个描述字符串</p> 
 <h2> 异常</h2> 
 <ul> 
  <li> <p> NA</p> </li> 
 </ul> 
 <h2> 例子</h2> 
 <p> 为了要注册的服务，需要在类路径中META-INF/service文件夹。在这个特殊的文件夹，需要与实现包含单个行列出执行的具体类名的接口的名称的文本文件。在例子中的文件的名称是com.yiibai.ServiceProvider和包含这一行：</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">com</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">yiibai</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceImplementation</span></pre> 
 <p> 我们的服务代码如下：</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">package</span><span class="pln" style="margin: 0px; padding: 0px;"> com</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">yiibai</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">class</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceImplementation</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">extends</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
    
    </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">String</span><span class="pln" style="margin: 0px; padding: 0px;"> getMessage</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">
        </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">return</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Hello World"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;">
    </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span></pre> 
 <p> 下面的代码加载是注册并使用它来从服务得到消息的服务：</p> 
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">package</span><span class="pln" style="margin: 0px; padding: 0px;"> com</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">yiibai</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">import</span><span class="pln" style="margin: 0px; padding: 0px;"> java</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">util</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceLoader</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;">

</span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">abstract</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">class</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">

   </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">static</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span><span class="pln" style="margin: 0px; padding: 0px;"> getDefault</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">()</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span><span class="pln" style="margin: 0px; padding: 0px;">

      </span><span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">// load our plugin</span><span class="pln" style="margin: 0px; padding: 0px;">
      </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceLoader</span>
  <serviceprovider>
   <span class="pln" style="margin: 0px; padding: 0px;"> serviceLoader </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
              </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceLoader</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">load</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">class</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="margin: 0px; padding: 0px;">

      </span>
   <span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">// print the serviceLoader as a string</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">System</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">out</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">println</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">""</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">+</span>
   <span class="pln" style="margin: 0px; padding: 0px;">serviceLoader</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">toString</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">());</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      
      </span>
   <span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">// checking if load was successful</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">for</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> provider </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">:</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> serviceLoader</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
         </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">return</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> provider</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">throw</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">new</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Error</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Something is wrong with registering the addon"</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
   </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="margin: 0px; padding: 0px;">

   </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">abstract</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">String</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> getMessage</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">();</span>
   <span class="pln" style="margin: 0px; padding: 0px;">

   </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">public</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">static</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">void</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> main</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">String</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[]</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> ignored</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">{</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="com" style="margin: 0px; padding: 0px; color: rgb(136, 0, 0);">// create a new provider and call getMessage()</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> provider </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="margin: 0px; padding: 0px;"> </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">getDefault</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">();</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
      </span>
   <span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">System</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">out</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">println</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span>
   <span class="pln" style="margin: 0px; padding: 0px;">provider</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span>
   <span class="pln" style="margin: 0px; padding: 0px;">getMessage</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">());</span>
   <span class="pln" style="margin: 0px; padding: 0px;">

   </span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="margin: 0px; padding: 0px;">
</span>
   <span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">}</span>
  </serviceprovider></pre> 
 <p> 让我们来编译和运行上面的程序，这将产生以下结果：</p>   
 <pre class="prettyprint prettyprinted" style="border-top-left-radius: 0px; border-top-right-radius: 0px; border-bottom-right-radius: 0px; border-bottom-left-radius: 0px; font-size: 12px; overflow: auto;">
<span class="pln" style="margin: 0px; padding: 0px;">java</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">util</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceLoader</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">[</span><span class="pln" style="margin: 0px; padding: 0px;">com</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="pln" style="margin: 0px; padding: 0px;">yiibai</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">.</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">ServiceProvider</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">]</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Hello</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">World</span></pre> 
 <br>      
</div></body></html>