<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring使用Setter依赖注入</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    一个简单的Spring例子来展示如何通过setter方法注入依赖项，最常用DI方法注入bean。 
  </div> 
 </div> 
 <div> 
  <h2> 1. IOutputGenerator </h2> 
  <div>
    接口和实现类 
  </div> 
  <pre>package com.yiibai.output;
 
public interface IOutputGenerator
{
	public void generateOutput();
}</pre> 
  <pre>package com.yiibai.output.impl;

import com.yiibai.output.IOutputGenerator;

public class CsvOutputGenerator implements IOutputGenerator {
	public void generateOutput() {
		System.out.println("This is Csv Output Generator");
	}
}</pre> 
  <h2> 2. Helper类 </h2> 
  <div>
    一个辅助类，之后使用Spring&nbsp;来注入 IOutputGenerator。 
  </div> 
  <pre>package com.yiibai.output;

import com.yiibai.output.IOutputGenerator;

public class OutputHelper {
	IOutputGenerator outputGenerator;

	public void generateOutput() {
		outputGenerator.generateOutput();
	}

	//DI via setter method
	public void setOutputGenerator(IOutputGenerator outputGenerator) {
		this.outputGenerator = outputGenerator;
	}
}</pre> 
  <h2> 3. Spring配置 </h2> 
  <div>
    配置Bean在Spring配置文件，并引用Bean&nbsp;“CsvOutputGenerator”&nbsp;到&nbsp;“OutputHelper”，通过property&nbsp;和&nbsp;ref&nbsp;标签。 
  </div> 
  <p> 在这种情况下，Spring将通过setter方法注入Bean&nbsp;“CsvOutputGenerator”&nbsp;到“OutputHelper”类，“setOutputGenerator(IOutputGenerator outputGenerator)”. </p> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean id="OutputHelper" class="com.yiibai.output.OutputHelper"&gt;
		&lt;property name="outputGenerator" ref="CsvOutputGenerator" /&gt;
	&lt;/bean&gt;
 
	&lt;bean id="CsvOutputGenerator" class="com.yiibai.output.impl.CsvOutputGenerator" /&gt;

&lt;/beans&gt;</pre> 
  <h2> 4. 执行结果 </h2> 
  <div>
    载入一切东西，并运行它。 
  </div>   
  <pre>package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.yiibai.output.OutputHelper;

public class App {
	public static void main(String[] args) {
		ApplicationContext context = new ClassPathXmlApplicationContext(
				"<span style="background-color:inherit;font-family:Monaco, Consolas, Courier, 'Lucida Console', monospace;font-size:inherit;line-height:1.5;">applicationContext.xml</span><span style="background-color:inherit;font-family:Monaco, Consolas, Courier, 'Lucida Console', monospace;font-size:inherit;line-height:1.5;">");</span> OutputHelper output = (OutputHelper)context.getBean("OutputHelper");
    	        output.generateOutput();
	}
}</pre> 
  <p> 输出结果 </p> 
  <pre>This is Csv Output Generator</pre> 
  <div>
    下载源代码&nbsp;– 
   <a target="_blank" href="http://pan.baidu.com/s/1c1tR6ZQ">http://pan.baidu.com/s/1c1tR6ZQ</a> 
  </div> 
  <div> 
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>