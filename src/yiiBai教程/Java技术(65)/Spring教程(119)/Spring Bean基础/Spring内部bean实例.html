<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring内部bean实例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    在Spring框架中，一个bean仅用于一个特定的属性，这是提醒其声明为一个内部bean。内部bean支持setter注入“property”和构造器注入"constructor-arg“。 
  </div> 
 </div> 
 <div> 
  <div>
    下面来看看一个详细的例子，演示使用 Spring 内部 bean 。 
  </div> 
  <pre>package com.yiibai.common;

public class Customer 
{
	private Person person;

	public Customer(Person person) {
		this.person = person;
	}

	public void setPerson(Person person) {
		this.person = person;
	}

	@Override
	public String toString() {
		return "Customer [person=" + person + "]";
	}
}</pre> 
  <pre>package com.yiibai.common;

public class Person 
{
	private String name;
	private String address;
	private int age;
	
	//getter and setter methods
	
	@Override
	public String toString() {
		return "Person [address=" + address + ", 
                               age=" + age + ", name=" + name + "]";
	}	
}</pre> 
  <div>
    很多时候，可以使用&nbsp;'ref'&nbsp;属性来引用“Person”&nbsp;bean到“Customer”&nbsp;Bean，person的属性如下： 
  </div> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean id="CustomerBean" class="com.yiibai.common.Customer"&gt;
		&lt;property name="person" ref="PersonBean" /&gt;
	&lt;/bean&gt;

	&lt;bean id="PersonBean" class="com.yiibai.common.Person"&gt;
		&lt;property name="name" value="yiibai" /&gt;
		&lt;property name="address" value="address1" /&gt;
		&lt;property name="age" value="28" /&gt;
	&lt;/bean&gt;
	
&lt;/beans&gt;</pre> 
  <div>
    在一般情况下，引用这样也没有问题，但由于“yiibai”&nbsp;persion&nbsp;bean&nbsp;只用于Customer&nbsp;bean，这是更好地声明&nbsp;“yiibai”&nbsp;person&nbsp;作为一个内部&nbsp;bean，如下： 
  </div> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean id="CustomerBean" class="com.yiibai.common.Customer"&gt;
		&lt;property name="person"&gt;
			&lt;bean class="com.yiibai.common.Person"&gt;
				&lt;property name="name" value="yiibai" /&gt;
				&lt;property name="address" value="address1" /&gt;
				&lt;property name="age" value="28" /&gt;
			&lt;/bean&gt;
		&lt;/property&gt;
	&lt;/bean&gt;
&lt;/beans&gt;</pre> 
  <div>
    内部 bean 也支持构造器注入如下： 
  </div>   
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean id="CustomerBean" class="com.yiibai.common.Customer"&gt;
		&lt;constructor-arg&gt;
			&lt;bean class="com.yiibai.common.Person"&gt;
				&lt;property name="name" value="yiibai" /&gt;
				&lt;property name="address" value="address1" /&gt;
				&lt;property name="age" value="28" /&gt;
			&lt;/bean&gt;
		&lt;/constructor-arg&gt;
	&lt;/bean&gt;
&lt;/beans&gt;</pre> 
  <div> 
   <strong>注意：</strong>
   <br> 
   <div>
     id 或 name 值在bean类是没有必要以一个内部 bean 呈现，它会简单地忽略Spring容器。 
   </div> 
  </div> 
  <p> 执行结果： </p> 
  <pre>package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App 
{
    public static void main( String[] args )
    {
    	ApplicationContext context = 
    	  new ClassPathXmlApplicationContext(new String[] {"Spring-Customer.xml"});

    	Customer cust = (Customer)context.getBean("CustomerBean");
    	System.out.println(cust);
     
    }
}</pre> 
  <p> 输出结果： </p> 
  <pre>Customer [person=Person [address=address1, age=28, name=yiibai]]</pre> 
  <div> 
   <br> 
  </div> 
 </div>
 <br>      
</div></body></html>