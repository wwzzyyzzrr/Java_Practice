<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring PropertyPlaceholderConfigurer实例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    很多时候，大多数Spring开发人员只是把整个部署的详细信息(数据库的详细信息，日志文件的路径)写在XML&nbsp;bean配置文件如下： 
  </div> 
 </div> 
 <div> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean id="customerDAO" class="com.yiibai.customer.dao.impl.JdbcCustomerDAO"&gt;

		&lt;property name="dataSource" ref="dataSource" /&gt;
	&lt;/bean&gt;

	&lt;bean id="customerSimpleDAO" class="com.yiibai.customer.dao.impl.SimpleJdbcCustomerDAO"&gt;

		&lt;property name="dataSource" ref="dataSource" /&gt;
	&lt;/bean&gt;

	&lt;bean id="dataSource"
		class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;

		&lt;property name="driverClassName" value="com.mysql.jdbc.Driver" /&gt;
		&lt;property name="url" value="jdbc:mysql://localhost:3306/yiibaijava" /&gt;
		&lt;property name="username" value="root" /&gt;
		&lt;property name="password" value="password" /&gt;
	&lt;/bean&gt;

&lt;/beans&gt;</pre> 
  <div>
    但是，在企业环境中，部署的细节通常只可以由系统管理员或数据库管理员来'触碰'，他们可能会拒绝直接访问你的bean的配置文件，它们会要求部署配置一个单独的文件，例如，一个简单的性能(properties)文件，仅具有部署细节。 
  </div> 
  <h2> PropertyPlaceholderConfigurer示例 </h2> 
  <p> 为了解决这个问题，可以使用&nbsp;PropertyPlaceholderConfigurer&nbsp;类通过一个特殊的格式在外部部署细节到一个属性(properties&nbsp;)文件，以及访问bean的配置文件&nbsp;–&nbsp;${variable}. </p> 
  <div>
    创建一个属性文件(database.properties)，包括数据库的详细信息，把它放到你的项目类路径。 
  </div> 
  <pre>jdbc.driverClassName=com.mysql.jdbc.Driver
	jdbc.url=jdbc:mysql://localhost:3306/yiibai_db
	jdbc.username=root
	jdbc.password=123456</pre> 
  <div>
    在声明bean配置文件和提供一个PropertyPlaceholderConfigurer映射到&nbsp;刚才创建的“database.properties”属性文件。 
  </div> 
  <pre>&lt;bean 
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;

		&lt;property name="location"&gt;
			&lt;value&gt;database.properties&lt;/value&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</pre> 
  <div>
    完整的示例 
  </div>   
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

	&lt;bean
		class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"&gt;

		&lt;property name="location"&gt;
			&lt;value&gt;database.properties&lt;/value&gt;
		&lt;/property&gt;
	&lt;/bean&gt;

	&lt;bean id="customerDAO" class="com.yiibai.customer.dao.impl.JdbcCustomerDAO"&gt;

		&lt;property name="dataSource" ref="dataSource" /&gt;
	&lt;/bean&gt;

	&lt;bean id="customerSimpleDAO" 
                class="com.yiibai.customer.dao.impl.SimpleJdbcCustomerDAO"&gt;

		&lt;property name="dataSource" ref="dataSource" /&gt;
	&lt;/bean&gt;

	&lt;bean id="dataSource"
		class="org.springframework.jdbc.datasource.DriverManagerDataSource"&gt;

		&lt;property name="driverClassName" value="${jdbc.driverClassName}" /&gt;
		&lt;property name="url" value="${jdbc.url}" /&gt;
		&lt;property name="username" value="${jdbc.username}" /&gt;
		&lt;property name="password" value="${jdbc.password}" /&gt;
	&lt;/bean&gt;

&lt;/beans&gt;</pre> 
  <div> 
   <div>
     可替代用法 
   </div> 还可以使用 PropertyPlaceholderConfigurer 于某个常量，分享给所有其他bean。例如，定义在一个属性文件中的日志文件的位置，并通过&nbsp;&nbsp;${log.filepath}&nbsp;访问不同的 bean 配置文件的属性值。 
  </div> 
 </div>
 <br>      
</div></body></html>