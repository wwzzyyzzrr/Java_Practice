<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring SimpleJdbcTemplate查询示例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    这里有几个例子来说明如何使用SimpleJdbcTemplate&nbsp;query()方法来查询或从数据库中提取数据。在&nbsp;JdbcTemplate&nbsp;query()&nbsp;方法，需要手动转换返回的结果转换为一个目标对象类型，并传递一个对象数组作为参数。在SimpleJdbcTemplate类，它是更加人性化和简单。 
  </div> 
 </div> 
 <div> 
  <div>
    jdbctemplate VS simplejdbctemplate
   <br> 请比较
   <a target="_blank" href="http://www.yiibai.com/spring/spring-simplejdbctemplate-querying-examples.html">&nbsp;JdbcTemplate类的示例</a>和
   <a target="_blank" href="http://www.yiibai.com/spring/spring-jdbctemplate-querying-examples.html">SimpleJdbcTemplate类</a>的示例。 
  </div> 
  <h2> 
   <div>
     1.查询单行 
   </div> </h2> 
  <div>
    这里有向你展示了如何查询或从数据库中提取单行的两种方式，并将其转换成一个模型类。 
  </div> 
  <h2> 1.1 自定义RowMapper </h2> 
  <div>
    在一般情况下，它总是建议来实现 RowMapper 接口来创建自定义的RowMapper，以满足您的需求。 
  </div> 
  <pre>package com.yiibai.customer.model;

import java.sql.ResultSet;
import java.sql.SQLException;

import org.springframework.jdbc.core.RowMapper;

public class CustomerRowMapper implements RowMapper
{
	public Object mapRow(ResultSet rs, int rowNum) throws SQLException {
		Customer customer = new Customer();
		customer.setCustId(rs.getInt("CUST_ID"));
		customer.setName(rs.getString("NAME"));
		customer.setAge(rs.getInt("AGE"));
		return customer;
	}
	
}</pre> 
  <pre>public Customer findByCustomerId(int custId){
		 
	String sql = "SELECT * FROM CUSTOMER WHERE CUST_ID = ?";
 
	Customer customer = getSimpleJdbcTemplate().queryForObject(
			sql,  new CustomerParameterizedRowMapper(), custId);
	
	return customer;
}</pre> 
  <h2> 1.2 BeanPropertyRowMapper </h2> 
  <div>
    在SimpleJdbcTemplate类，需要使用“ParameterizedBeanPropertyRowMapper' 代替 'BeanPropertyRowMapper”。 
  </div> 
  <pre>public Customer findByCustomerId2(int custId){
		 
	String sql = "SELECT * FROM CUSTOMER WHERE CUST_ID = ?";
 
	Customer customer = getSimpleJdbcTemplate().queryForObject(sql,
          ParameterizedBeanPropertyRowMapper.newInstance(Customer.class), custId);
	
	return customer;
}</pre> 
  <h2> 
   <div>
     2，查询多行 
   </div> </h2> 
  <div>
    从数据库查询或提取多行记录，并将其转换成一个列表。 
  </div> 
  <h2> 2.1 ParameterizedBeanPropertyRowMapper </h2> 
  <pre>public List&lt;Customer&gt; findAll(){
		
	String sql = "SELECT * FROM CUSTOMER";
		
	List&lt;Customer&gt; customers = 
		getSimpleJdbcTemplate().query(sql, 
		   ParameterizedBeanPropertyRowMapper.newInstance(Customer.class));
		
	return customers;
}</pre> 
  <h2> 
   <div>
     3.查询单值 
   </div> </h2> 
  <div>
    查询或提取数据库中的单个列的值。 
  </div> 
  <h2> 
   <div>
     3.1单列名 
   </div> </h2> 
  <div>
    它显示了如何查询单个列名作为字符串。 
  </div> 
  <pre>public String findCustomerNameById(int custId){
		
	String sql = "SELECT NAME FROM CUSTOMER WHERE CUST_ID = ?";
		 
	String name = getSimpleJdbcTemplate().queryForObject(
		sql, String.class, custId);
	
	return name;
		
}</pre> 
  <h2> 
   <div>
     3.2、行总数 
   </div> </h2> 
  <div>
    它展示了如何从数据库中查询行的总数。 
  </div>   
  <pre>public int findTotalCustomer(){
		
	String sql = "SELECT COUNT(*) FROM CUSTOMER";
		 
	int total = getSimpleJdbcTemplate().queryForInt(sql);
				
	return total;
}</pre> 
  <p> 运行它 </p> 
  <pre>package com.yiibai.common;

import java.util.ArrayList;
import java.util.List;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import com.yiibai.customer.dao.CustomerDAO;
import com.yiibai.customer.model.Customer;

public class SimpleJdbcTemplateApp 
{
    public static void main( String[] args )
    {
    	 ApplicationContext context = 
    		new ClassPathXmlApplicationContext("Spring-Customer.xml");
    	 
         CustomerDAO customerSimpleDAO = 
                (CustomerDAO) context.getBean("customerSimpleDAO");
		 
         Customer customerA = customerSimpleDAO.findByCustomerId(1);
         System.out.println("Customer A : " + customerA);
         
         Customer customerB = customerSimpleDAO.findByCustomerId2(1);
         System.out.println("Customer B : " + customerB);
         
         List&lt;Customer&gt; customerAs = customerSimpleDAO.findAll();
         for(Customer cust: customerAs){
         	 System.out.println("Customer As : " + customerAs);
         }
        
         List&lt;Customer&gt; customerBs = customerSimpleDAO.findAll2();
         for(Customer cust: customerBs){
         	 System.out.println("Customer Bs : " + customerBs);
         }
         
         String customerName = customerSimpleDAO.findCustomerNameById(1);
         System.out.println("Customer Name : " + customerName);
         
         int total = customerSimpleDAO.findTotalCustomer();
         System.out.println("Total : " + total);
         
    }
}</pre> 
  <h2> 总结 </h2> 
  <div>
    SimpleJdbcTemplate 是不能代替&nbsp;JdbcTemplate&nbsp;的，它只是一个Java5的友好补充它。 
  </div> 
  <p> <br> </p> 
  <div>
    下载代码 –&nbsp;
   <a target="_blank" href="http://pan.baidu.com/s/1eRisz6M">http://pan.baidu.com/s/1eRisz6M</a> 
  </div> 
 </div>
 <br>      
</div></body></html>