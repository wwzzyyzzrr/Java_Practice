<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring SimpleJdbcTemplate类命名参数实例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    在JdbcTemplate，这些SQL参数通过一个特殊的占位符“？”符号表示，并通过位置绑定。现在的问题是，每当参数的顺序发生了变化，你必须也要改变参数绑定，这是容易出错，繁琐的维护。 
  </div> 
 </div> 
 <div> 
  <p> 为了解决这个问题，可以使用“命名参数”，SQL参数是由一个冒号开始后续定义的名称，而不是位置。在另外的，命名参数只是在SimpleJdbcTemplate类和NamedParameterJdbcTemplate支持。 </p> 
  <div>
    请参见下面的三个例子用来使用命名参数在Spring。 
  </div> 
  <h2> 示例1 </h2> 
  <div>
    例子向您展示如何使用命名参数在一个 INSERT 语句。 
  </div> 
  <pre>//insert with named parameter
	public void insertNamedParameter(Customer customer){
			
		String sql = "INSERT INTO CUSTOMER " +
			"(CUST_ID, NAME, AGE) VALUES (:custId, :name, :age)";
			
		Map&lt;String, Object&gt; parameters = new HashMap&lt;String, Object&gt;();
		parameters.put("custId", customer.getCustId());
		parameters.put("name", customer.getName());
		parameters.put("age", customer.getAge());
			
		getSimpleJdbcTemplate().update(sql, parameters);
				
	}</pre> 
  <h2> 示例 2 </h2> 
  <div>
    例子来说明如何使用命名参数在批处理操作语句。 
  </div> 
  <pre>public void insertBatchNamedParameter(final List&lt;Customer&gt; customers){
			
		String sql = "INSERT INTO CUSTOMER " +
		"(CUST_ID, NAME, AGE) VALUES (:custId, :name, :age)";
				
		List&lt;SqlParameterSource&gt; parameters = new ArrayList&lt;SqlParameterSource&gt;();
		for (Customer cust : customers) {
			parameters.add(new BeanPropertySqlParameterSource(cust)); 
		}
		
		getSimpleJdbcTemplate().batchUpdate(sql,
			parameters.toArray(new SqlParameterSource[0]));
	}</pre> 
  <h2> 示例 3 </h2> 
  <div>
    另一个例子，在一个批处理操作语句中使用命名参数。 
  </div>   
  <pre>public void insertBatchNamedParameter2(final List&lt;Customer&gt; customers){
			
	   SqlParameterSource[] params = 
		SqlParameterSourceUtils.createBatch(customers.toArray());
		
	   getSimpleJdbcTemplate().batchUpdate(
		"INSERT INTO CUSTOMER (CUST_ID, NAME, AGE) VALUES (:custId, :name, :age)",
		params);
		
	}</pre> 
  <div style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;background-color:inherit;"> 
   <br> 
  </div> 
  <div>
    下载源代码 –&nbsp;
   <a target="_blank" href="http://pan.baidu.com/s/1hqPrzJu">http://pan.baidu.com/s/1hqPrzJu</a> 
  </div> 
  <div> 
  </div> 
 </div>
 <br>      
</div></body></html>