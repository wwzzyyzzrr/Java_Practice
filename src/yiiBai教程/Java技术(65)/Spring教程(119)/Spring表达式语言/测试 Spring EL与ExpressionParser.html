<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">测试 Spring EL与ExpressionParser</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    Spring表达式语言(SpEL)支持多种功能，并且可以测试这个特殊的“ExpressionParser”接口的表达式功能。 
  </div> 
 </div> 
 <div> 
  <div>
    下面是两个代码片段，展示了使用 Spring&nbsp;EL 的基本用法。 
  </div> 
  <div>
    使用SpEL来计算评估文字字符串表达式。 
  </div> 
  <pre>ExpressionParser parser = new SpelExpressionParser();
Expression exp = parser.parseExpression("'put spel expression here'");
String msg = exp.getValue(String.class);&nbsp;</pre> 
  <p> 使用SpEL来计算评估&nbsp;bean&nbsp;属性&nbsp;– “item.name”. </p> 
  <pre>Item item = new Item("yiibai", 100);
StandardEvaluationContext itemContext = new StandardEvaluationContext(item);
		
//display the value of item.name property
Expression exp = parser.parseExpression("name");
String msg = exp.getValue(itemContext, String.class);</pre> 
  <div>
    举几个例子来测试使用SpEL。这些代码和注释应该是自我探索。 
  </div> 
  <pre>import org.springframework.expression.Expression;
import org.springframework.expression.ExpressionParser;
import org.springframework.expression.spel.standard.SpelExpressionParser;
import org.springframework.expression.spel.support.StandardEvaluationContext;

public class App {
	public static void main(String[] args) {
		
		ExpressionParser parser = new SpelExpressionParser();
		
		//literal expressions 
		Expression exp = parser.parseExpression("'Hello World'");
		String msg1 = exp.getValue(String.class);
		System.out.println(msg1);
		
		//method invocation
		Expression exp2 = parser.parseExpression("'Hello World'.length()");  
		int msg2 = (Integer) exp2.getValue();
		System.out.println(msg2);
		
		//Mathematical operators
		Expression exp3 = parser.parseExpression("100 * 2");  
		int msg3 = (Integer) exp3.getValue();
		System.out.println(msg3);
		
		//create an item object
		Item item = new Item("yiibai", 100);
		//test EL with item object
		StandardEvaluationContext itemContext = new StandardEvaluationContext(item);
		
		//display the value of item.name property
		Expression exp4 = parser.parseExpression("name");
		String msg4 = exp4.getValue(itemContext, String.class);
		System.out.println(msg4);
		
		//test if item.name == 'yiibai'
		Expression exp5 = parser.parseExpression("name == 'yiibai'");
		boolean msg5 = exp5.getValue(itemContext, Boolean.class);
		System.out.println(msg5);
		
	}
}</pre>   
  <pre>public class Item {

	private String name;

	private int qty;

	public Item(String name, int qty) {
		super();
		this.name = name;
		this.qty = qty;
	}

	//...
}</pre> 
  <p> 输出结果 </p> 
  <pre class="prettyprint lang-bsh">Hello World
11
200
yiibai
true</pre> 
  <p> <br> </p> 
  <div> 
   <strong>注</strong>
   <br> 
   <div>
     本文展示了Spring表达式解析器的一些基本用法，访问
    <a target="_blank" href="http://docs.spring.io/spring/docs/3.0.x/spring-framework-reference/html/expressions.html">官方Spring表达文档</a>，使用SpEL的例子。 
   </div> 
  </div> 
  <div> 
   <br> 
  </div> 
  <div>
    下载代码 –&nbsp;
   <a target="_blank" href="http://pan.baidu.com/s/1hrd45Sw">http://pan.baidu.com/s/1hrd45Sw</a> 
  </div> 
 </div>
 <br>      
</div></body></html>