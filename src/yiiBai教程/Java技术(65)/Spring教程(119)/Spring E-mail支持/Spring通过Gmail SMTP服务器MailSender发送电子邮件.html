<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring通过Gmail SMTP服务器MailSender发送电子邮件</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    Spring提供了一个有用的“org.springframework.mail.javamail.JavaMailSenderImpl”类，通过JavaMail&nbsp;API&nbsp;简化邮件发送过程。这里有一个项目中使用Spring “JavaMailSenderImpl”通过Gmail SMTP服务器发送电子邮件。 
  </div> 
 </div> 
 <div> 
  <h2> 
   <div>
     1.&nbsp;Spring邮件发件人 
   </div> </h2> 
  <div>
    Java 类使用 Spring 的 MailSender 接口发送电子邮件。 
  </div> 
  <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <em>File : MailMail.java</em> </p> 
  <pre>package com.yiibai.common;

import org.springframework.mail.MailSender;
import org.springframework.mail.SimpleMailMessage;

public class MailMail
{
	private MailSender mailSender;
	
	public void setMailSender(MailSender mailSender) {
		this.mailSender = mailSender;
	}
	
	public void sendMail(String from, String to, String subject, String msg) {

		SimpleMailMessage message = new SimpleMailMessage();
		
		message.setFrom(from);
		message.setTo(to);
		message.setSubject(subject);
		message.setText(msg);
		mailSender.send(message);	
	}
}</pre> 
  <h2> 
   <div>
     2.&nbsp;bean配置文件 
   </div> </h2> 
  <div>
    配置 mailSender&nbsp;bean 并指定Gmail的SMTP服务器电子邮件的详细信息。 
  </div> 
  <div>
    注
   <br> Gmail的配置细节(这里是墙，该翻的翻)&nbsp;–&nbsp;
   <a target="_blank" href="http://mail.google.com/support/bin/answer.py?hl=en&amp;answer=13287">http://mail.google.com/support/bin/answer.py?hl=en&amp;answer=13287</a> 
  </div> 
  <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <em>File : Spring-Mail.xml</em> </p> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-2.5.xsd"&gt;

&lt;bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl"&gt;
	&lt;property name="host" value="smtp.gmail.com" /&gt;
	&lt;property name="port" value="587" /&gt;
	&lt;property name="username" value="yiibai.com@gmail.com" /&gt;
	&lt;property name="password" value="password" /&gt;
		
	&lt;property name="javaMailProperties"&gt;
	   &lt;props&gt;
       	      &lt;prop key="mail.smtp.auth"&gt;true&lt;/prop&gt;
       	      &lt;prop key="mail.smtp.starttls.enable"&gt;true&lt;/prop&gt;
       	   &lt;/props&gt;
	&lt;/property&gt;
&lt;/bean&gt;
	
&lt;bean id="mailMail" class="com.yiibai.common.MailMail"&gt;
	&lt;property name="mailSender" ref="mailSender" /&gt;
&lt;/bean&gt;
	
&lt;/beans&gt;</pre> 
  <h2> 运行它 </h2>   
  <pre>package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App 
{
    public static void main( String[] args )
    {
    	ApplicationContext context = 
             new ClassPathXmlApplicationContext("Spring-Mail.xml");
    	 
    	MailMail mm = (MailMail) context.getBean("mailMail");
        mm.sendMail("from@no-spam.com",
    		   "to@no-spam.com",
    		   "Testing123", 
    		   "Testing only \n\n Hello Spring Email Sender");
        
    }
}</pre> 
  <div style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;background-color:inherit;"> 
   <br> 
  </div> 
  <div style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;background-color:inherit;">
    下载源代码 –
   <span style="background-color:inherit;">&nbsp;&nbsp;<a target="_blank" href="http://pan.baidu.com/s/1gepbWEf">http://pan.baidu.com/s/1gepbWEf</a></span> 
  </div> 
 </div>
 <br>      
</div></body></html>