<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Spring过滤器组件自动扫描</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    在这个
   <a target="_blank" href="http://www.yiibai.com/spring/spring-auto-scanning-components.html">Spring自动组件扫描的教程</a>，您已经了解如何使Spring自动扫描您的组件。在这篇文章中，我们将展示如何使用组件过滤器自动扫描过程。 
  </div> 
 </div> 
 <div> 
  <h2> 
   <div>
     1.过滤组件&nbsp;- 包含 
   </div> </h2> 
  <div>
    参见下面的例子中使用Spring&nbsp;“过滤”&nbsp;扫描并注册匹配定义“regex”，即使该类组件的名称未标注&nbsp;@Component&nbsp;。 
  </div> 
  <p> DAO 层 </p> 
  <pre>package com.yiibai.customer.dao;

public class CustomerDAO 
{
	@Override
	public String toString() {
		return "Hello , This is CustomerDAO";
	}	
}</pre> 
  <p> Service 层 </p> 
  <pre>package com.yiibai.customer.services;

import org.springframework.beans.factory.annotation.Autowired;
import com.yiibai.customer.dao.CustomerDAO;

public class CustomerService 
{
	@Autowired
	CustomerDAO customerDAO;

	@Override
	public String toString() {
		return "CustomerService [customerDAO=" + customerDAO + "]";
	}
		
}</pre> 
  <p> Spring 过滤 </p> 
  <pre>&lt;beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
	http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
	http://www.springframework.org/schema/context
	http://www.springframework.org/schema/context/spring-context-2.5.xsd"&gt;

	&lt;context:component-scan base-package="com.yiibai" &gt;

		&lt;context:include-filter type="regex" 
                       expression="com.yiibai.customer.dao.*DAO.*" /&gt;

		&lt;context:include-filter type="regex" 
                       expression="com.yiibai.customer.services.*Service.*" /&gt;

	&lt;/context:component-scan&gt;

&lt;/beans&gt;</pre> 
  <p> 执行 </p> 
  <pre>package com.yiibai.common;

import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

import com.yiibai.customer.services.CustomerService;

public class App 
{
    public static void main( String[] args )
    {
    	ApplicationContext context = 
		new ClassPathXmlApplicationContext(new String[] {"Spring-AutoScan.xml"});

    	CustomerService cust = (CustomerService)context.getBean("customerService");
    	System.out.println(cust);
    	
    }
}</pre> 
  <p> 输出 </p>   
  <pre>CustomerService [customerDAO=Hello , This is CustomerDAO]</pre> 
  <div>
    在这个XML过滤中，所有文件的名称中包含 DAO 或&nbsp;Service(*DAO.*,&nbsp;*Services.*) 单词将被检测并在 Spring 容器中注册。 
  </div> 
  <h2> 
   <div>
     2.过滤组件&nbsp;-&nbsp;不包含 
   </div> </h2> 
  <div>
    另外，您还可以排除指定组件，以避免&nbsp;Spring&nbsp;检测和&nbsp;Spring&nbsp;容器注册。不包括在这些文件中标注有&nbsp;@Service&nbsp;。 
  </div> 
  <pre>&lt;context:component-scan base-package="com.yiibai.customer" &gt;
		&lt;context:exclude-filter type="annotation" 
			expression="org.springframework.stereotype.Service" /&gt;		
	&lt;/context:component-scan&gt;</pre> 
  <div>
    不包括那些包含DAO这个词组文件名。 
  </div> 
  <pre>&lt;context:component-scan base-package="com.yiibai" &gt;
		&lt;context:exclude-filter type="regex" 
			expression="com.yiibai.customer.dao.*DAO.*" /&gt;		
	&lt;/context:component-scan&gt;</pre> 
  <div style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;background-color:inherit;"> 
   <br> 
  </div> 
  <div>
    下载代码 –&nbsp;
   <a target="_blank" href="http://pan.baidu.com/s/1pKnzB2F">http://pan.baidu.com/s/1pKnzB2F</a> 
  </div> 
 </div>
 <br>      
</div></body></html>