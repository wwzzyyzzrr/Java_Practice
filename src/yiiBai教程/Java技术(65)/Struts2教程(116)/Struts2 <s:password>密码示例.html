<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Struts2 &lt;s:password&gt;密码示例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <p> <span style="line-height:1.5;">在这一章节中，我们创建一个Web工程为：</span><span style="line-height:1.5;">struts2passwd，演示</span><span style="line-height:1.5;">&lt;s:password&gt;的使用。完整的工程目录结构如下：</span> </p> 
  <p style="background-color:inherit;"> <img src="/uploads/tutorial/20151114/1-1511141A6233W.png" alt=""> </p> 
 </div> 
 <p> 在Struts2中，可以使用&lt;s:password&gt;来创建HTML密码字段。例如，可以声明“s:password”键属性或者标签和名称属性。 </p> 
 <pre>&lt;s:password key="password" /&gt;
//or
&lt;s:textfield label="Password" name="password" /&gt;</pre> 
 <div>
   两者都产生相同的HTML输出(在默认的XHTML主题)。 
 </div> 
 <pre>&lt;td class="tdLabel"&gt;
  &lt;label for="registerUser_password" class="label"&gt;Password:&lt;/label&gt;
&lt;/td&gt; 
&lt;td&gt;
  &lt;input type="password" name="password" id="registerUser_password"/&gt;
&lt;/td&gt;</pre> 
 <h2> Struts2 &lt;s:password&gt; 示例 </h2> 
 <div>
   一个页面，“密码”和“确认密码”字段，并做了验证，以确保“确认密码”是与“密码”相匹配。 
 </div> 
 <h2> 1.&nbsp;属性文件 </h2> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>global.properties</strong> </p> 
 <pre>#Global messages
username = 用名名
password = 密码
confirmPassword = 确认密码
submit = 提交</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>RegisterAction.properties</strong> </p> 
 <pre>#error message
username.required = Username is required
password.required = Password is required
cpassword.required = Confirm password is required
cpassword.notmatch = Confirm password is not match</pre> 
 <h2> 2. 动作 - Action </h2> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>RegisterAction.java</strong> </p> 
 <pre>package com.yiibai.user.action;

import com.opensymphony.xwork2.ActionSupport;

public class RegisterAction extends ActionSupport{

	private String username;
	private String password;
	private String confirmPassword;
	
	public String getPassword() {
		return password;
	}

	public void setPassword(String password) {
		this.password = password;
	}

	public String getConfirmPassword() {
		return confirmPassword;
	}

	public void setConfirmPassword(String confirmPassword) {
		this.confirmPassword = confirmPassword;
	}

	public String getUsername() {
		return username;
	}

	public void setUsername(String username) {
		this.username = username;
	}

	//business logic
	public String execute() {

		return "SUCCESS";

	}

	//simple validation
	public void validate(){
		if("".equals(getUsername())){
			addFieldError("username", getText("username.required"));
		}
		if("".equals(getPassword())){
			addFieldError("password", getText("password.required"));
		}
		if("".equals(getConfirmPassword())){
			addFieldError("confirmPassword", getText("cpassword.required"));
		}
		
		if(!(getPassword().equals(getConfirmPassword()))){
			addFieldError("confirmPassword", getText("cpassword.notmatch"));
		}
	}

}</pre> 
 <h2> 3. 视图页面 </h2> 
 <div>
   结果页面使用 Struts2&nbsp;的“s:password”标签来创建一个HTML密码字段。 
 </div> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>register.jsp</strong> </p> 
 <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;Struts 2 - password 示例&lt;/h1&gt;

&lt;s:form action="registerUser" namespace="/user"&gt;

	&lt;s:textfield key="username" /&gt;
	&lt;s:password key="password" /&gt;
	&lt;s:password key="confirmPassword" /&gt;
	
	&lt;s:submit key="submit" name="submit" /&gt;
	
&lt;/s:form&gt;

&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>welcome.jsp</strong> </p>   
 <pre>&lt;%@ page contentType="text/html;charset=UTF-8" %&gt;
&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;

&lt;body&gt;
&lt;h1&gt;Struts 2 - password 示例&lt;/h1&gt;

&lt;h2&gt;Password : &lt;s:property value="password"/&gt;&lt;/h2&gt;
&lt;h2&gt;Confirm Password : &lt;s:property value="%{confirmPassword}"/&gt;&lt;/h2&gt; 

&lt;/body&gt;
&lt;/html&gt;</pre> 
 <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;background-color:#FFFFFF;"> 4. struts.xml </h2> 
 <pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
 
&lt;struts&gt;

   &lt;constant name="struts.custom.i18n.resources" value="global" /&gt;
   &lt;constant name="struts.devMode" value="true" /&gt;
 	
   &lt;package name="user" namespace="/user" extends="struts-default"&gt;
	&lt;action name="register"&gt;
		&lt;result&gt;/pages/register.jsp&lt;/result&gt;
	&lt;/action&gt;
	&lt;action name="registerUser" 
                class="com.yiibai.user.action.RegisterAction"&gt;
		&lt;result name="SUCCESS"&gt;/pages/welcome.jsp&lt;/result&gt;
		&lt;result name="input"&gt;/pages/register.jsp&lt;/result&gt;
	&lt;/action&gt;
   &lt;/package&gt;
	
&lt;/struts&gt;</pre> 
 <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;background-color:#FFFFFF;"> 5. 运行示例 </h2> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <em>http://localhost:8080/struts2passwd/user/register.action</em> </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <em><img src="/uploads/tutorial/20151114/1-1511141AFD03.png" alt=""><br> </em> </p> 
 <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;background-color:#FFFFFF;"> 参考 </h2> 
 <ol style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> 
  <li style="background-color:inherit;"> <a target="_blank" href="http://struts.apache.org/2.x/docs/password.html">Struts2密码文档</a> </li> 
 </ol>
 <br>      
</div></body></html>