<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Struts2 &lt;sx:datetimepicker&gt;示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 在Struts2，dojo ajax标签“&lt;sx:datetimepicker&gt;”将呈现一个文本框和追加后面的日历图标，点击日历图标会提示的日期时间选择器组件。 </p> 
 <p> <span style="font-family:Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif, sans-serif;line-height:22px;color:#535B60;background-color:#FFFFFF;">这里创建一个Web工程：strut2<span style="font-family:Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif, sans-serif;color:#333333;">datetimepicker</span>，来演示</span><span style="font-family:Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif, sans-serif;line-height:22px;color:#535B60;background-color:#FFFFFF;">在多个复选框</span><span style="font-family:Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 微软雅黑, STHeiti, 'WenQuanYi Micro Hei', SimSun, sans-serif, sans-serif;line-height:22px;color:#535B60;background-color:#FFFFFF;">如何设置的默认值，整个项目的结构如下图所示：</span> </p> 
 <p> <img src="/uploads/tutorial/20151115/1-1511151Q513B8.png" alt=""> </p> 
 <p> 要创建一个日期时间接组成部分，确保：<br> 1. 下载 struts2-dojo-plugin.jar 库(myeclipse中在增加struts2时，打上这个选项就可以了)<br> 2. 包括“struts-dojo-tags”标签，并输出它的头。 </p> 
 <pre>&lt;%@ taglib prefix="sx" uri="/struts-dojo-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;sx:head /&gt;
&lt;/head&gt;</pre> 
 <p> 例如： </p> 
 <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;%@ taglib prefix="sx" uri="/struts-dojo-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;sx:head /&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;sx:datetimepicker name="date2" label="Format (dd-MMM-yyyy)" 
displayFormat="dd-MMM-yyyy" value="%{'2010-01-01'}"/&gt;
...</pre> 
 <p> 产生下面的HTML，一些Dojo和JavaScript库创建日期和时间接组件。 </p> 
 <pre>&lt;html&gt; 
&lt;head&gt; 
&lt;script language="JavaScript" type="text/javascript"&gt; 
    // Dojo configuration
    djConfig = {
        isDebug: false,
        bindEncoding: "UTF-8"
          ,baseRelativePath: "/Struts2Example/struts/dojo/"
          ,baseScriptUri: "/Struts2Example/struts/dojo/"
         ,parseWidgets : false
    };
&lt;/script&gt; 
&lt;script language="JavaScript" type="text/javascript"
        src="/Struts2Example/struts/dojo/struts_dojo.js"&gt;&lt;/script&gt; 

&lt;script language="JavaScript" type="text/javascript"
        src="/Struts2Example/struts/ajax/dojoRequire.js"&gt;&lt;/script&gt; 

&lt;link rel="stylesheet" href="/Struts2Example/struts/xhtml/styles.css" type="text/css"/&gt; 

&lt;script language="JavaScript" src="/Struts2Example/struts/utils.js" 
type="text/javascript"&gt;&lt;/script&gt; 

&lt;script language="JavaScript" src="/Struts2Example/struts/xhtml/validation.js" 
type="text/javascript"&gt;&lt;/script&gt; 

&lt;script language="JavaScript" src="/Struts2Example/struts/css_xhtml/validation.js" 
type="text/javascript"&gt;&lt;/script&gt; 
&lt;/head&gt; 
...
&lt;td class="tdLabel"&gt;
&lt;label for="widget_1291193434" class="label"&gt;Format (dd-MMM-yyyy):
&lt;/label&gt;&lt;/td&gt; 
&lt;td&gt;
&lt;div dojoType="struts:StrutsDatePicker"    id="widget_1291193434"    
value="2010-01-01"    name="date2"    inputName="dojo.date2"    
displayFormat="dd-MMM-yyyy"  saveFormat="rfc"&gt;&lt;/div&gt; 
&lt;/td&gt; 
&lt;/tr&gt; 
&lt;script language="JavaScript" type="text/javascript"&gt;
djConfig.searchIds.push("widget_1291193434");&lt;/script&gt;</pre> 
 <h2> Struts2 &lt;s:datetimepicker&gt; 示例 </h2> 
 <p> 在一个完整的全面&lt;s:datetimepicker&gt;标签例子来生成一个DateTimePicker控件，并展示了使用OGNL和Java属性的默认日期设置为“DateTimePicker”组件。 </p> 
 <h2> 2. 动作类 </h2> 
 <p> Action类存储选择的日期。 </p> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>DateTimePickerAction.java</strong> </p> 
 <pre>package com.yiibai.common.action;

import java.util.Date;
import com.opensymphony.xwork2.ActionSupport;

public class DateTimePickerAction extends ActionSupport{

	private Date date1;
	private Date date2;
	private Date date3;
	
	//return today date
	public Date getTodayDate(){
		
		return new Date();
	}

	//getter and setter methods
	public String execute() throws Exception{
		
		return SUCCESS;
	}

	public String display() {
		return NONE;
	}
	
}</pre> 
 <h2> 3. 结果页面 </h2> 
 <p> 通过“&lt;s:datetimepicker&gt;”日期时间选择器组件标签渲染，通过Java属性和OGNL设置默认日期。 </p> 
 <div class="note" style="border:1px solid #D1D1E8;padding:20px;margin:20px 0px;color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#E6E6FC;">
   确保把“struts-dojo-tags”标签，并渲染到&lt;sx:head /&gt; 
  <pre>&lt;%@ taglib prefix="sx" uri="/struts-dojo-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;sx:head /&gt;
&lt;/head&gt;</pre> 
 </div> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>datetimepicker.jsp</strong> </p> 
 <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;%@ taglib prefix="sx" uri="/struts-dojo-tags" %&gt;
&lt;html&gt;
&lt;head&gt;
&lt;sx:head /&gt;
&lt;/head&gt;

&lt;body&gt;
&lt;h1&gt;Struts 2 datetimepicker example&lt;/h1&gt;

&lt;s:form action="resultAction" namespace="/" method="POST" &gt;

&lt;sx:datetimepicker name="date1" label="Format (dd-MMM-yyyy)" 
displayFormat="dd-MMM-yyyy" value="todayDate" /&gt;

&lt;sx:datetimepicker name="date2" label="Format (dd-MMM-yyyy)" 
displayFormat="dd-MMM-yyyy" value="%{'2010-01-01'}"/&gt;

&lt;sx:datetimepicker name="date3" label="Format (dd-MMM-yyyy)" 
displayFormat="dd-MMM-yyyy" value="%{'today'}"/&gt;

&lt;s:submit value="submit" name="submit" /&gt;
	
&lt;/s:form&gt;

&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <strong>result.jsp</strong> </p>   
 <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;

&lt;body&gt;
&lt;h1&gt;Struts 2 datetimepicker example&lt;/h1&gt;

&lt;h2&gt;
   Date1 : &lt;s:property value="date1"/&gt; 
&lt;/h2&gt; 

&lt;h2&gt;
   Date 2 : &lt;s:property value="date2"/&gt; 
&lt;/h2&gt; 

&lt;h2&gt;
   Date 3 : &lt;s:property value="date3"/&gt; 
&lt;/h2&gt; 

&lt;/body&gt;
&lt;/html&gt;</pre> 
 <h2 style="font-family:'Helvetica Neue', Helvetica,  font-weight:500;color:#333333;font-size:24px;background-color:#FFFFFF;"> 3. struts.xml </h2> 
 <pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
 
&lt;struts&gt;

 &lt;constant name="struts.devMode" value="true" /&gt;
	
&lt;package name="default" namespace="/" extends="struts-default"&gt;
		
  &lt;action name="dateTimePickerAction" 
	class="com.yiibai.common.action.DateTimePickerAction" 
        method="display"&gt;
	&lt;result name="none"&gt;/pages/datetimepicker.jsp&lt;/result&gt;
  &lt;/action&gt;
		
  &lt;action name="resultAction" 
        class="com.yiibai.common.action.DateTimePickerAction" &gt;
	&lt;result name="success"&gt;/pages/result.jsp&lt;/result&gt;
  &lt;/action&gt;
&lt;/package&gt;
	
&lt;/struts&gt;</pre> 
 <h2 style="font-family:'Helvetica Neue', Helvetica,  font-weight:500;color:#333333;font-size:24px;background-color:#FFFFFF;"> 4. 示例 </h2> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> <em>http://localhost:8080/strut2datetimepicker/dateTimePickerAction.action</em> </p> 
 <div class="pic" style="border:1px solid #DDDDDD;margin:20px 0px;padding:20px;text-align:center;color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#F9F9F9;"> 
  <img src="/uploads/tutorial/20151115/1-1511151Q3251D.png" alt=""> 
 </div> 
 <div class="pic" style="border:1px solid #DDDDDD;margin:20px 0px;padding:20px;text-align:center;color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#F9F9F9;"> 
  <img src="/uploads/tutorial/20151115/1-1511151Q422E6.png" alt=""> 
 </div> 
 <p> <span style="color:#E56600;">注意：如果静态文件未找到，或是不能打日期选择，请下载代码并参考其中的web.xml配置。</span> </p> 
 <h2 style="font-family:'Helvetica Neue', Helvetica,  font-weight:500;color:#333333;font-size:24px;background-color:#FFFFFF;"> 参考 </h2> 
 <ol style="color:#333333;font-family:'Helvetica Neue', Helvetica,  background-color:#FFFFFF;"> 
  <li> <a target="_blank" href="http://struts.apache.org/2.0.14/docs/datetimepicker.html">Struts 2 datetimepicker文档</a> </li> 
  <li> <a target="_blank" href="http://struts.apache.org/2.0.14/docs/ajax-and-javascript-recipes.html">Struts 2 ajax and javascript recipes</a> </li> 
  <li> <a target="_blank" href="http://www.unicode.org/reports/tr35/tr35-4.html#Date_Format_Patterns">Date Format Pattern</a> </li> 
 </ol> 
 <br> 代码下载：
 <a target="_blank" href="http://pan.baidu.com/s/1c0ym4nu">http://pan.baidu.com/s/1c0ym4nu</a>
 <br>      
</div></body></html>