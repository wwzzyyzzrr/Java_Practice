<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Struts2 &lt;s:generator&gt;标签示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p> <span style="line-height:1.5;">Struts2 &lt;s:generator&gt;标记用于基于在页中提供“val”属性，以产生一个迭代。这里创建一个Web工程：struts2generatortag，来演示在多个复选框如何设置的默认值，整个项目的结构如下图所示：</span> </p> 
 <p> <img src="/uploads/tutorial/20151116/1-151116203514218.png" alt=""> </p> 
 <p> <br> </p> 
 <div> 
  <p> <img src="file://E:/data/youdao/qq24B39E2329F08D9F4C3146A571A415EF/a033602d498f49d1903941780e224df7/clipboard.png"> </p> 
  <div>
    在本教程中，将使用Struts2 &lt;s:generator&gt;标签来执行以下任务： 
  </div> 
  <ol> 
   <li> 
    <div>
      使用generator标签来创建生成迭代器。 
    </div> </li> 
   <li> 
    <div>
      使用&lt;s:generator&gt;创建生成迭代器，并使用“Converter”对象修改迭代器值。 
    </div> </li> 
  </ol> 
  <h2> 1. 动作 </h2> 
  <div>
    有一个方法，Action类返回一个“Converter对象。 
  </div> 
  <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>GeneratorTagAction</strong> </p> 
  <pre>package com.yiibai.common.action;

import org.apache.struts2.util.IteratorGenerator.Converter;
import com.opensymphony.xwork2.ActionSupport;
 
public class GeneratorTagAction extends ActionSupport{
	
	public String execute() {
		
		return SUCCESS;
	}

	public Converter getLanguageConverter(){
		return new Converter() {
	         public Object convert(String value) throws Exception {
	        	 
	        	 if("java".equals(value)){
	        		 return "[java value in converter] - " + value;
	        	 }else{
	        		 return value;
	        	 }
	             
	         }
	     };
	}
}</pre> 
  <h2> 2. Generator 标签示例 </h2> 
  <p> 下面的JSP页面使用generator标签演示动态创建一个迭代器。“separator”属性是必需的，其分离val到迭代器的条目中。 </p> 
  <p> “converter”属性是可选的，它允许修改值。在这种情况下，它会调用GeneratorTagAction的getLanguageConverter()方法，如果值等于“Java”字符串并修改值。 </p> 
  <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>generator.jsp</strong> </p> 
  <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
 &lt;html&gt;
&lt;head&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;h1&gt;Struts 2 Generator tag example&lt;/h1&gt;

1. Generator tag example.
&lt;s:generator val="%{'java|.net|c|python|shell'}" separator="|"&gt;
&lt;ol&gt;
&lt;s:iterator&gt;
  &lt;li&gt;&lt;s:property /&gt;&lt;/li&gt;
&lt;/s:iterator&gt;
&lt;/s:generator&gt;
&lt;/ol&gt;  

2. Generator tag with converter example
&lt;s:generator val="%{'java|.net|c|python|shell'}" separator="|" 
converter="%{languageConverter}"&gt;
&lt;ol&gt;
&lt;s:iterator&gt;
  &lt;li&gt;&lt;s:property /&gt;&lt;/li&gt;
&lt;/s:iterator&gt;
&lt;/s:generator&gt;
&lt;/ol&gt;  

&lt;/body&gt;
&lt;/html&gt;</pre> 
  <div> 
   <div>
     找不到任何使用generator标签示例，因为不建议在页面迭代值。 
   </div> 
  </div> 
  <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;"> 3. struts.xml </h2>   
  <pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
 
&lt;struts&gt;

 	&lt;constant name="struts.devMode" value="true" /&gt;
	
	&lt;package name="default" namespace="/" extends="struts-default"&gt;
	
		&lt;action name="appendTagAction" 
			class="com.yiibai.common.action.AppendTagAction" &gt;
			&lt;result name="success"&gt;pages/appendIterator.jsp&lt;/result&gt;
		&lt;/action&gt;
		
	&lt;/package&gt;
		
&lt;/struts&gt;</pre> 
  <h2> 4. 示例 </h2> 
  <p> http://localhost:8080/struts2generator/generatorTagAction.action </p> 
  <div style="text-align:center;"> 
   <img src="/uploads/tutorial/20151116/1-15111620363MC.png" alt="">
   <br> 
  </div> 
  <h2> 参考 </h2> 
  <ol> 
   <li> <a target="_blank" href="http://struts.apache.org/2.1.8/docs/generator.html">Struts2 generator 文档</a> </li> 
   <li> <a target="_blank" href="http://struts.apache.org/2.1.8/struts2-core/apidocs/org/apache/struts2/util/IteratorGenerator.Converter.html">Struts2 Converter 文档</a> </li> 
  </ol> 
 </div> 代码下载 -&nbsp;
 <a target="_blank" href="http://pan.baidu.com/s/1mgm0W1E">http://pan.baidu.com/s/1mgm0W1E</a>
 <br>      
</div></body></html>