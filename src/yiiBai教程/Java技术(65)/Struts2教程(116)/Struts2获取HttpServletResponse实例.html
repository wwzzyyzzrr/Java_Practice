<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Struts2获取HttpServletResponse实例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    在Struts2中，可以用以下两种方式来获取HttpServletResponse对象。 
  </div> 
 </div> 
 <div> 
  <h2> 1. ServletActionContext </h2> 
  <p> 通过&nbsp;ServletActionContext&nbsp;类来访问&nbsp;HttpServletResponse&nbsp;。 </p> 
  <pre>package com.yiibai.common.action;

import javax.servlet.http.HttpServletResponse;
import org.apache.struts2.ServletActionContext;

public class LocaleAction{
	//business logic
	public String execute() {
		HttpServletResponse response = ServletActionContext.getResponse();
		
		return "SUCCESS";
	}
}</pre> 
  <h2> 2. ServletResponseAware </h2> 
  <div>
    通过实现 ServletResponseAware 接口并覆盖 setServletResponse()方法来访问HttpServletResponse。 
  </div> 
  <div> 
   <strong>注意</strong>
   <br> 当Struts2的“servlet-config”拦截器是看到一个Action类实现ServletResponseAware接口，它会通过一个HttpServletResponse的引用Action类通过setServletResponse()方法请求。 
   <div>
     当然，也可以创建自定义 getServletResponse()来获得 HttpServletResponse。 
   </div> 
  </div> 
  <pre>package com.yiibai.common.action;

import java.util.Locale;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts2.interceptor.ServletResponseAware;

public class LocaleAction implements ServletResponseAware{

	HttpServletResponse response;
	
	//business logic
	public String execute() {
		Locale locale = getServletResponse().getLocale();
		return "SUCCESS";
	}

	public void setServletResponse(HttpServletResponse response) {
		this.response = response;
	}
	public HttpServletResponse getServletResponse() {
		return this.response;
	}	
}&nbsp;</pre> 
  <p> 这两个机制都可以得到同样 HttpServletResponse 对象，但 Struts2 文档推荐使用 ServletResponseAware，请参见下面的参考资料： </p> 
  <h2> 参考 </h2> 
  <ol> 
   <li> <a target="_blank" href="http://struts.apache.org/2.x/docs/how-can-we-access-the-httpservletresponse.htmll">http://struts.apache.org/2.x/docs/how-can-we-access-the-httpservletresponse.htmll</a> </li> 
   <li> <a target="_blank" href="http://struts.apache.org/2.1.2/struts2-core/apidocs/org/apache/struts2/interceptor/ServletResponseAware.htmll">http://struts.apache.org/2.1.2/struts2-core/apidocs/org/apache/struts2/interceptor/ServletResponseAware.htmll</a> </li> 
  </ol> 
 </div>
 <br>      
</div></body></html>