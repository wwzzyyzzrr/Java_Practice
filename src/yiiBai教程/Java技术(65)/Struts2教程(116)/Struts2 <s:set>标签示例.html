<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Struts2 &lt;s:set&gt;标签示例</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    Struts2&nbsp;&lt;s:set&gt;标签用于分配值在指定范围内的变量(应用，会话，请求，页面，或动作)，默认的范围是动作。下面来看一个完整的&lt;s:set&gt;标签的例子： 
  </div> 
 </div> 
 <p> <br> </p> 
 <div> 
  <div>
    “value”是指任何硬编码字符串，属性值或是任何可以参考的东西。 
  </div> 
 </div> 
 <h2> 1. 动作 </h2> 
 <div>
   Action类有&nbsp;“msg”&nbsp;属性。 
 </div> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>SetTagAction.java</strong> </p> 
 <pre>package com.yiibai.common.action;

import com.opensymphony.xwork2.ActionSupport;
 
public class SetTagAction extends ActionSupport{

	private String msg = "Struts 2 is a funny framework";
	
	public String getMsg() {
		return msg;
	}

	public String execute() throws Exception {
		
		return SUCCESS;
	}
}</pre> 
 <h2> 2. &lt;s:set&gt;标签示例 </h2> 
 <div>
   它展示了如何使用&lt;s:set&gt;标签。 
 </div> 
 <p style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:16px;"> <strong>set.jsp</strong> </p> 
 <pre>&lt;%@ taglib prefix="s" uri="/struts-tags" %&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;www.yiibai.com&lt;/title&gt;
&lt;/head&gt;
 
&lt;body&gt;
&lt;h1&gt;Struts 2 set tag example&lt;/h1&gt;
&lt;div&gt;&lt;div class="ads-in-post hide_if_width_less_800"&gt;
&lt;script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"&gt;&lt;/script&gt;
&lt;!-- 728x90 - After2ndH4 --&gt;
&lt;ins class="adsbygoogle hide_if_width_less_800" 
     style="display:inline-block;width:728px;height:90px"
     data-ad-client="ca-pub-2836379775501347"
     data-ad-slot="3642936086"
	 data-ad-region="yiibairegion"&gt;&lt;/ins&gt;
&lt;script&gt;
(adsbygoogle = window.adsbygoogle || []).push({});
&lt;/script&gt;
&lt;/div&gt;&lt;/div&gt;&lt;h2&gt;1. &lt;s:set var="varMsg" value="msg" /&gt;&lt;/h2&gt;

&lt;s:set var="varMsg" value="msg" /&gt;
&lt;s:property value="varMsg" /&gt;

&lt;h2&gt;2. &lt;s:set var="varUrl" value="%{'http://www.yiibai.com'}" /&gt;&lt;/h2&gt; 

&lt;s:set var="varUrl" value="%{'http://www.yiibai.com'}" /&gt;
&lt;s:property value="varUrl" /&gt;


&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p> <strong>它是如何工作的？</strong> </p> 
 <p> 1. &lt;s:set var=”varMsg” value=”msg” /&gt; </p> 
 <p> 调用动作的&nbsp;getMsg()方法返回的值赋给变量名为&nbsp;“varMsg“. </p> 
 <p> 2. &lt;s:set var=”varUrl” value=”%{‘http://www.yiibai.com’}” /&gt; </p> 
 <p> 硬编码字符串，并将其分配给一个名为变量&nbsp;“varUrl“. </p> 
 <div> 
  <div>
    赋值给一个变量，而不是属性值。 
  </div> 
  <p> 例如, </p>   
  <pre>public class SetTagAction extends ActionSupport{

	private String msg;
	
	public String setMsg(String msg) {
		this.msg = msg;
	}
	...</pre> 
  <pre>&lt;s:set var="msg" value="%{'this is a message'}" /&gt;</pre> 
  <div>
    许多Struts&nbsp;2的开发者认为，&lt;s:set&gt;标签&nbsp;var=“smsg”，将通过指定setMsg()方法将值相关的动作类。 
  </div> 
  <p> 这是错误的，&lt;s:set&gt;标签将不会调用setMsg()方法，它只会以名为“msg”分配“value”到变量。没有动作属性值。 </p> 
 </div> 
 <h2 style="color:#333333;font-family:'Helvetica Neue', Helvetica,  font-size:24px;font-weight:500;"> 3. struts.xml </h2> 
 <pre>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE struts PUBLIC
"-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
"http://struts.apache.org/dtds/struts-2.0.dtd"&gt;
 
&lt;struts&gt;
 	&lt;constant name="struts.devMode" value="true" /&gt;
	&lt;package name="default" namespace="/" extends="struts-default"&gt;
	
		&lt;action name="setTagAction" 
			class="com.yiibai.common.action.SetTagAction" &gt;
			&lt;result name="success"&gt;pages/set.jsp&lt;/result&gt;
		&lt;/action&gt;
		
	&lt;/package&gt;
&lt;/struts&gt;</pre> 
 <h2> 5. 示例 </h2> 
 <p> http://localhost:8080/struts2settag/setTagAction.action </p> 
 <p> 在浏览器中打开上面的网址，输出结果如下： </p> 
 <p> <img src="/uploads/tutorial/20151121/1-15112106295a32.png" alt=""> </p> 
 <h2> 参考 </h2> 
 <ol> 
  <li> <a target="_blank" href="http://struts.apache.org/2.1.8/docs/set.html">Struts2 &lt;s:set&gt;标签文档</a> </li> 
 </ol> 
 <p> 代码下载 -&nbsp;<a target="_blank" href="http://pan.baidu.com/s/1mgs6Tle">http://pan.baidu.com/s/1mgs6Tle</a> </p>
 <br>      
</div></body></html>