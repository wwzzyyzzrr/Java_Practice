<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Hibernate事务管理</h1><div style="width:100%;float:left;" class="article-content">   
 <p>事务只是一个工作单位(单元)。 在这种情况下，如果一个步骤失败，则整个事务失败(称为原子性)。 ACID属性(原子性，一致性，隔离性和持久性)可以描述事务。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201703/2803/851090311_31860.jpg" alt=""></p> 
 <h2 id="h2-hibernate-"><a name="Hibernate中的事务接口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Hibernate中的事务接口</h2>
 <p>在hibernate框架中，我们有<code>Transaction</code>接口来定义工作单元。 它维护了事务实现(JTA，JDBC)的抽象。</p> 
 <p>事务与<code>Session</code>相关联，并通过调用<code>session.beginTransaction()</code>实例化。</p> 
 <p><code>Transaction</code>接口的方法如下：</p> 
 <ol> 
  <li><code>void begin()</code> 开始一个新的事务。</li>
  <li><code>void commit()</code> 结束工作单位，在<code>FlushMode.NEVER</code>中除外。</li>
  <li><code>void rollback()</code> 强制此事务回滚。</li>
  <li><code>void setTimeout(int seconds)</code> 它为由此实例开始的后续调用启动的任何事务设置事务超时。</li>
  <li><code>boolean isAlive()</code> 检查交易是否仍然存在。</li>
  <li><code>void registerSynchronization(Synchronization s)</code> 为此事务注册用户同步回调。</li>
  <li><code>boolean wasCommited()</code> 检查事务是否成功提交。</li>
  <li><code>boolean wasRolledBack()</code> 检查事务是否成功回滚。</li>
 </ol> 
 <h2 id="h2-hibernate-"><a name="Hibernate中的事务管理示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Hibernate中的事务管理示例</h2>  
 <p>在hibernate中，如果发生任何异常，最好回滚事务，以便资源可以释放自由。 我们来看看hibernate中事务管理的例子。</p> 
 <pre><code class="lang-java">Session session = null;  
Transaction tx = null;  

try {  
    session = sessionFactory.openSession();  
    tx = session.beginTransaction();  
    //some action  

    tx.commit();  

}catch (Exception ex) {  
    ex.printStackTrace();  
    tx.rollback();  
}  
finally {session.close();}
</code></pre>
 <br>      
</div></body></html>