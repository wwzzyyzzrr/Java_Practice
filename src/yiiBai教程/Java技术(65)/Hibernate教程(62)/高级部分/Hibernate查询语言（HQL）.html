<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Hibernate查询语言（HQL）</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Hibernate查询语言(HQL)与SQL(结构化查询语言)相同，但不依赖于数据库表。 我们在HQL中使用类名，而不是表名。 所以是数据库独立的查询语言。</p> 
 <h2 id="h2-hql-"><a name="HQL的优点" class="reference-link"></a><span class="header-link octicon octicon-link"></span>HQL的优点</h2>
 <p>HQL有很多优点。 它们如下：</p> 
 <ul> 
  <li>数据库独立</li>
  <li>支持多态查询</li>
  <li>易于Java程序员学习</li>
 </ul> 
 <h2 id="h2-u67E5u8BE2u63A5u53E3"><a name="查询接口" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查询接口</h2>
 <p>它是一个面向对象的Hibernate Query表示。 Query的对象可以通过Session接口调用<code>createQuery()</code>方法。</p> 
 <p>查询接口提供了很多方法。下面给出了一些最常用的方法：</p> 
 <ul> 
  <li><code>public int executeUpdate()</code> 用于执行更新或删除查询。</li>
  <li><code>public List list()</code> 将关系的结果作为列表返回。</li>
  <li><code>public Query setFirstResult(int rowno)</code> 指定从哪里检索记录的行号。</li>
  <li><code>public Query setMaxResult(int rowno)</code> 指定从关系(表)中检索记录的行号。</li>
  <li><code>public Query setParameter(int position, Object value)</code> 它将该值设置为JDBC样式查询参数。</li>
  <li><code>public Query setParameter(String name, Object value)</code> 它将该值设置为命名查询参数。</li>
 </ul> 
 <p><strong>HQL获取所有记录的示例</strong></p> 
 <pre><code class="lang-java">Query query=session.createQuery("from Emp");//here persistent class name is Emp  
List list=query.list();
</code></pre> 
 <p><strong>HQL获取分页记录的示例</strong></p> 
 <pre><code class="lang-java">Query query=session.createQuery("from Emp");  
query.setFirstResult(5);  
query.setMaxResult(10);  
List list=query.list();//will return the records from 5 to 10th number
</code></pre> 
 <p><strong>HQL更新查询示例</strong></p> 
 <pre><code class="lang-java">Transaction tx=session.beginTransaction();  
Query q=session.createQuery("update User set name=:n where id=:i");  
q.setParameter("n","Udit Kumar");  
q.setParameter("i",111);  

int status=q.executeUpdate();  
System.out.println(status);  
tx.commit();
</code></pre> 
 <p><strong>HQL删除查询示例</strong></p>   
 <pre><code class="lang-java">Query query=session.createQuery("delete from Emp where id=100");  
//specifying class name (Emp) not tablename  
query.executeUpdate();
</code></pre> 
 <p><strong>HQL与聚合函数</strong></p> 
 <p>可以通过HQL调用<code>avg()</code>，<code>min()</code>，<code>max()</code>等聚合函数。 我们来看一些常见的例子：</p> 
 <p><strong>获得所有员工总薪酬的例子</strong></p> 
 <pre><code class="lang-java">Query q=session.createQuery("select sum(salary) from Emp");  
List&lt;Integer&gt; list=q.list();  
System.out.println(list.get(0));
</code></pre> 
 <p><strong>获得员工最高工资的例子</strong></p> 
 <pre><code class="lang-java">Query q=session.createQuery("select max(salary) from Emp");
</code></pre> 
 <p><strong>获得员工最低工资的例子</strong></p> 
 <pre><code class="lang-java">Query q=session.createQuery("select min(salary) from Emp");
</code></pre> 
 <p><strong>计算雇员ID总数的示例</strong></p> 
 <pre><code class="lang-java">Query q=session.createQuery("select count(id) from Emp");
</code></pre> 
 <p><strong>获得员工的平均工资的例子</strong></p> 
 <pre><code class="lang-java">Query q=session.createQuery("select avg(salary) from Emp");
</code></pre>
 <br>      
</div></body></html>