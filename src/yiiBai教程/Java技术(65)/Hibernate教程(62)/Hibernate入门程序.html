<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Hibernate入门程序</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在第一个Hibernate入门示例程序中，我们将使用eclipse IDE创建一个简单的hibernate应用程序示例。要在Eclipse IDE中创建第一个<code>hibernate</code>应用程序，需要遵循以下步骤：</p> 
 <blockquote> 
  <p>重要提示：<br>按照惯例，易百教程的每个入门教程程序都会详细介绍对应环境的安装，配置和运行步骤，以帮助读者/学习者快速入门。往后的系列教程中没有特别说明，都会以入门教程程序配置为参考。所以，在您阅读每一篇文章遇到配置或运行环境不清楚，请参考入门教程程序配置。</p> 
 </blockquote> 
 <ol> 
  <li>创建java项目</li>
  <li>为hibernate添加jar文件</li>
  <li>创建持久类</li>
  <li>创建持久类的映射文件</li>
  <li>创建配置文件</li>
  <li>创建检索或存储持久对象的类</li>
  <li>运行应用程序</li>
 </ol> 
 <blockquote> 
  <p>前提工作:</p> 
  <ol> 
   <li>安装好 MySQL 并启动。参考： <a target="_blank" href="http://www.yiibai.com/mysql/">http://www.yiibai.com/mysql/</a></li>
   <li>Eclipse Neon.2 Release (4.6.2)。 参考：<a target="_blank" href="http://www.yiibai.com/eclipse/">http://www.yiibai.com/eclipse/</a></li>
   <li>下载 Hibernate 相关类库(Jar文件)</li>
   <li>创建一个数据库表：tb_employee </li>
  </ol> 
 </blockquote> 
 <h2 id="h2-1-java-"><a name="1. 创建java项目" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. 创建java项目</h2>
 <p>打开Eclipse，通过 <strong>File</strong> -&gt; <strong>New</strong> -&gt; <strong>project</strong> -&gt; <strong>java project</strong> 创建java项目。 现在指定项目名称: <code>first-hibernate</code>， 然后 <strong>next-&gt;</strong> 完成。</p> 
 <h2 id="h2-2-hibernate-jar-"><a name="2. 为hibernate添加jar文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. 为hibernate添加jar文件</h2>
 <p>添加jar文件右键单击您的项目(<code>first-hibernate</code>) -&gt; <code>Build Path</code> -&gt; 添加外部存档。<br><img src="http://www.yiibai.com/uploads/images/201703/2303/418090310_21718.png" alt=""><br>现在选择所有的jar文件，如下图所示 -<br><img src="http://www.yiibai.com/uploads/images/201703/2303/718090311_49745.png" alt=""></p> 
 <p>创建一个用户自定义库，为这个自定义库起个名字：<code>hibernate-jars</code>，并选择 <code>hibernate</code> 相关jar包。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201703/2303/124090319_74449.png" alt=""></p> 
 <p>完成后加入效果如下所示 -<br><img src="http://www.yiibai.com/uploads/images/201703/2303/161090320_24226.png" alt=""></p> 
 <p>下载所需的 <a target="_blank" href="http://www.yiibai.com/src/hb/hibernatejar.zip" title="Hibernate jar">Hibernate-jars</a>文件： </p> 
 <p>在这个例子中，我们将应用程序与<a target="_blank" href="http://www.yiibai.com/mysql/" title="MySQL">MySQL</a>数据库连接。 所以你必须添加<code>mysql-connect.jar</code>文件。</p> 
 <h2 id="h2-3-"><a name="3. 创建持久化类" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. 创建持久化类</h2>
 <p>在这里，要创建持久化类，右键单击<code>src</code> -&gt; <code>New</code> -&gt; <code>Class</code> - 使用包名指定类(例如：<code>com.yiibai.mypackage</code>) -&gt; <code>finish</code>。</p> 
 <p><em>Employee.java</em> </p> 
 <pre><code class="lang-java">package com.yiibai.mypackage;  

public class Employee {  
    private int id;  
    private String firstName,lastName;  

    public int getId() {  
        return id;  
    }  
    public void setId(int id) {  
        this.id = id;  
    }  
    public String getFirstName() {  
        return firstName;  
    }  
    public void setFirstName(String firstName) {  
        this.firstName = firstName;  
    }  
    public String getLastName() {  
        return lastName;  
    }  
    public void setLastName(String lastName) {  
        this.lastName = lastName;  
    }  

}
</code></pre> 
 <h2 id="h2-4-"><a name="4. 创建持久化类的映射文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. 创建持久化类的映射文件</h2>
 <p>在这里，我们正在创建与上一主题中创建的相同的映射文件。 要创建映射文件，右键单击<code>src</code> -&gt; <code>new</code> -&gt; <code>file</code> -&gt; 指定文件名(例如<code>employee.hbm.xml</code>) , 它必须在包外部。</p> 
 <p><em>employee.hbm.xml</em></p> 
 <pre><code class="lang-xml">&lt;?xml version='1.0' encoding='UTF-8'?&gt;  
&lt;!DOCTYPE hibernate-mapping PUBLIC  
 "-//Hibernate/Hibernate Mapping DTD 3.0//EN"  
 "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd"&gt;  

 &lt;hibernate-mapping&gt;  
  &lt;class name="com.yiibai.mypackage.Employee" table="emp1000"&gt;  
    &lt;id name="id"&gt;  
     &lt;generator class="assigned"&gt;&lt;/generator&gt;  
    &lt;/id&gt;  

    &lt;property name="firstName"&gt;&lt;/property&gt;  
    &lt;property name="lastName"&gt;&lt;/property&gt;  

  &lt;/class&gt;  

 &lt;/hibernate-mapping&gt;
</code></pre> 
 <h2 id="h2-5-"><a name="5. 创建配置文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>5. 创建配置文件</h2>
 <p>配置文件包含数据库的所有信息，如：<code>connection_url</code>，<code>driver_class</code>，<code>username</code>，<code>password</code>等。hbm2ddl.auto属性用于自动在数据库中创建表。 我们将在下一个主题中深入学习<code>Dialect</code>类。 要创建配置文件，请右键单击<code>src</code> -&gt; <code>new</code> -&gt; <code>file</code>。 现在指定配置文件名，例如： <code>hibernate.cfg.xml</code>。</p> 
 <p><em>hibernate.cfg.xml</em></p>   
 <pre><code class="lang-xml">&lt;?xml version='1.0' encoding='UTF-8'?&gt;
&lt;!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd"&gt;

&lt;!-- Generated by MyEclipse Hibernate Tools. --&gt;
&lt;hibernate-configuration&gt;

    &lt;session-factory&gt;

        &lt;property name="connection.driver_class"&gt;com.mysql.jdbc.Driver&lt;/property&gt;
        &lt;property name="connection.url"&gt;jdbc:mysql://localhost:3306/test&lt;/property&gt;
        &lt;property name="connection.username"&gt;root&lt;/property&gt;
        &lt;property name="connection.password"&gt;123456&lt;/property&gt;
        &lt;property name="dialect"&gt;org.hibernate.dialect.MySQL5InnoDBDialect&lt;/property&gt;
        &lt;property name="show_sql"&gt;true&lt;/property&gt;
        &lt;mapping resource="employee.hbm.xml"/&gt;  
    &lt;/session-factory&gt;

&lt;/hibernate-configuration&gt;
</code></pre> 
 <h2 id="h2-6-"><a name="6. 创建检索或存储持久对象的类" class="reference-link"></a><span class="header-link octicon octicon-link"></span>6. 创建检索或存储持久对象的类</h2>
 <p>在这个类中，我们只是将<code>employee</code>对象存储到数据库中。</p> 
 <pre><code class="lang-java">package com.yiibai.mypackage;  

import org.hibernate.Session;  
import org.hibernate.SessionFactory;  
import org.hibernate.Transaction;  
import org.hibernate.cfg.Configuration;  

public class StoreData {  
    public static void main(String[] args) {  

        //creating configuration object  
        Configuration cfg=new Configuration();  
        cfg.configure("hibernate.cfg.xml");//populates the data of the configuration file  

        //creating seession factory object  
        SessionFactory factory=cfg.buildSessionFactory();  

        //creating session object  
        Session session=factory.openSession();  

        //creating transaction object  
        Transaction t=session.beginTransaction();  

        Employee e1=new Employee();
        e1.setId(100);
        e1.setFirstName("Max");
        e1.setLastName("Su");

        session.persist(e1);//persisting the object  

        t.commit();//transaction is committed  
        session.close();  

        System.out.println("successfully saved");  

    }  
}
</code></pre> 
 <h2 id="h2-7-"><a name="7. 运行应用程序" class="reference-link"></a><span class="header-link octicon octicon-link"></span>7. 运行应用程序</h2>
 <p>在运行应用程序之前，确定目录结构如下图所示 -<br><img src="http://www.yiibai.com/uploads/images/201703/2303/690100306_74100.png" alt=""></p> 
 <p>在运行这个示例之前，还差关键的一个步骤，那就是创建对象对应的表：tb_employee,其结构及创建语句语句如下-</p> 
 <pre><code class="lang-sql">CREATE TABLE `tb_employee` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `firstName` varchar(32) NOT NULL DEFAULT '',
  `lastName` varchar(32) NOT NULL DEFAULT '',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=101 DEFAULT CHARSET=utf8;
</code></pre> 
 <p>接下来，就是运行hibernate应用程序，请右键单击<code>StoreData</code>类 -<code>Run As</code> - Java应用程序。</p> 
 <p>输入结果如下 -</p> 
 <pre><code class="lang-shell">INFO: HHH000400: Using dialect: org.hibernate.dialect.MySQLDialect
Hibernate: insert into tb_employee (firstName, lastName, id) values (?, ?, ?)
successfully saved
</code></pre> 
 <p>查看 <code>tb_employee</code> 表中的数据，如下 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201703/2303/732100306_95820.png" alt=""></p>
 <br>      
</div></body></html>