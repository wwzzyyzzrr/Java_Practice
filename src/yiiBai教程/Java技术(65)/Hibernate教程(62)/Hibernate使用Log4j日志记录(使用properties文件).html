<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Hibernate使用Log4j日志记录(使用properties文件)</h1><div style="width:100%;float:left;" class="article-content">   
 <p>我们知道，Log4j和Logback框架可用于支持日志记录hibernate，使用log4j有两种执行日志记录的方法：</p> 
 <ol> 
  <li>通过<code>log4j.xml</code>文件(或)</li>
  <li>通过<code>log4j.properties</code>文件</li>
 </ol> 
 <p>在这里，我们将使用log4j通过属性(<code>properties</code>)文件启用日志记录。</p> 
 <h2 id="h2--log4j-hibernate-"><a name="使用属性文件执行Log4j执行Hibernate日志记录的步骤" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用属性文件执行Log4j执行Hibernate日志记录的步骤</h2>
 <p>使用属性(<code>properties</code>)文件使用log4j执行日志记录有两种方法：</p> 
 <ol> 
  <li>使用hibernate加载log4j jar文件</li>
  <li>在<code>src</code>文件夹内创建<code>log4j.properties</code>文件(与<code>hibernate.cfg.xml</code>文件同个目录)</li>
 </ol> 
 <h2 id="h2--log4j-hibernate-"><a name="使用属性文件通过Log4j进行Hibernate日志记录的示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用属性文件通过Log4j进行Hibernate日志记录的示例</h2>
 <p>您可以通过在任何hibernate示例中执行两个步骤来在hibernate中启用日志记录。 这是使用log4j进行日志记录支持的hibernate应用程序的第二个例子。</p> 
 <h2 id="h2--jar-"><a name="加载所需的jar文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>加载所需的jar文件</h2>
 <p>需要使用hibernate的jar文件和加载<code>slf4j.jar</code>和<code>log4j.jar</code>文件。这些Jar文件请参考下载页面下载。</p> 
 <h2 id="h2--log4j-properties-"><a name="创建log4j.properties文件" class="reference-link"></a><span class="header-link octicon octicon-link"></span>创建log4j.properties文件</h2>
 <p>现在创建<code>log4j.properties</code>文件。 在此示例中，所有日志详细信息将被写入<code>yiibai-log4j.log</code>文件中。</p> 
 <p><em>log4j.properties</em>文件的内容如下 - </p> 
 <pre><code class="lang-shell"># Direct log messages to a log file  
log4j.appender.file=org.apache.log4j.RollingFileAppender  
log4j.appender.file.File=yiibai-log4j.log
log4j.appender.file.MaxFileSize=1MB  
log4j.appender.file.MaxBackupIndex=1  
log4j.appender.file.layout=org.apache.log4j.PatternLayout  
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n  

# Direct log messages to stdout  
log4j.appender.stdout=org.apache.log4j.ConsoleAppender  
log4j.appender.stdout.Target=System.out  
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout  
log4j.appender.stdout.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n  

# Root logger option  
log4j.rootLogger=INFO, file, stdout  

# Log everything. Good for troubleshooting  
log4j.logger.org.hibernate=INFO  

# Log all JDBC parameters  
log4j.logger.org.hibernate.type=ALL
</code></pre> 
 <p>完整的目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201703/2503/666170322_12419.png" alt=""></p> 
 <blockquote> 
  <p>提示： 如果未加入 log4j.jar ， 就无法生成 yiibai-log4j.log 文件。</p> 
 </blockquote>
 <br>      
</div></body></html>