<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java static关键字</h1><div style="width:100%;float:left;" class="article-content">   
 <p>java中的<code>static</code>关键字主要用于内存管理。我们可以应用java <code>static</code>关键字在变量，方法，块和嵌套类中。 <code>static</code>关键字属于类，而不是类的实例。</p> 
 <p>静态(<code>static</code>)可以是：</p> 
 <ol> 
  <li>变量(也称为类变量)</li>
  <li>方法(也称为类方法)</li>
  <li>代码块</li>
  <li>嵌套类</li>
 </ol> 
 <h2 id="h2-1-java-"><a name="1. Java静态变量" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. Java静态变量</h2>
 <p>如果将一个变量声明为<code>static</code>，它就是所谓的静态变量了。</p> 
 <ul> 
  <li>静态变量可以用于引用所有对象的公共属性(对于每个对象不是唯一的)。如：员工公司名称，学生所在的大学名称。</li>
 </ul> 
 <p><strong>静态变量的优点：</strong></p> 
 <ul> 
  <li>它能使程序存储器高效(即它节省内存)。</li>
 </ul> 
 <p><strong>理解不使用静态变量的问题</strong></p> 
 <pre><code class="lang-java">class Student{  
     int rollno;  
     String name;  
     String college="ITS";  
}
</code></pre> 
 <p>假设在一所学校有<code>500</code>名学生，现在所有实例数据成员将在每次创建对象时获取内存。所有学生都有其唯一的注册ID：<code>rollno</code>和　<code>name</code> ，因此实例数据成员没有什么问题。<code>college</code> 指的是所有对象的共同属性。如果使它静态化(使用<code>static</code>关键字修饲)，这个字段将只获得内存一次。</p> 
 <blockquote> 
  <p>Java静态属性被共享给所有对象。</p> 
 </blockquote> 
 <p><strong>静态变量的示例</strong></p> 
 <pre><code class="lang-java">//Program of static variable  

class Student8 {
    int rollno;
    String name;
    static String college = "ITS";

    Student8(int r, String n) {
        rollno = r;
        name = n;
    }

    void display() {
        System.out.println(rollno + " " + name + " " + college);
    }

    public static void main(String args[]) {
        Student8 s1 = new Student8(111, "Karan");
        Student8 s2 = new Student8(222, "Aryan");

        s1.display();
        s2.display();
    }
}
</code></pre> 
 <p>上面代码执行结果如下 -</p> 
 <pre><code class="lang-java">111 Karan ITS
222 Aryan ITS
</code></pre> 
 <p>创建对象示例图如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201703/0403/117100301_14333.jpg" alt=""></p> 
 <p><strong>不使用静态变量的计数器程序</strong></p> 
 <p>在这个例子中，我们创建了一个名为<code>count</code>的实例变量用来统计创建对象的数目，它在构造函数中执行递增。 由于实例变量在创建对象时要获取内存，每个对象都将具有实例变量的副本，如果它被递增了，它也不会反映到其他对象中。所以每个对象在<code>count</code>变量中的值还是<code>1</code>。</p> 
 <pre><code class="lang-java">class Counter {
    int count = 0;// will get memory when instance is created

    Counter() {
        count++;
        System.out.println(count);
    }

    public static void main(String args[]) {

        Counter c1 = new Counter();
        Counter c2 = new Counter();
        Counter c3 = new Counter();

    }
}
</code></pre> 
 <p>上面代码执行结果如下 -</p> 
 <pre><code class="lang-java">1
1
1
</code></pre> 
 <p><strong>计数器静态变量的程序</strong><br>如上所述，静态变量将只获取一次内存，如果任何对象更改静态变量的值，它将保留其值，所有实例均可访问同一变量值。</p> 
 <pre><code class="lang-java">class Counter2 {
    static int count = 0;// will get memory only once and retain its value

    Counter2() {
        count++;
        System.out.println(count);
    }

    public static void main(String args[]) {

        Counter2 c1 = new Counter2();
        Counter2 c2 = new Counter2();
        Counter2 c3 = new Counter2();

    }
}
</code></pre> 
 <p>上面代码执行结果如下 -</p> 
 <pre><code class="lang-java">1
2
3
</code></pre> 
 <h2 id="h2-2-java-"><a name="2. Java静态方法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. Java静态方法</h2>
 <p>如果在任何方法上应用<code>static</code>关键字，此方法称为静态方法。</p> 
 <ul> 
  <li>静态方法属于类，而不属于类的对象。</li>
  <li>可以直接调用静态方法，而无需创建类的实例。</li>
  <li>静态方法可以访问静态数据成员，并可以更改静态数据成员的值。</li>
 </ul> 
 <p><strong>静态方法的示例</strong></p> 
 <pre><code class="lang-java">//Program of changing the common property of all objects(static field).  

class Student9 {
    int rollno;
    String name;
    static String college = "ITS";

    static void change() {
        college = "BBDIT";
    }

    Student9(int r, String n) {
        rollno = r;
        name = n;
    }

    void display() {
        System.out.println(rollno + " " + name + " " + college);
    }

    public static void main(String args[]) {
        Student9.change();

        Student9 s1 = new Student9(111, "Karan");
        Student9 s2 = new Student9(222, "Aryan");
        Student9 s3 = new Student9(333, "Sonoo");

        s1.display();
        s2.display();
        s3.display();
    }
}
</code></pre> 
 <p>上面代码执行输出以下结果 - </p>   
 <pre><code class="lang-java">111 Karan BBDIT
222 Aryan BBDIT
333 Sonoo BBDIT
</code></pre> 
 <p><strong>执行正常计算的静态方法的另一个示例:</strong></p> 
 <pre><code class="lang-java">//Program to get cube of a given number by static method  

class Calculate {
    static int cube(int x) {
        return x * x * x;
    }

    public static void main(String args[]) {
        int result = Calculate.cube(5);
        System.out.println(result);
    }
}
</code></pre> 
 <p>上面代码执行输出以下结果 - </p> 
 <pre><code class="lang-java">125
</code></pre> 
 <p><strong>静态方法的限制</strong></p> 
 <p>静态方法有两个主要限制。它们分别是：</p> 
 <ul> 
  <li>静态方法不能直接使用非静态数据成员或调用非静态方法。</li>
  <li><code>this</code>和<code>super</code>两个关键字不能在静态上下文中使用。</li>
 </ul> 
 <pre><code class="lang-java">class A {
    int a = 40;// non static

    public static void main(String args[]) {
        System.out.println(a);
    }
}
</code></pre> 
 <p>上面代码执行输出以下结果 - </p> 
 <pre><code class="lang-java">[编译错误！]Compile Time Error
</code></pre> 
 <p><strong>为什么java main方法是静态的？</strong></p> 
 <p>这是因为对象不需要调用静态方法，如果它是非静态方法，jvm首先要创建对象，然后调用main()方法，这将导致额外的内存分配的问题。</p> 
 <h2 id="h2-3-java-"><a name="3. Java静态块" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. Java静态块</h2>
 <p>Java中的静态块主要有两个作用：</p> 
 <ul> 
  <li>用于初始化静态数据成员。</li>
  <li>它在类加载时在main方法之前执行。</li>
 </ul> 
 <p><strong>静态块的示例</strong></p> 
 <pre><code class="lang-java">class A2 {
    static {
        System.out.println("static block is invoked");
    }

    public static void main(String args[]) {
        System.out.println("Hello main");
    }
}
</code></pre> 
 <p>上面代码执行输出以下结果 - </p> 
 <pre><code class="lang-java">static block is invoked
Hello main
</code></pre> 
 <p><strong>可以执行程序没有main()方法吗？</strong><br><strong>答：</strong>是的，一种方式是静态块，但在以前旧的JDK版本中，不是在JDK 1.7。</p> 
 <pre><code class="lang-java">class A3 {
    static {
        System.out.println("static block is invoked");
        System.exit(0);
    }
}
</code></pre> 
 <p>上面代码执行输出以下结果 - </p> 
 <pre><code class="lang-java">static block is invoked
</code></pre> 
 <p>在JDK7及以上版本中，输出将为：</p> 
 <pre><code class="lang-java">错误: 在类 Main 中找不到 main 方法, 请将 main 方法定义为:
   public static void main(String[] args)
</code></pre>
 <br>      
</div></body></html>