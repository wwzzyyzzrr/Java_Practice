<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JMeter数据库测试计划</h1><div style="width:100%;float:left;" class="article-content">   
 <p> 在本章中，我们将看到如何创建一个简单的测试计划，测试数据库服务器。对于我们的测试目的，我们使用MySQL数据库服务器。您可以使用任何其他数据库进行测试。MYSQ的安装和创建表，请参阅&nbsp;<a target="_blank" href="http://www.yiibai.com/mysql/index.html">MYSQL教程</a>。</p> 
 <p> 安装MySQL以后，请按照以下步骤设置数据库：</p> 
 <ul> 
  <li> <p> 创建一个数据库名称 "tutorial".</p> </li> 
  <li> <p> 创建一个表&nbsp;tutorials_tbl.</p> </li> 
  <li> <p> 插入记录到&nbsp;tutorials_tbl&nbsp;:</p> <pre class="prettyprint prettyprinted" style="width: 516.453125px; font-size: 12px;">
<span class="pln" style="margin: 0px; padding: 0px;">mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="kwd" style="margin: 0px; padding: 0px; color: rgb(0, 0, 136);">use</span><span class="pln" style="margin: 0px; padding: 0px;"> TUTORIALS</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">;</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Database</span><span class="pln" style="margin: 0px; padding: 0px;"> changed
mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="margin: 0px; padding: 0px;"> INSERT INTO tutorials_tbl 
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="pln" style="margin: 0px; padding: 0px;">tutorial_title</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> tutorial_author</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> submission_date</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">VALUES
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Learn PHP"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"John Poul"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> NOW</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">());</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Query</span><span class="pln" style="margin: 0px; padding: 0px;"> OK</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">1</span><span class="pln" style="margin: 0px; padding: 0px;"> row affected </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">0.01</span><span class="pln" style="margin: 0px; padding: 0px;"> sec</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="margin: 0px; padding: 0px;"> INSERT INTO tutorials_tbl
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="pln" style="margin: 0px; padding: 0px;">tutorial_title</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> tutorial_author</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> submission_date</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">VALUES
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Learn MySQL"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Abdul S"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> NOW</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">());</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Query</span><span class="pln" style="margin: 0px; padding: 0px;"> OK</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">1</span><span class="pln" style="margin: 0px; padding: 0px;"> row affected </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">0.01</span><span class="pln" style="margin: 0px; padding: 0px;"> sec</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="margin: 0px; padding: 0px;"> INSERT INTO tutorials_tbl
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="pln" style="margin: 0px; padding: 0px;">tutorial_title</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> tutorial_author</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> submission_date</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;</span><span class="pln" style="margin: 0px; padding: 0px;">VALUES
     </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">-&gt;(</span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"JAVA Tutorial"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">"Sanjay"</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="str" style="margin: 0px; padding: 0px; color: rgb(0, 136, 0);">'2007-05-06'</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">);</span><span class="pln" style="margin: 0px; padding: 0px;">
</span><span class="typ" style="margin: 0px; padding: 0px; color: rgb(127, 0, 85);">Query</span><span class="pln" style="margin: 0px; padding: 0px;"> OK</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">,</span><span class="pln" style="margin: 0px; padding: 0px;"> </span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">1</span><span class="pln" style="margin: 0px; padding: 0px;"> row affected </span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">(</span><span class="lit" style="margin: 0px; padding: 0px; color: rgb(0, 102, 102);">0.01</span><span class="pln" style="margin: 0px; padding: 0px;"> sec</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">)</span><span class="pln" style="margin: 0px; padding: 0px;">
mysql</span><span class="pun" style="margin: 0px; padding: 0px; color: rgb(102, 102, 0);">&gt;</span></pre> </li> 
  <li> <p> 复制JDBC驱动程序到&nbsp;/home/manisha/apache-jmeter-2.9/lib.</p> </li> 
 </ul> 
 <h2> 创建JMeter测试计划</h2> 
 <p> 首先，让我们启动JMeter&nbsp;&nbsp;/home/manisha/apache-jmeter-2.9/bin/jmeter.sh.</p> 
 <h3> 添加用户</h3> 
 <p> 现在，创建一个线程组，右键点击&nbsp;Test Plan &gt; Add&gt; Threads(Users)&gt; Thread Group.&nbsp;根据测试计划节点将添加线程组。重命名此线程为JDBC用户。</p> 
 <img alt="Thread Group Added" src="/uploads/allimg/130929/2154101338-0.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> 我们不会改变线程组的默认属性。</p> 
 <h3> 添加JDBC请求</h3> 现在，我们已经定义了我们的用户，它是时间来定义，他们将要执行的任务。在本节中将指定JDBC请求执行。 JDBC Users元件上右击，选择 Add &gt; Config Element &gt; JDBC Connection Configuration. 
 <p> 设置以下字段（我们使用的是MySQL数据库教程）：</p> 
 <ul> 
  <li> <p> 变量名绑定到池。这需要唯一地标识该配置。它是用来由JDBC采样器，以确定要使用的配置。作为测试，我们把它命名为&nbsp;test</p> </li> 
  <li> <p> Database URL: jdbc:mysql://localhost:3306/tutorial</p> </li> 
  <li> <p> JDBC Driver class: com.mysql.jdbc.Driver</p> </li> 
  <li> <p> 用户名: root</p> </li> 
  <li> <p> 密码: root的密码</p> </li> 
 </ul> 
 <p> 在屏幕上的其他领域，可以留为默认值，如下所示：</p> 
 <img alt="JDBC Configuration Pool" src="/uploads/allimg/130929/21541055I-1.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> 添加一个JDBC请求是指上面定义的JDBC配置池。选择JDBC Users元件，单击鼠标右键得到添加菜单，然后选择&nbsp;Add &gt; Sampler &gt; JDBC Request. 然后，选择这个新的元素，以查看它的控制面板。编辑属性如下：</p> 
 <ul> 
  <li> <p> 变量名绑定到池。这需要唯一地标识该配置。它是用来由JDBC采样器，以确定要使用的配置。我们将其命名为&nbsp;test</p> </li> 
  <li> <p> Name: Learn</p> </li> 
  <li> <p> Enter the Pool Name: test (same as in the configuration element)</p> </li> 
  <li> <p> Query Type: Select statement</p> </li> 
  <li> <p> Enter the SQL Query String field.</p> </li> 
 </ul> 
 <img alt="JDBC Request" src="/uploads/allimg/130929/2154101952-2.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <h3> 创建侦听器</h3> 
 <p> 现在添加Listener元素。此元素负责存储所有JDBC请求的结果，在一个文件中，并呈现出可视化的数据模型。</p> 
 <p> 选择JDBC Users元件，并添加一个查看结果树监听器(Add &gt; Listener &gt; View Results Tree).</p> 
 <img alt="JDBC Test Listener" src="/uploads/allimg/130929/2154104Q8-3.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <h3> 保存并执行测试计划</h3> 
 <p> 现在保存的以上测试计划db_test.jmx。执行本测试计划使用&nbsp;Run &gt; Start&nbsp;选项.</p> 
 <h3> 校验输出</h3> 
 <img alt="JDBC Test Output" src="/uploads/allimg/130929/2154103T1-4.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;">
 <img alt="JDBC Test Output" src="/uploads/allimg/130929/2154106155-5.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;">
 <img alt="JDBC Test Output" src="/uploads/allimg/130929/2154101024-6.jpg" style="margin: auto; padding: 0px 0px 10px; border: 0px; max-width: 560px; height: auto; display: block; color: rgb(0, 0, 0); font-family: Helvetica, Arial, sans-serif;"> 
 <p> 在最后图像，可以看到，2条记录被选择。</p> 
 <br>      
</div></body></html>