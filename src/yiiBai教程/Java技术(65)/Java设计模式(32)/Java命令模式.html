<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java命令模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>命令模式是数据驱动设计模式，属于行为模式类别。 请求作为命令包装在一个对象下，并传递给调用器对象。 调用者对象查找可以处理此命令的适当对象，并将命令传递到执行命令的相应对象。</p> 
 <h2 id="h2-u5B9Eu73B0u5B9Eu4F8B"><a name="实现实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现实例</h2>
 <p>在这个示例中，创建了一个作为命令的接口- <code>Order</code>，同时也创建了一个<code>Stock</code>类作为请求。 有具体的命令类<code>BuyStock</code>和<code>SellStock</code>实现<code>Order</code>接口将做实际的命令处理。 将创建一个类<code>Broker</code>作为调用器对象。它可以接收和下订单。</p> 
 <p><code>Broker</code>对象使用命令模式来标识哪个对象，并根据命令类型执行哪个命令。 <code>CommandPatternDemo</code>这是一个演示入口类，将使用<code>Broker</code>类演示命令模式。</p> 
 <p>命令模式的实现实例结构如下图中所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/08/913151234_57739.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建一个命令接口。实现代码如下所示 - </p> 
 <p><em>Order.java</em></p> 
 <pre><code class="lang-java">public interface Order {
   void execute();
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>创建一个请求对象<br><em>Stock.java</em></p> 
 <pre><code class="lang-java">public class Stock {

   private String name = "ABC";
   private int quantity = 10;

   public void buy(){
      System.out.println("Stock [ Name: "+name+", 
         Quantity: " + quantity +" ] bought");
   }
   public void sell(){
      System.out.println("Stock [ Name: "+name+", 
         Quantity: " + quantity +" ] sold");
   }
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>创建实现<code>Order</code>接口的具体类。</p> 
 <p><em>BuyStock.java</em></p> 
 <pre><code class="lang-java">public class BuyStock implements Order {
   private Stock abcStock;

   public BuyStock(Stock abcStock){
      this.abcStock = abcStock;
   }

   public void execute() {
      abcStock.buy();
   }
}
</code></pre> 
 <p><em>SellStock.java</em></p> 
 <pre><code class="lang-java">public class SellStock implements Order {
   private Stock abcStock;

   public SellStock(Stock abcStock){
      this.abcStock = abcStock;
   }

   public void execute() {
      abcStock.sell();
   }
}
</code></pre> 
 <h3 id="h3--4-"><a name="第4步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第4步</h3>
 <p>创建命令调用程序类。<br><em>Broker.java</em></p>   
 <pre><code class="lang-java">import java.util.ArrayList;
import java.util.List;

   public class Broker {
   private List&lt;Order&gt; orderList = new ArrayList&lt;Order&gt;(); 

   public void takeOrder(Order order){
      orderList.add(order);        
   }

   public void placeOrders(){

      for (Order order : orderList) {
         order.execute();
      }
      orderList.clear();
   }
}
</code></pre> 
 <h3 id="h3--5-"><a name="第5步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第5步</h3>
 <p>使用<code>Broker</code>类来接收和执行命令。<br><em>CommandPatternDemo.java</em></p> 
 <pre><code class="lang-java">public class CommandPatternDemo {
   public static void main(String[] args) {
      Stock abcStock = new Stock();

      BuyStock buyStockOrder = new BuyStock(abcStock);
      SellStock sellStockOrder = new SellStock(abcStock);

      Broker broker = new Broker();
      broker.takeOrder(buyStockOrder);
      broker.takeOrder(sellStockOrder);

      broker.placeOrders();
   }
}
</code></pre> 
 <h3 id="h3--6-"><a name="第6步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第6步</h3>
 <p>验证输出，执行上面的代码得到以下结果 -</p> 
 <pre><code class="lang-java">Stock [ Name: ABC, Quantity: 10 ] bought
Stock [ Name: ABC, Quantity: 10 ] sold
</code></pre>
 <br>      
</div></body></html>