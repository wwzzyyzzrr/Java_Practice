<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java组合模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>组合模式用于需要以同样的方式的方式处理一组对象作为单个对象。组合模式根据树结构组成对象，以表示部分以及整个层次结构。这种类型的设计模式属于结构模式，因为此模式创建了一组对象的树结构。</p> 
 <p>此模式创建一个包含其自身对象的组的类。 此类提供了修改其相同对象的组的方法。</p> 
 <p>我们通过以下示例展示组合模式的使用，将演示员工组织的层次结构。</p> 
 <h2 id="h2-u5B9Eu73B0u5B9Eu4F8B"><a name="实现实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现实例</h2>
 <p>假设有一个类<code>Employee</code>，它作为复合模式操作类。 <code>CompositePatternDemo</code>这是一个演示类，将使用<code>Employee</code>类添加部门级别层次结构并打印所有员工。组合模式示例结构如下图中所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/08/159141213_21559.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建具有<code>Employee</code>对象列表的<code>Employee</code>类。</p> 
 <p><em>Employee.java</em></p> 
 <pre><code class="lang-java">import java.util.ArrayList;
import java.util.List;

public class Employee {
   private String name;
   private String dept;
   private int salary;
   private List&lt;Employee&gt; subordinates;

   // constructor
   public Employee(String name,String dept, int sal) {
      this.name = name;
      this.dept = dept;
      this.salary = sal;
      subordinates = new ArrayList&lt;Employee&gt;();
   }

   public void add(Employee e) {
      subordinates.add(e);
   }

   public void remove(Employee e) {
      subordinates.remove(e);
   }

   public List&lt;Employee&gt; getSubordinates(){
     return subordinates;
   }

   public String toString(){
      return ("Employee :[ Name : " + name + ", dept : " + dept + ", salary :" + salary+" ]");
   }   
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>使用<code>Employee</code>类来创建和打印员工层次结构。</p> 
 <p><em>CompositePatternDemo.java</em></p> 
 <pre><code class="lang-java">public class CompositePatternDemo {
   public static void main(String[] args) {

      Employee CEO = new Employee("John","CEO", 30000);

      Employee headSales = new Employee("Robert","Head Sales", 20000);

      Employee headMarketing = new Employee("Michel","Head Marketing", 20000);

      Employee clerk1 = new Employee("Laura","Marketing", 10000);
      Employee clerk2 = new Employee("Bob","Marketing", 10000);

      Employee salesExecutive1 = new Employee("Richard","Sales", 10000);
      Employee salesExecutive2 = new Employee("Rob","Sales", 10000);

      CEO.add(headSales);
      CEO.add(headMarketing);

      headSales.add(salesExecutive1);
      headSales.add(salesExecutive2);

      headMarketing.add(clerk1);
      headMarketing.add(clerk2);

      //print all employees of the organization
      System.out.println(CEO); 

      for (Employee headEmployee : CEO.getSubordinates()) {
         System.out.println(headEmployee);

         for (Employee employee : headEmployee.getSubordinates()) {
            System.out.println(employee);
         }
      }        
   }
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>验证输出，执行上面的代码得到以下结果 -</p>   
 <pre><code class="lang-java">Employee :[ Name : John, dept : CEO, salary :30000 ]
Employee :[ Name : Robert, dept : Head Sales, salary :20000 ]
Employee :[ Name : Richard, dept : Sales, salary :10000 ]
Employee :[ Name : Rob, dept : Sales, salary :10000 ]
Employee :[ Name : Michel, dept : Head Marketing, salary :20000 ]
Employee :[ Name : Laura, dept : Marketing, salary :10000 ]
Employee :[ Name : Bob, dept : Marketing, salary :10000 ]
</code></pre>
 <br>      
</div></body></html>