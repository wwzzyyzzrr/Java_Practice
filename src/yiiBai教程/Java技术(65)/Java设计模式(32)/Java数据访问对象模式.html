<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java数据访问对象模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>数据访问对象模式或DAO模式用于将低级数据访问API或操作与高级业务服务分离。 以下是数据访问对象模式的参与者。</p> 
 <ul> 
  <li><strong>数据访问对象接口</strong> - 此接口定义要对模型对象执行的标准操作。</li>
  <li><strong>数据访问对象具体类</strong> - 此类实现上述接口。 这个类负责从数据源获取数据，数据源可以是数据库/xml或任何其他存储机制。</li>
  <li><strong>模型对象或值对象</strong> - 此对象是简单的POJO，包含用于存储使用DAO类检索的数据的<code>get/set</code>方法。</li>
 </ul> 
 <h2 id="h2-u5B9Eu73B0u5B9Eu4F8B"><a name="实现实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现实例</h2>
 <p>在这个将创建一个作为<code>Model</code>或<code>Value</code>对象的<code>Student</code>对象。 <code>StudentDao</code>是数据访问对象接口。 <code>StudentDaoImpl</code>是实现数据访问对象接口的具体类。 DaoPatternDemo这是一个演示类，将使用<code>StudentDao</code>演示使用数据访问对象模式。</p> 
 <p>数据访问对象模式示例的结构如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/09/419141215_25295.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建值对象，其代码如下 - </p> 
 <p><em>Student.java</em></p> 
 <pre><code class="lang-java">public class Student {
   private String name;
   private int rollNo;

   Student(String name, int rollNo){
      this.name = name;
      this.rollNo = rollNo;
   }

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }

   public int getRollNo() {
      return rollNo;
   }

   public void setRollNo(int rollNo) {
      this.rollNo = rollNo;
   }
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>创建数据访问对象接口，其代码如下 - </p> 
 <p><em>StudentDao.java</em></p> 
 <pre><code class="lang-java">import java.util.List;

public interface StudentDao {
   public List&lt;Student&gt; getAllStudents();
   public Student getStudent(int rollNo);
   public void updateStudent(Student student);
   public void deleteStudent(Student student);
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>创建实现上面的接口的具体类，其代码如下 - </p> 
 <p><em>StudentDaoImpl.java</em></p> 
 <pre><code class="lang-java">import java.util.ArrayList;
import java.util.List;

public class StudentDaoImpl implements StudentDao {

   //list is working as a database
   List&lt;Student&gt; students;

   public StudentDaoImpl(){
      students = new ArrayList&lt;Student&gt;();
      Student student1 = new Student("Robert",0);
      Student student2 = new Student("John",1);
      students.add(student1);
      students.add(student2);
   }
   @Override
   public void deleteStudent(Student student) {
      students.remove(student.getRollNo());
      System.out.println("Student: Roll No " + student.getRollNo() + ", deleted from database");
   }

   //retrive list of students from the database
   @Override
   public List&lt;Student&gt; getAllStudents() {
      return students;
   }

   @Override
   public Student getStudent(int rollNo) {
      return students.get(rollNo);
   }

   @Override
   public void updateStudent(Student student) {
      students.get(student.getRollNo()).setName(student.getName());
      System.out.println("Student: Roll No " + student.getRollNo() + ", updated in the database");
   }
}
</code></pre> 
 <h3 id="h3--4-"><a name="第4步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第4步</h3>
 <p>使用<code>StudentDao</code>演示数据访问对象模式的使用。<br><em>DaoPatternDemo.java</em></p>   
 <pre><code class="lang-java">public class DaoPatternDemo {
   public static void main(String[] args) {
      StudentDao studentDao = new StudentDaoImpl();

      //print all students
      for (Student student : studentDao.getAllStudents()) {
         System.out.println("Student: [RollNo : " + student.getRollNo() + ", Name : " + student.getName() + " ]");
      }


      //update student
      Student student =studentDao.getAllStudents().get(0);
      student.setName("Michael");
      studentDao.updateStudent(student);

      //get the student
      studentDao.getStudent(0);
      System.out.println("Student: [RollNo : " + student.getRollNo() + ", Name : " + student.getName() + " ]");        
   }
}
</code></pre> 
 <h3 id="h3--5-"><a name="第5步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第5步</h3>
 <p>验证输出，执行上面的代码得到以下结果 -</p> 
 <pre><code class="lang-java">Student: [RollNo : 0, Name : Robert ]
Student: [RollNo : 1, Name : John ]
Student: Roll No 0, updated in the database
Student: [RollNo : 0, Name : Michael ]
</code></pre>
 <br>      
</div></body></html>