<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java建造者(Builder)模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>构建器（<em>Builder</em>）模式使用简单对象并使用逐步方法构建复杂对象。 这种类型的设计模式属于创建模式，因为此模式提供了创建对象的最佳方法之一。</p> 
 <p>构建器（<em>Builder</em>）模式构建器逐步构建最终对象，此构建器独立于其他对象。</p> 
 <h2 id="h2-u5B9Eu4F8Bu5B9Eu4F8B"><a name="实例实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例实例</h2>
 <p>我们考虑了一家快餐店的商业案例，其中典型的餐点可能是汉堡和冷饮。 汉堡可以是一个素食汉堡或鸡肉汉堡，将被包装进行包装。 冷饮可以是一个可乐或百事将装放在一个瓶子中。</p> 
 <p>我们将创建一个<code>Item</code>接口，表示食品项目，如汉堡包和冷饮料以及实现<code>Item</code>接口的具体类。还有一个包装接口，表示食品包装和实现包装接口的具体类，因为汉堡包装在包装和冷饮将包装成瓶子。</p> 
 <p>然后创建一个具有<code>ItemListList</code>和<code>MealBuilder</code>的<code>Meal</code>类，通过组合<code>Item</code>来构建不同类型的<code>Meal</code>对象。 <code>BuilderPatternDemo</code>这是一个演示类将使用<code>MealBuilder</code>构建一个食品套餐。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/08/231101212_29998.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建两个接口分别代表食品和包装的项目（<code>Item</code> 和 <code>Packing</code>），如下所示 - </p> 
 <p><em>Item.java</em></p> 
 <pre><code class="lang-java">public interface Item {
   public String name();
   public Packing packing();
   public float price();    
}
</code></pre> 
 <p><em>Packing.java</em></p> 
 <pre><code class="lang-java">public interface Packing {
   public String pack();
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>创建实现<code>Packing</code>接口的具体类。如下代码所示 - </p> 
 <p><em>Wrapper.java</em></p> 
 <pre><code class="lang-java">public class Wrapper implements Packing {

   @Override
   public String pack() {
      return "Wrapper";
   }
}
</code></pre> 
 <p><em>Bottle.java</em></p> 
 <pre><code class="lang-java">public class Bottle implements Packing {

   @Override
   public String pack() {
      return "Bottle";
   }
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>创建抽象类实现<code>Item</code>接口提供默认功能。</p> 
 <p><em>Burger.java</em></p> 
 <pre><code class="lang-java">public abstract class Burger implements Item {

   @Override
   public Packing packing() {
      return new Wrapper();
   }

   @Override
   public abstract float price();
}
</code></pre> 
 <p><em>ColdDrink.java</em></p> 
 <pre><code class="lang-java">public abstract class ColdDrink implements Item {

    @Override
    public Packing packing() {
       return new Bottle();
    }

    @Override
    public abstract float price();
}
</code></pre> 
 <h3 id="h3--4-"><a name="第4步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第4步</h3>
 <p>创建扩展汉堡(<code>Burger</code>)和冷饮(<code>ColdDrink</code> )类的具体类</p> 
 <p><em>VegBurger.java</em></p> 
 <pre><code class="lang-java">public class VegBurger extends Burger {

   @Override
   public float price() {
      return 25.0f;
   }

   @Override
   public String name() {
      return "Veg Burger";
   }
}
</code></pre> 
 <p><em>ChickenBurger.java</em></p> 
 <pre><code class="lang-java">public class ChickenBurger extends Burger {

   @Override
   public float price() {
      return 50.5f;
   }

   @Override
   public String name() {
      return "Chicken Burger";
   }
}
</code></pre> 
 <p><em>Coke.java</em></p> 
 <pre><code class="lang-java">public class Coke extends ColdDrink {

   @Override
   public float price() {
      return 30.0f;
   }

   @Override
   public String name() {
      return "Coke";
   }
}
</code></pre> 
 <p><em>Pepsi.java</em></p> 
 <pre><code class="lang-java">public class Pepsi extends ColdDrink {

   @Override
   public float price() {
      return 35.0f;
   }

   @Override
   public String name() {
      return "Pepsi";
   }
}
</code></pre> 
 <h3 id="h3--5-"><a name="第5步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第5步</h3>
 <p>创建一个具有上面定义的<code>Item</code>对象的<code>Meal</code>类。</p> 
 <p><em>Meal.java</em></p>   
 <pre><code class="lang-java">import java.util.ArrayList;
import java.util.List;

public class Meal {
   private List&lt;Item&gt; items = new ArrayList&lt;Item&gt;();    

   public void addItem(Item item){
      items.add(item);
   }

   public float getCost(){
      float cost = 0.0f;

      for (Item item : items) {
         cost += item.price();
      }        
      return cost;
   }

   public void showItems(){

      for (Item item : items) {
         System.out.print("Item : " + item.name());
         System.out.print(", Packing : " + item.packing().pack());
         System.out.println(", Price : " + item.price());
      }        
   }    
}
</code></pre> 
 <h3 id="h3--6-"><a name="第6步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第6步</h3>
 <p>创建一个<code>MealBuilder</code>类，这是一个实际的构建类负责创建<code>Meal</code>对象。</p> 
 <p><em>MealBuilder.java</em></p> 
 <pre><code class="lang-java">public class MealBuilder {

   public Meal prepareVegMeal (){
      Meal meal = new Meal();
      meal.addItem(new VegBurger());
      meal.addItem(new Coke());
      return meal;
   }   

   public Meal prepareNonVegMeal (){
      Meal meal = new Meal();
      meal.addItem(new ChickenBurger());
      meal.addItem(new Pepsi());
      return meal;
   }
}
</code></pre> 
 <h3 id="h3--7-"><a name="第7步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第7步</h3>
 <p><code>BuiderPatternDemo</code>类使用<code>MealBuider</code>对象来演示构建器模式。</p> 
 <p><em>BuilderPatternDemo.java</em></p> 
 <pre><code class="lang-java">public class BuilderPatternDemo {
   public static void main(String[] args) {

      MealBuilder mealBuilder = new MealBuilder();

      Meal vegMeal = mealBuilder.prepareVegMeal();
      System.out.println("Veg Meal");
      vegMeal.showItems();
      System.out.println("Total Cost: " + vegMeal.getCost());

      Meal nonVegMeal = mealBuilder.prepareNonVegMeal();
      System.out.println("\n\nNon-Veg Meal");
      nonVegMeal.showItems();
      System.out.println("Total Cost: " + nonVegMeal.getCost());
   }
}
</code></pre> 
 <h3 id="h3--8-"><a name="第8步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第8步</h3>
 <p>验证输出，执行上面代码得到如下结果 - </p> 
 <pre><code class="lang-java">Veg Meal
Item : Veg Burger, Packing : Wrapper, Price : 25.0
Item : Coke, Packing : Bottle, Price : 30.0
Total Cost: 55.0


Non-Veg Meal
Item : Chicken Burger, Packing : Wrapper, Price : 50.5
Item : Pepsi, Packing : Bottle, Price : 35.0
Total Cost: 85.5
</code></pre>
 <br>      
</div></body></html>