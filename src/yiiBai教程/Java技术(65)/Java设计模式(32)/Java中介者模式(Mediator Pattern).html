<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java中介者模式(Mediator Pattern)</h1><div style="width:100%;float:left;" class="article-content">   
 <p>中介者模式(<strong>Mediator Pattern</strong>）用于减少多个对象或类之间的通信复杂性。 此模式提供了一个中介类，它通常处理不同类之间的所有通信，并支持通过松散耦合来维护代码。中介者模式属于行为模式类别。</p> 
 <h2 id="h2-u5B9Eu73B0u5B9Eu4F8B"><a name="实现实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现实例</h2>
 <p>在这里通过一个聊天室的示例来演示中介者模式的使用，在聊天室中，多个用户可以向聊天室发送消息，并且聊天室的责任是向所有用户显示消息。在示例中创建了两个类<code>ChatRoom</code>和<code>User</code>。 用户对象将使用<code>ChatRoom</code>方法来共享他们的消息。</p> 
 <p><code>MediatorPatternDemo</code>这是一个演示类，它使用<code>User</code>对象来显示它们之间的通信。</p> 
 <p>中介者模式(<strong>Mediator Pattern</strong>）示例的结构如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/08/689171221_24202.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建一个聊天室类- <code>ChatRoom</code>，如下代码所示 -<br><em>ChatRoom.java</em></p> 
 <pre><code class="lang-java">import java.util.Date;

public class ChatRoom {
   public static void showMessage(User user, String message){
      System.out.println(new Date().toString() + " [" + user.getName() + "] : " + message);
   }
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>创建一个用户类- <code>User</code><br><em>User.java</em></p> 
 <pre><code class="lang-java">public class User {
   private String name;

   public String getName() {
      return name;
   }

   public void setName(String name) {
      this.name = name;
   }

   public User(String name){
      this.name  = name;
   }

   public void sendMessage(String message){
      ChatRoom.showMessage(this,message);
   }
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>使用<code>User</code>对象显示它们之间的通信。<br><em>MediatorPatternDemo.java</em></p>   
 <pre><code class="lang-java">public class MediatorPatternDemo {
   public static void main(String[] args) {
      User robert = new User("Robert");
      User john = new User("John");

      robert.sendMessage("Hi! John!");
      john.sendMessage("Hello! Robert!");
   }
}
</code></pre> 
 <h3 id="h3--4-"><a name="第4步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第4步</h3>
 <p>验证输出，执行上面的代码得到以下结果 -</p> 
 <pre><code class="lang-java">Sat Dec 03 17:12:59 CST 2016 [Robert] : Hi! John!
Sat Dec 03 17:12:59 CST 2016 [John] : Hello! Robert!
</code></pre>
 <br>      
</div></body></html>