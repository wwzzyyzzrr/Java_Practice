<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java状态模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在状态模式中，类行为根据其状态而改变。 这种设计模式属于行为模式。<br>在状态模式中，我们创建表示各种状态的对象，以及随状态对象变化而行为变化的上下文对象。</p> 
 <h2 id="h2-u5B9Eu73B0"><a name="实现" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现</h2>
 <p>我们将创建一个<code>State</code>接口来定义一个动作并实现<code>State</code>接口的具体状态类。<code>Context</code>是一个载有一个状态的类。</p> 
 <p>演示类<code>StatePatternDemo</code>将使用<code>Context</code>和状态对象来演示上下文行为基于它所处的状态类型的变化。<br><img src="http://www.yiibai.com/uploads/images/201801/0801/363090143_93683.jpg" alt=""></p> 
 <p><strong>第1步</strong>：创建一个接口，<em>State.java</em> - </p> 
 <pre><code class="lang-java">public interface State {
   public void doAction(Context context);
}
</code></pre> 
 <p><strong>第2步</strong>：创建实现相同接口的具体类。<em>StartState.java</em> - </p> 
 <pre><code class="lang-java">public class StartState implements State {

   public void doAction(Context context) {
      System.out.println("Player is in start state");
      context.setState(this);    
   }

   public String toString(){
      return "Start State";
   }
}
</code></pre> 
 <p>文件：<em>StopState.java</em> - </p> 
 <pre><code class="lang-java">public class StopState implements State {

   public void doAction(Context context) {
      System.out.println("Player is in stop state");
      context.setState(this);    
   }

   public String toString(){
      return "Stop State";
   }
}
</code></pre> 
 <p><strong>第3步</strong>：创建 Context 类，<em>Context.java</em> - </p>   
 <pre><code class="lang-java">public class Context {
   private State state;

   public Context(){
      state = null;
   }

   public void setState(State state){
      this.state = state;        
   }

   public State getState(){
      return state;
   }
}
</code></pre> 
 <p><strong>第4步</strong>：使用<code>Context</code>查看状态更改时的行为更改。<em>StatePatternDemo.java</em> -</p> 
 <pre><code class="lang-java">public class StatePatternDemo {
   public static void main(String[] args) {
      Context context = new Context();

      StartState startState = new StartState();
      startState.doAction(context);

      System.out.println(context.getState().toString());

      StopState stopState = new StopState();
      stopState.doAction(context);

      System.out.println(context.getState().toString());
   }
}
</code></pre> 
 <p><strong>第5步</strong>：验证输出结果 - </p> 
 <pre><code class="lang-shell">Player is in start state
Start State
Player is in stop state
Stop State
</code></pre>
 <br>      
</div></body></html>