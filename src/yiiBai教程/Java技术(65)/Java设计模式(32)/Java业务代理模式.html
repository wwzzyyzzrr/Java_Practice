<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java业务代理模式</h1><div style="width:100%;float:left;" class="article-content">   
 <p>业务代理模式用于解耦表示层和业务层。 它基本上用于减少表示层代码中的业务层代码的通信或远程查找功能。在业务层有以下实体。</p> 
 <ul> 
  <li><strong>客户端（Client）</strong> - 表示层代码可以是JSP，servlet或UI java代码。</li>
  <li><strong>业务代理</strong> - 为客户端实体提供对业务服务方法的访问的单个入口点类。</li>
  <li><strong>查找服务</strong> - 查找服务对象负责获得相关业务的实施和提供业务的委托对象业务对象的访问。</li>
  <li><strong>业务服务</strong> - 业务服务接口。 具体类实现这个业务服务以提供实际的业务实现逻辑。</li>
 </ul> 
 <h2 id="h2-u5B9Eu73B0u5B9Eu4F8B"><a name="实现实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实现实例</h2>
 <p>在这个实现实例中，将创建一个业务代理模式的各种实体的<code>Client</code>，<code>BusinessDelegate</code>，<code>BusinessService</code>，<code>LookUpService</code>，<code>JMSService</code>和<code>EJBService</code>。</p> 
 <p><code>BusinessDelegatePatternDemo</code>这是一个演示类，将使用 <code>BusinessDelegate</code> 和 <code>Client</code> 来演示业务代理模式的使用。</p> 
 <p>业务代理模式示例的结构如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201612/09/317111251_33428.jpg" alt=""></p> 
 <h3 id="h3--1-"><a name="第1步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第1步</h3>
 <p>创建<code>BusinessService</code>接口，其代码如下所示 -<br><em>BusinessService.java</em></p> 
 <pre><code class="lang-java">public interface BusinessService {
   public void doProcessing();
}
</code></pre> 
 <h3 id="h3--2-"><a name="第2步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第2步</h3>
 <p>创建具体的服务类，其代码如下所示 -<br><em>EJBService.java</em></p> 
 <pre><code class="lang-java">public class EJBService implements BusinessService {

   @Override
   public void doProcessing() {
      System.out.println("Processing task by invoking EJB Service");
   }
}
</code></pre> 
 <p><em>JMSService.java</em></p> 
 <pre><code class="lang-java">public class JMSService implements BusinessService {

   @Override
   public void doProcessing() {
      System.out.println("Processing task by invoking JMS Service");
   }
}
</code></pre> 
 <h3 id="h3--3-"><a name="第3步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第3步</h3>
 <p>创建业务查找服务，其代码如下所示 -<br><em>BusinessLookUp.java</em></p> 
 <pre><code class="lang-java">public class BusinessLookUp {
   public BusinessService getBusinessService(String serviceType){

      if(serviceType.equalsIgnoreCase("EJB")){
         return new EJBService();
      }
      else {
         return new JMSService();
      }
   }
}
</code></pre> 
 <h3 id="h3--4-"><a name="第4步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第4步</h3>
 <p>创建业务代理，其代码如下所示 -<br><em>BusinessDelegate.java</em></p>   
 <pre><code class="lang-java">public class BusinessDelegate {
   private BusinessLookUp lookupService = new BusinessLookUp();
   private BusinessService businessService;
   private String serviceType;

   public void setServiceType(String serviceType){
      this.serviceType = serviceType;
   }

   public void doTask(){
      businessService = lookupService.getBusinessService(serviceType);
      businessService.doProcessing();        
   }
}
</code></pre> 
 <h3 id="h3--5-"><a name="第5步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第5步</h3>
 <p>创建客户端，其代码如下所示 -<br><em>Client.java</em></p> 
 <pre><code class="lang-java">public class Client {

   BusinessDelegate businessService;

   public Client(BusinessDelegate businessService){
      this.businessService  = businessService;
   }

   public void doTask(){        
      businessService.doTask();
   }
}
</code></pre> 
 <h3 id="h3--6-"><a name="第6步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第6步</h3>
 <p>使用<code>BusinessDelegate</code>和<code>Client</code>类来演示业务代理模式，其代码如下所示 -<br><em>BusinessDelegatePatternDemo.java</em></p> 
 <pre><code class="lang-java">public class BusinessDelegatePatternDemo {

   public static void main(String[] args) {

      BusinessDelegate businessDelegate = new BusinessDelegate();
      businessDelegate.setServiceType("EJB");

      Client client = new Client(businessDelegate);
      client.doTask();

      businessDelegate.setServiceType("JMS");
      client.doTask();
   }
}
</code></pre> 
 <h3 id="h3--7-"><a name="第7步" class="reference-link"></a><span class="header-link octicon octicon-link"></span>第7步</h3>
 <p>验证输出，执行上面的代码得到以下结果 -</p> 
 <pre><code class="lang-java">Processing task by invoking EJB Service
Processing task by invoking JMS Service
</code></pre>
 <br>      
</div></body></html>