<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JDBC结果集</h1><div style="width:100%;float:left;" class="article-content">   
 <p>SQL语句执行后从数据库查询读取数据，返回的数据放在结果集中。 <code>SELECT</code>语句用于从数据库中选择行并在结果集中查看它们的标准方法。 <code>java.sql.ResultSet</code>接口表示数据库查询的结果集。</p> 
 <p><code>ResultSet</code>对象维护指向结果集中当前行的游标。 术语“结果集”是指包含在<code>ResultSet</code>对象中的行和列数据。</p> 
 <p><code>ResultSet</code>接口的方法可以分为三类：</p> 
 <ul> 
  <li><strong>浏览方法</strong>：用于移动光标。</li>
  <li><strong>获取方法</strong>：用于查看光标指向的当前行的列中的数据。</li>
  <li><strong>更新方法</strong>：用于更新当前行的列中的数据。 然后在基础数据库中更新数据。</li>
 </ul> 
 <p>光标可以基于<code>ResultSet</code>的属性移动。当创建生成<code>ResultSet</code>的相应<code>Statement</code>时，将指定这些属性。</p> 
 <p>JDBC提供以下连接方法来创建具有所需<code>ResultSet</code>的语句 -</p> 
 <ul> 
  <li><code>createStatement(int RSType, int RSConcurrency);</code></li>
  <li><code>prepareStatement(String SQL, int RSType, int RSConcurrency);</code></li>
  <li><code>prepareCall(String sql, int RSType, int RSConcurrency);</code></li>
 </ul> 
 <p>第一个参数表示<code>ResultSet</code>对象的类型，第二个参数是两个<code>ResultSet</code>常量之一，用于指定结果集是只读还是可更新。</p> 
 <h2 id="h2-resultset-"><a name="ResultSet类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ResultSet类型</h2>
 <p>可能的<code>RSType</code>值如下。如果不指定任何<code>ResultSet</code>类型，将自动分配一个<code>TYPE_FORWARD_ONLY</code>值。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>类型</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>ResultSet.TYPE_FORWARD_ONLY</code></td> 
    <td>光标只能在结果集中向前移动。</td> 
   </tr> 
   <tr> 
    <td><code>ResultSet.TYPE_SCROLL_INSENSITIVE</code></td> 
    <td>光标可以向前和向后滚动，结果集对创建结果集后发生的数据库所做的更改不敏感。</td> 
   </tr> 
   <tr> 
    <td><code>ResultSet.TYPE_SCROLL_SENSITIVE</code></td> 
    <td>光标可以向前和向后滚动，结果集对创建结果集之后发生的其他数据库的更改敏感。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2-resultset-"><a name="ResultSet的并发性" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ResultSet的并发性</h2>
 <p>可能的<code>RSConcurrency</code>如下。 如果不指定任何并发类型，将自动获得一个<code>CONCUR_READ_ONLY</code>值。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>并发</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>ResultSet.CONCUR_READ_ONLY</code></td> 
    <td>创建只读结果集，这是默认值。</td> 
   </tr> 
   <tr> 
    <td><code>ResultSet.CONCUR_UPDATABLE</code></td> 
    <td>创建可更新的结果集</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>到目前为止我们写的所有例子可以写成如下，它初始化一个<code>Statement</code>对象来创建一个只向前的只读<code>ResultSet</code>对象 -</p> 
 <pre><code class="lang-java">try {
   Statement stmt = conn.createStatement(
                           ResultSet.TYPE_FORWARD_ONLY,
                           ResultSet.CONCUR_READ_ONLY);
}
catch(Exception ex) {
   ....
}
finally {
   ....
}
</code></pre> 
 <h2 id="h2-u6D4Fu89C8u7ED3u679Cu96C6"><a name="浏览结果集" class="reference-link"></a><span class="header-link octicon octicon-link"></span>浏览结果集</h2>
 <p><code>ResultSet</code>接口中有几种涉及移动光标的方法，包括 -</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public void beforeFirst() throws SQLException</code></td> 
    <td>将光标移动到第一行之前</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public void afterLast() throws SQLException</code></td> 
    <td>将光标移动到最后一行之后。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>public boolean first() throws SQLException</code></td> 
    <td>将光标移动到第一行。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>public void last() throws SQLException</code></td> 
    <td>将光标移动到最后一行。</td> 
   </tr> 
   <tr> 
    <td>5</td> 
    <td><code>public boolean absolute(int row) throws SQLException</code></td> 
    <td>将光标移动到指定的行。</td> 
   </tr> 
   <tr> 
    <td>6</td> 
    <td><code>public boolean relative(int row) throws SQLException</code></td> 
    <td>从当前指向的位置，将光标向前或向后移动给定行数。</td> 
   </tr> 
   <tr> 
    <td>7</td> 
    <td><code>public boolean previous() throws SQLException</code></td> 
    <td>将光标移动到上一行。 如果上一行关闭结果集，此方法返回<code>false</code>。</td> 
   </tr> 
   <tr> 
    <td>8</td> 
    <td><code>public boolean next() throws SQLException</code></td> 
    <td>将光标移动到下一行。 如果结果集中没有更多行，则此方法返回<code>false</code>。</td> 
   </tr> 
   <tr> 
    <td>9</td> 
    <td><code>public int getRow() throws SQLException</code></td> 
    <td>返回光标指向的行号。</td> 
   </tr> 
   <tr> 
    <td>10</td> 
    <td><code>public void moveToInsertRow() throws SQLException</code></td> 
    <td>将光标移动到结果集中的特殊行，该行可用于将新行插入数据库。当前光标位置被记住。</td> 
   </tr> 
   <tr> 
    <td>11</td> 
    <td><code>public void moveToCurrentRow() throws SQLException</code></td> 
    <td>如果光标当前位于插入行，则将光标移回当前行; 否则，此方法什么也不做</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>为了更好的理解，建议学习<a target="_blank" href="http://www.yiibai.com/jdbc/navigate-result-sets.html" title="浏览记录示例代码">浏览记录示例代码</a>。</p> 
 <h2 id="h2-u67E5u770Bu7ED3u679Cu96C6"><a name="查看结果集" class="reference-link"></a><span class="header-link octicon octicon-link"></span>查看结果集</h2>
 <p><code>ResultSet</code>接口包含数十种获取当前行数据的方法。</p> 
 <p>每个可能的数据类型都有一个<code>get</code>方法，每个<code>get</code>方法有两个版本 -</p> 
 <ul> 
  <li>一个是采用列名称。</li>
  <li>另一个采用列索引。</li>
 </ul> 
 <p>例如，如果对查看感兴趣的列包含一个<code>int</code>，则需要使用<code>ResultSet</code>的其中一个<code>getInt()</code>方法 -</p> 
 <table> 
  <thead> 
   <tr> 
    <th>序号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public int getInt(String columnName) throws SQLException</code></td> 
    <td>返回名为<code>columnName</code>的列中当前行中的<code>int</code>值。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public int getInt(int columnIndex) throws SQLException</code></td> 
    <td>返回指定列索引当前行中的<code>int</code>值。列索引从<code>1</code>开始，意味着行的第一列为<code>1</code>，行的第二列为<code>2</code>，依此类推。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>类似地，在八个Java基元类型中的每一个的<code>ResultSet</code>接口中都有<code>get</code>方法，以及常见的类型，如<code>java.lang.String</code>，<code>java.lang.Object</code>和<code>java.net.URL</code>等。</p> 
 <p>还有一些方法可以获取SQL数据类型<code>java.sql.Date，java.sql.Time</code>，<code>java.sql.TimeStamp</code>，<code>java.sql.Clob</code>和<code>java.sql.Blob</code>。查看文档以获取有关使用这些SQL数据类型的更多信息。</p> 
 <p>为了更好的理解，建议学习研究<a target="_blank" href="http://www.yiibai.com/jdbc/viewing-result-sets.html" title="查看示例代码">查看结果集示例代码</a></p> 
 <h2 id="h2-u66F4u65B0u7ED3u679Cu96C6"><a name="更新结果集" class="reference-link"></a><span class="header-link octicon octicon-link"></span>更新结果集</h2>  
 <p><code>ResultSet</code>接口包含用于更新结果集的数据的更新方法的集合。</p> 
 <p>与get方法一样，每种数据类型都有两种更新方法 - </p> 
 <ul> 
  <li>一个是采用列名称。</li>
  <li>另一个采用列索引。</li>
 </ul> 
 <p>例如，要更新结果集当前行的<code>String</code>列，可以使用以下<code>updateString()</code>方法之一：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>序号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public void updateString(int columnIndex, String s) throws SQLException</code></td> 
    <td>将指定列中的<code>String</code>值更改为指定的<code>s</code>值。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public void updateString(String columnName, String s) throws SQLException</code></td> 
    <td>与前前的方法类似，除了使用列的名称而不是列的索引指定。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>有八种基本数据类型的更新方法，以及<code>java.sql</code>包中的<code>String</code>，<code>Object</code>，<code>URL</code>和SQL数据类型。</p> 
 <p>更新结果集中的一行会更改<code>ResultSet</code>对象中当前行的列，但不会更改底层数据库中的列的值。 要更新数据库中的行，需要调用以下方法之一。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>序号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public void updateRow()</code></td> 
    <td>更新数据库中当前行</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public void deleteRow()</code></td> 
    <td>从数据库中删除当前行</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>public void refreshRow()</code></td> 
    <td>刷新结果集中的数据以反映数据库中最近的任何更改。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>public void cancelRowUpdates()</code></td> 
    <td>取消对当前行所做的任何更新。</td> 
   </tr> 
   <tr> 
    <td>5</td> 
    <td><code>public void insertRow()</code></td> 
    <td>在数据库中插入一行。 只有当光标指向插入行时，才能调用此方法。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>为了更好的理解，建议您学习研究“<a target="_blank" href="http://www.yiibai.com/jdbc/updating-result-sets.html" title="更新结果集示例代码">更新结果集示例代码</a>”</p>
 <br>      
</div></body></html>