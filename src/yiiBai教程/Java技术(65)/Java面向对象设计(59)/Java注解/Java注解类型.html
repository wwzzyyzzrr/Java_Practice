<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java注解类型</h1><div style="width:100%;float:left;" class="article-content">   
 <h2 id="h2-u6807u8BB0u6CE8u89E3u7C7Bu578B"><a name="标记注解类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>标记注解类型</h2>
 <p>标记注解类型是没有元素的注解类型，甚至没有默认值。标记注解由注解处理工具使用。</p> 
 <pre><code class="lang-java">public  @interface Marker  {
}
@Marker
public class Main{

}
</code></pre> 
 <h2 id="h2-u5143u6CE8u89E3u7C7Bu578B"><a name="元注解类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>元注解类型</h2>
 <p>元注解类型是注解类型，用于注解其他注解类型。元注解类型是Java类库的一部分。它们在包<code>java.lang.annotation</code>中声明。</p> 
 <p>以下注解类型是元注解类型：</p> 
 <ul> 
  <li>目标</li>
  <li>保留</li>
  <li>继承</li>
  <li>文档记录</li>
  <li>可重复的</li>
  <li>本地</li>
 </ul> 
 <h2 id="h2-u76EEu6807u6CE8u91CAu7C7Bu578B"><a name="目标注释类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>目标注释类型</h2>
 <p>目标注释类型注释注释类型以设置上下文以使用注释类型。它只有一个名为<code>value</code>的元素。 其值元素是<code>java.lang.annotation.ElementType</code>枚举类型的数组。下表列出了<code>ElementType</code>枚举中的所有常量。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>常量名称</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>ANNOTATION_TYPE</td> 
    <td>注释另一个注释类型声明，使注释类型为元注释。</td> 
   </tr> 
   <tr> 
    <td>CONSTRUCTOR</td> 
    <td>注释构造函数。</td> 
   </tr> 
   <tr> 
    <td>FIELD</td> 
    <td>注释字段和枚举常量。</td> 
   </tr> 
   <tr> 
    <td>LOCAL_VARIABLE</td> 
    <td>注释局部变量。</td> 
   </tr> 
   <tr> 
    <td>METHOD</td> 
    <td>注释方法。</td> 
   </tr> 
   <tr> 
    <td>PACKAGE</td> 
    <td>注释包声明。</td> 
   </tr> 
   <tr> 
    <td>PARAMETER</td> 
    <td>注释参数。</td> 
   </tr> 
   <tr> 
    <td>TYPE</td> 
    <td>注释类，接口(包括注释类型)或枚举声明。</td> 
   </tr> 
   <tr> 
    <td>TYPE_PARAMETER</td> 
    <td>在通用类，接口，方法等中注释类型参数。</td> 
   </tr> 
   <tr> 
    <td>TYPE_USE</td> 
    <td>注释所有类型的使用。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p>以下<code>Version</code>注释类型具有目标元注释，它指定<code>Version</code>注释类型可以与只有三种类型的程序元素一起使用：任何类型(类，接口，枚举和注释类型)，构造函数和方法。</p> 
 <pre><code class="lang-java">import java.lang.annotation.Target;
import java.lang.annotation.ElementType;

@Target({ ElementType.TYPE, ElementType.CONSTRUCTOR, ElementType.METHOD })
public @interface Version {
  int major();

  int minor();
}
</code></pre> 
 <p><code>Version</code>注释不能用于除其<code>Target</code>注释中指定的三种类型之外的任何程序元素。</p> 
 <pre><code class="lang-java">import java.lang.annotation.ElementType;
import java.lang.annotation.Target;

@Target({ ElementType.TYPE_USE })
@interface MyAnno {
}

@Target({ ElementType.TYPE_USE })
@interface MyAnno2 {
}

public class Main {
  public void processData() throws @MyAnno Exception {

    int roundedValue = (@MyAnno2 int) .02;

    Main t = new @MyAnno Main();
  }

}
</code></pre> 
 <p>如果不使用<code>Target</code>注释类型注释注释类型，则注释类型可以用作任何声明的修饰符，但类型参数声明除外。</p> 
 <h2 id="h2--retention-"><a name="保留(Retention)注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span>保留(Retention)注释</h2>
 <p>保留(Retention)注释设置注释类型的保留策略。注释可以在三个级别保留 - </p> 
 <ul> 
  <li>仅源代码</li>
  <li>仅类文件，默认行为。</li>
  <li>类文件和运行时</li>
 </ul> 
 <p>保留(<code>Retention</code>)元注释类型指定Java应如何保留注释。如果注释类型具有“仅限源代码”保留策略，则在编译到类文件中时将删除其实例。如果保留策略为“仅类文件”，则其实例将保留在类文件中，但不能在运行时读取。<br>如果保留策略为“类文件和运行时”，则注释实例保留在类文件中，并且它们可在运行时读取。保留元注释类型声明一个名为<code>value</code>的元素，它是<code>java.lang.annotation.RetentionPolicy</code>枚举类型。</p> 
 <p><code>RetentionPolicy</code>枚举有三个常量：<code>SOURCE</code>，<code>CLASS</code> 和 <code>RUNTIME</code>，它们分别用于指定仅源，仅类和类运行时的保留策略。</p> 
 <p>以下代码在版本注释类型上使用保留元注释。它指定版本注释应该在运行时可用。</p> 
 <pre><code class="lang-java">import java.lang.annotation.Target;
import java.lang.annotation.ElementType;
import java.lang.annotation.Retention;
import java.lang.annotation.RetentionPolicy;

@Target({ ElementType.TYPE, ElementType.CONSTRUCTOR, ElementType.METHOD })
@Retention(RetentionPolicy.RUNTIME)
@interface Version {
  int major();

  int minor();
}
</code></pre> 
 <p>如果不对注释类型使用保留元注释，则其保留策略仅默认为类文件。则将无法在运行时读取这些注释。在类文件中或在运行时，局部变量声明上的注释永远不可用，而不考虑注释类型的保留策略。</p> 
 <h2 id="h2-u7EE7u627Fu6CE8u91CAu7C7Bu578B"><a name="继承注释类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>继承注释类型</h2>
 <p>继承注释类型是标记元注释类型。如果注释类型使用<code>Inherited</code>元注释注释，则其实例将由子类声明继承。<br>如果使用注释类型注释除类声明以外的任何元素，它没有任何效果。以下代码显示了<code><a target="_blank" href="https://github.com/Inherited" title="@Inherited" class="at-link">@Inherited</a></code>元注释类型的效果。</p>   
 <pre><code class="lang-java">import java.lang.annotation.Inherited;

@interface Ann2 {
  int id();
}

@Inherited
@interface Ann3 {
  int id();
}

@Ann2(id = 1)
@Ann3(id = 2)
class A {
}

// Class B inherits Ann3(id=2) annotation from the class A
class B extends A {

}
</code></pre> 
 <h2 id="h2-u6587u6863u6CE8u91CA"><a name="文档注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span>文档注释</h2>
 <p>文档化注释类型是标记元注释类型。如果注释类型用<code>Documented</code>注解，Javadoc工具将为其所有实例生成文档。</p> 
 <pre><code class="lang-java">import java.lang.annotation.Documented;

@Documented
@interface Version {
  int major();

  int minor();
}

@Version(major = 1, minor = 0)
public class Main {
}
</code></pre> 
 <p>当使用Javadoc工具为<code>Main</code>类生成文档时，<code>Main</code>类声明上的<code>Version</code>注释也会作为文档的一部分生成。</p> 
 <h2 id="h2-u53EFu91CDu590Du6CE8u91CA"><a name="可重复注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span>可重复注释</h2>
 <p>Java 8添加了可重复元注释类型。如果在一个单独的代码元素上重复使用它，注释类型声明必须用<code><a target="_blank" href="https://github.com/Repeatable" title="@Repeatable" class="at-link">@Repeatable</a></code>来注解。</p> 
 <p><code>Repeatable</code>注释类型只有一个名为<code>value</code>的元素，其类型是另一个注释类型的类类型。</p> 
 <pre><code class="lang-java">import java.lang.annotation.Repeatable;

@interface LogHistory {
  Log[] value();
}

@Repeatable(LogHistory.class)
@interface Log {
  String date();

  String comments();
}

@Log(date = "01/01/2018", comments = "B")
@Log(date = "01/21/2018", comments = "A")
public class Main {
  public static void process() {

  }
}
</code></pre> 
 <h2 id="h2-u672Cu5730u6CE8u91CA"><a name="本地注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span>本地注释</h2>
 <p>本地(Native)注释类型是元注释，用于注释可以从本地代码引用的字段。它是一个标记注释。</p>
 <br>      
</div></body></html>