<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Java注解用法</h1><div style="width:100%;float:left;" class="article-content">   
 <p>Java注解用法</p> 
 <p>注解元素的提供值必须是编译时常量表达式，不能使用<code>null</code>作为注解中任何类型元素的值。</p> 
 <h2 id="h2-u57FAu672Cu7C7Bu578B"><a name="基本类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>基本类型</h2>
 <p>注解类型中的元素的数据类型可以是任何基本数据类型：<code>byte</code>，<code>short</code>，<code>int</code>，<code>long</code>，<code>float</code>，<code>double</code>，<code>boolean</code> 和 <code>char</code>。</p> 
 <p><code>Version</code>注释类型声明两个元素：<code>major</code>和<code>minor</code>，并且都是<code>int</code>数据类型。</p> 
 <p>以下代码声明了注解类型：</p> 
 <pre><code class="lang-java">public @interface MyAnnotation {
  byte a();

  short b();

  int c();

  long d();

  float e();

  double f();

  boolean g();

  char h();
}
</code></pre> 
 <pre><code class="lang-java">@MyAnnotation(a=1, b=2,  c=3,  d=4,  e=12.34F, f=1.89, g=true, h='Y')
</code></pre> 
 <p>可以使用编译时常量表达式来指定注解元素的值。以下两个版本注释实例有效的：</p> 
 <pre><code class="lang-java">@Version(major=2+1, minor=(int)13.2)
@Version(major=3, minor=13)
</code></pre> 
 <h2 id="h2-u5B57u7B26u4E32u7C7Bu578B"><a name="字符串类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>字符串类型</h2>
 <p>可以在注释类型中使用<code>String</code>类型的元素。以下代码定义了名为<code>Name</code>的注解类型。 它有两个元素：<code>first</code>和<code>last</code>，它们都是<code>String</code>类型。</p> 
 <pre><code class="lang-java">public @interface Name  { 
   String first(); 
   String last();
}

@Name(first="Tom", last="Smith")
public class NameTest {
    @Name(first="Jack", last="Iaan")
    public void  aMethod()   {
    }
}
</code></pre> 
 <p>在<code>String</code>类型的元素的值表达式中使用字符串连接<code>+</code>运算符是有效的。</p> 
 <pre><code class="lang-java">@Name(first="Ja" + "ck", last="Ia" + "an")
</code></pre> 
 <h2 id="h2-class-"><a name="Class类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Class类型</h2>
 <p>以下代码显示如何使用<code>Class</code>类型作为注解值。</p> 
 <pre><code class="lang-java">import java.io.IOException;

@interface MyAnnotation {
  Class&lt;? extends Throwable&gt; willThrow() default java.lang.Throwable.class;
}

public class Main {
  @MyAnnotation(willThrow = IOException.class)
  public static void testCase1() {
    // Code goes here
  }

  @MyAnnotation()
  public static void testCase2() {
  }
}
</code></pre> 
 <h2 id="h2-u679Au4E3Eu7C7Bu578B"><a name="枚举类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>枚举类型</h2>
 <p>注解可以具有枚举类型的元素。</p> 
 <pre><code class="lang-java">enum Level {
  PENDING, FAILED, PASSED;
}

@interface Review {
  Level status() default Level.PENDING;

  String comments() default "";
}

@Review(status = Level.PASSED)
public class Main {

}
</code></pre> 
 <h2 id="h2-u6CE8u89E3u7C7Bu578B"><a name="注解类型" class="reference-link"></a><span class="header-link octicon octicon-link"></span>注解类型</h2>
 <p>可以使用注解类型作为另一个注解类型的声明内的元素的类型。要为注解类型的元素提供值，请使用用于创建注解类型实例的语法。</p> 
 <pre><code class="lang-java">@interface Name {
  String first();

  String last();
}

@interface Version {
  int major();

  int minor() default 0; // zero as default value for minor
}

@interface Description {
  Name name();

  Version version();

  String comments() default "";
}

@Description(name = @Name(first = "Tom", last = "Smith"), version = @Version(major = 1, minor = 2), comments = "Just a  test class")
public class Main {

}
</code></pre> 
 <p>注解可以具有数组类型的元素。数组类型可以是以下类型之一：</p> 
 <ul> 
  <li>原始类型</li>
  <li><code>java.lang.String</code>类型</li>
  <li><code>java.lang.Class</code>类型</li>
  <li>枚举类型</li>
  <li>注解类型</li>
 </ul> 
 <p>需要在大括号中指定数组元素的值。数组的元素由逗号分隔。</p>   
 <pre><code class="lang-java">@interface ItemList {
  String[] items();
}

@ItemList(items = { "A", "B" })
public class Main {

}
</code></pre> 
 <p>如果数组中只有一个元素，则允许省略括号。</p> 
 <pre><code class="lang-java">@ToDo(items={"A"})
@ToDo(items="A")
</code></pre> 
 <p>传递一个空数组</p> 
 <pre><code class="lang-java">@ToDo(items={})
</code></pre> 
 <h2 id="h2-u901Fu8BB0u6CE8u89E3u8BEDu6CD5"><a name="速记注解语法" class="reference-link"></a><span class="header-link octicon octicon-link"></span>速记注解语法</h2>
 <p>假设有一个注释类型如下。</p> 
 <pre><code class="lang-java">public  @interface Enabled  {
    boolean status() default true;
}
</code></pre> 
 <p>要使用带有默认值的<code>Enabled</code>注解类型注释程序元素，可以使用<code><a target="_blank" href="https://github.com/Enabled" title="@Enabled" class="at-link">@Enabled</a>()</code>语法。<br>不需要为<code>status</code>元素指定值，因为它具有默认值。可以进一步省略括号。</p> 
 <pre><code class="lang-java">@Enabled
public class Main {

}

@Enabled()
public class Main {

}
</code></pre> 
 <p>只有一个元素的注解类型有速记语法。如果注释类型只有一个具有命名值的元素，可以省略<code>name = value</code>对中的名称。以下代码声明了 <code>Company</code> 注解类型，它只有一个名为<code>value</code>的元素：</p> 
 <pre><code class="lang-java">public  @interface Company  {
    String value(); 
}
</code></pre> 
 <p>当使用 <code>Company</code> 注释时，可以省略<code>name = value</code>对的名称。</p> 
 <pre><code class="lang-java">@Company(value="Inc.")
public class Test   {
}
</code></pre> 
 <p>变成 - </p> 
 <pre><code class="lang-java">@Company("Inc.")
public class Test   {
}
</code></pre> 
 <p>以下代码显示了如果元素数据类型是数组，如何使用缩写。</p> 
 <pre><code class="lang-java">public  @interface Item   {
    String[] value();
}

@Item({"A", "B"})
public class Test   {
}
</code></pre> 
 <p>如果在数组注释类型中只指定一个元素，可以进一步省略括号。</p> 
 <pre><code class="lang-java">@Item("A")
public class Test   {
}
</code></pre> 
 <p>如果在使用注释时只提供一个值，则元素的名称为假设那个值。</p>
 <br>      
</div></body></html>