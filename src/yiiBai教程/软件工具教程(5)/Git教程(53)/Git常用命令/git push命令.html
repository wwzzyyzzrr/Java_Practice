<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">git push命令</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>git push</code>命令用于将本地分支的更新，推送到远程主机。它的格式与<code>git pull</code>命令相似。</p> 
 <pre><code class="lang-shell">$ git push &lt;远程主机名&gt; &lt;本地分支名&gt;:&lt;远程分支名&gt;
</code></pre> 
 <p><strong>使用语法</strong></p> 
 <pre><code class="lang-shell">git push [--all | --mirror | --tags] [--follow-tags] [--atomic] [-n | --dry-run] [--receive-pack=&lt;git-receive-pack&gt;]
       [--repo=&lt;repository&gt;] [-f | --force] [-d | --delete] [--prune] [-v | --verbose]
       [-u | --set-upstream] [--push-option=&lt;string&gt;]
       [--[no-]signed|--sign=(true|false|if-asked)]
       [--force-with-lease[=&lt;refname&gt;[:&lt;expect&gt;]]]
       [--no-verify] [&lt;repository&gt; [&lt;refspec&gt;…]]
</code></pre> 
 <h2 id="h2-u63CFu8FF0"><a name="描述" class="reference-link"></a><span class="header-link octicon octicon-link"></span>描述</h2>
 <p>使用本地引用更新远程引用，同时发送完成给定引用所需的对象。可以在每次推入存储库时，通过在那里设置挂钩触发一些事件。</p> 
 <p>当命令行不指定使用<code>&lt;repository&gt;</code>参数推送的位置时，将查询当前分支的<code>branch.*.remote</code>配置以确定要在哪里推送。 如果配置丢失，则默认为<code>origin</code>。</p> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>以下是一些示例 -</p> 
 <pre><code class="lang-shell">$ git push origin master
</code></pre> 
 <p>上面命令表示，将本地的<code>master</code>分支推送到<code>origin</code>主机的<code>master</code>分支。如果<code>master</code>不存在，则会被新建。</p> 
 <p>如果省略本地分支名，则表示删除指定的远程分支，因为这等同于推送一个空的本地分支到远程分支。</p> 
 <pre><code class="lang-shell">$ git push origin :master
# 等同于
$ git push origin --delete master
</code></pre> 
 <p>上面命令表示删除<code>origin</code>主机的<code>master</code>分支。如果当前分支与远程分支之间存在追踪关系，则本地分支和远程分支都可以省略。</p> 
 <pre><code class="lang-shell">$ git push origin
</code></pre> 
 <p>上面命令表示，将当前分支推送到<code>origin</code>主机的对应分支。如果当前分支只有一个追踪分支，那么主机名都可以省略。</p> 
 <pre><code class="lang-shell">$ git push
</code></pre> 
 <p>如果当前分支与多个主机存在追踪关系，则可以使用<code>-u</code>选项指定一个默认主机，这样后面就可以不加任何参数使用<code>git push</code>。</p> 
 <pre><code class="lang-shell">$ git push -u origin master
</code></pre> 
 <p>上面命令将本地的<code>master</code>分支推送到<code>origin</code>主机，同时指定<code>origin</code>为默认主机，后面就可以不加任何参数使用<code>git push</code>了。</p> 
 <p>不带任何参数的<code>git push</code>，默认只推送当前分支，这叫做<code>simple</code>方式。此外，还有一种<code>matching</code>方式，会推送所有有对应的远程分支的本地分支。Git 2.0版本之前，默认采用<code>matching</code>方法，现在改为默认采用<code>simple</code>方式。如果要修改这个设置，可以采用<code>git config</code>命令。</p> 
 <pre><code class="lang-shell">$ git config --global push.default matching
# 或者
$ git config --global push.default simple
</code></pre> 
 <p>还有一种情况，就是不管是否存在对应的远程分支，将本地的所有分支都推送到远程主机，这时需要使用<code>–all</code>选项。</p>   
 <pre><code class="lang-shell">$ git push --all origin
</code></pre> 
 <p>上面命令表示，将所有本地分支都推送到<code>origin</code>主机。<br>如果远程主机的版本比本地版本更新，推送时Git会报错，要求先在本地做<code>git pull</code>合并差异，然后再推送到远程主机。这时，如果你一定要推送，可以使用<code>–force</code>选项。</p> 
 <pre><code class="lang-shell">$ git push --force origin
</code></pre> 
 <p>上面命令使用<code>-–force</code>选项，结果导致在远程主机产生一个”非直进式”的合并(non-fast-forward merge)。除非你很确定要这样做，否则应该尽量避免使用<code>–-force</code>选项。</p> 
 <p>最后，<code>git push</code>不会推送标签(tag)，除非使用<code>–tags</code>选项。</p> 
 <pre><code class="lang-shell">$ git push origin --tags
</code></pre> 
 <p>将当前分支推送到远程的同名的简单方法，如下 - </p> 
 <pre><code class="lang-shell">$ git push origin HEAD
</code></pre> 
 <p>将当前分支推送到源存储库中的远程引用匹配主机。 这种形式方便推送当前分支，而不考虑其本地名称。如下 - </p> 
 <pre><code class="lang-shell">$ git push origin HEAD:master
</code></pre> 
 <p><strong>其它示例</strong></p> 
 <p>1.推送本地分支<code>lbranch-1</code>到新大远程分支<code>rbranch-1</code>：</p> 
 <pre><code class="lang-shell">$ git push origin lbranch-1:refs/rbranch-1
</code></pre> 
 <p>2.推送<code>lbranch-2</code>到已有的<code>rbranch-1</code>，用于补充<code>rbranch-1</code>：</p> 
 <pre><code class="lang-shell">$ git checkout lbranch-2
$ git rebase rbranch-1
$ git push origin lbranch-2:refs/rbranch-1
</code></pre> 
 <p>3.用本地分支<code>lbranch-3</code>覆盖远程分支<code>rbranch-1</code>：</p> 
 <pre><code class="lang-shell">$ git push -f origin lbranch-2:refs/rbranch-1
</code></pre> 
 <p>或者 - </p> 
 <pre><code class="lang-shell">$ git push origin :refs/rbranch-1   //删除远程的rbranch-1分支
$ git push origin lbranch-1:refs/rbranch-1
</code></pre> 
 <p>4.查看<code>push</code>的结果</p> 
 <pre><code class="lang-shell">$ gitk rbranch-1
</code></pre> 
 <p>5.推送tag</p> 
 <pre><code class="lang-shell">$ git push origin tag_name
</code></pre> 
 <p>6.删除远程标签</p> 
 <pre><code class="lang-shell">$ git push origin :tag_name
</code></pre>
 <br>      
</div></body></html>