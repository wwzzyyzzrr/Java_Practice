<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">分析时间序列数据</h1><div style="width:100%;float:left;" class="article-content">   
 <p>预测给定输入序列中的下一个是机器学习中的另一个重要概念。 本章为您提供有关分析时间序列数据的详细说明。</p> 
 <h2 id="h2-u65F6u95F4u5E8Fu5217u6570u636Eu4ECBu7ECD"><a name="时间序列数据介绍" class="reference-link"></a><span class="header-link octicon octicon-link"></span>时间序列数据介绍</h2>
 <p>时间序列数据表示处于一系列特定时间间隔的数据。 如果我们想在机器学习中构建序列预测，那么必须处理连续的数据和时间。 系列数据是连续数据的摘要。 数据排序是顺序数据的一个重要特征。</p> 
 <p><strong>序列分析或时间序列分析的基本概念</strong></p> 
 <p>序列分析或时间序列分析是基于先前观察到的预测给定输入序列中的下一个。 预测可以是任何可能接下来的事情:符号，数字，次日天气，下一个演讲等。序列分析在诸如股票市场分析，天气预报和产品推荐等应用中非常有用。</p> 
 <p><strong>实例</strong></p> 
 <p>考虑下面的例子来理解序列预测。 这里A，B，C，D是给定值，并且必须使用序列预测模型预测值E。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0506/625090646_86441.jpg" alt=""></p> 
 <h2 id="h2-u5B89u88C5u6709u7528u7684u5305"><a name="安装有用的包" class="reference-link"></a><span class="header-link octicon octicon-link"></span>安装有用的包</h2>
 <p>对于使用Python进行时间序列数据分析，我们需要安装以下软件包 - </p> 
 <p><strong>Pandas</strong></p> 
 <p>Pandas是一个开源的BSD许可库，它为Python提供了高性能，简便的数据结构使用和数据分析工具。</p> 
 <blockquote> 
  <p>有关Pandas教程，请访问以下网址:<a target="_blank" href="https://www.yiibai.com/pandas/">https://www.yiibai.com/pandas/</a></p> 
 </blockquote> 
 <p>使用以下命令安装Pandas -</p> 
 <pre><code class="lang-python">pip install pandas
</code></pre> 
 <p>如果您使用的是Anaconda并希望使用conda软件包管理器进行安装，那么可以使用以下命令 -</p> 
 <pre><code class="lang-python">conda install -c anaconda pandas
</code></pre> 
 <p><strong>hmmlearn</strong></p> 
 <p>它是一个开源BSD许可的库，它由简单的算法和模型组成，用于学习Python中的隐马尔可夫模型(HMM)。 使用以下命令安装它 -</p> 
 <pre><code class="lang-python">pip install hmmlearn
</code></pre> 
 <p>如果您使用的是Anaconda并希望使用conda软件包管理器进行安装，那么可以使用以下命令 -</p> 
 <pre><code class="lang-python">conda install -c anaconda hmmlearn
</code></pre> 
 <p><strong>PyStruct</strong></p> 
 <p>它是一个结构化的学习和预测库。 在PyStruct中实现的学习算法具有诸如条件随机场(CRF)，最大值 - 马尔科夫随机网络(M3N)或结构支持向量机等名称。使用以下命令来安装它 -</p> 
 <pre><code class="lang-python">pip install pystruct
</code></pre> 
 <p><strong>CVXOPT</strong></p> 
 <p>它用于基于Python编程语言的凸优化。 它也是一个免费的软件包。 使用以下命令来安装它 -</p> 
 <pre><code class="lang-python">pip install cvxopt
</code></pre> 
 <p>如果您使用的是Anaconda并希望使用conda软件包管理器进行安装，那么可以使用以下命令 -</p> 
 <pre><code class="lang-python">conda install -c anaconda cvdoxt
</code></pre> 
 <h2 id="h2-pandas-"><a name="Pandas:从时间序列数据中处理，分割和提取统计信息" class="reference-link"></a><span class="header-link octicon octicon-link"></span>Pandas:从时间序列数据中处理，分割和提取统计信息</h2>
 <p>如果必须使用时间序列数据，Pandas是一个非常有用的工具。 在Pandas的帮助下，可以执行以下操作 - </p> 
 <ul> 
  <li>使用<code>pd.date_range</code>包创建一系列日期</li>
  <li>通过使用<code>pd.Series</code>包对带有日期数据进行索引</li>
  <li>使用<code>ts.resample</code>包执行重新采样</li>
  <li>改变频率</li>
 </ul> 
 <p><strong>示例</strong></p> 
 <p>以下示例显示使用Pandas处理和分割时间序列数据。 请注意，这里使用月度北极涛动数据，可以从<code>monthly.ao.index.b50.current.ascii</code>下载并可以转换为文本格式。</p> 
 <p><strong>处理时间序列数据</strong></p> 
 <p>要处理时间序列数据，您必须执行以下步骤 - </p> 
 <p><strong>第1步</strong> ，导入以下软件包 -</p> 
 <pre><code class="lang-python">import numpy as np
import matplotlib.pyplot as plt
import pandas as pd
</code></pre> 
 <p>接下来，定义一个函数，它将从输入文件中读取数据，如以下代码所示 -</p> 
 <pre><code class="lang-python">def read_data(input_file):
   input_data = np.loadtxt(input_file, delimiter = None)
</code></pre> 
 <p>现在，将这些数据转换为时间序列。 为此，请创建时间序列的日期范围。 在这个例子中，我们保留一个月的数据频率。 文件中是存储从1950年1月开始的数据。</p> 
 <pre><code class="lang-python">dates = pd.date_range('1950-01', periods = input_data.shape[0], freq = 'M')
</code></pre> 
 <p>在这一步中，在<code>Pandas Series</code>的帮助下创建时间序列数据，如下所示 -</p> 
 <pre><code class="lang-python">output = pd.Series(input_data[:, index], index = dates)    
return output

if __name__=='__main__':
</code></pre> 
 <p>如下所示，指定输入文件的路径 -</p> 
 <pre><code class="lang-python">input_file = "/Users/admin/AO.txt"
</code></pre> 
 <p>现在，将列转换为时间序列格式，如下所示 -</p> 
 <pre><code class="lang-python">timeseries = read_data(input_file)
</code></pre> 
 <p>最后，使用显示的命令绘制并可视化数据 -</p> 
 <pre><code class="lang-python">plt.figure()
timeseries.plot()
plt.show()
</code></pre> 
 <p>观察如下图所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0506/336100605_43119.jpg" alt=""></p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0506/920100605_53260.jpg" alt=""></p> 
 <p><strong>切片时间序列数据</strong><br>切片涉及仅检索时间序列数据的一部分。 作为示例的一部分，我们仅在1980年到1990年间对数据进行分割。请注意以下执行此任务的代码 -</p> 
 <pre><code class="lang-python">timeseries['1980':'1990'].plot()
   &lt;matplotlib.axes._subplots.AxesSubplot at 0xa0e4b00&gt;

plt.show()
</code></pre> 
 <p>当您运行切片时间序列数据的代码时，可以观察下图所示的图形 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0506/304100607_11251.jpg" alt=""></p> 
 <h2 id="h2-u4ECEu65F6u95F4u5E8Fu5217u6570u636Eu4E2Du63D0u53D6u7EDFu8BA1u4FE1u606F"><a name="从时间序列数据中提取统计信息" class="reference-link"></a><span class="header-link octicon octicon-link"></span>从时间序列数据中提取统计信息</h2>
 <p>如果需要得出一些重要结论，需要从一个给定的数据中提取一些统计数据。 平均值，方差，相关性，最大值和最小值是这些统计中的一部分。 如果您想从给定的时间序列数据中提取此类统计信息，则可以使用以下代码 - </p> 
 <p><strong>平均值</strong></p> 
 <p>可以使用<code>mean()</code>函数来查找平均值，如下所示 -</p>   
 <pre><code class="lang-python">timeseries.mean()
</code></pre> 
 <p>例子代码的输出是 -</p> 
 <pre><code class="lang-python">-0.11143128165238671
</code></pre> 
 <p><strong>最大值</strong></p> 
 <p>可以使用<code>max()</code>函数来查找最大值，如下所示 -</p> 
 <pre><code class="lang-python">timeseries.max()
</code></pre> 
 <p>那么在讨论的例子中观察的输出是 -</p> 
 <pre><code class="lang-python">3.4952999999999999
</code></pre> 
 <p><strong>最小值</strong></p> 
 <p>可以使用<code>min()</code>函数来查找最小值，如下所示 -</p> 
 <pre><code class="lang-python">timeseries.min()
</code></pre> 
 <p>那么在讨论的例子中观察的输出是 -</p> 
 <pre><code class="lang-python">-4.2656999999999998
</code></pre> 
 <p><strong>一次性获得所有</strong></p> 
 <p>如果您想一次计算所有统计数据，则可以使用<code>describe()</code>函数，如下所示 -</p> 
 <pre><code class="lang-python">timeseries.describe()
</code></pre> 
 <p>那么观察上面例子的输出是 -</p> 
 <pre><code class="lang-shell">count   817.000000
mean     -0.111431
std       1.003151
min      -4.265700
25%      -0.649430
50%      -0.042744
75%       0.475720
max       3.495300
dtype: float64
</code></pre> 
 <p><strong>重新取样</strong></p> 
 <p>可以将数据重新采样到不同的时间频率。 执行重新采样的两个参数是 -</p> 
 <ul> 
  <li>时间段</li>
  <li>方法</li>
 </ul> 
 <p><strong>使用mean()重新采样</strong></p> 
 <p>以下代码使用<code>mean()</code>方法重新采样数据，这是默认方法 -</p> 
 <pre><code class="lang-python">timeseries_mm = timeseries.resample("A").mean()
timeseries_mm.plot(style = 'g--')
plt.show()
</code></pre> 
 <p>然后，可以观察下面使用<code>mean()</code>重采样输出的图形 -<br><img src="http://www.yiibai.com/uploads/images/201806/0606/578140606_58562.jpg" alt=""></p> 
 <p><strong>使用median()重新采样</strong></p> 
 <p>使用以下代码使用<code>median()</code>方法重新采样数据 -</p> 
 <pre><code class="lang-python">timeseries_mm = timeseries.resample("A").median()
timeseries_mm.plot()
plt.show()
</code></pre> 
 <p>然后，观察下面的图形是使用<code>median()</code>重新采样的输出 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0606/569140608_71101.jpg" alt=""></p> 
 <p><strong>滚动平均值</strong></p> 
 <p>使用下面的代码来计算滚动(移动)的平均值 -</p> 
 <pre><code class="lang-python">timeseries.rolling(window = 12, center = False).mean().plot(style = '-g')
plt.show()
</code></pre> 
 <p>然后，观察滚动(移动)平均值的输出图表 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201806/0606/228140616_11642.jpg" alt=""></p> 
 <h2 id="h2--hmm-"><a name="隐马尔可夫模型(HMM)分析顺序数据" class="reference-link"></a><span class="header-link octicon octicon-link"></span>隐马尔可夫模型(HMM)分析顺序数据</h2>
 <p>HMM是一种统计模型，广泛用于时间序列股市分析，健康检查和语音识别等具有延续性和可扩展性的数据。 本节详细介绍使用隐马尔可夫模型(HMM)分析顺序数据。</p> 
 <h3 id="h3--hmm-"><a name="隐马尔可夫模型(HMM)" class="reference-link"></a><span class="header-link octicon octicon-link"></span>隐马尔可夫模型(HMM)</h3>
 <p>HMM是一个基于马尔可夫链概念的随机模型，它基于未来统计量的概率仅取决于当前过程状态而非其之前的任何状态的假设。 例如，当扔硬币时，不能说第五次抛掷的结果是正面。 这是因为硬币没有任何记忆，下一个结果不依赖于以前的结果。</p> 
 <p>在数学上，HMM由以下变量组成 -</p> 
 <p><strong>状态(S)</strong><br>它是HMM中存在的一组隐藏或潜在状态。 它由S表示。</p> 
 <p><strong>输出符号(O)</strong><br>它是HMM中存在的一组可能的输出符号。 它由O表示。</p> 
 <p><strong>状态转移概率矩阵(A)</strong><br>这是从一个状态过渡到其他状态的可能性。 它由A表示。</p> 
 <p><strong>观测发射概率矩阵(B)</strong><br>它是在特定状态下发射/观测符号的概率。 它由B表示。</p> 
 <p><strong>先验概率矩阵(Π)</strong><br>这是从系统的各种状态开始处于特定状态的概率。 它由<code>Π</code>表示。<br>因此，HMM可以被定义为<code>λ=(S，O，A，B，π)</code>，<br>其中，</p> 
 <ul> 
  <li>S = {s1,s2,…,sN}是一组N个可能的状态，</li>
  <li>O = {o1，o2，…，oM}是一组M个可能的观察符号，</li>
  <li>A是N×N状态转移概率矩阵(TPM)，</li>
  <li>B是N<br>      </li>
 </ul>
</div></body></html>