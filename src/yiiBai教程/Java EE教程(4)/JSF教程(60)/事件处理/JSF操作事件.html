<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JSF操作事件</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在JSF中，我们可以处理如<code>&lt;h:commandButton&gt;</code>或<code>&lt;h:link&gt;</code>组件的用户点击事件。要注册事件处理程序，我们可以在UI组件的<code>actionListener</code>属性中传递托管bean方法的名称。</p> 
 <p>或者也可以选择实现<code>ActionListener</code>接口，并将实现类名称传递给UI 组件的<code>actionListener</code>属性。</p> 
 <p>以下代码显示了如何从<code>&lt;h:commandButton&gt;</code>向<code>actionListener</code>属性添加用户定义的方法。</p> 
 <pre><code class="lang-java">public void updateData(ActionEvent e){
   data="Hello World";
}
</code></pre> 
 <p>使用上述方法</p> 
 <pre><code class="lang-html">&lt;h:commandButton id="submitButton" 
   value="Submit" action="#{userData.showResult}"
   actionListener="#{userData.updateData}" /&gt;
&lt;/h:commandButton&gt;
</code></pre> 
 <p>以下代码显示了如何实现<code>ActionListener</code>并使用<code>f:actionListener</code>标签。</p> 
 <pre><code class="lang-java">public class UserActionListener implements ActionListener{
   @Override
   public void processAction(ActionEvent arg0)
   throws AbortProcessingException {
      //access userData bean directly
      UserData userData = (UserData) FacesContext.getCurrentInstance().
         getExternalContext().getSessionMap().get("userData"); 
      userData.setData("Hello World");
   }
}
</code></pre> 
 <p>使用侦听器方法 -</p> 
 <pre><code class="lang-html">&lt;h:commandButton id="submitButton1" 
   value="Submit" action="#{userData.showResult}" &gt;
   &lt;f:actionListener type="com.yiibai.test.UserActionListener" /&gt;
&lt;/h:commandButton&gt;
</code></pre> 
 <h2 id="h2-u5B9Eu4F8B"><a name="实例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>实例</h2>
 <p>打开<strong>NetBeans</strong>，创建一个名称为：<strong>Actionlistener</strong> 的Web项目，其结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/2604/310110422_16127.png" alt=""></p> 
 <p>以下是文件：<code>User.java</code> 文件中的代码 - </p> 
 <pre><code class="lang-java">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.yiibai;

/**
 *
 * @author Maxsu
 */
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.event.ActionEvent;

@ManagedBean(name = "normal")
@SessionScoped
public class User implements java.io.Serializable {

    public String buttonId = "yiibai.com";

    public String getButtonId() {
        return buttonId;
    }

    public void setButtonId(String buttonId) {
        this.buttonId = buttonId;
    }

    public void printIt(ActionEvent event) {
        //Get submit button id
        buttonId = event.getComponent().getClientId();
    }

    public String outcome() {
        return "result";
    }
}
</code></pre> 
 <p>以下是文件：<code>MyActionListener.java</code> 文件中的代码 - </p> 
 <pre><code class="lang-java">/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package com.yiibai;

/**
 *
 * @author Maxsu
 */
import javax.faces.event.AbortProcessingException;
import javax.faces.event.ActionEvent;
import javax.faces.event.ActionListener;

public class MyActionListener implements ActionListener {

    @Override
    public void processAction(ActionEvent event)
            throws AbortProcessingException {

        System.out.println("Any use case here?");

    }

}
</code></pre> 
 <p>以下是文件：<code>index.xhtml</code> 文件中的代码 - </p>   
 <pre><code class="lang-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      &gt;
    &lt;h:body&gt;
        &lt;h:form id="form"&gt;
            &lt;ui:remove&gt;  
                &lt;h:commandButton id="submitButton" 
                                 value="Submit" action="#{normal.outcome}" 
                                 actionListener="#{normal.printIt}" /&gt;
            &lt;/ui:remove&gt;
            &lt;h:commandButton id="submitButton" 
                             value="Submit" action="#{normal.outcome}" &gt;
                &lt;f:actionListener type="com.yiibai.MyActionListener" /&gt;
            &lt;/h:commandButton&gt;
        &lt;/h:form&gt;
    &lt;/h:body&gt;
&lt;/html&gt;
</code></pre> 
 <p>以下是文件：<code>result.xhtml</code> 文件中的代码 - </p> 
 <pre><code class="lang-html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:h="http://java.sun.com/jsf/html"
      &gt;
    &lt;h:body&gt;
        #{normal.buttonId}
    &lt;/h:body&gt;
&lt;/html&gt;
</code></pre> 
 <p><strong>运行项目</strong></p> 
 <p>在<strong>Actionlistener</strong> 项目上点击右键，选择 <strong>【运行】</strong>，在Tomcat启动完成后，打开浏览器访问以下地址：</p> 
 <pre><code>http://localhost:8084/Actionlistener/
</code></pre>
 <p>如果程序没有错误，应该会看到如下界面 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/2604/469110447_95955.png" alt=""></p> 
 <p>点击上面的按钮后，应该会看到如下结果 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201704/2604/117110448_58156.png" alt=""></p>
 <br>      
</div></body></html>