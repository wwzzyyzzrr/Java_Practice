<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JSF托管bean（Managed Bean）</h1><div style="width:100%;float:left;" class="article-content">   
 <p>JSF 托管bean(Managed Bean)是JSF注册的常规Java Bean类。托管bean包含getter和setter方法，业务逻辑。JSF托管bean作为UI组件的Model。 它存储JSF xhtml页面使用的数据。借助JSF框架，可以从JSF页面访问托管Bean。<br>在JSF 1.2中，我们必须在JSF配置文件(如<code>faces-config.xml</code>)中注册受管理的bean。<br>从JSF 2.0可以使用注解注册管理bean。</p> 
 <h2 id="h2--xml-"><a name="使用XML配置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用XML配置</h2>
 <p>以下代码显示如何使用JSF管理的bean进行注册 - </p> 
 <pre><code class="lang-xml">&lt;managed-bean&gt;
  &lt;managed-bean-name&gt;helloWorld&lt;/managed-bean-name&gt;
  &lt;managed-bean-class&gt;com.yiibai.test.HelloWorld&lt;/managed-bean-class&gt;
  &lt;managed-bean-scope&gt;request&lt;/managed-bean-scope&gt;
&lt;/managed-bean&gt; 
&lt;managed-bean&gt;
  &lt;managed-bean-name&gt;message&lt;/managed-bean-name&gt;
  &lt;managed-bean-class&gt;com.yiibai.test.Message&lt;/managed-bean-class&gt;
  &lt;managed-bean-scope&gt;request&lt;/managed-bean-scope&gt;
&lt;/managed-bean&gt;
</code></pre> 
 <h2 id="h2--managedbean-"><a name="使用@ManagedBean注解" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用<a target="_blank" href="https://github.com/ManagedBean" title="@ManagedBean" class="at-link">@ManagedBean</a>注解</h2>
 <p>以下代码显示了如何使用注解来注册JSF托管的bean。</p> 
 <pre><code class="lang-java">@ManagedBean(name = "helloWorld", eager = true)
@RequestScoped
public class HelloWorld {

   @ManagedProperty(value="#{message}")
   private Message message;
   ...
}
</code></pre> 
 <p><code><a target="_blank" href="https://github.com/ManagedBean" title="@ManagedBean" class="at-link">@ManagedBean</a></code>将bean标识为名称属性中指定的名称的托管bean。如果未指定<code>name</code>属性，那么托管bean名称将默认为简单的类名称，其中第一个字母小写。 在我们的情况下是<code>helloWorld</code>。<br>如果<code>eager</code>设置为“<code>true</code>”，则在请求之前创建托管bean。如果使用“<code>lazy</code>”初始化，只有在请求时才会创建bean。</p> 
 <h3 id="h3-u8303u56F4u6CE8u89E3"><a name="范围注解" class="reference-link"></a><span class="header-link octicon octicon-link"></span>范围注解</h3>
 <p>范围注解设置受管Bean的范围。如果未指定范围，则bean将默认为请求范围。<br>我们可以将JSF bean范围设置为以下列表。</p> 
 <ul> 
  <li><code><a target="_blank" href="https://github.com/RequestScoped" title="@RequestScoped" class="at-link">@RequestScoped</a></code> bean只要HTTP请求响应就行。它根据HTTP请求创建，并在与HTTP请求相关联的HTTP响应完成时被销毁。</li>
  <li><p><code><a target="_blank" href="https://github.com/NoneScoped" title="@NoneScoped" class="at-link"></a><a target="_blank" href="https://github.com/NoneScoped" title="@NoneScoped" class="at-link">@NoneScoped</a></code> bean与单个表达式语言(EL)求值时间一样长。 在EL求值评估时创建，并在EL求值评估后被销毁。</p> </li>
  <li><p><code><a target="_blank" href="https://github.com/ViewScoped" title="@ViewScoped" class="at-link"></a><a target="_blank" href="https://github.com/ViewScoped" title="@ViewScoped" class="at-link">@ViewScoped</a></code> bean只要用户在浏览器窗口中与同一JSF视图进行交互即可。 它根据HTTP请求创建，并在用户导航到其他视图时被销毁。</p> </li>
  <li><p><code><a target="_blank" href="https://github.com/SessionScoped" title="@SessionScoped" class="at-link"></a><a target="_blank" href="https://github.com/SessionScoped" title="@SessionScoped" class="at-link">@SessionScoped</a></code> bean只要HTTP会话生存。 它在第一个HTTP请求时创建，并在HTTP会话无效时被销毁。</p> </li>
  <li><p><code><a target="_blank" href="https://github.com/ApplicationScoped" title="@ApplicationScoped" class="at-link"></a><a target="_blank" href="https://github.com/ApplicationScoped" title="@ApplicationScoped" class="at-link">@ApplicationScoped</a></code> bean只要Web应用程序生存。 它在第一个HTTP请求或Web应用程序启动时创建，并且在<code><a target="_blank" href="https://github.com/ManagedBean" title="@ManagedBean" class="at-link"></a><a target="_blank" href="https://github.com/ManagedBean" title="@ManagedBean" class="at-link">@ManagedBean</a></code>中设置属性<code>eager = true</code>，并在Web应用程序关闭时被销毁。</p> </li>
  <li><p><code><a target="_blank" href="https://github.com/CustomScoped" title="@CustomScoped" class="at-link"></a><a target="_blank" href="https://github.com/CustomScoped" title="@CustomScoped" class="at-link">@CustomScoped</a></code> bean只要在为此范围创建的自定义Map中的bean的条目生效。</p> </li>
 </ul> 
 <h3 id="h3--managedproperty-"><a name="@ManagedProperty注释" class="reference-link"></a><span class="header-link octicon octicon-link"></span><a target="_blank" href="https://github.com/ManagedProperty" title="@ManagedProperty" class="at-link">@ManagedProperty</a>注释</h3>
 <p>JSF是一个简单的静态依赖注入(DI)框架。 <code><a target="_blank" href="https://github.com/ManagedProperty" title="@ManagedProperty" class="at-link">@ManagedProperty</a></code>注释标记被托管的bean的属性以注入另一个受托管的Bean。</p>
 <br>      
</div></body></html>