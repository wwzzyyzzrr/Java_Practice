<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Servlet FilterConfig应用示例</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>FilterConfig</code>的对象由Web容器创建。这个对象可用于获取<code>web.xml</code>文件中的配置信息。</p> 
 <p><strong>FilterConfig接口的方法</strong></p> 
 <p><code>FilterConfig</code>接口中有以下<code>4</code>个方法。</p> 
 <ul> 
  <li><code>public void init(FilterConfig config)</code>: <code>init()</code>方法仅在初始化过滤器时被调用(只调用一次)。</li>
  <li><code>public String getInitParameter(String parameterName)</code>: 返回指定参数名称的参数值。</li>
  <li><code>public java.util.Enumeration getInitParameterNames()</code>: 返回包含所有参数名称的枚举。</li>
  <li><code>public ServletContext getServletContext()</code>: 返回<code>ServletContext</code>对象。</li>
 </ul> 
 <h2 id="h2-filterconfig-"><a name="FilterConfig示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>FilterConfig示例</h2>
 <p>在此示例中，如果将<em>web.xml</em>的中的<code>construction</code>参数值为<code>no</code>，则请求将转发到servlet，如果将参数值设置为：<code>yes</code>，则过滤器将使用消息创建响应：”<em>此页面正在处理中</em>“。下面来看看<code>FilterConfig</code>的简单例子。</p> 
 <p>打开Eclipse，创建一个动态Web项目：<em>FilterConfig</em>，其完整的目录结构如下所示 -</p> 
 <p>以下是这个项目中的几个主要的代码文件。在这里创建了<code>4</code>个文件：</p> 
 <ul> 
  <li><em>index.html</em> - 应用程序入口</li>
  <li><em>MyFilter.java</em> - 过滤器实现</li>
  <li><em>HelloServlet.java</em> - 一个简单的Servlet</li>
  <li><em>web.xml</em> - 项目部署配置文件</li>
 </ul> 
 <p>下面是这几个文件的具体代码。</p> 
 <p>文件：<em>index.html</em> - </p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;FilterConfig配置应用示例&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="text-align: center;"&gt;
        &lt;a href="servlet1"&gt;查看Filter配置信息&lt;/a&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>文件：<em>MyFilter.java</em> - </p> 
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.*;

public class MyFilter implements Filter {

    FilterConfig config;

    public void init(FilterConfig config) throws ServletException {
        this.config = config;
    }

    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain)
            throws IOException, ServletException {
        resp.setCharacterEncoding("UTF-8");
        resp.setContentType("text/html;charset=UTF-8");
        req.setCharacterEncoding("UTF-8");
        PrintWriter out = resp.getWriter();

        String s = config.getInitParameter("construction");

        if (s.equals("yes")) {
            out.print("此页面正在处理中");
        } else {
            chain.doFilter(req, resp);// sends request to next resource
        }
    }

    public void destroy() {
    }
}
</code></pre> 
 <p>文件：<em>HelloServlet.java</em> - </p> 
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.http.*;

public class HelloServlet extends HttpServlet {
    public void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        response.setCharacterEncoding("UTF-8");
        response.setContentType("text/html;charset=UTF-8");
        request.setCharacterEncoding("UTF-8");
        PrintWriter out = response.getWriter();

        out.print("&lt;br&gt;welcome to servlet&lt;br&gt;");

    }

}
</code></pre> 
 <p>文件：<em>web.xml</em> - </p>   
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
    id="WebApp_ID" version="3.1"&gt;
    &lt;display-name&gt;FilterConfig&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;HelloServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/servlet1&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;filter&gt;
        &lt;filter-name&gt;f1&lt;/filter-name&gt;
        &lt;filter-class&gt;com.yiibai.MyFilter&lt;/filter-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;construction&lt;/param-name&gt;
            &lt;param-value&gt;yes&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/filter&gt;
    &lt;filter-mapping&gt;
        &lt;filter-name&gt;f1&lt;/filter-name&gt;
        &lt;url-pattern&gt;/servlet1&lt;/url-pattern&gt;
    &lt;/filter-mapping&gt;
&lt;/web-app&gt;
</code></pre> 
 <p>在编写上面代码后，部署此Web应用程序(在项目名称上点击右键-&gt;”Run On Server…”)，打开浏览器访问URL： <a target="_blank" href="http://localhost:8080/FilterConfig/">http://localhost:8080/FilterConfig/</a> ，如果没有错误，应该会看到以下结果 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1310/543171012_25232.png" alt=""></p> 
 <p>点击页面中的链接，应该会看到以下结果 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1310/544171013_20803.png" alt=""></p>
 <br>      
</div></body></html>