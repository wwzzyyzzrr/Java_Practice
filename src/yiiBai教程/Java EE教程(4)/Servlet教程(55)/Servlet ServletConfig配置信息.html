<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Servlet ServletConfig配置信息</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>ServletConfig</code>对象是由每个servlet的Web容器创建的。这个对象可用于从<code>web.xml</code>文件获取配置信息。</p> 
 <p>如果从<code>web.xml</code>文件修改配置信息，就不需要更改servlet中的代码。因此，对于有特定配置内容需要不定时修改，这样会更容易管理Web应用程序。</p> 
 <h2 id="h2-servletconfig-"><a name="ServletConfig的优点" class="reference-link"></a><span class="header-link octicon octicon-link"></span>ServletConfig的优点</h2>
 <p><code>ServletConfig</code>的核心优点是，如果可以修改<code>web.xml</code>文件中的信息，则不需要编辑servlet代码文件。</p> 
 <p><strong>ServletConfig接口的方法</strong></p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>public String getInitParameter(String name)</code></td> 
    <td>返回指定参数名称的参数值。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>public Enumeration getInitParameterNames()</code></td> 
    <td>返回所有初始化参数名称的枚举。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>public String getServletName()</code></td> 
    <td>返回servlet的名称。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>public ServletContext getServletContext()</code></td> 
    <td>返回<code>ServletContext</code>的对象。</td> 
   </tr> 
  </tbody> 
 </table> 
 <p><strong>如何获取ServletConfig的对象？</strong></p> 
 <ul> 
  <li>可通过调用Servlet接口的<code>getServletConfig()</code>方法来返回<code>ServletConfig</code>对象。</li>
 </ul> 
 <p><strong>getServletConfig()方法的语法</strong></p> 
 <pre><code class="lang-java">public ServletConfig getServletConfig();
</code></pre> 
 <p><strong>getServletConfig()方法的示例</strong></p> 
 <pre><code class="lang-java">ServletConfig config=getServletConfig();  
//Now we can call the methods of ServletConfig interface
</code></pre> 
 <p><strong>为servlet提供初始化参数的语法</strong></p> 
 <p>servlet的<code>init-param</code>子元素用于指定servlet的初始化参数。</p> 
 <pre><code class="lang-xml">&lt;web-app&gt;
  &lt;servlet&gt;
    ......
    &lt;init-param&gt;  
      &lt;param-name&gt;parameter_name&lt;/param-name&gt;
      &lt;param-value&gt;parameter_value&lt;/param-value&gt;
    &lt;/init-param&gt;
    ......
  &lt;/servlet&gt;
&lt;/web-app&gt;
</code></pre> 
 <h2 id="h2--servletconfig-"><a name="获取初始化参数的ServletConfig示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>获取初始化参数的ServletConfig示例</h2>
 <p>在这个例子中，将从<code>web.xml</code>文件获取一个初始化参数，并在servlet中打印这些信息。</p> 
 <p>创建一个名称为：<em>ServletConfig</em>的动态Web应用项目，其结构如下所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/217161030_65406.png" alt=""></p> 
 <p>下面是几个主要的代码文件 - </p> 
 <p>文件：<em>ConfigServlet.java</em> - </p> 
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ConfigServlet
 */
public class ConfigServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        ServletConfig config = getServletConfig();
        String driver = config.getInitParameter("mysql_driver");
        out.print("Driver details is: &lt;b&gt;" + driver+"&lt;/b&gt;");
        out.close();
    }
}
</code></pre> 
 <p>文件：<em>web.xml</em> - </p> 
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
    id="WebApp_ID" version="3.1"&gt;
    &lt;display-name&gt;ConfigServlet&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;ConfigServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.ConfigServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;mysql_driver&lt;/param-name&gt;
            &lt;param-value&gt;com.mysql.jdbc.Driver&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;ConfigServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/dbconfig&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre> 
 <p>将上面项目部署并访问URL： <a target="_blank" href="http://localhost:8080/ConfigServlet/dbconfig">http://localhost:8080/ConfigServlet/dbconfig</a> ，如果程序没有问题，那么应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/472161021_81133.png" alt=""></p> 
 <h2 id="h2--servletconfig-"><a name="获取所有初始化参数的ServletConfig示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>获取所有初始化参数的ServletConfig示例</h2>
 <p>在这个例子中，我们从<code>web.xml</code>文件获取所有的初始化参数，并在servlet中打印这些信息。</p> 
 <p>几个主要代码文件如下 - </p> 
 <p>文件：<em>ConfigServletAll.java</em> - </p>   
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import java.io.PrintWriter;
import java.util.Enumeration;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class ConfigServletAll
 */
public class ConfigServletAll extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        response.setContentType("text/html");
        PrintWriter out = response.getWriter();

        ServletConfig config = getServletConfig();
        Enumeration&lt;String&gt; e = config.getInitParameterNames();
        String str = "";
        while (e.hasMoreElements()) {
            str = e.nextElement();
            out.print("Name: " + str);
            out.print(" value: " + config.getInitParameter(str)+"&lt;br/&gt;");
        }

        out.close();
    }

}
</code></pre> 
 <p>文件：<em>web.xml</em> - </p> 
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
    id="WebApp_ID" version="3.1"&gt;
    &lt;display-name&gt;ConfigServlet&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;ConfigServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.ConfigServlet&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;mysql_driver&lt;/param-name&gt;
            &lt;param-value&gt;com.mysql.jdbc.Driver&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;ConfigServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/dbconfig&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;ConfigServletAll&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.ConfigServletAll&lt;/servlet-class&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;mssql_driver&lt;/param-name&gt;
            &lt;param-value&gt;com.mssql.jdbc.Driver&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;username&lt;/param-name&gt;
            &lt;param-value&gt;root&lt;/param-value&gt;
        &lt;/init-param&gt;
        &lt;init-param&gt;
            &lt;param-name&gt;passwd&lt;/param-name&gt;
            &lt;param-value&gt;123456&lt;/param-value&gt;
        &lt;/init-param&gt;
    &lt;/servlet&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;ConfigServletAll&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/dbconfigall&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</code></pre> 
 <p>将上面项目部署并访问URL： <a target="_blank" href="http://localhost:8080/ConfigServlet/dbconfigall">http://localhost:8080/ConfigServlet/dbconfigall</a> ，如果程序没有问题，那么应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/787161028_87514.png" alt=""></p>
 <br>      
</div></body></html>