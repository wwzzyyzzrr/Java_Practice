<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Servlet重定向</h1><div style="width:100%;float:left;" class="article-content">   
 <p><code>HttpServletResponse</code>接口的<code>sendRedirect()</code>方法可以用于将响应重定向到另一个资源，资源可能是<code>servlet</code>，<code>jsp</code>或<code>html</code>文件。</p> 
 <p>它接受相对和绝对URL。</p> 
 <p>它在客户端工作，因为它使用浏览器的URL栏来发出另一个请求。 所以，它可以在服务器内部和外部工作。</p> 
 <h2 id="h2-forward-sendredirect-"><a name="forward()和sendRedirect()方法的区别" class="reference-link"></a><span class="header-link octicon octicon-link"></span>forward()和sendRedirect()方法的区别</h2>
 <p><code>RequestDispatcher</code>的<code>forward()</code>方法和<code>HttpServletResponse</code>接口的<code>sendRedirect()</code>方法之间存在很多差异。如下面给出：</p> 
 <table> 
  <thead> 
   <tr> 
    <th>forward()方法</th> 
    <th>sendRedirect()方法</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td><code>forward()</code>方法在服务器端工作。</td> 
    <td><code>sendRedirect()</code>方法在客户端工作。</td> 
   </tr> 
   <tr> 
    <td>它将相同的请求和响应对象发送到另一个servlet。</td> 
    <td>它总是发送一个新的请求。</td> 
   </tr> 
   <tr> 
    <td>它只能在服务器内工作。</td> 
    <td>它可以在服务器内外使用。</td> 
   </tr> 
   <tr> 
    <td>示例: <code>request.getRequestDispacher("servlet2").forward(request,response);</code></td> 
    <td>示例: <code>response.sendRedirect("servlet2");</code></td> 
   </tr> 
  </tbody> 
 </table> 
 <p><strong>sendRedirect()方法的语法</strong></p> 
 <pre><code class="lang-java">public void sendRedirect(String URL)throws IOException;
</code></pre> 
 <p><strong>sendRedirect()方法的示例</strong></p> 
 <pre><code class="lang-java">response.sendRedirect("http://www.yiibai.com");
</code></pre> 
 <h2 id="h2-servlet-sendredirect-"><a name="servlet中sendRedirect()方法的完整示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>servlet中sendRedirect()方法的完整示例</h2>
 <p>打开Eclipse创建一个动态Web项目：<em>SendRedirect</em>，如下所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/309151000_64432.png" alt=""></p> 
 <p>在此示例中，我们将请求重定向到<code>yiibai.com</code>网站。请注意，<code>sendRedirect()</code>方法在客户端工作，所以可以将请求重定向到任何地方。可以在服务器内外发送请求。</p> 
 <p>文件：<em>RedirectServlet.java</em> - </p> 
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import java.io.PrintWriter;

import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class RedirectServlet
 */
public class RedirectServlet extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        response.setContentType("text/html");
        PrintWriter pw = response.getWriter();

        // 直接重定向到：http://www.yiibai.com
        response.sendRedirect("http://www.yiibai.com");
        pw.close();
    }
}
</code></pre> 
 <h2 id="h2--sendredirect-"><a name="使用sendRedirect创建自定义关键字搜索" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用sendRedirect创建自定义关键字搜索</h2>
 <p>在这个例子中，使用<code>sendRedirect()</code>方法将请求发送到具有请求<code>yiibai.com</code>网站上的数据。以下是几个代码文件 - </p> 
 <p>文件：<em>index.html</em> - </p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;Insert title here&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="text-align: center;"&gt;
        &lt;form action="/SendRedirect/YiiSearcher"&gt;
            关键字：&lt;input type="text" name="keyword"&gt; &lt;input type="submit"
                value="易百教程搜索"&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>文件：<em>index.java</em> - </p> 
 <pre><code class="lang-java">package com.yiibai;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class YiiSearcher
 */

public class YiiSearcher extends HttpServlet {
    private static final long serialVersionUID = 1L;

    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse
     *      response)
     */
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        // TODO Auto-generated method stub
        String keyword = request.getParameter("keyword");
        response.sendRedirect("http://www.yiibai.com/search.php?kw=" + keyword);
    }
}
</code></pre> 
 <p>文件：<em>web.xml</em> - </p>   
 <pre><code class="lang-xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
    id="WebApp_ID" version="3.1"&gt;
    &lt;display-name&gt;SendRedirect&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.html&lt;/welcome-file&gt;
        &lt;welcome-file&gt;default.jsp&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;RedirectServlet&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.RedirectServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;YiiSearcher&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.YiiSearcher&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;RedirectServlet&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/Redirect&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;YiiSearcher&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/YiiSearcher&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre> 
 <p>完成上面代码编写后，部署这个Web应用程序，打开浏览器访问URL： <a target="_blank" href="http://localhost:8080/SendRedirect/">http://localhost:8080/SendRedirect/</a> ，如是程序没有错误，应该会看到类似下面的界面显示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/162141056_88184.png" alt=""></p> 
 <p>点击搜索按钮后，重定向到易百教程的搜索页面并搜索指定关键字：<em>servlet</em>，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/410141058_84821.png" alt=""></p> 
 <p>如果直接访问URL：<a target="_blank" href="http://localhost:8080/SendRedirect/Redirect">http://localhost:8080/SendRedirect/Redirect</a> ，那么重定向到 <code>www.yiibai.com</code> 并打开易百教程的首页。</p>
 <br>      
</div></body></html>