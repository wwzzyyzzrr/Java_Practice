<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Servlet表单隐藏字段</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在隐藏表单字段的情况下，一般使用隐藏(不可见)文本字段来维护用户的状态。</p> 
 <p>在这种情况下，我们将信息存储在隐藏字段中，并从另一个servlet获取信息。 如果必须在所有页面中提交表单，但不想依赖浏览器，这种方法会更好。</p> 
 <p>下面来看看看在隐藏字段中存储值的代码。</p> 
 <pre><code class="lang-html">&lt;input type="hidden" name="uname" value="maxsu"&gt;
</code></pre> 
 <p>这里，必须指定<code>input</code>控件的<code>type</code>属性为：<code>type="hidden"</code>， <code>uname</code>是隐藏的字段名称，<code>maxsu</code>是隐藏字段<code>uname</code>的值。</p> 
 <p><strong>应用隐藏表单字段</strong></p> 
 <p>它广泛用于网站的评论形式。 在这种情况下，我们将页面ID或页面名称存储在隐藏字段中，以便可以唯一标识每个页面。</p> 
 <p><strong>隐藏表单字段的优势</strong></p> 
 <ul> 
  <li>Cookie是否被禁用隐藏表单字段都会始终有效。</li>
 </ul> 
 <p><strong>隐藏表单字段的缺点：</strong></p> 
 <ul> 
  <li>它在服务器端维护。</li>
  <li>每个页面需要额外提交表单和字段。</li>
  <li>只能使用文本信息。</li>
 </ul> 
 <h2 id="h2-u4F7Fu7528u9690u85CFu8868u5355u5B57u6BB5u7684u793Au4F8B"><a name="使用隐藏表单字段的示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>使用隐藏表单字段的示例</h2>
 <p>在本示例中，我们将用户名称存储在隐藏的文本字段中，并从另一个servlet获取该值。</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1110/554111045_56001.jpg" alt=""></p> 
 <p>打开Eclipse，创建一个动态Web项目：<em>HiddenFormField</em>，其完整的目录结构如下所示 -</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1210/103121046_63815.png" alt=""></p> 
 <p>以下是几个主要的代码文件。</p> 
 <p>文件：<em>index.html</em> - </p> 
 <pre><code class="lang-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;隐藏表单字段&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="text-algin: center; padding-top: 12px;"&gt;
        &lt;form action="servlet1" method="post"&gt;
            名字:&lt;input type="text" name="username" /&gt;&lt;input type="submit"
                value="提交" /&gt;
        &lt;/form&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>文件：<em>FirstServlet.java</em> - </p> 
 <pre><code>package com.yiibai;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class FirstServlet extends HttpServlet {
    public void doPost(HttpServletRequest request, HttpServletResponse response) {
        try {
            response.setCharacterEncoding("UTF-8");
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();

            String n = request.getParameter("username");
            out.print("Welcome " + n);

            // creating form that have invisible textfield
            out.print("&lt;form action='servlet2' method='post'&gt;");
            out.print("&lt;input type='hidden' name='username' value='" + n + "'&gt;");
            out.print("&lt;input type='submit' value='提交'&gt;");
            out.print("&lt;/form&gt;");
            out.close();

        } catch (Exception e) {
            System.out.println(e);
        }
    }

}
</code></pre>
 <p>文件：<em>SecondServlet.java</em> - </p> 
 <pre><code>package com.yiibai;

import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class SecondServlet extends HttpServlet {

    public void doPost(HttpServletRequest request, HttpServletResponse response) {
        try {
            response.setCharacterEncoding("UTF-8");
            response.setContentType("text/html;charset=UTF-8");
            PrintWriter out = response.getWriter();

            // Getting the value from the hidden field
            String n = request.getParameter("username");
            out.print("Hello " + n);

            out.close();
        } catch (Exception e) {
            System.out.println(e);
        }
    }
}
</code></pre>
 <p>文件：<em>web.xml</em> - </p>   
 <pre><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://xmlns.jcp.org/xml/ns/javaee"
    xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"
    id="WebApp_ID" version="3.1"&gt;
    &lt;display-name&gt;HiddenFormField&lt;/display-name&gt;
    &lt;welcome-file-list&gt;
        &lt;welcome-file&gt;index.html&lt;/welcome-file&gt;
    &lt;/welcome-file-list&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;s1&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.FirstServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;s1&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/servlet1&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;

    &lt;servlet&gt;
        &lt;servlet-name&gt;s2&lt;/servlet-name&gt;
        &lt;servlet-class&gt;com.yiibai.SecondServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;

    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;s2&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/servlet2&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre>
 <p>在编写上面代码后，部署此Web应用程序，打开浏览器访问URL： <a target="_blank" href="http://localhost:8080/HiddenFormField/">http://localhost:8080/HiddenFormField/</a> ，如果没有错误，应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1210/962121043_38694.png" alt=""></p> 
 <p>在上面输入框中输入：<code>maxsu</code>，提交应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1210/183121045_24404.png" alt=""></p> 
 <p>然后使用表单隐藏字段，再次提交，应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/1210/312121045_82242.png" alt=""></p>
 <br>      
</div></body></html>