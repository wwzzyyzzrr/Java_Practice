<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JSP+MySQL实例</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将讨论如何使用JSP访问数据库(这里以MySQL数据库为例)。并假设您对JDBC应用程序的工作方式有很好的了解。在开始通过JSP进行数据库访问之前，请确保您具有适当的JDBC环境设置以及安装好MySQL数据库。</p> 
 <p>学习本教程的前置知识 - </p> 
 <ul> 
  <li>MySQL数据安装和简单操作</li>
  <li>JDBC连接到MySQL</li>
 </ul> 
 <p>如果没有学习过MySQL，请参考：<a target="_blank" href="http://www.yiibai.com/mysql/" title="MySQL教程">MySQL教程</a> 。有关如何使用JDBC及其环境设置访问数据库的更多详细信息，可以参阅<a target="_blank" href="http://www.yiibai.com/jdbc/" title="JDBC教程">JDBC教程</a>。</p> 
 <p>这里，我们从基本概念开始，首先在MySQL的<code>testdb</code>数据库中创建一个表：<code>employees</code>，并在该表中创建一些记录，参考以下SQL语句：</p> 
 <pre><code class="lang-sql">USE testdb;
DROP TABLE IF EXISTS `employees`;
CREATE TABLE `employees` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` varchar(64) NOT NULL DEFAULT '',
  `age` int(3) unsigned NOT NULL DEFAULT '0',
  `education` varchar(32) DEFAULT '' COMMENT '学历',
  `address` varchar(254) DEFAULT NULL,
  `salary` float(8,2) unsigned DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=15 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of employees
-- ----------------------------
INSERT INTO `employees` VALUES ('1', '李小春', '23', '其它', '海口市人民大道1800号', '8900.00');
INSERT INTO `employees` VALUES ('2', '张辉', '28', '本科', '广州天河区珠村市场', '15800.98');
INSERT INTO `employees` VALUES ('3', '林贤弟', '29', '博士', '广州白云区龙塘村120号', '18990.99');
INSERT INTO `employees` VALUES ('4', '王小简', '23', '本科', '海口人民大道1688号', '899.98');
INSERT INTO `employees` VALUES ('5', '蔡世杰', '27', '专科', '上海市宝山区联杨路2211弄26号', '15800.00');
INSERT INTO `employees` VALUES ('6', '张承龙', '30', '本科', '上海市虹口区虬江路522号', '23000.00');
INSERT INTO `employees` VALUES ('7', '李林奕', '26', '本科', '上海市徐汇区漕宝路440号', '32600.00');
INSERT INTO `employees` VALUES ('8', '刘皓轩', '28', '研究生', '上海松江九亭立同商务广场', '29000.00');
INSERT INTO `employees` VALUES ('9', '周佳豪', '36', '博士', '深圳市宝安区沙井街道办107国道富达工业区B栋', '48000.00');
INSERT INTO `employees` VALUES ('10', '陈聪', '23', '本科', '福田区文蔚大厦19层', '9800.00');
</code></pre> 
 <p>打开Eclipse创建一个动态Web项目：<em>JspMySQL</em>， 其项目结构如下所示 - </p> 
 <blockquote> 
  <p>注意：需要将MySQL的连接驱动程序：mysql-connector-java-5.1.40-bin.jar放入到{WebApp}/WEB-INFO/lib目录下。</p> 
 </blockquote> 
 <h2 id="h2-1-"><a name="1. 查询数据示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>1. 查询数据示例</h2>
 <p>以下示例显示了如何在JSP编程中使用<code>JTSL</code>执行SQL SELECT语句。</p> 
 <p>文件：<em>select.jsp</em> </p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;JSP+MySQL查询数据&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="margin: auto; width: 80%"&gt;
        &lt;sql:setDataSource var="connection" driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/testdb?useSSL=false&amp;characterEncoding=utf8"
            user="root" password="123456" /&gt;

        &lt;sql:query dataSource="${connection}" var="result"&gt;
            SELECT * from employees;
         &lt;/sql:query&gt;
        &lt;table border="1" width="100%"&gt;
            &lt;tr&gt;
                &lt;th&gt;编号&lt;/th&gt;
                &lt;th&gt;名字&lt;/th&gt;
                &lt;th&gt;薪水&lt;/th&gt;
                &lt;th&gt;地址&lt;/th&gt;
            &lt;/tr&gt;

            &lt;c:forEach var="row" items="${result.rows}"&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;c:out value="${row.id}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.name}" /&gt;&lt;/td&gt;
                    &lt;td&gt;￥&lt;c:out value="${row.salary}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.address}" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/c:forEach&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在编写上面示例代码后，运行项目，打开浏览器访问URL： <code>http://localhost:8080/JspMySQL/select.jsp</code> ， 应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2610/205201049_44168.png" alt=""></p> 
 <h2 id="h2-2-"><a name="2. 插入数据示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>2. 插入数据示例</h2>
 <p>以下示例显示了如何在JSP编程中使用<code>JTSL</code>执行SQL INSERT语句。</p> 
 <p>文件：<em>insert.jsp</em> </p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;JSP+MySQL插入数据&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="margin: auto; width: 80%"&gt;
        &lt;sql:setDataSource var="connection" driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/testdb?useSSL=false&amp;characterEncoding=utf8"
            user="root" password="123456" /&gt;

        &lt;sql:update dataSource="${connection}" var="count"&gt;
         INSERT INTO employees(`name`,`age`,`education`,`address`,`salary`) 
         VALUES ('李路路', 24, '本科', '北京朝阳区', 13600);
        &lt;/sql:update&gt;

        &lt;sql:query dataSource="${connection}" var="result"&gt;
            SELECT * from employees;
         &lt;/sql:query&gt;
        &lt;table border="1" width="100%"&gt;
            &lt;tr&gt;
                &lt;th&gt;编号&lt;/th&gt;
                &lt;th&gt;名字&lt;/th&gt;
                &lt;th&gt;薪水&lt;/th&gt;
                &lt;th&gt;地址&lt;/th&gt;
            &lt;/tr&gt;

            &lt;c:forEach var="row" items="${result.rows}"&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;c:out value="${row.id}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.name}" /&gt;&lt;/td&gt;
                    &lt;td&gt;￥&lt;c:out value="${row.salary}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.address}" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/c:forEach&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在编写上面示例代码后，运行项目，打开浏览器访问URL： <code>http://localhost:8080/JspMySQL/insert.jsp</code> ， 应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2610/994201055_93880.png" alt=""></p> 
 <h2 id="h2-3-"><a name="3. 删除数据示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>3. 删除数据示例</h2>
 <p>以下示例显示了如何在JSP编程中使用<code>JTSL</code>执行SQL DELETE语句。</p> 
 <p>文件：<em>delete.jsp</em> </p>   
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;JSP+MySQL删除数据&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="margin: auto; width: 80%"&gt;
        &lt;sql:setDataSource var="connection" driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/testdb?useSSL=false&amp;characterEncoding=utf8"
            user="root" password="123456" /&gt;

        &lt;!-- 执行删除语句 --&gt;
        &lt;sql:update dataSource="${connection}" var="count"&gt;
            DELETE FROM employees WHERE id&gt;5;
        &lt;/sql:update&gt;

        &lt;sql:query dataSource="${connection}" var="result"&gt;
            SELECT * from employees;
         &lt;/sql:query&gt;
        &lt;table border="1" width="100%"&gt;
            &lt;tr&gt;
                &lt;th&gt;编号&lt;/th&gt;
                &lt;th&gt;名字&lt;/th&gt;
                &lt;th&gt;薪水&lt;/th&gt;
                &lt;th&gt;地址&lt;/th&gt;
            &lt;/tr&gt;

            &lt;c:forEach var="row" items="${result.rows}"&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;c:out value="${row.id}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.name}" /&gt;&lt;/td&gt;
                    &lt;td&gt;￥&lt;c:out value="${row.salary}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.address}" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/c:forEach&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在编写上面示例代码后，运行项目，打开浏览器访问URL： <code>http://localhost:8080/JspMySQL/delete.jsp</code> ， 应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2610/834201058_69709.png" alt=""></p> 
 <h2 id="h2-4-"><a name="4. 更新数据示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>4. 更新数据示例</h2>
 <p>以下示例显示了如何在JSP编程中使用<code>JTSL</code>执行SQL UPDATE语句。</p> 
 <p>文件：<em>update.jsp</em> </p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%&gt;
&lt;%@ taglib uri="http://java.sun.com/jsp/jstl/sql" prefix="sql"%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;JSP+MySQL更新数据&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="margin: auto; width: 80%"&gt;
        &lt;sql:setDataSource var="connection" driver="com.mysql.jdbc.Driver"
            url="jdbc:mysql://localhost/testdb?useSSL=false&amp;characterEncoding=utf8"
            user="root" password="123456" /&gt;

        &lt;!-- 执行更新语句 --&gt;
         &lt;c:set var = "empId" value = "1"/&gt;
        &lt;sql:update dataSource="${connection}" var="count"&gt;
            UPDATE employees SET name='李家诚' WHERE id=?
            &lt;sql:param value = "${empId}" /&gt;
        &lt;/sql:update&gt;

        &lt;c:set var = "empId" value = "2"/&gt;
        &lt;sql:update dataSource = "${connection}" var = "count"&gt;
         UPDATE employees SET salary = '19999.99' WHERE id=?
         &lt;sql:param value = "${empId}" /&gt;
        &lt;/sql:update&gt;

        &lt;sql:query dataSource="${connection}" var="result"&gt;
            SELECT * from employees;
         &lt;/sql:query&gt;
        &lt;table border="1" width="100%"&gt;
            &lt;tr&gt;
                &lt;th&gt;编号&lt;/th&gt;
                &lt;th&gt;名字&lt;/th&gt;
                &lt;th&gt;薪水&lt;/th&gt;
                &lt;th&gt;地址&lt;/th&gt;
            &lt;/tr&gt;

            &lt;c:forEach var="row" items="${result.rows}"&gt;
                &lt;tr&gt;
                    &lt;td&gt;&lt;c:out value="${row.id}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.name}" /&gt;&lt;/td&gt;
                    &lt;td&gt;￥&lt;c:out value="${row.salary}" /&gt;&lt;/td&gt;
                    &lt;td&gt;&lt;c:out value="${row.address}" /&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/c:forEach&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>在编写上面示例代码后，运行项目，打开浏览器访问URL： <code>http://localhost:8080/JspMySQL/update.jsp</code> ， 应该会看到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2610/440211007_18424.png" alt=""></p>
 <br>      
</div></body></html>