<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JSP国际化/本地化</h1><div style="width:100%;float:left;" class="article-content">   
 <p>在本章中，我们将讨论JSP中国际化的概念。 在我们继续之前，先了解以下三个重要的术语 -</p> 
 <ul> 
  <li><strong>国际化(i18n)</strong> - 表示网站能够提供翻译成访问者语言或国籍的不同版本的内容。</li>
  <li><strong>本地化(l10n)</strong> - 表示将资源添加到网站以适应特定的地理或文化区域，例如将印地文翻译成网站。</li>
  <li><strong>区域</strong> - 这是一个特定的文化或地理区域。 它通常被称为语言符号，后跟一个由下划线分隔的国家符号。 例如，<code>“en_US”</code>代表美国的英文语言环境。</li>
 </ul> 
 <p>在建立全球网站时应该注意一些项目。 本教程不会给出完整的详细信息，但它将为您提供一个很好的例子，说明如何通过区分其位置(即语言环境)向互联网社区提供不同语言的网页。</p> 
 <p>JSP可以根据请求者的区域设置选择适当的站点版本，并根据当地语言，文化和要求提供适当的站点版本。 下是返回<code>Locale</code>对象的<code>request</code>对象的方法。</p> 
 <pre><code class="lang-java">java.util.Locale request.getLocale()
</code></pre> 
 <h2 id="h2-u68C0u6D4Bu533Au57DFu8BBEu7F6E"><a name="检测区域设置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>检测区域设置</h2>
 <p>以下是可用于检测请求者的区域，语言和当地语言环境的重要区域设置方法。以下所有方法显示在请求者浏览器中设置的国家名称和语言名称。</p> 
 <table> 
  <thead> 
   <tr> 
    <th>编号</th> 
    <th>方法</th> 
    <th>描述</th> 
   </tr> 
  </thead> 
  <tbody> 
   <tr> 
    <td>1</td> 
    <td><code>String getCountry()</code></td> 
    <td>此方法以<code>ISO 3166</code>的两个字母格式为该区域设置返回大写的国家/地区代码。</td> 
   </tr> 
   <tr> 
    <td>2</td> 
    <td><code>String getDisplayCountry()</code></td> 
    <td>此方法返回适合显示给用户的区域设置的国家/地区的名称。</td> 
   </tr> 
   <tr> 
    <td>3</td> 
    <td><code>String getLanguage()</code></td> 
    <td>此方法以<code>ISO 639</code>格式为该语言环境返回小写的语言代码。</td> 
   </tr> 
   <tr> 
    <td>4</td> 
    <td><code>String getDisplayLanguage()</code></td> 
    <td>此方法返回适合显示给用户的语言环境的语言名称。</td> 
   </tr> 
   <tr> 
    <td>5</td> 
    <td><code>String getISO3Country()</code></td> 
    <td>此方法返回此区域设置的国家/地区的三个字母的缩写。</td> 
   </tr> 
   <tr> 
    <td>6</td> 
    <td><code>String getISO3Language()</code></td> 
    <td>此方法返回此语言环境的三个字母的缩写。</td> 
   </tr> 
  </tbody> 
 </table> 
 <h2 id="h2-u793Au4F8B"><a name="示例" class="reference-link"></a><span class="header-link octicon octicon-link"></span>示例</h2>
 <p>为了方便演示，打开Eclise创建一个动态Web项目，其项目结构如下所示 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/738101037_35445.png" alt=""></p> 
 <p>以下示例显示如何在JSP中显示请求的语言和关联国家/地区，文件：<em>langcountry.jsp</em></p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.io.*,java.util.Locale"%&gt;
&lt;%@ page import="javax.servlet.*,javax.servlet.http.* "%&gt;
&lt;%
    //Get the client Locale
    Locale locale = request.getLocale();
    String language = locale.getLanguage();
    String country = locale.getCountry();
%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;检测区域设置示例&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div style="margin: auto; width: 90%"&gt;
        &lt;center&gt;
            &lt;h1&gt;检测区域设置示例&lt;/h1&gt;
        &lt;/center&gt;

        &lt;p align="center"&gt;
            &lt;%
                out.println("语言 : " + language + "&lt;br /&gt;");
                out.println("国家 : " + country + "&lt;br /&gt;");
            %&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/258101004_87675.png" alt=""></p> 
 <h2 id="h2-u8BEDu8A00u8BBEu7F6E"><a name="语言设置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>语言设置</h2>
 <p>JSP可以输出用西欧语言编写的页面，如英文，西班牙文，德文，法文，意大利文，荷兰文等。这里是设置<code>Content-Language</code>头来正确显示所有的字符。</p> 
 <p>另一个重要的一点是使用HTML实体显示所有的特殊字符; 例如<code>“ñ”</code>代表<code>“ñ”</code>，而<code>“¡”</code>代表<code>“¡”</code>，如下文件：<em>langset.jsp</em></p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.io.*,java.util.Locale"%&gt;
&lt;%@ page import="javax.servlet.*,javax.servlet.http.* "%&gt;

&lt;%
    // Set response content type
    response.setContentType("text/html");

    // Set spanish language code.
    response.setHeader("Content-Language", "es");
    String title = "En Español";
%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;title&gt;
    &lt;%
        out.print(title);
    %&gt;
&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;center&gt;
        &lt;h2&gt;
            &lt;%
                out.print(title);
            %&gt;
        &lt;/h2&gt;
    &lt;/center&gt;

    &lt;div align="center"&gt;
        &lt;p&gt;En Español&lt;/p&gt;
        &lt;p&gt;¡Hola Mundo!&lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/954101010_40037.png" alt=""></p> 
 <h2 id="h2-u533Au57DFu7279u5B9Au65E5u671F"><a name="区域特定日期" class="reference-link"></a><span class="header-link octicon octicon-link"></span>区域特定日期</h2>
 <p>可以使用<code>java.text.DateFormat</code>类及其静态<code>getDateTimeInstance()</code>方法来格式化特定于语言环境的日期和时间。以下是显示如何格式化特定区域设置日期的示例，文件：<em>locale_date.jsp</em></p>   
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.io.*,java.util.Locale"%&gt;
&lt;%@ page import="javax.servlet.*,javax.servlet.http.* "%&gt;
&lt;%@ page import="java.text.DateFormat,java.util.Date"%&gt;

&lt;%
    String title = "区域特定日期";

    //Get the client's Locale
    Locale locale = request.getLocale();

    String date = DateFormat.getDateTimeInstance(DateFormat.FULL, DateFormat.SHORT, locale).format(new Date());
%&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta http-equiv="Content-Type" content="text/html; charset=UTF-8"&gt;
&lt;head&gt;
&lt;title&gt;
    &lt;%
        out.print(title);
    %&gt;
&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;center&gt;
        &lt;h2&gt;
            &lt;%
                out.print(title);
            %&gt;
        &lt;/h2&gt;
    &lt;/center&gt;

    &lt;div align="center"&gt;
        &lt;p&gt;
            Local Date:
            &lt;%
            out.print(date);
        %&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
</code></pre> 
 <p>执行上面示例代码，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/969101020_15919.png" alt=""></p> 
 <h2 id="h2-u533Au57DFu7279u5B9Au8D27u5E01"><a name="区域特定货币" class="reference-link"></a><span class="header-link octicon octicon-link"></span>区域特定货币</h2>
 <p>可以使用<code>java.txt.NumberFormat</code>类及其静态<code>getCurrencyInstance()</code>方法在特定区域设置中格式化数字，例如：<code>long</code>或<code>double</code>类型。 以下是显示如何格式化给定区域设置的货币的示例，文件：<em>locale_currency.jsp</em></p> 
 <pre><code class="lang-html">&lt;%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%&gt;
&lt;%@ page import="java.io.*,java.util.Locale"%&gt;
&lt;%@ page import="javax.servlet.*,javax.servlet.http.* "%&gt;
&lt;%@ page import="java.text.NumberFormat,java.util.Date"%&gt;

&lt;%
    String title = "区域特定货币";

    //Get the client's Locale
    Locale locale = request.getLocale();

    NumberFormat nft = NumberFormat.getCurrencyInstance(locale);
    String formattedCurr = nft.format(1000000);
%&gt;

&lt;html&gt;

&lt;head&gt;
&lt;title&gt;
    &lt;%
        out.print(title);
    %&gt;
&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;center&gt;
        &lt;h1&gt;
            &lt;%
                out.print(title);
            %&gt;
        &lt;/h1&gt;
    &lt;/center&gt;

    &lt;div align="center"&gt;
        &lt;p&gt;
            Formatted Currency:
            &lt;%
            out.print(formattedCurr);
        %&gt;
        &lt;/p&gt;
    &lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre> 
 <p>运行上面示例代码，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/867101025_70886.png" alt=""></p> 
 <h2 id="h2-u533Au57DFu7279u5B9Au767Eu5206u6BD4u683Cu5F0F"><a name="区域特定百分比格式" class="reference-link"></a><span class="header-link octicon octicon-link"></span>区域特定百分比格式</h2>
 <p>可以使用<code>java.txt.NumberFormat</code>类及其静态<code>getPercentInstance()</code>方法来获取特定于区域设置的百分比。 以下示例显示如何格式化特定区域设置的百分比。文件：** -</p> 
 <pre><code class="lang-html">&lt;%@ page import = "java.io.*,java.util.Locale" %&gt;
&lt;%@ page import = "javax.servlet.*,javax.servlet.http.* "%&gt;
&lt;%@ page import = "java.text.NumberFormat,java.util.Date" %&gt;

&lt;%
   String title = "Locale Specific Percentage";

   //Get the client's Locale
   Locale locale = request.getLocale( );

   NumberFormat nft = NumberFormat.getPercentInstance(locale);
   String formattedPerc = nft.format(0.51);
%&gt;
</code></pre> 
 <p>运行上面示例代码，得到以下结果 - </p> 
 <p><img src="http://www.yiibai.com/uploads/images/201710/2910/819101037_80566.png" alt=""></p>
 <br>      
</div></body></html>