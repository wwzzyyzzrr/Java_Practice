<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">MVC框架 - AJAX支持</h1><div style="width:100%;float:left;" class="article-content">   
 <p> Ajax是异步JavaScript和XML的一个简写形式。MVC框架包含了不显眼的Ajax内置支持，通过它可以使用辅助方法，在所有的视图添加代码来定义Ajax特性。 在MVC中此特征是基于jQuery的功能。</p> 
 <p> 为不使注意AJAX支持，在MVC应用程序，打开Web.config文件，并使用下面的代码设置appSettings部分内的UnobtrusiveJavaScriptEnabled属性。如果键已经存在于应用程序，可以忽略这一步。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">&lt;add</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">key</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"UnobtrusiveJavaScriptEnabled"</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">value</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"true"</span><span class="pln" style="box-sizing: border-box;"> </span><span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">/&gt;</span><span class="pln" style="box-sizing: border-box;"> </span></pre> 
 <img alt="mvc_ajax_config" src="/uploads/allimg/150603/0G15IH5-0.jpg"> 
 <p> 在这之后，打开位于下Views/Shared文件夹中，见到布局文件_Layout.cshtml文件。 我们将引用添加jQuery库到这里了，使用下面的代码：</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">&lt;script</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">src</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"~/Scripts/jquery-ui-1.8.24.min.js"</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">type</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"text/javascript"</span><span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">&gt;&lt;/script&gt;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">&lt;script</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">src</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"~/Scripts/jquery.unobtrusive-ajax.min.js"</span><span class="pln" style="box-sizing: border-box;"> </span><span class="atn" style="box-sizing: border-box; color: rgb(127, 0, 85);">type</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="atv" style="box-sizing: border-box; color: rgb(0, 136, 0);">"text/javascript"</span><span class="tag" style="box-sizing: border-box; color: rgb(0, 0, 136);">&gt;&lt;/script&gt;</span></pre> 
 <img alt="mvc_ajax_config_1" src="/uploads/allimg/150603/0G15Gb3-1.jpg"> 
 <h2> 创建一个Ajax应用程序</h2> 
 <p> 在以下的例子中，我们将创建这将显示系统中的用户的列表的形式。 我们将会把有三个选项的下拉列表：管理员，普通和来宾。当将选择其中的一个值，它会显示属于使用AJAX获取这一类的用户列表。</p> 
 <p> <strong>步骤1:</strong></p> 
 <p> 创建一个模型文件Model.cs并复制下面的代码：</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">System</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">

</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">namespace</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">MVCAjaxSupportExample</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Models</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">int</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">UserId</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">get</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">string</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">get</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">string</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">get</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DateTime</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">BirthDate</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">get</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">get</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">set</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">

    </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">enum</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Admin</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Normal</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Guest</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;"> </span></pre> 
 <p> <strong>步骤2:</strong></p> 
 <p> 创建一个控制器文件名为UserController.cs并创建里面有两个动作方法如下所示：</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">System</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">System</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Collections</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Generic</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">System</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Linq</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">System</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Web</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Mvc</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">MVCAjaxSupportExample</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Models</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">

</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">namespace</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">MVCAjaxSupportExample</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Controllers</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">class</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">UserController</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">:</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Controller</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">private</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">readonly</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[]</span><span class="pln" style="box-sizing: border-box;"> userData </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Edy"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Clooney"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Admin</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">},</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"David"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Sanderson"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Admin</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">},</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Pandy"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Griffyth"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Normal</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">},</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Joe"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Gubbins"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Normal</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">},</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Mike"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"Smith"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Guest</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">};</span><span class="pln" style="box-sizing: border-box;">

        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">ActionResult</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Index</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">()</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">View</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">userData</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">

        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">PartialViewResult</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">GetUserData</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">string</span><span class="pln" style="box-sizing: border-box;"> selectedRole </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"All"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">IEnumerable</span>
  <user style="box-sizing: border-box;">
   <span class="pln" style="box-sizing: border-box;"> data </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="box-sizing: border-box;"> userData</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span>
   <span class="pln" style="box-sizing: border-box;">
            </span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">if</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="pln" style="box-sizing: border-box;">selectedRole </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">!=</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"All"</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="box-sizing: border-box;">
            </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span>
   <span class="pln" style="box-sizing: border-box;">
                </span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">var</span>
   <span class="pln" style="box-sizing: border-box;"> selected </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Enum</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Parse</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">typeof</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">),</span>
   <span class="pln" style="box-sizing: border-box;"> selectedRole</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="box-sizing: border-box;">
                data </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="box-sizing: border-box;"> userData</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Where</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="pln" style="box-sizing: border-box;">p </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span>
   <span class="pln" style="box-sizing: border-box;"> p</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">==</span>
   <span class="pln" style="box-sizing: border-box;"> selected</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="box-sizing: border-box;">
            </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="box-sizing: border-box;">
            </span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">PartialView</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="pln" style="box-sizing: border-box;">data</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="box-sizing: border-box;">
        </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="box-sizing: border-box;">

        </span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">public</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">ActionResult</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">GetUser</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">string</span>
   <span class="pln" style="box-sizing: border-box;"> selectedRole </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"All"</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="box-sizing: border-box;">
        </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span>
   <span class="pln" style="box-sizing: border-box;">
            </span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">return</span>
   <span class="pln" style="box-sizing: border-box;"> </span>
   <span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">View</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">((</span>
   <span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">object</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span>
   <span class="pln" style="box-sizing: border-box;"> selectedRole</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">);</span>
   <span class="pln" style="box-sizing: border-box;">
        </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="box-sizing: border-box;">
    </span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>
   <span class="pln" style="box-sizing: border-box;">
</span>
   <span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span>
  </user></pre> 
 <p> <strong>步骤3:</strong></p> 
 <p> 现在，用下面的代码创建一个名为GetUserData的局部视图。该视图将用于显示基于从下拉列表中选择的角色的用户的列表。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@model</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">IEnumerable</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">MVCAjaxSupportExample</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Models</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">

</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;table&gt;</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;tr&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;th&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayNameFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">model </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> model</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;th&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayNameFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">model </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> model</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;th&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayNameFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">model </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> model</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">BirthDate</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;th&gt;</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">tr</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">

</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@foreach</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">var</span><span class="pln" style="box-sizing: border-box;"> item </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">in</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Model</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;tr&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;td&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">modelItem </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> item</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">FirstName</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">td</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;td&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">modelItem </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> item</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">LastName</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">td</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;td&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DisplayFor</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">modelItem </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=&gt;</span><span class="pln" style="box-sizing: border-box;"> item</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">BirthDate</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">td</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;td&gt;</span><span class="pln" style="box-sizing: border-box;">
        
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">td</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">tr</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">

</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">table</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span></pre> 
 <p> <strong>步骤4:</strong></p> 
 <p> 现在创建一个getUser视图使用下面的代码。这个视图将异步从先前创建的控制器的GetUserData动作得到数据。</p>   
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">MVCAjaxSupportExample</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Models</span><span class="pln" style="box-sizing: border-box;">
</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@model</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">string</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">@{</span><span class="pln" style="box-sizing: border-box;">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">ViewBag</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Title</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"GetUser"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">AjaxOptions</span><span class="pln" style="box-sizing: border-box;"> ajaxOpts </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">AjaxOptions</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">UpdateTargetId</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"tableBody"</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">};</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span><span class="pln" style="box-sizing: border-box;">
</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;h2&gt;</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Get</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">User</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">h2</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;table&gt;</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;thead&gt;&lt;tr&gt;&lt;th&gt;</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">First</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">/th&gt;&lt;th&gt;Last&lt;/</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;&lt;</span><span class="pln" style="box-sizing: border-box;">th</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">/th&gt;&lt;/</span><span class="pln" style="box-sizing: border-box;">tr</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;&lt;/</span><span class="pln" style="box-sizing: border-box;">thead</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="box-sizing: border-box;">tbody id</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"tableBody"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
            </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Action</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"GetUserData"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">selectedRole </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Model</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">})</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">tbody</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">table</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">

</span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@using</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Ajax</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">BeginForm</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"GetUser"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> ajaxOpts</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">))</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">&lt;div&gt;</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="lit" style="box-sizing: border-box; color: rgb(0, 102, 102);">@Html</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">DropDownList</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"selectedRole"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">SelectList</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">[]</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"All"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Concat</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Enum</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">GetNames</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">typeof</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">(</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Role</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">)))))</span><span class="pln" style="box-sizing: border-box;">
        </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;</span><span class="pln" style="box-sizing: border-box;">button type</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"submit"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Submit</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">button</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
    </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&lt;/</span><span class="pln" style="box-sizing: border-box;">div</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">&gt;</span><span class="pln" style="box-sizing: border-box;">
</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span></pre> 
 <p> <strong>步骤5:</strong></p> 
 <p> 最后只是改变Route.config项，启动用户控制器。</p> 
 <pre class="prettyprint prettyprinted" style="box-sizing: border-box; Menlo, Monaco, Consolas, 'Courier New', monospace; border-radius: 0px; width: 604px; line-height: 16px; font-size: 12px; overflow: auto; color: rgb(49, 49, 49);">
<span class="pln" style="box-sizing: border-box;">defaults</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">:</span><span class="pln" style="box-sizing: border-box;"> </span><span class="kwd" style="box-sizing: border-box; color: rgb(0, 0, 136);">new</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">{</span><span class="pln" style="box-sizing: border-box;"> controller </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"User"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> action </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="str" style="box-sizing: border-box; color: rgb(0, 136, 0);">"GetUser"</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">,</span><span class="pln" style="box-sizing: border-box;"> id </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">=</span><span class="pln" style="box-sizing: border-box;"> </span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">UrlParameter</span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">.</span><span class="typ" style="box-sizing: border-box; color: rgb(127, 0, 85);">Optional</span><span class="pln" style="box-sizing: border-box;"> </span><span class="pun" style="box-sizing: border-box; color: rgb(102, 102, 0);">}</span></pre> 
 <p> 步骤6:</p> 
 <p> 最后，运行这将看起来像下面的截图中的应用：</p> 
 <img alt="mvc_ajax_application" src="/uploads/allimg/201506/1-1506030I605432.png" style="width: 634px; height: 194px;"> 
 <p> 如果从下拉菜单中选择管理员（Admin），它会去获取所有具有管理员类型的用户。这是通过AJAX发生，不需要重新加载整个页面。</p> 
 <img alt="mvc_ajax_application_1" src="/uploads/allimg/201506/1-1506030IK1450.png" style="width: 638px; height: 175px;"> 
 <div>
   &nbsp;
 </div> 
 <br>      
</div></body></html>