<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">JavaScript Cookies</h1><div style="width:100%;float:left;" class="article-content">   
 <h1> Cookies是什么 ?</h1> 
 <p> Web浏览器和服务器使用HTTP协议进行通信，并且HTTP是一种无状态协议。但对于一个商业网站它需要保持不同的页面间的会话信息。例如在完成多页后，一个用户注册结束。但是，如何保持所有网页用户的会话信息。</p> 
 <p> 在许多情况下，使用Cookie来记忆和跟踪的喜好，采购，佣金，并要求更好的访问体验或网站的统计数据等信息的最有效的方法。</p> 
 <h2> 它是如何工作的 ?</h2> 
 <p> 服务器发送一些数据到访问者的浏览器以cookie的形式。该浏览器可以接受cookie。如果是这样，它是为访问者存储在硬盘驱动器上的一个纯文本的记录。现在，当访问者到达您的网站其他页面，浏览器发送相同cookie到服务器进行检索。一旦检索到，服务器知道/记得刚才发生了什么存储。</p> 
 <p> Cookies有5个可变长度字段的纯文本数据记录：</p> 
 <ul> 
  <li> <p> <strong>Expires :</strong>&nbsp;cookie将过期的日期。如果这是空白的，那么就是当访问者退出浏览器cookie将到期。</p> </li> 
  <li> <p> <strong>Domain :&nbsp;</strong>网站的域名。</p> </li> 
  <li> <p> <strong>Path :</strong>&nbsp;路径设置 cookie 目录或网页。如果想要从任何目录或页面，那么cookie&nbsp;是空的。</p> </li> 
  <li> <p> <strong>Secure :</strong>&nbsp;如果该字段包含“安全”二字，那么cookie仅可检索到一个安全的服务器。如果该字段为空，没有限制存在。</p> </li> 
  <li> <p> <strong>Name=Value :&nbsp;</strong>Cookie设置在键和值对的形式来获取。</p> </li> 
 </ul> 
 <p> 的Cookie最初设计用于CGI编程和cookies的数据是在Web浏览器和Web服务器之间自动传输的，所以在服务器上的CGI脚本可以读取和写入存储在客户端上的cookie的值。</p> 
 <p> JavaScript的也可以操作使用文档对象的cookie属性。 JavaScript可以读取，创建，修改和删除适用于当前网页的cookie或Cookies。</p> 
 <h1> 储存Cookies:</h1> 
 <p> 创建一个cookie的最简单的方法是一个字符串值分配到document.cookie对象，它是这样的：</p> 
 <h2> 语法</h2> 
 <pre style="'Courier New', monospace; font-size: 12px; margin-bottom: 0px;">
document.cookie = "key1=value1;key2=value2;expires=date";</pre> 
 <p> 在这里，expires属性选项。如果提供这个属性有一个有效的日期或时间，那么cookie将在给定的日期或时间满期，而后cookies的值将无法访问到。</p> 
 <p> 注意：Cookie的值可能不包括分号，逗号或空白。出于这个原因，可能需要使用JavaScript 的 escape()函数将其存储的值在cookie之前进行编码。如果这样做，当读取cookie的值时也必须使用相应的unescape()函数。</p> 
 <h2> 例子：</h2> 
 <p> 下面是示例，设置在输入客户名称在cookie。</p> 
 <pre style="'Courier New', monospace; font-size: 12px; margin-bottom: 0px;">
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
function WriteCookie()
{
   if( document.myform.customer.value == "" ){
      alert("Enter some value!");
      return;
   }

   cookievalue= escape(document.myform.customer.value) + ";";
   document.cookie="name=" + cookievalue;
   alert("Setting Cookies : " + "name=" + cookievalue );
}
//--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form name="myform" action=""&gt;
Enter name: &lt;input type="text" name="customer"/&gt;
&lt;input type="button" value="Set Cookie" onclick="WriteCookie();"/&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p> 这将产生以下结果。现在进入一些在文本框中，然后按下按钮“Set Cookie”设置cookie。</p> 
 <table border="1" cellpadding="5" cellspacing="5" class="src" style="verdana, helvetica, arial,  border: 1px solid rgb(170, 170, 170); width: 552px; border-collapse: collapse; padding-left: 5px; vertical-align: top; color: rgb(0, 0, 0); background-color: rgb(241, 241, 241);"> 
  <tbody> 
   <tr> 
    <td style="vertical-align: top; margin-bottom: 0px; border-collapse: collapse; border: 1px solid rgb(170, 170, 170);"> 
     <form action="http://www.yiibai.com/" name="myform">
       Enter name:&nbsp;
      <input name="customer" type="text">&nbsp;
      <input type="button" value="Set Cookie">&nbsp;
     </form> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p> 现在，有一个cookie叫name。可以设置使用由逗号分隔multiplekey= value对应多个cookie。</p> 
 <p> 你将在下一节学习如何读取该cookie。</p> 
 <h1> 读取Cookies:</h1> 
 <p> 读取cookie和写入一样简单，因为 document.cookieobject 的值是cookie。所以每当要访问cookie，可以使用这个字符串。</p> 
 <p> 该字符串 document.cookie将继续由分号，其中name是一个cookie的名称，值是它的字符串值分隔的名称=值对的列表。</p> 
 <p> 您可以使用字符串split()函数来打破串入键和值如下：</p> 
 <h2> 例子：</h2> 
 <p> 下面是一个例子，以获得上一节设置的cookie。</p> 
 <pre style="'Courier New', monospace; font-size: 12px; margin-bottom: 0px;">
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
function ReadCookie()
{
   var allcookies = document.cookie;
   alert("All Cookies : " + allcookies );

   // Get all the cookies pairs in an array
   cookiearray  = allcookies.split(';');

   // Now take key value pair out of this array
   for(var i=0; i&lt;cookiearray.length; i++){
      name = cookiearray[i].split('=')[0];
      value = cookiearray[i].split('=')[1];
      alert("Key is : " + name + " and Value is : " + value);
   }
}
//--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form name="myform" action=""&gt;
&lt;input type="button" value="Get Cookie" onclick="ReadCookie()"/&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p> <strong>注：</strong>这里的length 是Array类的方法，该方法返回一个数组的长度。我们将在一个单独的章节讨论数组。到那个时候，请尽量消化它。</p> 
 <p> 这将产生以下结果。现在按按钮“Get Cookie”，看看在上一节中如何设置cookie。</p> 
 <table border="1" cellpadding="5" cellspacing="5" class="src" style="verdana, helvetica, arial,  border: 1px solid rgb(170, 170, 170); width: 552px; border-collapse: collapse; padding-left: 5px; vertical-align: top; color: rgb(0, 0, 0); background-color: rgb(241, 241, 241);"> 
  <tbody> 
   <tr> 
    <td style="vertical-align: top; margin-bottom: 0px; border-collapse: collapse; border: 1px solid rgb(170, 170, 170);"> 
     <form action="http://www.yiibai.com/" name="yourform"> 
      <input type="button" value="Get Cookie">&nbsp;
     </form> </td> 
   </tr> 
  </tbody> 
 </table> 
 <p> <strong>注意：</strong>有可能在机器上已设置了一些其他的Cookie。所以，上面的代码会显示所有设置cookie。</p> 
 <h1> 设置Cookies的过期日期：</h1> 
 <p> 可以通过设置的到期日期和保存cookie中的失效日期延长超出当前浏览器会话cookie中的寿命。这可以通过设置expires属性的日期和时间来完成。</p> 
 <h2> 例子：</h2> 
 <p> 下面的例子演示了如何设置cookie1个月后过期：</p>   
 <pre style="'Courier New', monospace; font-size: 12px; margin-bottom: 0px;">
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
function WriteCookie()
{
   var now = new Date();
   now.setMonth( now.getMonth() + 1 ); 
   cookievalue = escape(document.myform.customer.value) + ";"
   document.cookie="name=" + cookievalue;
   document.cookie = "expires=" + now.toUTCString() + ";"
   alert("Setting Cookies : " + "name=" + cookievalue );
}
//--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form name="formname" action=""&gt;
Enter name: &lt;input type="text" name="customer"/&gt;
&lt;input type="button" value="Set Cookie" onclick="WriteCookie()"/&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <h1> 删除Cookie：</h1> 
 <p> 有时如果想删除一个cookie，以便后续尝试读取cookie返回什么。要做到这一点，你只需要在到期日设置在过去的某个时间。</p> 
 <h2> 例子：</h2> 
 <p> 下面的例子演示了如何通过设置有效期限一个月以前删除cookie：</p> 
 <pre style="'Courier New', monospace; font-size: 12px; margin-bottom: 0px;">
&lt;html&gt;
&lt;head&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
function WriteCookie()
{
   var now = new Date();
   now.setMonth( now.getMonth() - 1 ); 
   cookievalue = escape(document.myform.customer.value) + ";"
   document.cookie="name=" + cookievalue;
   document.cookie = "expires=" + now.toUTCString() + ";"
   alert("Setting Cookies : " + "name=" + cookievalue );
}
//--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form name="formname" action=""&gt;
Enter name: &lt;input type="text" name="customer"/&gt;
&lt;input type="button" value="Set Cookie" onclick="WriteCookie()"/&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;</pre> 
 <p style="text-align: justify; verdana, helvetica, arial,  color: rgb(0, 0, 0);"> 注：不设置日期，可以使用setTime()函数看到新值。</p> 
 <br>      
</div></body></html>