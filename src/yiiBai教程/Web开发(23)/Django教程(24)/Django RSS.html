<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Django RSS</h1><div style="width:100%;float:left;" class="article-content">   
 <div>
   Django带有聚合feed生成框架。有了它，你可以创建RSS或Atom只需继承django.contrib.syndication.views.Feed类。 
 </div> 
 <p style="text-align:justify;"> 让我们创建一个订阅源的应用程序。 </p> 
 <pre>from django.contrib.syndication.views import Feed
from django.contrib.comments import Comment
from django.core.urlresolvers import reverse

class DreamrealCommentsFeed(Feed):
   title = "Dreamreal's comments"
   link = "/drcomments/"
   description = "Updates on new comments on Dreamreal entry."

   def items(self):
      return Comment.objects.all().order_by("-submit_date")[:5]
		
   def item_title(self, item):
      return item.user_name
		
   def item_description(self, item):
      return item.comment
		
   def item_link(self, item):
      return reverse('comment', kwargs = {'object_pk':item.pk})&nbsp;</pre> 
 <ul style="font-size:14px;color:#313131;font-family:Verdana, Geneva, Tahoma,  Helvetica, background-color:#FFFFFF;"> 
  <li> <p style="text-align:justify;"> 在feed类，&nbsp;title,&nbsp;link&nbsp;和&nbsp;description&nbsp;属性对应标准RSS&nbsp;的&lt;title&gt;,&nbsp;&lt;link&gt;&nbsp;和&nbsp;&lt;description&gt;元素。 </p> </li> 
  <li> <p style="text-align:justify;"> 条目方法返回应该进入feed的item的元素。在我们的示例中是最后五个注释。 </p> </li> 
 </ul> 
 <p style="text-align:justify;"> 现在，我们有feed，并添加评论在视图views.py，以显示我们的评论− </p> 
 <pre>from django.contrib.comments import Comment

def comment(request, object_pk):
   mycomment = Comment.objects.get(object_pk = object_pk)
   text = '&lt;strong&gt;User :&lt;/strong&gt; %s &lt;p&gt;'%mycomment.user_name&lt;/p&gt;
   text += '&lt;strong&gt;Comment :&lt;/strong&gt; %s &lt;p&gt;'%mycomment.comment&lt;/p&gt;
   return HttpResponse(text)&nbsp;</pre> 
 <p style="text-align:justify;"> 我们还需要一些网址在myapp&nbsp;urls.py中映射&nbsp;− </p>   
 <pre>from myapp.feeds import DreamrealCommentsFeed
from django.conf.urls import patterns, url

urlpatterns += patterns('',
   url(r'^latest/comments/', DreamrealCommentsFeed()),
   url(r'^comment/(?P\w+)/', 'comment', name = 'comment'),
)&nbsp;</pre> 
 <p style="text-align:justify;"> 当访问/myapp/latest/comments/会得到 feed&nbsp;−<br> <img src="/uploads/tutorial/20160130/1-160130225501930.jpg" alt=""> </p> 
 <p style="text-align:justify;"> 当点击其中的一个用户名都会得到：/myapp/comment/comment_id&nbsp;在您的评论视图定义之前，会得到&nbsp;−<br> <img src="/uploads/tutorial/20160130/1-160130225519B2.jpg" alt=""> </p> 
 <p style="text-align:justify;"> 因此，定义一个RSS源是&nbsp;Feed&nbsp;类的子类，并确保这些URL(一个用于访问feed，一个用于访问feed元素)的定义。&nbsp;正如评论，这可以连接到您的应用程序的任何模型。 </p> 
 <div style="font-family:微软雅黑;font-size:14px;background-color:#FFFFFF;"> 
  <br> 
 </div>
 <br>      
</div></body></html>