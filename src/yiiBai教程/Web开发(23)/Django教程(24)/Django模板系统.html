<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">Django模板系统</h1><div style="width:100%;float:left;" class="article-content">   
 <div> 
  <div>
    Django能够单独分开 Python 和 HTML，Python代码/变量进入视图和HTML模板。&nbsp;连接这两个，Django依赖于渲染函数和Django模板语言。 
  </div> 
 </div> 
 <div> 
  <h2> 
   <div>
     渲染函数 
   </div> </h2> 
  <p style="text-align:justify;"> 这个函数有三个参数&nbsp;− </p> 
  <ul> 
   <li> <p style="text-align:justify;"> 请求− 初始化请求 </p> </li> 
   <li> <p style="text-align:justify;"> 模板路径&nbsp;−&nbsp;这是相对于在项目 settings.py 文件的变量到 TEMPLATE_DIRS 选项的路径。 </p> </li> 
   <li> <p style="text-align:justify;"> 参数字典&nbsp;−&nbsp;字典包含所需的模板中的所有变量。这个变量可以创建或者可以使用&nbsp;locals()&nbsp;通过在视图中声明的所有局部变量。 </p> </li> 
  </ul> 
  <h2> 
   <div>
     Django模板语言(DTL) 
   </div> </h2> 
  <div>
    Django模板引擎提供了一个小型的语言来定义应用程序面向用户的层。 
  </div> 
  <h3> 
   <div>
     显示变量 
   </div> </h3> 
  <p style="text-align:justify;"> 变量显示如下：{{variable}}.&nbsp;模板由视图在渲染(render)函数的第三个参数发送的变量来替换变量。让我们改变 hello.html 显示当天的日期 ： </p> 
  <p style="text-align:justify;"> hello.html </p> 
  <pre>&lt;html&gt;   
   &lt;body&gt;
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
   &lt;/body&gt;   
&lt;/html&gt;</pre> 
  <div>
    然后，我们的视图将改变为 - 
  </div> 
  <pre>def hello(request):
   today = datetime.datetime.now().date()
   return render(request, "hello.html", {"today" : today})&nbsp;</pre> 
  <p style="text-align:justify;"> 现在，我们将得到下面的输出在访问URL&nbsp;/myapp/hello&nbsp;之后− </p> 
  <pre>Hello World!!!
Today is Sept. 11, 2015&nbsp;</pre> 
  <p style="text-align:justify;"> 正如你可能已经注意到，如果变量不是一个字符串，Django会使用__str__方法来显示它;并以同样的原则，你可以访问对象的属性，就像在Python中使用的一样。例如：如果我们想显示日期的年份，这里的变量是：&nbsp;{{today.year}}. </p> 
  <h2> 过滤器 </h2> 
  <p style="text-align:justify;"> 它们可以帮助您显示修改的变量。过滤器的结构如下所示：&nbsp;{{var|filters}}. </p> 
  <p style="text-align:justify;"> 一个简单的实例&nbsp;− </p> 
  <ul> 
   <li> <p style="text-align:justify;"> {{string|truncatewords:80}}&nbsp;−&nbsp;过滤器将截断字符串，所以只看到前80个字符。 </p> </li> 
   <li> <p style="text-align:justify;"> {{string|lower}}&nbsp;− 转换字符为小写 </p> </li> 
   <li> <p style="text-align:justify;"> {{string|escape|linebreaks}}&nbsp;−&nbsp;转义字符串内容，然后换行转换为标签。 </p> </li> 
  </ul> 
  <div>
    还可以设置默认的变量。 
  </div> 
  <h2> 标签 </h2> 
  <p style="text-align:justify;"> 标签可以执行以下操作：if 条件，for循环，模板继承以及更多。 </p> 
  <h3> if标签 </h3> 
  <p style="text-align:justify;"> 就像在Python中，你可以使用if，else和elif在模板中&nbsp;− </p> 
  <pre>&lt;html&gt;
   &lt;body&gt;
   
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
      We are
      {% if today.day == 1 %}
      
      the first day of month.
      {% elif today == 30 %}
      
      the last day of month.
      {% else %}
      
      I don't know.
      {%endif%}
      
   &lt;/body&gt;
&lt;/html&gt;</pre> 
  <div>
    在这个新的模板，根据当天的日期，该模板将呈现这个值。 
  </div> 
  <h3> for标签 </h3> 
  <p style="text-align:justify;"> 就像'if'，我们有&nbsp;'for'&nbsp;标签，这些完全像在Python中一样使用它们。让我们改变&nbsp;hello视图列表发送到我们的模板&nbsp;− </p> 
  <pre>def hello(request):
   today = datetime.datetime.now().date()
   
   daysOfWeek = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun']
   return render(request, "hello.html", {"today" : today, "days_of_week" : daysOfWeek})&nbsp;</pre> 
  <p style="text-align:justify;"> 该模板用来显示列表&nbsp;{{ for }} − </p>   
  <pre>&lt;html&gt;
   &lt;body&gt;
      
      Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
      We are
      {% if today.day == 1 %}
      
      the first day of month.
      {% elif today == 30 %}
      
      the last day of month.
      {% else %}
      
      I don't know.
      {%endif%}
      
      &lt;p&gt;
         {% for day in days_of_week %}
         {{day}}
      &lt;/p&gt;
		
      {% endfor %}
      
   &lt;/body&gt;
&lt;/html&gt;&nbsp;</pre> 
  <p style="text-align:justify;"> 我们应该得到输出的内容如下&nbsp;− </p> 
  <pre>Hello World!!!
Today is Sept. 11, 2015
We are I don't know.
Mon
Tue
Wed
Thu
Fri
Sat
Sun</pre> 
  <h3> 
   <div>
     块和扩展标签 
   </div> </h3> 
  <p style="text-align:justify;"> 模板系统是不完整模板继承。当您设计模板的含义，子模板会根据自己的需要填写一个主模板，就像一个页面中所选选项卡可能需要一个特殊的CSS。 </p> 
  <div>
    让我们修改&nbsp;hello.html&nbsp;模板来从 main_template.html 继承。 
  </div> 
  <p style="text-align:justify;"> main_template.html </p> 
  <pre>&lt;html&gt;
   &lt;head&gt;      
      &lt;title&gt;
         {% block title %}Page Title{% endblock %}
      &lt;/title&gt;      
   &lt;/head&gt;
	
   &lt;body&gt;   
      {% block content %}
         Body content
      {% endblock %}      
   &lt;/body&gt;
&lt;/html&gt;</pre> 
  <p style="text-align:justify;"> hello.html </p> 
  <pre>{% extends "main_template.html" %}
{% block title %}My Hello Page{% endblock %}
{% block content %}

Hello World!!!&lt;p&gt;Today is {{today}}&lt;/p&gt;
We are
{% if today.day == 1 %}

the first day of month.
{% elif today == 30 %}

the last day of month.
{% else %}

I don't know.
{%endif%}

&lt;p&gt;
   {% for day in days_of_week %}
   {{day}}
&lt;/p&gt;

{% endfor %}
{% endblock %}</pre> 
  <p style="text-align:justify;"> 在上面的示例,&nbsp;在调用 /myapp/hello，我们仍然会得到相同的结果和以前一样，但现在我们靠的是扩展，并不用重构代码-− </p> 
  <p style="text-align:justify;"> 在 main_template.html 我们定义使用标签块。标题栏块将包含页面标题，以及内容块将在页面主内容。在Home.html中使用扩展继承来自main_template.html，那么我们使用上面块定义(内容和标题)。 </p> 
  <h3> 注释标签 </h3> 
  <p style="text-align:justify;"> 注释标签用来模板定义注释，不是HTML注释，它们将不会出现在HTML页面。它可以是一个文件或只是注释一行代码。 </p> 
 </div>
 <br>      
</div></body></html>