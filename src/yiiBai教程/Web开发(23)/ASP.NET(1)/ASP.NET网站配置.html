<html><head><meta charset="utf-8"></meta></head><body><h1 class="article-title" style="text-align:center;">ASP.NET网站配置</h1><div style="width:100%;float:left;" class="article-content">   
 <p>ASP.NET应用程序的行为受配置文件中的不同设置的影响，主要有两个配置文件：</p> 
 <ul> 
  <li><em>machine.config</em></li>
  <li><em>web.config</em></li>
 </ul> 
 <p><code>machine.config</code>文件包含所有支持设置的默认值和机器特定值。机器设置由系统管理员控制，应用程序通常无法访问此文件。</p> 
 <p>但是，应用程序可以通过在其根文件夹中创建<code>web.config</code>文件来覆盖默认值。 <code>web.config</code>文件是<code>machine.config</code>文件的子集。</p> 
 <p>如果应用程序包含子目录，则可以为每个文件夹定义一个<code>web.config</code>文件。 每个配置文件的范围是以层次自上而下的方式确定的。</p> 
 <p>任何<code>web.config</code>文件都可以本地扩展，限制或覆盖上层定义的任何设置。</p> 
 <p>Visual Studio为每个项目生成一个默认的<code>web.config</code>文件。应用程序可以在没有<code>web.config</code>文件的情况下执行，但是，不能在没有<code>web.config</code>文件的情况下调试应用程序。</p> 
 <p>下图显示了Web服务教程中使用的示例的<em>解决方案资源管理器</em>：</p> 
 <p><img src="http://www.yiibai.com/uploads/images/201712/1112/915151204_32611.png" alt=""></p> 
 <p>在这个应用程序中，有两个<code>web.config</code>文件用于两个项目，即Web服务和调用Web服务的Web站点。</p> 
 <p><code>web.config</code>文件具有配置元素作为根节点。这个元素中的信息分为两个主要区域：配置区段处理程序声明区域和配置区域设置区域。</p> 
 <p>以下代码片段显示了配置文件的基本语法：</p> 
 <pre><code class="lang-xml">&lt;configuration&gt;

   &lt;!-- Configuration section-handler declaration area. --&gt;
      &lt;configSections&gt;
         &lt;section name="section1" type="section1Handler" /&gt;
         &lt;section name="section2" type="section2Handler" /&gt;
      &lt;/configSections&gt;
   &lt;!-- Configuration section settings area. --&gt;

   &lt;section1&gt;
      &lt;s1Setting1 attribute1="attr1" /&gt;
   &lt;/section1&gt;

   &lt;section2&gt;
      &lt;s2Setting1 attribute1="attr1" /&gt;
   &lt;/section2&gt;

   &lt;system.web&gt;
      &lt;authentication mode="Windows" /&gt;
   &lt;/system.web&gt;

&lt;/configuration&gt;
</code></pre> 
 <h2 id="h2-u914Du7F6Eu90E8u5206u5904u7406u7A0Bu5E8Fu58F0u660E"><a name="配置部分处理程序声明" class="reference-link"></a><span class="header-link octicon octicon-link"></span>配置部分处理程序声明</h2>
 <p>配置节处理程序包含在<code>&lt;configSections&gt;</code>标记中。每个配置处理程序指定包含在文件中的配置节的名称，该配置节提供一些配置数据。 它具有以下基本语法：</p> 
 <pre><code class="lang-xml">&lt;configSections&gt;
   &lt;section /&gt;
   &lt;sectionGroup /&gt;
   &lt;remove /&gt;
   &lt;clear/&gt;
&lt;/configSections&gt;
</code></pre> 
 <p>它有以下几点：</p> 
 <ul> 
  <li><em>Clear</em> - 删除对继承的部分和部分组的所有引用。</li>
  <li><em>Remove</em> - 它删除对继承的部分和部分组的引用。</li>
  <li><em>Section</em> - 它定义了配置节处理程序和配置元素之间的关联。</li>
  <li><em>sectionGroup</em> - 它定义了配置节处理程序和配置节之间的关联。</li>
 </ul> 
 <h2 id="h2-u5E94u7528u7A0Bu5E8Fu8BBEu7F6E"><a name="应用程序设置" class="reference-link"></a><span class="header-link octicon octicon-link"></span>应用程序设置</h2>
 <p>应用程序设置允许将应用程序范围的名称 - 值对存储为只读访问。 例如，可以将自定义应用程序设置定义为：</p> 
 <pre><code class="lang-xml">&lt;configuration&gt;
   &lt;appSettings&gt;
      &lt;add key="Application Name" value="MyApplication" /&gt; 
   &lt;/appSettings&gt;
&lt;/configuration&gt;
</code></pre> 
 <p>例如，还可以存储书籍的名称和ISBN号码：</p> 
 <pre><code class="lang-xml">&lt;configuration&gt;
   &lt;appSettings&gt;
      &lt;add key="appISBN" value="0-273-68726-3" /&gt;
      &lt;add key="appBook" value="Corporate Finance" /&gt;
   &lt;/appSettings&gt;
&lt;/configuration&gt;
</code></pre> 
 <h2 id="h2-u8FDEu63A5u5B57u7B26u4E32"><a name="连接字符串" class="reference-link"></a><span class="header-link octicon octicon-link"></span>连接字符串</h2>
 <p>连接字符串显示哪些数据库连接字符串可用于网站。 例如：</p> 
 <pre><code class="lang-xml">&lt;connectionStrings&gt;
   &lt;add name="ASPDotNetStepByStepConnectionString" 
      connectionString="Provider=Microsoft.Jet.OLEDB.4.0;
      Data Source=E:\\projects\datacaching\ /
      datacaching\App_Data\ASPDotNetStepByStep.mdb"
      providerName="System.Data.OleDb" /&gt;

   &lt;add name="booksConnectionString" 
      connectionString="Provider=Microsoft.Jet.OLEDB.4.0;
      Data Source=C:\ \databinding\App_Data\books.mdb"
      providerName="System.Data.OleDb" /&gt;
&lt;/connectionStrings&gt;
</code></pre> 
 <h2 id="h2-system-web-"><a name="System.Web元素" class="reference-link"></a><span class="header-link octicon octicon-link"></span>System.Web元素</h2>
 <p><code>system.web</code>元素指定了ASP.NET配置部分的根元素，并包含配置ASP.NET Web应用程序和控制应用程序行为方式的配置元素。</p> 
 <p>它拥有大部分需要在通用应用程序中进行调整的配置元素。元素的基本语法如下：</p> 
 <pre><code class="lang-xml">&lt;system.web&gt; 
   &lt;anonymousIdentification&gt; 
   &lt;authentication&gt; 
   &lt;authorization&gt; 
   &lt;browserCaps&gt; 
   &lt;caching&gt; 
   &lt;clientTarget&gt; 
   &lt;compilation&gt; 
   &lt;customErrors&gt; 
   &lt;deployment&gt; 
   &lt;deviceFilters&gt; 
   &lt;globalization&gt; 
   &lt;healthMonitoring&gt; 
   &lt;hostingEnvironment&gt; 
   &lt;httpCookies&gt; 
   &lt;httpHandlers&gt; 
   &lt;httpModules&gt; 
   &lt;httpRuntime&gt; 
   &lt;identity&gt; 
   &lt;machineKey&gt; 
   &lt;membership&gt; 
   &lt;mobileControls&gt; 
   &lt;pages&gt; 
   &lt;processModel&gt; 
   &lt;profile&gt; 
   &lt;roleManager&gt; 
   &lt;securityPolicy&gt; 
   &lt;sessionPageState&gt; 
   &lt;sessionState&gt; 
   &lt;siteMap&gt; 
   &lt;trace&gt; 
   &lt;trust&gt; 
   &lt;urlMappings&gt; 
   &lt;webControls&gt; 
   &lt;webParts&gt; 
   &lt;webServices&gt; 
   &lt;xhtmlConformance&gt; 
&lt;/system.web&gt;
</code></pre> 
 <p>下表提供了<code>system.web</code>元素的一些常见子元素的简要描述：</p> 
 <p><strong>AnonymousIdentification</strong></p> 
 <p>这需要识别在需要授权时未通过身份验证的用户。</p> 
 <p><strong>Authentication</strong></p> 
 <p>它用于配置身份验证支持。 基本的语法如下：</p> 
 <pre><code class="lang-xml">&lt;authentication mode="[Windows|Forms|Passport|None]"&gt; 
   &lt;forms&gt;...&lt;/forms&gt;
   &lt;passport/&gt;
&lt;/authentication&gt;
</code></pre> 
 <p><strong>Authorization</strong></p> 
 <p>它配置授权支持。基本的语法如下：</p> 
 <pre><code class="lang-xml">&lt;authorization&gt; 
   &lt;allow .../&gt;
   &lt;deny .../&gt;
&lt;/authorization&gt;
</code></pre> 
 <p><strong>Caching</strong></p> 
 <p>它配置缓存设置。基本的语法如下：</p> 
 <pre><code class="lang-xml">&lt;caching&gt;
   &lt;cache&gt;...&lt;/cache&gt;
   &lt;outputCache&gt;...&lt;/outputCache&gt;
   &lt;outputCacheSettings&gt;...&lt;/outputCacheSettings&gt;
   &lt;sqlCacheDependency&gt;...&lt;/sqlCacheDependency&gt;
&lt;/caching&gt;
</code></pre> 
 <p><strong>CustomErrors</strong></p> 
 <p>它定义了自定义错误消息。 基本的语法如下：</p> 
 <pre><code class="lang-xml">&lt;customErrors defaultRedirect="url" mode="On|Off|RemoteOnly"&gt;
   &lt;error. . ./&gt;
&lt;/customErrors&gt;
</code></pre> 
 <p><strong>Deployment</strong></p> 
 <p>它定义了用于部署的配置设置。 基本语法如下：</p>   
 <pre><code class="lang-xml">&lt;deployment retail="true|false" /&gt;
</code></pre> 
 <p><strong>HostingEnvironment</strong></p> 
 <p>它定义了托管环境的配置设置。 基本语法如下：</p> 
 <pre><code class="lang-xml">&lt;hostingEnvironment idleTimeout="HH:MM:SS" shadowCopyBinAssemblies="true|false" 
   shutdownTimeout="number" urlMetadataSlidingExpiration="HH:MM:SS" /&gt;
</code></pre> 
 <p><strong>Identity</strong></p> 
 <p>它配置应用程序的身份标识。 基本的语法如下：</p> 
 <pre><code class="lang-xml">&lt;identity impersonate="true|false" userName="domain\username"
   password="&lt;secure password&gt;"/&gt;
</code></pre> 
 <p><strong>MachineKey</strong></p> 
 <p>它配置密钥以用于表单身份验证cookie数据的加密和解密。</p> 
 <p>它还允许配置对视图状态数据执行消息身份验证检查的验证密钥，并形成身份验证票据。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;machineKey validationKey="AutoGenerate,IsolateApps" [String]
   decryptionKey="AutoGenerate,IsolateApps" [String]
   validation="HMACSHA256" [SHA1 | MD5 | 3DES | AES | HMACSHA256 | 
   HMACSHA384 | HMACSHA512 | alg:algorithm_name]
   decryption="Auto" [Auto | DES | 3DES | AES | alg:algorithm_name]
/&gt;
</code></pre> 
 <p><strong>Membership</strong></p> 
 <p>这配置管理和认证用户帐户的参数。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;membership defaultProvider="provider name"
   userIsOnlineTimeWindow="number of minutes" hashAlgorithmType="SHA1"&gt;
   &lt;providers&gt;...&lt;/providers&gt;
&lt;/membership&gt;
</code></pre> 
 <p><strong>Pages</strong></p> 
 <p>它提供了页面特定的配置。基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;pages asyncTimeout="number" autoEventWireup="[True|False]"
      buffer="[True|False]" clientIDMode="[AutoID|Predictable|Static]"
      compilationMode="[Always|Auto|Never]" 
      controlRenderingCompatibilityVersion="[3.5|4.0]"
      enableEventValidation="[True|False]"
      enableSessionState="[True|False|ReadOnly]"
      enableViewState="[True|False]"
      enableViewStateMac="[True|False]"
      maintainScrollPositionOnPostBack="[True|False]" 
      masterPageFile="file path" 
      maxPageStateFieldLength="number" 
      pageBaseType="typename, assembly"
      pageParserFilterType="string" 
      smartNavigation="[True|False]"
      styleSheetTheme="string"
      theme="string"
      userControlBaseType="typename"
      validateRequest="[True|False]"
      viewStateEncryptionMode="[Always|Auto|Never]" &gt;

   &lt;controls&gt;...&lt;/controls&gt;
   &lt;namespaces&gt;...&lt;/namespaces&gt;
   &lt;tagMapping&gt;...&lt;/tagMapping&gt;
   &lt;ignoreDeviceFilters&gt;...&lt;/ignoreDeviceFilters&gt;
&lt;/pages&gt;
</code></pre> 
 <p><strong>Profile</strong></p> 
 <p>它配置用户配置文件参数。基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;profile enabled="true|false" inherits="fully qualified type reference"
   automaticSaveEnabled="true|false" defaultProvider="provider name"&gt;

   &lt;properties&gt;...&lt;/properties&gt;
   &lt;providers&gt;...&lt;/providers&gt;

&lt;/profile&gt;
</code></pre> 
 <p><strong>RoleManager</strong></p> 
 <p>它配置用户角色的设置。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;roleManager cacheRolesInCookie="true|false" cookieName="name"
   cookiePath="/" cookieProtection="All|Encryption|Validation|None"
   cookieRequireSSL="true|false " cookieSlidingExpiration="true|false "
   cookieTimeout="number of minutes" createPersistentCookie="true|false"
   defaultProvider="provider name" domain="cookie domain"&gt; 
   enabled="true|false"
   maxCachedResults="maximum number of role names cached"

   &lt;providers&gt;...&lt;/providers&gt;
&lt;/roleManager&gt;
</code></pre> 
 <p><strong>SecurityPolicy</strong></p> 
 <p>它配置安全策略。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;securityPolicy&gt;
   &lt;trustLevel /&gt;
&lt;/securityPolicy&gt;
</code></pre> 
 <p><strong>UrlMappings</strong></p> 
 <p>它定义了映射来隐藏原始URL并提供更加用户友好的URL。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;urlMappings enabled="true|false"&gt;
   &lt;add.../&gt;
   &lt;clear /&gt;
   &lt;remove.../&gt;
&lt;/urlMappings&gt;
</code></pre> 
 <p><strong>WebControls</strong></p> 
 <p>它提供客户端脚本的共享位置的名称。 基本的语法是：</p> 
 <pre><code class="lang-xml">&lt;webControls clientScriptsLocation="String" /&gt;
</code></pre> 
 <p><strong>WebServices</strong></p> 
 <p>这用于配置Web服务。</p>
 <br>      
</div></body></html>